[TOC]

# 12. MySQL数据类型的选择

## CHAR 与 VARCHAR

- VARCHAR在存储数据的时候会占用比字符串的长度多一个字节的空间。
- CHAR 在检索时会删掉尾部的空格。
- CHAR 的处理速度比VARCHAR 快得多。

不同的存储引擎对 CHAR 和 VARCHAR 的使用原则有所不同：

- MyISAM 存储引擎：建议使用 CHAR 数据列代替 VARCHAR 的数据列。
- MEMORY 存储引擎：目前都使用固定长度的数据行存储，因此无论使用 CHAR 或 VARCHAR 列都没有关系。两者都是作为 CHAR 类型处理。
- InnoDB 存储引擎：建议使用 VARCHAR 类型。对于 InnoDB 数据表，内部的行存储格式没有区分固定长度和可变长度列（所有数据行都使用指向数据列值的头指针），并且 CHAR 平均占用的空间多于 VARCHAR。

## TEXT 与 BLOB

BLOB 和 TEXT 值会引起一些性能问题，特别是在执行了大量的删除操作时。删除操作会在数据表中留下很大的`空洞` ，以后填入这些“空洞”的记录在插入的性能上会有影响。为了提高性能，建议定期使用 `OPTIMIZE  TABLE` 功能对这类表进行碎片整理，避免因为“空洞”导致性能问题。