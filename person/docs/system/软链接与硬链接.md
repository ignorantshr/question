[TOC]

## 区别

| 说明      | 硬链接，Link（ln）                 | 软/符号链接，Soft/Symbolic link（symlink）                   |
| --------- | ---------------------------------- | ------------------------------------------------------------ |
| 创建      | 旧文件应该存在，新文件不创建此链接 | 旧文件和新文件都可能是新的或已经存在的；可以创建文件夹的软链接 |
| inode[^1] | 新旧文件的`inode`号码相同          | 新旧文件的`inode`号码不同                                    |
| 权限      | 有相同的权限                       | 旧文件权限是`-rw-r--r--`，新文件权限是`lrwxrwxrwx`           |
| 链接数    | 两者的链接数都是`2`                | 两者的链接数不同                                             |
| chmod     | `chmod`命令会对两者造成相同的影响  | 即使你修改了新文件的权限，它也不会被改变                     |
| 大小      | 两者有相同的大小                   | 大多数情况下就文件会比新文件大，因为新文件只包含**路径**和**inode**号码 |
| rm        | `rm`命令不会互相影响对方           | 删除旧文件将使新文件不可用                                   |
| 修改      | 改变一者将会改变另一个             | 与硬链接相同                                                 |

## 示意图

### Soft-link

新文件的`inode`号码指向旧文件的。

![](img/SoftLink.jpg)

### Hard-link

新旧文件都指向同一个`inode`号码。

![](img/HardLink.jpg)

### Symbolic-link

在一些Unix/Linux中符号链接和软链接被同等对待。但不同在于：新旧文件会指向同一个新的`inode`号码。这完全取决于实现。

![](img/SymbolicLink.jpg)

!!! note
	在许多情况下，符号和软链接术语可互换使用。但是必须知道什么时候使用什么。

[^1]: inode编号是 Linux/unix 操作系统中创建的任何文件时生成的唯一索引编号。但是在链接的情况下，这些inode编号是由文件共享的，并且只在文件表中更新路径。可以通过`ls -i`查看，第一列即是inode编号。

## 创建

使用`ln`命令，默认是硬链接。

### 创建硬链接

```shell
$ ln src.txt dst.txt
$ ll -i
10923 -rw-r--r-- 2 root root 9 Jun  4 14:50 hard_dst.txt
10923 -rw-r--r-- 2 root root 9 Jun  4 14:50 hard_src.txt
```

### 创建软/符号链接

`ln -s`，也可以为**文件夹**创建软链接。

```shell
$ ln -s src/ dst
$ ll -i
    10924 lrwxrwxrwx 1 root root 4 Jun  4 14:53 dst -> src/
107576244 drwxr-xr-x 2 root root 6 Jun  4 14:52 src

# 与上述写法的效果是一样的，区别在于链接的指向显示不带“/”
$ ln -s src dst
$ ll -i
    10924 lrwxrwxrwx 1 root root 3 Jun  4 15:05 dst -> src
107576244 drwxr-xr-x 2 root root 6 Jun  4 15:03 src
```

在文件夹中的文件会在两者之间同步。



!!! warning  "文件夹的软链接的删除"
	与普通的文件夹删除不一样，如果使用带有斜杠`/`的命令:`rm -rf dst/`，不会删除该链接，而是删除文件夹下的所有文件。
	此时应使用不带有斜杠`/`的命令：`rm -rf dst`