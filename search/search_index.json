{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Sink This is question record of shihr. For full introductional documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs help - Print this help message. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files. MarkdownEditing Markdown plugin for Sublime Text. Provides a decent Markdown color scheme (light and dark) with more robust syntax highlighting and useful Markdown editing features for Sublime Text. 3 flavors are supported: Standard Markdown, GitHub flavored Markdown , MultiMarkdown. Dark and Yellow and ArcDark theme available, plus thirdparty themes . See configuration section to learn how to change the theme . Overview Installation Package Control Manual Installation Features Markdown features Wiki features Key Bindings GFM Specific Features Commands for Command Palette General Commands Links, References and Footnotes Folding and Navigation Configuration Additional color themes: Tips Enable WYSIWYG Troubleshooting Error loading syntax file... Roll back to an older version Related Plugins Known Bugs Contributing Credits Donation License Installation You can install MarkdownEditing either from Package Control (recommended) or manually. Package Control automatically download the package and keeps it up-to-date. Manual installation is required if you need to tweak the code. If you are using Sublime Text 2, you have to disable the native package manually . To do that, add Markdown to your ignored_packages list in ST user settings: \"ignored_packages\": [..., \"Markdown\"], Getting \"Error loading syntax file...\"? See this . Package Control The preferred method of installation is via Sublime Package Control . Install Sublime Package Control From inside Sublime Text, open Package Control's Command Pallet: CTRL SHIFT P (Windows, Linux) or CMD SHIFT P on Mac. Type install package and hit Return. A list of available packages will be displayed. Type MarkdownEditing and hit Return. The package will be downloaded to the appropriate directory. Restart Sublime Text to complete installation. Open a Markdown file and this custom theme. The features listed below should now be available. Manual Installation In Sublime Text, open the menu \"Preferences\" - \"Browse Packages...\". This is the Sublime Text Packages directory. Download and unzip or clone this repository to a directory MarkdownEditing in the Sublime Text Packages directory. The folder structure should look like .../Sublime Text 3/Packages/MarkdownEditing/[files] . Restart Sublime Text to complete installation. Open a Markdown file. The features listed below should now be available. Features You can access most features through Command Palette. You can launch it from Tools - Command Palette... . MarkdownEditing commands start with MarkdownEditing: . And they are only visible when a markdown file is open and active. Markdown features Pairing Asterisks and underscores are autopaired and will wrap selected text. If you start an empty pair and hit backspace, both elements are deleted. If you start an empty pair and hit space, the right element is deleted. Backticks are paired. So entering ` will expand to `(cursor here)` . List At the end of a list item, pressing Enter will automatically insert the new list item bullet. Pressing Tab on the blank list item will indent it and switch the list bullet to another one (Order is * , - , + in a cycle). Pressing Shift Tab on the blank list item will unindent it in the same way as above. Sequential Tab s or Shift Tab s are supported. You can disable automatic bullet switching or choose which bullets to be used, in your settings file ( mde.list_indent_bullets ). If a list item contains a GFM task , pressing Enter at the end of the line will continue with a new blank task. Blockquote At the end of a blockquote line, pressing Enter will automatically extend blockquote. Selecting some text and pressing will convert it to blockquote. The first and the last line don't have to be fully selected; partial select works, too. Link Left bracket pairing is modified to eliminate the selection and leave the cursor at a point where you can insert a [] or () pair for a link. If you leave the cursor on a link, you can right click and jump between reference and url. Navigation Displays Markdown headers in the Project Symbol List ( Goto - Goto Symbol in Project... ). They will start with # , so you will know they belong to markdown files at a glance. Also they will be on top of the list because of the precedence of # . Headers also appear in Document Symbol List ( Goto - Goto Symbol... ) You can fold current section with Ctrl Tab You can navigate between adjacent headers with Find Next(Previous) Heading command. Strikethrough ~ wraps selected text with ~~ (strikethrough). When you for instance select the word \"foo\" and hit ~ , the result will be ~~foo~~ . Header Typing # when there's a selection will surround it with # to make it a headline. Multiple presses add additional hashes, increasing the level of the header. Once you hit 6 hashes, it will reset to 0 on the next press. The mde.match_header_hashes will determine if the # are mirrored on both sides or just at the beginning of the line. Typing return at the end of a line that begins with hashmarks will insert closing hashmarks on the headline. They're not required for Markdown, it's just aesthetics, and you can change the mde.match_header_hashes option in your settings to enable (disabled by default). Setext-style headers can be completed with Tab . That is, typing Tab on a line containing only = or - characters will add or remove enough characters to it to match the length of the line above. New documents will be named automatically based on the first header. Wiki features Wiki links are defined by surrounding a (wiki) word with double square brackets, for example: [[SampleWikiPage]] The user can open wiki page using a sublime command. This will search the current open file's directory (and sub-directories) for a file with a matching name and a markdown extension. For example, opening the previous wiki link will look for and open a file named: SampleWikiPage.md Note that, if the wiki page does not yet exist, if will be created with a header matching the page name. However the file will only actually be created on the file system, when it is saved by the user. The user can list back links and of course to open them. Back links are pages that reference the current page. This allows pages to be tied together into a personal wiki. A common technique is to define tag wiki pages and to list any tags for a page as references to the tag pages at the bottom of the page, for example: [[TagSyntax]] [[TagDev]] [[TagPython]] This allows the user to list all pages with a specific tag, by opening the tag page and list all back links. Journal wiki pages are also supported. A journal page is just a wiki page with a name matching the current date. Lastly the command to open the home page is provided, where the home page is just a wiki page named HomePage . Key Bindings OS X Windows/Linux Description \u2318 \u2325 V Ctrl Alt V Creates or pastes the contents of the clipboard as an inline link on selected text. \u2318 \u2325 R Ctrl Alt R Creates or pastes the contents of the clipboard as a reference link. \u2318 \u21e7 K Shift Win K Creates or pastes the contents of the clipboard as an inline image on selected text. \u2318 \u2325 B \u2318 \u2325 I Alt B Alt I These are bound to bold and italic. They work both with and without selections. If there is no selection, they will just transform the word under the cursor. These keybindings will unbold/unitalicize selection if it is already bold/italic. \u2318 ^ 1...6 Ctrl 1...6 These will add the corresponding number of hashmarks for headlines. Works on blank lines and selected text in tandem with the above headline tools. If you select an entire existing headline, the current hashmarks will be removed and replaced with the header level you requested. This command respects the mde.match_header_hashes preference setting. \u2325 \u21e7 6 Alt Shift 6 Inserts a footnote. \u21e7 Tab Shift Tab Fold/Unfold current section. ^ \u21e7 Tab Ctrl Shift Tab Fold all sections under headings of a certain level. \u2318 \u2325 PageUp \u2318 \u2325 PageDown Ctrl Alt Shift PageUp Ctrl Alt Shift PageDown Go to the previous/next heading of the same or higher level \u2318 \u21e7 PageUp \u2318 \u21e7 PageDown Ctrl Shift PageUp Ctrl Shift PageDown Go to the previous/next heading \u2318 \u2325 H Ctrl Shift H Open home page \u2318 \u2325 D Ctrl Shift D Open wiki page under the cursor \u2318 \u2325 J Ctrl Shift J Open journal page for today \u2318 \u2325 B Ctrl Shift B List back links GFM Specific Features GFM means GitHub Flavored Markdown is the dialect of Markdown that is currently supported for user content on GitHub.com and GitHub Enterprise. It has some unique features : Underscores in words doesn't mess with bold or italic style: Fenced code blocks gets syntax highlighting inside: Keyboard shortcuts gets highlighted like in GitHub: Strikethrough is supported: Commands for Command Palette You can launch Command Palette from Tools - Command Palette... . MarkdownEditing commands start with MarkdownEditing: . And they are only visible when a markdown file is open and active. General Commands Fix Underlined Headers Adjusts every setext-style header to add or remove = or - characters as needed to match the lengths of their header text. Convert Underlined Headers to ATX Converts every setext-style header into an ATX style header. If something is selected only the headers in the selections will be converted, otherwise the conversion will be applied to the whole view. Markdown Lint Performs lint on current Markdown file using a local linter. See lint rules . Some of the linting rules are customizable via user settings file. Run markdownlint Run mdl command from markdownlint package. You need to install it by yourself. Change color scheme... Lists built-in Markdown color schemes for you to preview and use. Switch List Bullet Type Switches the highlighted list between numbered and bulleted style. Links, References and Footnotes Add Missing Link Labels Scans document for referenced link usages ( [some link][some_ref] and [some link][] ) and checks if they are all defined. If there are undefined link references, command will automatically create their definition snippet at the bottom of the file. Magic Footnotes Command Adds a footnote after the word under cursor. If cursor is already on a footnote, jumps to its definition or reference. Gather Missing Footnotes Add definition stubs (if there is none) for all footnotes references. Jump Reference Jumps cursor between definitions and references. New Reference Adds a new link under cursor. New Inline Link Adds a new inline link under cursor. New Inline Image Adds a new inline image under cursor. New Image Adds a new image under cursor. New Footnote Adds a footnote under cursor. Delete Reference Deletes the definition and references of a link. Organize References Sorts and gives a report on current link references usage. Folding and Navigation Remeber you can Ctrl R (in document) and Ctrl Shift R (project-wise) for quick navigation for all headers. Toggle Folding Current Section Folds/unfolds current section. Fold Level 1-4 Sections Fold all sections under headers of specific level. Fold/Unfold All Sections Self explanatory. Find Next/Previous Heading You have option to find just same or higher level or any level Configuration The plugin contains 3 different Markdown flavors: Standard Markdown, GitHub flavored Markdown, MultiMarkdown. Default is GitHub flavored Markdown. If you want to set another one as default, open a Markdown file and select your flavor from the menu: View Syntax Open all with current extension as . You're done. You may want to have a look at the default settings files. They are located at: Packages/MarkdownEditing/Markdown.sublime-settings [GitHub flavored Markdown] Packages/MarkdownEditing/Markdown (Standard).sublime-settings Packages/MarkdownEditing/MultiMarkdown.sublime-settings If you want to override any of the default settings, you can open the appropriate user settings file using the Preferences Package Settings Markdown Editing menu. Each flavor has a different settings file. Bold and italic markers are configurable through ST shell variables. You can use Preferences Package Settings Markdown Editing menu to see the default settings file. In order to override it, copy paste its content into the user settings file ( Packages/User/Bold and Italic Markers.tmPreferences ) from the menu and make your edits. It is pretty straightforward. In order to activate the dark or the yellow theme, put one of these lines to your user settings file of the flavor ( Packages/User/[flavor].sublime-settings ): \"color_scheme\": \"Packages/MarkdownEditing/MarkdownEditor-Dark.tmTheme\", \"color_scheme\": \"Packages/MarkdownEditing/MarkdownEditor-Yellow.tmTheme\", \"color_scheme\": \"Packages/MarkdownEditing/MarkdownEditor-ArcDark.tmTheme\", If you want to go with your already existing theme, you can reenable it with the same method as above. Keep in mind that, that theme may not cover all the parts of the Markdown syntax that this plugin defines. Additional color themes: Blackboard theme by @mdesantis monokaiC by @avivace By default, when you install the plugin, files with these extensions will be assigned to Markdown syntax: \"md\", \"txt\", \"mdown\", \"markdown\", \"markdn\". If you want to prevent any of these extensions to be opened as Markdown, follow these steps: Click on the language menu at bottom right Select \"Open all with current extension as\" Choose your preferred syntax for that extension Tips We are maintaining a tips section in our Wiki . Jump there to learn from others or share your experiences with others. Enable WYSIWYG Sublime can be configured into a WYSIWYG (what you see is what you get) editor with two other plugins: Markdown Preview (https://packagecontrol.io/packages/Markdown%20Preview) Livereload (https://packagecontrol.io/packages/LiveReload) Install them if you haven't. Then Open Palette LiveReload: Enable/Disable Plugins Enable Simple Reload. Now open palette and choose \"Preview in Browser\" and you will get a WYSIWYG editor. Troubleshooting Error loading syntax file... Are you getting this error after installation: Error loading syntax file \"Packages/Markdown/Markdown.tmLanguage\": Unable to open Packages/Markdown/Markdown.tmLanguage ? This is caused by open markdown files at the install time. You have to manually change their syntax to your newly installed Markdown syntax . Read the below paragraph for more details on this. Note : Sublime text has a native tiny package for Markdown. However, when MarkdownEditing is enabled, native package causes some conflicts. For this reason, MarkdownEditing will automatically disable it. Since it doesn't bring anything new over MarkdownEditing, this is not a loss. But remember, when you disable MarkdownEditing, you have to reenable the native one manually (if you want). Roll back to an older version When you notice any undesired behavior introduced by the latest update, your feedback is always welcome in our issue page . However before it's fixed, you can rollback to an earlier version . Find the desired version and download the zip file, then follow manual installation guide Related Plugins Knockdown Knockdown offers useful Markdown features and a custom Markdown theme. All of its unique features except its theme are ported to MarkdownEditing and some of them are actually improved further in MarkdownEditing. Sublime Markdown Extended SmartMarkdown MarkdownTOC - Sublime Text 3 plugin for generating a Table of Contents (TOC) in a Markdown document. See https://packagecontrol.io/search/markdown for more. Known Bugs Setext-style headers ( === and --- ) do not show up in the symbol list. This is due to a Sublime Text limitation (see #158 ). However, we are able to put a placeholder to indicate the existence of the header. We encourage you to use Atx-style headers ( # ). Installing for the first time while having markdown files opened may cause MarkdownEditing to behave unexpectedly on those files. Close and reopen those files to fix it. Contributing See CONTRIBUTING.md file. Credits MarkdownEditing was originally created by Brett Terpstra and has become a community project with the goal of consolidating the best features from the varied collection of Markdown packages for Sublime Text. Current development is headed up by Ali Ayas and Felix Hao . Related blog posts from Brett: http://brettterpstra.com/2012/05/17/markdown-editing-for-sublime-text-2-humble-beginnings/ http://brettterpstra.com/2013/11/23/markdownediting-for-sublime-text-updates/ This plugin contains portions of code from Knockdown . Footnote commands were submitted by J. Nicholas Geist and originated at geekabouttown . Donation You can support contributors of this project individually. Every contributor is welcomed to add his/her line below with any content. Ordering shall be alphabetically by GitHub username. @felixhao28 : @maliayas : License MarkdownEditing is released under the MIT License .","title":"Home"},{"location":"#welcome-to-sink","text":"This is question record of shihr. For full introductional documentation visit mkdocs.org .","title":"Welcome to Sink"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs help - Print this help message.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"#markdownediting","text":"Markdown plugin for Sublime Text. Provides a decent Markdown color scheme (light and dark) with more robust syntax highlighting and useful Markdown editing features for Sublime Text. 3 flavors are supported: Standard Markdown, GitHub flavored Markdown , MultiMarkdown. Dark and Yellow and ArcDark theme available, plus thirdparty themes . See configuration section to learn how to change the theme .","title":"MarkdownEditing"},{"location":"#overview","text":"Installation Package Control Manual Installation Features Markdown features Wiki features Key Bindings GFM Specific Features Commands for Command Palette General Commands Links, References and Footnotes Folding and Navigation Configuration Additional color themes: Tips Enable WYSIWYG Troubleshooting Error loading syntax file... Roll back to an older version Related Plugins Known Bugs Contributing Credits Donation License","title":"Overview"},{"location":"#installation","text":"You can install MarkdownEditing either from Package Control (recommended) or manually. Package Control automatically download the package and keeps it up-to-date. Manual installation is required if you need to tweak the code. If you are using Sublime Text 2, you have to disable the native package manually . To do that, add Markdown to your ignored_packages list in ST user settings: \"ignored_packages\": [..., \"Markdown\"], Getting \"Error loading syntax file...\"? See this .","title":"Installation"},{"location":"#package-control","text":"The preferred method of installation is via Sublime Package Control . Install Sublime Package Control From inside Sublime Text, open Package Control's Command Pallet: CTRL SHIFT P (Windows, Linux) or CMD SHIFT P on Mac. Type install package and hit Return. A list of available packages will be displayed. Type MarkdownEditing and hit Return. The package will be downloaded to the appropriate directory. Restart Sublime Text to complete installation. Open a Markdown file and this custom theme. The features listed below should now be available.","title":"Package Control"},{"location":"#manual-installation","text":"In Sublime Text, open the menu \"Preferences\" - \"Browse Packages...\". This is the Sublime Text Packages directory. Download and unzip or clone this repository to a directory MarkdownEditing in the Sublime Text Packages directory. The folder structure should look like .../Sublime Text 3/Packages/MarkdownEditing/[files] . Restart Sublime Text to complete installation. Open a Markdown file. The features listed below should now be available.","title":"Manual Installation"},{"location":"#features","text":"You can access most features through Command Palette. You can launch it from Tools - Command Palette... . MarkdownEditing commands start with MarkdownEditing: . And they are only visible when a markdown file is open and active.","title":"Features"},{"location":"#markdown-features","text":"Pairing Asterisks and underscores are autopaired and will wrap selected text. If you start an empty pair and hit backspace, both elements are deleted. If you start an empty pair and hit space, the right element is deleted. Backticks are paired. So entering ` will expand to `(cursor here)` . List At the end of a list item, pressing Enter will automatically insert the new list item bullet. Pressing Tab on the blank list item will indent it and switch the list bullet to another one (Order is * , - , + in a cycle). Pressing Shift Tab on the blank list item will unindent it in the same way as above. Sequential Tab s or Shift Tab s are supported. You can disable automatic bullet switching or choose which bullets to be used, in your settings file ( mde.list_indent_bullets ). If a list item contains a GFM task , pressing Enter at the end of the line will continue with a new blank task. Blockquote At the end of a blockquote line, pressing Enter will automatically extend blockquote. Selecting some text and pressing will convert it to blockquote. The first and the last line don't have to be fully selected; partial select works, too. Link Left bracket pairing is modified to eliminate the selection and leave the cursor at a point where you can insert a [] or () pair for a link. If you leave the cursor on a link, you can right click and jump between reference and url. Navigation Displays Markdown headers in the Project Symbol List ( Goto - Goto Symbol in Project... ). They will start with # , so you will know they belong to markdown files at a glance. Also they will be on top of the list because of the precedence of # . Headers also appear in Document Symbol List ( Goto - Goto Symbol... ) You can fold current section with Ctrl Tab You can navigate between adjacent headers with Find Next(Previous) Heading command. Strikethrough ~ wraps selected text with ~~ (strikethrough). When you for instance select the word \"foo\" and hit ~ , the result will be ~~foo~~ . Header Typing # when there's a selection will surround it with # to make it a headline. Multiple presses add additional hashes, increasing the level of the header. Once you hit 6 hashes, it will reset to 0 on the next press. The mde.match_header_hashes will determine if the # are mirrored on both sides or just at the beginning of the line. Typing return at the end of a line that begins with hashmarks will insert closing hashmarks on the headline. They're not required for Markdown, it's just aesthetics, and you can change the mde.match_header_hashes option in your settings to enable (disabled by default). Setext-style headers can be completed with Tab . That is, typing Tab on a line containing only = or - characters will add or remove enough characters to it to match the length of the line above. New documents will be named automatically based on the first header.","title":"Markdown features"},{"location":"#wiki-features","text":"Wiki links are defined by surrounding a (wiki) word with double square brackets, for example: [[SampleWikiPage]] The user can open wiki page using a sublime command. This will search the current open file's directory (and sub-directories) for a file with a matching name and a markdown extension. For example, opening the previous wiki link will look for and open a file named: SampleWikiPage.md Note that, if the wiki page does not yet exist, if will be created with a header matching the page name. However the file will only actually be created on the file system, when it is saved by the user. The user can list back links and of course to open them. Back links are pages that reference the current page. This allows pages to be tied together into a personal wiki. A common technique is to define tag wiki pages and to list any tags for a page as references to the tag pages at the bottom of the page, for example: [[TagSyntax]] [[TagDev]] [[TagPython]] This allows the user to list all pages with a specific tag, by opening the tag page and list all back links. Journal wiki pages are also supported. A journal page is just a wiki page with a name matching the current date. Lastly the command to open the home page is provided, where the home page is just a wiki page named HomePage .","title":"Wiki features"},{"location":"#key-bindings","text":"OS X Windows/Linux Description \u2318 \u2325 V Ctrl Alt V Creates or pastes the contents of the clipboard as an inline link on selected text. \u2318 \u2325 R Ctrl Alt R Creates or pastes the contents of the clipboard as a reference link. \u2318 \u21e7 K Shift Win K Creates or pastes the contents of the clipboard as an inline image on selected text. \u2318 \u2325 B \u2318 \u2325 I Alt B Alt I These are bound to bold and italic. They work both with and without selections. If there is no selection, they will just transform the word under the cursor. These keybindings will unbold/unitalicize selection if it is already bold/italic. \u2318 ^ 1...6 Ctrl 1...6 These will add the corresponding number of hashmarks for headlines. Works on blank lines and selected text in tandem with the above headline tools. If you select an entire existing headline, the current hashmarks will be removed and replaced with the header level you requested. This command respects the mde.match_header_hashes preference setting. \u2325 \u21e7 6 Alt Shift 6 Inserts a footnote. \u21e7 Tab Shift Tab Fold/Unfold current section. ^ \u21e7 Tab Ctrl Shift Tab Fold all sections under headings of a certain level. \u2318 \u2325 PageUp \u2318 \u2325 PageDown Ctrl Alt Shift PageUp Ctrl Alt Shift PageDown Go to the previous/next heading of the same or higher level \u2318 \u21e7 PageUp \u2318 \u21e7 PageDown Ctrl Shift PageUp Ctrl Shift PageDown Go to the previous/next heading \u2318 \u2325 H Ctrl Shift H Open home page \u2318 \u2325 D Ctrl Shift D Open wiki page under the cursor \u2318 \u2325 J Ctrl Shift J Open journal page for today \u2318 \u2325 B Ctrl Shift B List back links","title":"Key Bindings"},{"location":"#gfm-specific-features","text":"GFM means GitHub Flavored Markdown is the dialect of Markdown that is currently supported for user content on GitHub.com and GitHub Enterprise. It has some unique features : Underscores in words doesn't mess with bold or italic style: Fenced code blocks gets syntax highlighting inside: Keyboard shortcuts gets highlighted like in GitHub: Strikethrough is supported:","title":"GFM Specific Features"},{"location":"#commands-for-command-palette","text":"You can launch Command Palette from Tools - Command Palette... . MarkdownEditing commands start with MarkdownEditing: . And they are only visible when a markdown file is open and active.","title":"Commands for Command Palette"},{"location":"#general-commands","text":"Fix Underlined Headers Adjusts every setext-style header to add or remove = or - characters as needed to match the lengths of their header text. Convert Underlined Headers to ATX Converts every setext-style header into an ATX style header. If something is selected only the headers in the selections will be converted, otherwise the conversion will be applied to the whole view. Markdown Lint Performs lint on current Markdown file using a local linter. See lint rules . Some of the linting rules are customizable via user settings file. Run markdownlint Run mdl command from markdownlint package. You need to install it by yourself. Change color scheme... Lists built-in Markdown color schemes for you to preview and use. Switch List Bullet Type Switches the highlighted list between numbered and bulleted style.","title":"General Commands"},{"location":"#links-references-and-footnotes","text":"Add Missing Link Labels Scans document for referenced link usages ( [some link][some_ref] and [some link][] ) and checks if they are all defined. If there are undefined link references, command will automatically create their definition snippet at the bottom of the file. Magic Footnotes Command Adds a footnote after the word under cursor. If cursor is already on a footnote, jumps to its definition or reference. Gather Missing Footnotes Add definition stubs (if there is none) for all footnotes references. Jump Reference Jumps cursor between definitions and references. New Reference Adds a new link under cursor. New Inline Link Adds a new inline link under cursor. New Inline Image Adds a new inline image under cursor. New Image Adds a new image under cursor. New Footnote Adds a footnote under cursor. Delete Reference Deletes the definition and references of a link. Organize References Sorts and gives a report on current link references usage.","title":"Links, References and Footnotes"},{"location":"#folding-and-navigation","text":"Remeber you can Ctrl R (in document) and Ctrl Shift R (project-wise) for quick navigation for all headers. Toggle Folding Current Section Folds/unfolds current section. Fold Level 1-4 Sections Fold all sections under headers of specific level. Fold/Unfold All Sections Self explanatory. Find Next/Previous Heading You have option to find just same or higher level or any level","title":"Folding and Navigation"},{"location":"#configuration","text":"The plugin contains 3 different Markdown flavors: Standard Markdown, GitHub flavored Markdown, MultiMarkdown. Default is GitHub flavored Markdown. If you want to set another one as default, open a Markdown file and select your flavor from the menu: View Syntax Open all with current extension as . You're done. You may want to have a look at the default settings files. They are located at: Packages/MarkdownEditing/Markdown.sublime-settings [GitHub flavored Markdown] Packages/MarkdownEditing/Markdown (Standard).sublime-settings Packages/MarkdownEditing/MultiMarkdown.sublime-settings If you want to override any of the default settings, you can open the appropriate user settings file using the Preferences Package Settings Markdown Editing menu. Each flavor has a different settings file. Bold and italic markers are configurable through ST shell variables. You can use Preferences Package Settings Markdown Editing menu to see the default settings file. In order to override it, copy paste its content into the user settings file ( Packages/User/Bold and Italic Markers.tmPreferences ) from the menu and make your edits. It is pretty straightforward. In order to activate the dark or the yellow theme, put one of these lines to your user settings file of the flavor ( Packages/User/[flavor].sublime-settings ): \"color_scheme\": \"Packages/MarkdownEditing/MarkdownEditor-Dark.tmTheme\", \"color_scheme\": \"Packages/MarkdownEditing/MarkdownEditor-Yellow.tmTheme\", \"color_scheme\": \"Packages/MarkdownEditing/MarkdownEditor-ArcDark.tmTheme\", If you want to go with your already existing theme, you can reenable it with the same method as above. Keep in mind that, that theme may not cover all the parts of the Markdown syntax that this plugin defines.","title":"Configuration"},{"location":"#additional-color-themes","text":"Blackboard theme by @mdesantis monokaiC by @avivace By default, when you install the plugin, files with these extensions will be assigned to Markdown syntax: \"md\", \"txt\", \"mdown\", \"markdown\", \"markdn\". If you want to prevent any of these extensions to be opened as Markdown, follow these steps: Click on the language menu at bottom right Select \"Open all with current extension as\" Choose your preferred syntax for that extension","title":"Additional color themes:"},{"location":"#tips","text":"We are maintaining a tips section in our Wiki . Jump there to learn from others or share your experiences with others.","title":"Tips"},{"location":"#enable-wysiwyg","text":"Sublime can be configured into a WYSIWYG (what you see is what you get) editor with two other plugins: Markdown Preview (https://packagecontrol.io/packages/Markdown%20Preview) Livereload (https://packagecontrol.io/packages/LiveReload) Install them if you haven't. Then Open Palette LiveReload: Enable/Disable Plugins Enable Simple Reload. Now open palette and choose \"Preview in Browser\" and you will get a WYSIWYG editor.","title":"Enable WYSIWYG"},{"location":"#troubleshooting","text":"","title":"Troubleshooting"},{"location":"#error-loading-syntax-file","text":"Are you getting this error after installation: Error loading syntax file \"Packages/Markdown/Markdown.tmLanguage\": Unable to open Packages/Markdown/Markdown.tmLanguage ? This is caused by open markdown files at the install time. You have to manually change their syntax to your newly installed Markdown syntax . Read the below paragraph for more details on this. Note : Sublime text has a native tiny package for Markdown. However, when MarkdownEditing is enabled, native package causes some conflicts. For this reason, MarkdownEditing will automatically disable it. Since it doesn't bring anything new over MarkdownEditing, this is not a loss. But remember, when you disable MarkdownEditing, you have to reenable the native one manually (if you want).","title":"Error loading syntax file..."},{"location":"#roll-back-to-an-older-version","text":"When you notice any undesired behavior introduced by the latest update, your feedback is always welcome in our issue page . However before it's fixed, you can rollback to an earlier version . Find the desired version and download the zip file, then follow manual installation guide","title":"Roll back to an older version"},{"location":"#related-plugins","text":"Knockdown Knockdown offers useful Markdown features and a custom Markdown theme. All of its unique features except its theme are ported to MarkdownEditing and some of them are actually improved further in MarkdownEditing. Sublime Markdown Extended SmartMarkdown MarkdownTOC - Sublime Text 3 plugin for generating a Table of Contents (TOC) in a Markdown document. See https://packagecontrol.io/search/markdown for more.","title":"Related Plugins"},{"location":"#known-bugs","text":"Setext-style headers ( === and --- ) do not show up in the symbol list. This is due to a Sublime Text limitation (see #158 ). However, we are able to put a placeholder to indicate the existence of the header. We encourage you to use Atx-style headers ( # ). Installing for the first time while having markdown files opened may cause MarkdownEditing to behave unexpectedly on those files. Close and reopen those files to fix it.","title":"Known Bugs"},{"location":"#contributing","text":"See CONTRIBUTING.md file.","title":"Contributing"},{"location":"#credits","text":"MarkdownEditing was originally created by Brett Terpstra and has become a community project with the goal of consolidating the best features from the varied collection of Markdown packages for Sublime Text. Current development is headed up by Ali Ayas and Felix Hao . Related blog posts from Brett: http://brettterpstra.com/2012/05/17/markdown-editing-for-sublime-text-2-humble-beginnings/ http://brettterpstra.com/2013/11/23/markdownediting-for-sublime-text-updates/ This plugin contains portions of code from Knockdown . Footnote commands were submitted by J. Nicholas Geist and originated at geekabouttown .","title":"Credits"},{"location":"#donation","text":"You can support contributors of this project individually. Every contributor is welcomed to add his/her line below with any content. Ordering shall be alphabetically by GitHub username. @felixhao28 : @maliayas :","title":"Donation"},{"location":"#license","text":"MarkdownEditing is released under the MIT License .","title":"License"},{"location":"algorithm/\u52a0\u6743\u6709\u5411\u56fe\u7684\u6700\u77ed\u8def\u5f84/","text":"","title":"\u52a0\u6743\u6709\u5411\u56fe\u7684\u6700\u77ed\u8def\u5f84"},{"location":"algorithm/\u590d\u6742\u5ea6\u5206\u6790/","text":"\u65f6\u95f4\u590d\u6742\u5ea6 \u5927 O \u65f6\u95f4\u590d\u6742\u5ea6\u5b9e\u9645\u4e0a\u5e76\u4e0d\u5177\u4f53\u8868\u793a\u4ee3\u7801\u771f\u6b63\u7684\u6267\u884c\u65f6\u95f4\uff0c\u800c\u662f\u8868\u793a\u4ee3\u7801\u6267\u884c\u65f6\u95f4\u968f\u6570\u636e\u89c4\u6a21\u589e\u957f\u7684\u53d8\u5316\u8d8b\u52bf\uff0c\u6240\u4ee5\uff0c\u4e5f\u53eb\u4f5c\u6e10\u8fdb\u65f6\u95f4\u590d\u6742\u5ea6\uff08asymptotic time complexity\uff09\uff0c\u7b80\u79f0\u65f6\u95f4\u590d\u6742\u5ea6\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790\uff1a 1. \u53ea\u5173\u6ce8\u5faa\u73af\u6267\u884c\u6b21\u6570\u6700\u591a\u7684\u4e00\u6bb5\u4ee3\u7801 2. \u52a0\u6cd5\u6cd5\u5219\uff1a\u603b\u590d\u6742\u5ea6\u7b49\u4e8e\u91cf\u7ea7\u6700\u5927\u7684\u90a3\u6bb5\u4ee3\u7801\u7684\u590d\u6742\u5ea6 \u65f6\u95f4\u590d\u6742\u5ea6\u7684\u6982\u5ff5\u6765\u8bf4\uff0c\u5b83\u8868\u793a\u7684\u662f\u4e00\u4e2a\u7b97\u6cd5\u6267\u884c\u6548\u7387\u4e0e\u6570\u636e\u89c4\u6a21\u589e\u957f\u7684\u53d8\u5316\u8d8b\u52bf\uff0c\u4e0d\u4ee3\u8868\u7a0b\u5e8f\u6267\u884c\u65f6\u95f4\u3002 \u5982\u679c T1(n)=O(f(n))\uff0cT2(n)=O(g(n))\uff1b\u90a3\u4e48 T(n)=T1(n)+T2(n)=max(O(f(n)), O(g(n))) =O(max(f(n),g(n))). T1(m) + T2(n) = O(f(m) + g(n)). 3. \u4e58\u6cd5\u6cd5\u5219\uff1a\u5d4c\u5957\u4ee3\u7801\u7684\u590d\u6742\u5ea6\u7b49\u4e8e\u5d4c\u5957\u5185\u5916\u4ee3\u7801\u590d\u6742\u5ea6\u7684\u4e58\u79ef T1(n) T2(n) = O(f(n) * g(n)) T1(m) T2(n) = O(f(m) * f(n)) \u7a7a\u95f4\u590d\u6742\u5ea6 \u7a7a\u95f4\u590d\u6742\u5ea6\u5168\u79f0\u5c31\u662f\u6e10\u8fdb\u7a7a\u95f4\u590d\u6742\u5ea6\uff08asymptotic space complexity\uff09\uff0c\u8868\u793a\u7b97\u6cd5\u7684 \u5b58\u50a8\u7a7a\u95f4\u4e0e\u6570\u636e\u89c4\u6a21\u4e4b\u95f4\u7684\u589e\u957f\u5173\u7cfb\u3002","title":"\u590d\u6742\u5ea6\u5206\u6790"},{"location":"algorithm/\u590d\u6742\u5ea6\u5206\u6790/#_1","text":"\u5927 O \u65f6\u95f4\u590d\u6742\u5ea6\u5b9e\u9645\u4e0a\u5e76\u4e0d\u5177\u4f53\u8868\u793a\u4ee3\u7801\u771f\u6b63\u7684\u6267\u884c\u65f6\u95f4\uff0c\u800c\u662f\u8868\u793a\u4ee3\u7801\u6267\u884c\u65f6\u95f4\u968f\u6570\u636e\u89c4\u6a21\u589e\u957f\u7684\u53d8\u5316\u8d8b\u52bf\uff0c\u6240\u4ee5\uff0c\u4e5f\u53eb\u4f5c\u6e10\u8fdb\u65f6\u95f4\u590d\u6742\u5ea6\uff08asymptotic time complexity\uff09\uff0c\u7b80\u79f0\u65f6\u95f4\u590d\u6742\u5ea6\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790\uff1a 1. \u53ea\u5173\u6ce8\u5faa\u73af\u6267\u884c\u6b21\u6570\u6700\u591a\u7684\u4e00\u6bb5\u4ee3\u7801 2. \u52a0\u6cd5\u6cd5\u5219\uff1a\u603b\u590d\u6742\u5ea6\u7b49\u4e8e\u91cf\u7ea7\u6700\u5927\u7684\u90a3\u6bb5\u4ee3\u7801\u7684\u590d\u6742\u5ea6 \u65f6\u95f4\u590d\u6742\u5ea6\u7684\u6982\u5ff5\u6765\u8bf4\uff0c\u5b83\u8868\u793a\u7684\u662f\u4e00\u4e2a\u7b97\u6cd5\u6267\u884c\u6548\u7387\u4e0e\u6570\u636e\u89c4\u6a21\u589e\u957f\u7684\u53d8\u5316\u8d8b\u52bf\uff0c\u4e0d\u4ee3\u8868\u7a0b\u5e8f\u6267\u884c\u65f6\u95f4\u3002 \u5982\u679c T1(n)=O(f(n))\uff0cT2(n)=O(g(n))\uff1b\u90a3\u4e48 T(n)=T1(n)+T2(n)=max(O(f(n)), O(g(n))) =O(max(f(n),g(n))). T1(m) + T2(n) = O(f(m) + g(n)). 3. \u4e58\u6cd5\u6cd5\u5219\uff1a\u5d4c\u5957\u4ee3\u7801\u7684\u590d\u6742\u5ea6\u7b49\u4e8e\u5d4c\u5957\u5185\u5916\u4ee3\u7801\u590d\u6742\u5ea6\u7684\u4e58\u79ef T1(n) T2(n) = O(f(n) * g(n)) T1(m) T2(n) = O(f(m) * f(n))","title":"\u65f6\u95f4\u590d\u6742\u5ea6"},{"location":"algorithm/\u590d\u6742\u5ea6\u5206\u6790/#_2","text":"\u7a7a\u95f4\u590d\u6742\u5ea6\u5168\u79f0\u5c31\u662f\u6e10\u8fdb\u7a7a\u95f4\u590d\u6742\u5ea6\uff08asymptotic space complexity\uff09\uff0c\u8868\u793a\u7b97\u6cd5\u7684 \u5b58\u50a8\u7a7a\u95f4\u4e0e\u6570\u636e\u89c4\u6a21\u4e4b\u95f4\u7684\u589e\u957f\u5173\u7cfb\u3002","title":"\u7a7a\u95f4\u590d\u6742\u5ea6"},{"location":"algorithm/\u9009\u62e9\u6392\u5e8f/","text":"","title":"\u9009\u62e9\u6392\u5e8f"},{"location":"autoconf/10.\u7f16\u5199Autoconf\u5b8f/","text":"10.1 \u5b8f\u7684\u5b9a\u4e49 AC_DEFUN (name, [body]) \u5b9a\u4e49Autoconf\u5b8f\uff0c\u7c7b\u4f3c\u4e8eM4\u7684\u5185\u7f6e\u5b8f m4_define \u3002\u4e5f\u53ef\u4ee5\u5c06\u81ea\u5df1\u7684\u5b8f\u5b9a\u4e49\u5199\u5728.m4\u6587\u4ef6\u4e2d\uff0c\u5728configure.ac\u6587\u4ef6\u4e2d\u8c03\u7528\uff08\u63a8\u8350\u505a\u6cd5\uff09\u3002 AC_DEFUN([AX_PYTHON_MODULE],[ shell\u811a\u672c ]) 10.4 \u5b8f\u4e4b\u95f4\u7684\u4f9d\u8d56 AC_REQUIRE (macro-name) \u81ea\u52a8\u5730\u89e3\u51b3\u5b8f\u8c03\u7528\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4fdd\u8bc1\u4e00\u4e2a\u5b8f\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u88ab\u8c03\u7528\uff0c\u4e14\u53ea\u8c03\u7528\u4e00\u6b21\u3002\u53ea\u80fd\u51fa\u73b0\u5728 AC_DEFUN \u3002 AC_DEFUN([TRAVOLTA], [test $body_temperature_in_celsius -gt 38 dance_floor=occupied]) AC_DEFUN([NEWTON_JOHN], [test x$hair_style = xcurly dance_floor=occupied]) AC_DEFUN([RESERVE_DANCE_FLOOR], [if date | grep '^Sat.*pm' /dev/null 2 1; then AC_REQUIRE([TRAVOLTA]) AC_REQUIRE([NEWTON_JOHN]) fi]) 10.5 \u5e9f\u5f03\u7684\u5b8f AU_ALIAS (old-name, new-name) \u5b8f\u7684\u91cd\u547d\u540d\u3002 AU_ALIAS([AC_PYTHON_MODULE], [AX_PYTHON_MODULE])","title":"10.\u7f16\u5199Autoconf\u5b8f"},{"location":"autoconf/10.\u7f16\u5199Autoconf\u5b8f/#101","text":"","title":"10.1 \u5b8f\u7684\u5b9a\u4e49"},{"location":"autoconf/10.\u7f16\u5199Autoconf\u5b8f/#ac_defun-name-body","text":"\u5b9a\u4e49Autoconf\u5b8f\uff0c\u7c7b\u4f3c\u4e8eM4\u7684\u5185\u7f6e\u5b8f m4_define \u3002\u4e5f\u53ef\u4ee5\u5c06\u81ea\u5df1\u7684\u5b8f\u5b9a\u4e49\u5199\u5728.m4\u6587\u4ef6\u4e2d\uff0c\u5728configure.ac\u6587\u4ef6\u4e2d\u8c03\u7528\uff08\u63a8\u8350\u505a\u6cd5\uff09\u3002 AC_DEFUN([AX_PYTHON_MODULE],[ shell\u811a\u672c ])","title":"AC_DEFUN (name, [body])"},{"location":"autoconf/10.\u7f16\u5199Autoconf\u5b8f/#104","text":"","title":"10.4 \u5b8f\u4e4b\u95f4\u7684\u4f9d\u8d56"},{"location":"autoconf/10.\u7f16\u5199Autoconf\u5b8f/#ac_require-macro-name","text":"\u81ea\u52a8\u5730\u89e3\u51b3\u5b8f\u8c03\u7528\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4fdd\u8bc1\u4e00\u4e2a\u5b8f\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u88ab\u8c03\u7528\uff0c\u4e14\u53ea\u8c03\u7528\u4e00\u6b21\u3002\u53ea\u80fd\u51fa\u73b0\u5728 AC_DEFUN \u3002 AC_DEFUN([TRAVOLTA], [test $body_temperature_in_celsius -gt 38 dance_floor=occupied]) AC_DEFUN([NEWTON_JOHN], [test x$hair_style = xcurly dance_floor=occupied]) AC_DEFUN([RESERVE_DANCE_FLOOR], [if date | grep '^Sat.*pm' /dev/null 2 1; then AC_REQUIRE([TRAVOLTA]) AC_REQUIRE([NEWTON_JOHN]) fi])","title":"AC_REQUIRE (macro-name)"},{"location":"autoconf/10.\u7f16\u5199Autoconf\u5b8f/#105","text":"","title":"10.5 \u5e9f\u5f03\u7684\u5b8f"},{"location":"autoconf/10.\u7f16\u5199Autoconf\u5b8f/#au_alias-old-name-new-name","text":"\u5b8f\u7684\u91cd\u547d\u540d\u3002 AU_ALIAS([AC_PYTHON_MODULE], [AX_PYTHON_MODULE])","title":"AU_ALIAS (old-name, new-name)"},{"location":"autoconf/11.\u4fbf\u643a\u5f0fshell\u7f16\u7a0b/","text":"11.8 shell\u66ff\u6362 \u4e00\u4e9bshell\u8bed\u6cd5\u5b58\u5728\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u672c\u7ae0\u63cf\u8ff0\u600e\u4e48\u89e3\u51b3\u3002 - ${var:-value}\uff1a\u8001\u5f0f\u7684BSD shell\u3002\u731c\u60f3\u5e94\u8be5\u662f\u8d4b\u503c\u64cd\u4f5c\u3002","title":"11.\u4fbf\u643a\u5f0fshell\u7f16\u7a0b"},{"location":"autoconf/11.\u4fbf\u643a\u5f0fshell\u7f16\u7a0b/#118-shell","text":"\u4e00\u4e9bshell\u8bed\u6cd5\u5b58\u5728\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u672c\u7ae0\u63cf\u8ff0\u600e\u4e48\u89e3\u51b3\u3002 - ${var:-value}\uff1a\u8001\u5f0f\u7684BSD shell\u3002\u731c\u60f3\u5e94\u8be5\u662f\u8d4b\u503c\u64cd\u4f5c\u3002","title":"11.8 shell\u66ff\u6362"},{"location":"autoconf/14.\u624b\u52a8\u914d\u7f6e/","text":"\u8fd0\u884c\u6d4b\u8bd5\u7a0b\u5e8f\u4e0d\u80fd\u81ea\u52a8\u731c\u6d4b\u4e00\u5c0f\u90e8\u5206\u529f\u80fd\u3002 \u83b7\u53d6\u7cfb\u7edf\u7c7b\u578b \u4e0b\u9762\u7684\u8fd9\u4e9b\u5b8f\u4f7f\u7cfb\u7edf\u7c7b\u578b\u53d8\u91cf\u5bf9\u4e8econfigure\u811a\u672c\u53ef\u7528\u3002 \u5982\u679c\u4f7f\u7528\u8fd9\u4e9b\u5b8f\uff0c\u5fc5\u987b\u5c06config.guess\u4e8econfig.sub\u8ddf\u6e90\u7801\u4e00\u8d77\u53d1\u5e03\u3002 AC_CANONICAL_BUILD \u8ba1\u7b97\u6784\u5efa\u7cfb\u7edf\u7c7b\u578b\u53d8\u91cf build \uff0c\u53ca\u5176\u4e09\u4e2a\u79c1\u6709\u90e8\u5206 build_cpu, build_vendor, build_os \u3002 \u5982\u679c\u6307\u5b9a\u4e86\u9009\u9879 --build \uff0c\u90a3\u4e48build\u662fconfig.sub\u5bf9build_alias\u7684\u89c4\u8303\u5316\uff1b\u5426\u5219\u7531shell\u811a\u672cconfig.guess\u6307\u5b9a\u3002 AC_CANONICAL_HOST \u540c\u4e0a AC_CANONICAL_TARGET \u540c\u4e0a","title":"14.\u624b\u52a8\u914d\u7f6e"},{"location":"autoconf/14.\u624b\u52a8\u914d\u7f6e/#_1","text":"\u4e0b\u9762\u7684\u8fd9\u4e9b\u5b8f\u4f7f\u7cfb\u7edf\u7c7b\u578b\u53d8\u91cf\u5bf9\u4e8econfigure\u811a\u672c\u53ef\u7528\u3002 \u5982\u679c\u4f7f\u7528\u8fd9\u4e9b\u5b8f\uff0c\u5fc5\u987b\u5c06config.guess\u4e8econfig.sub\u8ddf\u6e90\u7801\u4e00\u8d77\u53d1\u5e03\u3002","title":"\u83b7\u53d6\u7cfb\u7edf\u7c7b\u578b"},{"location":"autoconf/14.\u624b\u52a8\u914d\u7f6e/#ac_canonical_build","text":"\u8ba1\u7b97\u6784\u5efa\u7cfb\u7edf\u7c7b\u578b\u53d8\u91cf build \uff0c\u53ca\u5176\u4e09\u4e2a\u79c1\u6709\u90e8\u5206 build_cpu, build_vendor, build_os \u3002 \u5982\u679c\u6307\u5b9a\u4e86\u9009\u9879 --build \uff0c\u90a3\u4e48build\u662fconfig.sub\u5bf9build_alias\u7684\u89c4\u8303\u5316\uff1b\u5426\u5219\u7531shell\u811a\u672cconfig.guess\u6307\u5b9a\u3002","title":"AC_CANONICAL_BUILD"},{"location":"autoconf/14.\u624b\u52a8\u914d\u7f6e/#ac_canonical_host","text":"\u540c\u4e0a","title":"AC_CANONICAL_HOST"},{"location":"autoconf/14.\u624b\u52a8\u914d\u7f6e/#ac_canonical_target","text":"\u540c\u4e0a","title":"AC_CANONICAL_TARGET"},{"location":"autoconf/15.Site\u914d\u7f6e/","text":"configure\u652f\u6301\u51e0\u79cd\u672c\u5730\u7684\u914d\u7f6e\u7b56\u7565\u3002 15.2 \u4f7f\u7528\u5916\u90e8\u8f6f\u4ef6 AC_ARG_WITH (package, help-string, [action-if-given], [action-if-not-given]) \u5982\u679c\u7528\u6237\u8fd0\u884cconfigure\u7684\u65f6\u5019\u7ed9\u4e86\u9009\u9879 --with-package \u6216 --without-package \uff0c\u8fd0\u884cshell\u547d\u4ee4 action-if-given \uff0c\u6ca1\u6709\u5219\u8fd0\u884c action-if-not-given \u3002 package \u5e94\u8be5\u53ea\u7531\u5b57\u6bcd\u3001\u7834\u6298\u53f7\u3001\u52a0\u53f7\u3001\u70b9\u7ec4\u6210\u3002 --with-package \u9ed8\u8ba4\u503c\u662f yes \uff0c\u53ef\u4f20\u53c2\u7136\u540e\u901a\u8fc7 ${withval} \u83b7\u53d6\u3002 --without-package \u7b49\u4e8e --with-package=no \uff0c\u4e0d\u53ef\u5e26\u53c2\u3002 \u9009\u9879\u7684\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7shell\u53d8\u91cf ${withval} \u83b7\u53d6\uff0c\u5176\u503c\u7684\u547d\u540d\u4e3a with_package \uff0c\u5176\u4e2d\u6240\u6709\u7684\u975e\u5b57\u6bcd\u7b26\u53f7\u90fd\u7528 _ \u4ee3\u66ff\u3002 AC_ARG_WITH( [smbios-manufacturer], [AS_HELP_STRING([--with-smbios-manufacturer=NAME], [SMBIOS manufacturer name @ :@default=oVirt@: @])], [SMBIOS_MANUFACTURER= ${withval} ], [SMBIOS_MANUFACTURER= oVirt ]) AC_SUBST([SMBIOS_MANUFACTURER]) # \u4e00\u5b9a\u8981\u6ce8\u518c\u4e00\u4e0b\uff0c\u624d\u80fd\u7ed9automake\u4f7f\u7528 configure\u5bf9\u5e94\u7684\u8bed\u53e5 # Check whether --with-smbios-manufacturer was given. if test ${with_smbios_manufacturer+set} = set; then : withval=$with_smbios_manufacturer; SMBIOS_MANUFACTURER= ${withval} else SMBIOS_MANUFACTURER= oVirt fi \u4e0eAC_ARG_ENABLE\u7684\u533a\u522b\u5728\u4e8e\u6b64\u5b8f\u7528\u4e8e\u6307\u5b9a\u7528\u6237\u81ea\u5df1\u7684\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\uff0c\u5373\u53ef\u9009\u62e9\u81ea\u5df1\u7684\u7a0b\u5e8f\uff1b\u800cAC_ARG_ENABLE\u5219\u662f\u7c7b\u4f3c\u4e8e\u529f\u80fd\u5f00\u5173\u3002 15.3 \u9009\u62e9\u5305\u9009\u9879 AC_ARG_ENABLE (feature, help-string, [action-if-given], [action-if-not-given]) \u5982\u679c\u7528\u6237\u7ed9\u4e86configure\u9009\u9879 --enable-feature \u6216 --disable-feature \uff08--enable-feature=yes/no\uff09\uff0c\u6267\u884cshell\u547d\u4ee4 action-if-given \uff1b\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u9009\u9879\uff0c\u6267\u884c action-if-not-given \u3002 feature \u5e94\u8be5\u53ea\u7531\u5b57\u6bcd\u3001\u7834\u6298\u53f7\u3001\u52a0\u53f7\u3001\u70b9\u7ec4\u6210\u3002 \u9009\u9879\u7684\u53c2\u6570\u53ef\u4ee5\u83b7\u53d6\uff0c\u5176\u547d\u540d\u65b9\u5f0f\u4e3a with_feature \uff0c\u5176\u4e2d\u6240\u6709\u7684\u975e\u5b57\u6bcd\u7b26\u53f7\u90fd\u7528 _ \u4ee3\u66ff\u3002 help-string \u7c7b\u4f3c\u4e8e AC_ARG_WITH \uff1b\u4f60\u5e94\u8be5\u4f7f\u7528 AS_HELP_STRING \u683c\u5f0f\u5316 help-string \u3002 AC_ARG_ENABLE( [hooks], [AS_HELP_STRING( [--enable-hooks], [build hooks packages @ :@default=no@: @] )], , [enable_hooks= no ] ) \u6548\u679c\uff1a ~$ ./configure --help --enable-hooks build hooks packages [default=no] configure\u5bf9\u5e94\u7684\u8bed\u53e5 # Check whether --enable-hooks was given. if test ${enable_hooks+set} = set; then : enableval=$enable_hooks; else enable_hooks= no fi 15.4 \u8ba9\u5e2e\u52a9\u6587\u6863\u6f02\u4eae AS_HELP_STRING (left-hand-side, right-hand-side [indent-column = \u201826\u2019], [wrap-column = \u201879\u2019]) \u683c\u5f0f\u5316\u5e2e\u52a9\u6587\u6863\uff0c\u4f7f\u5176\u770b\u8d77\u6765\u8ddf\u5b98\u65b9\u7684\u4e00\u6837\u3002 AC_ARG_WITH([foo], [AS_HELP_STRING([--with-foo], [use foo (default is no)])], [use_foo=$withval], [use_foo=no]) Then the last few lines of \u2018configure --help\u2019 appear like this: --enable and --with options recognized: --with-foo use foo (default is no) \u901a\u5e38 indent-column \u548c wrap-column \u4e0d\u5fc5\u6307\u5b9a\u3002","title":"15.Site\u914d\u7f6e"},{"location":"autoconf/15.Site\u914d\u7f6e/#152","text":"","title":"15.2 \u4f7f\u7528\u5916\u90e8\u8f6f\u4ef6"},{"location":"autoconf/15.Site\u914d\u7f6e/#ac_arg_with-package-help-string-action-if-given-action-if-not-given","text":"\u5982\u679c\u7528\u6237\u8fd0\u884cconfigure\u7684\u65f6\u5019\u7ed9\u4e86\u9009\u9879 --with-package \u6216 --without-package \uff0c\u8fd0\u884cshell\u547d\u4ee4 action-if-given \uff0c\u6ca1\u6709\u5219\u8fd0\u884c action-if-not-given \u3002 package \u5e94\u8be5\u53ea\u7531\u5b57\u6bcd\u3001\u7834\u6298\u53f7\u3001\u52a0\u53f7\u3001\u70b9\u7ec4\u6210\u3002 --with-package \u9ed8\u8ba4\u503c\u662f yes \uff0c\u53ef\u4f20\u53c2\u7136\u540e\u901a\u8fc7 ${withval} \u83b7\u53d6\u3002 --without-package \u7b49\u4e8e --with-package=no \uff0c\u4e0d\u53ef\u5e26\u53c2\u3002 \u9009\u9879\u7684\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7shell\u53d8\u91cf ${withval} \u83b7\u53d6\uff0c\u5176\u503c\u7684\u547d\u540d\u4e3a with_package \uff0c\u5176\u4e2d\u6240\u6709\u7684\u975e\u5b57\u6bcd\u7b26\u53f7\u90fd\u7528 _ \u4ee3\u66ff\u3002 AC_ARG_WITH( [smbios-manufacturer], [AS_HELP_STRING([--with-smbios-manufacturer=NAME], [SMBIOS manufacturer name @ :@default=oVirt@: @])], [SMBIOS_MANUFACTURER= ${withval} ], [SMBIOS_MANUFACTURER= oVirt ]) AC_SUBST([SMBIOS_MANUFACTURER]) # \u4e00\u5b9a\u8981\u6ce8\u518c\u4e00\u4e0b\uff0c\u624d\u80fd\u7ed9automake\u4f7f\u7528 configure\u5bf9\u5e94\u7684\u8bed\u53e5 # Check whether --with-smbios-manufacturer was given. if test ${with_smbios_manufacturer+set} = set; then : withval=$with_smbios_manufacturer; SMBIOS_MANUFACTURER= ${withval} else SMBIOS_MANUFACTURER= oVirt fi \u4e0eAC_ARG_ENABLE\u7684\u533a\u522b\u5728\u4e8e\u6b64\u5b8f\u7528\u4e8e\u6307\u5b9a\u7528\u6237\u81ea\u5df1\u7684\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\uff0c\u5373\u53ef\u9009\u62e9\u81ea\u5df1\u7684\u7a0b\u5e8f\uff1b\u800cAC_ARG_ENABLE\u5219\u662f\u7c7b\u4f3c\u4e8e\u529f\u80fd\u5f00\u5173\u3002","title":"AC_ARG_WITH (package, help-string, [action-if-given], [action-if-not-given])"},{"location":"autoconf/15.Site\u914d\u7f6e/#153","text":"","title":"15.3 \u9009\u62e9\u5305\u9009\u9879"},{"location":"autoconf/15.Site\u914d\u7f6e/#ac_arg_enable-feature-help-string-action-if-given-action-if-not-given","text":"\u5982\u679c\u7528\u6237\u7ed9\u4e86configure\u9009\u9879 --enable-feature \u6216 --disable-feature \uff08--enable-feature=yes/no\uff09\uff0c\u6267\u884cshell\u547d\u4ee4 action-if-given \uff1b\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u9009\u9879\uff0c\u6267\u884c action-if-not-given \u3002 feature \u5e94\u8be5\u53ea\u7531\u5b57\u6bcd\u3001\u7834\u6298\u53f7\u3001\u52a0\u53f7\u3001\u70b9\u7ec4\u6210\u3002 \u9009\u9879\u7684\u53c2\u6570\u53ef\u4ee5\u83b7\u53d6\uff0c\u5176\u547d\u540d\u65b9\u5f0f\u4e3a with_feature \uff0c\u5176\u4e2d\u6240\u6709\u7684\u975e\u5b57\u6bcd\u7b26\u53f7\u90fd\u7528 _ \u4ee3\u66ff\u3002 help-string \u7c7b\u4f3c\u4e8e AC_ARG_WITH \uff1b\u4f60\u5e94\u8be5\u4f7f\u7528 AS_HELP_STRING \u683c\u5f0f\u5316 help-string \u3002 AC_ARG_ENABLE( [hooks], [AS_HELP_STRING( [--enable-hooks], [build hooks packages @ :@default=no@: @] )], , [enable_hooks= no ] ) \u6548\u679c\uff1a ~$ ./configure --help --enable-hooks build hooks packages [default=no] configure\u5bf9\u5e94\u7684\u8bed\u53e5 # Check whether --enable-hooks was given. if test ${enable_hooks+set} = set; then : enableval=$enable_hooks; else enable_hooks= no fi","title":"AC_ARG_ENABLE (feature, help-string, [action-if-given], [action-if-not-given])"},{"location":"autoconf/15.Site\u914d\u7f6e/#154","text":"","title":"15.4 \u8ba9\u5e2e\u52a9\u6587\u6863\u6f02\u4eae"},{"location":"autoconf/15.Site\u914d\u7f6e/#as_help_string-left-hand-side-right-hand-side-indent-column-26-wrap-column-79","text":"\u683c\u5f0f\u5316\u5e2e\u52a9\u6587\u6863\uff0c\u4f7f\u5176\u770b\u8d77\u6765\u8ddf\u5b98\u65b9\u7684\u4e00\u6837\u3002 AC_ARG_WITH([foo], [AS_HELP_STRING([--with-foo], [use foo (default is no)])], [use_foo=$withval], [use_foo=no]) Then the last few lines of \u2018configure --help\u2019 appear like this: --enable and --with options recognized: --with-foo use foo (default is no) \u901a\u5e38 indent-column \u548c wrap-column \u4e0d\u5fc5\u6307\u5b9a\u3002","title":"AS_HELP_STRING (left-hand-side, right-hand-side [indent-column = \u201826\u2019], [wrap-column = \u201879\u2019])"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/","text":"4.1 \u521d\u59cb\u5316 configure AC_INIT (package, version, [bug-report], [tarname], [url]) \u7b2c\u4e00\u4e2a\u8981\u6267\u884c\u7684\u5b8f\u3002\u8bbe\u7f6e\u7a0b\u5e8f\u540d\u3001\u7248\u672c\u53f7\u3001\u8054\u7cfb\u65b9\u5f0f...\u3002\u4ed6\u4eec\u90fd\u5e94\u8be5\u662f\u9759\u6001\u7684\u53c2\u6570\uff0c\u4e0d\u80fd\u662fshell\u53c2\u6570\u3001\u5f15\u7528\u6216\u8005\u65b0\u884c\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7m4\u8ba1\u7b97\u51fa\u6765\u3002 AC_INIT([vdsm], [m4_esyscmd([build-aux/pkg-version --version])], [vdsm-devel@lists.fedorahosted.org]) 4.2 \u89e3\u51b3Autoconf\u7684\u7248\u672c \u9009\u62e9\u6700\u4f4e\u7684Autoconf\u7684\u7248\u672c\u786e\u4fdd\u53ef\u4ee5\u6210\u529f\u7684\u7f16\u8bd1 configure.ac \u3002 AC_PREREQ (version) \u8981\u6c42Autoconf\u7684\u6700\u4f4e\u7248\u672c\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\u5219\u62a5\u9519\u5e76\u9000\u51fa\u3002\u5fc5\u987b\u5728 AC_INIT \u4e4b\u524d\u5b9a\u4e49\u3002 AC_PREREQ([2.69]) 4.4 \u627e\u5230 configure \u7684\u8f93\u5165 AC_CONFIG_SRCDIR (unique-file-in-source-dir) unique-file-in-source-dir \u662f\u5305\u7684\u6e90\u7801\u76ee\u5f55\u4e0b\u7684\u67d0\u4e9b\u6587\u4ef6\u3002configure\u68c0\u67e5\u8fd9\u4e9b\u6587\u4ef6\u786e\u4fdd\u76ee\u5f55\u5305\u542b\u6e90\u7801\u3002 AC_CONFIG_AUX_DIR (dir) \u8f85\u52a9\u6784\u5efa\u5de5\u5177\uff08e.g., install-sh, config.sub, config.guess, Cygnus configure, Automake and Libtool scripts, etc.\uff09\u6240\u5728\u7684\u76ee\u5f55\u3002 dir \u53ef\u4ee5\u662f srcdir \u7684\u7edd\u5bf9\u6216\u76f8\u5bf9\u8def\u5f84\uff0c\u901a\u5e38\u547d\u540d\u4e3a build-aux \u3002 AC_CONFIG_AUX_DIR([build-aux]) AC_REQUIRE_AUX_FILE (file) \u58f0\u660e file \u5fc5\u987b\u5728\u4e0a\u8ff0\u5b9a\u4e49\u7684\u6587\u4ef6\u5939\u4e2d\u5fc5\u987b\u5b58\u5728\u3002 AC_REQUIRE_AUX_FILE([tap-driver.sh]) AC_CONFIG_MACRO_DIR (dir) \u6307\u5b9a dir \u4f5c\u4e3a\u989d\u5916\u7684Autoconf\u5b8f\u7684\u5b9a\u4f4d\u3002 note \uff1a\u5982\u679c\u5728Automake\u4e2d\u4f7f\u7528 aclocal \u751f\u6210 aclocal.m4 \u6587\u4ef6\uff0c\u5fc5\u987b\u5728\u9876\u7ea7\u7684Makefile.am\u6587\u4ef6\u4e2d\u8bbe\u7f6e ACLOCAL_AMFLAGS = -I dir \u3002 4.5 \u8f93\u51fa\u6587\u4ef6 AC_OUTPUT ([file]..., [extra-cmds], [init-cmds]) \u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u4e2a\u5e9f\u5f03\u7684\u63a5\u53e3\uff0c\u7528\u4ee5\u4e0b\u4e09\u4e2a\u5b8f\u4ee3\u66ff\uff1a AC_CONFIG_FILES(file...) AC_CONFIG_COMMANDS([default], extra-cmds, init-cmds) AC_OUTPUT AC_OUTPUT \u751f\u6210config.status\u5e76\u542f\u52a8\u5b83\u3002configure.ac\u5e94\u8be5\u4ee5\u8c03\u7528\u6b64\u5b8f\u7ed3\u675f\u3002 config.status\u6267\u884c\u6240\u6709\u7684\u914d\u7f6e\u52a8\u4f5c\uff1a\u6240\u6709\u7684\u8f93\u51fa\u6587\u4ef6\u3001\u5934\u6587\u4ef6\u3001\u547d\u4ee4\u3001\u94fe\u63a5\u3001\u8981\u914d\u7f6e\u7684\u5b50\u76ee\u5f55 AC_PROG_MAKE_SET \u5982\u679cMake\u547d\u4ee4\u3001$MAKE\u88ab\u8bbe\u7f6e\u6216\u8005\u5176\u4ed6 make \uff0c\u9884\u5b9a\u4e49\u4e86 $(MAKE) \uff0c\u5b9a\u4e49\u8f93\u51fa\u53d8\u91cf SET_MAKE \u5c06\u662f\u7a7a\u503c\u3002\u5426\u5219\u5c06SET_MAKE\u5b9a\u4e49\u4e3a\u8bbe\u7f6e$(MAKE)\u7684\u5b8f\u5b9a\u4e49\u3002 4.6 \u6267\u884c\u914d\u7f6e\u52a8\u4f5c configure\u5b9e\u9645\u4e0a\u8fd8\u6709\u4e00\u4e2a\u9690\u85cf\u7684\u5b50\u6587\u4ef6config.status\u3002configure\u68c0\u67e5\u7cfb\u7edf\uff0cconfig.status\u57fa\u4e8e\u68c0\u67e5\u7684\u7ed3\u679c\u6267\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\u3002 4.7 \u521b\u5efa\u914d\u7f6e\u6587\u4ef6 AC_CONFIG_FILES (file..., [cmds], [init-cmds]) \u8ba9 AC_OUTPUT \u901a\u8fc7\u590d\u5236\u8f93\u5165\u6587\u4ef6\uff08\u9ed8\u8ba4\u662f file.in \u6587\u4ef6\uff09\u5e76\u4ee3\u66ff\u91cc\u9762\u7684\u53d8\u91cf\u7684\u503c\u6765\u521b\u5efa\u6bcf\u4e00\u4e2a file \u3002\u901a\u5e38\u7528\u4e8e\u751f\u6210Makefile\uff0c\u4f46\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5176\u5b83\u6587\u4ef6\u3002 AC_CONFIG_FILES([Makefile src/Makefile man/Makefile X/Imakefile]) AC_CONFIG_FILES([autoconf], [chmod +x autoconf]) \u5192\u53f7\u5206\u9694\u6307\u5b9a\u8f93\u5165\u6587\u4ef6\uff1a AC_CONFIG_FILES([Makefile:boiler/top.mk:boiler/bot.mk] [lib/Makefile:boiler/lib.mk]) 4.8 Makefile\u4e2d\u7684\u66ff\u6362 \u88ab\u66ff\u6362\u5230\u8f93\u51fa\u6587\u4ef6\u7684\u53d8\u91cf\u79f0\u4f5c output variables \u3002 4.8.1 \u9884\u7f6e\u8f93\u51fa\u53d8\u91cf CFLAGS - C\u7f16\u8bd1\u5668\u7684\u8c03\u8bd5\u548c\u4f18\u5316\u9009\u9879\u3002 builddir - \u7b49\u4e8e . \u3002 abs_builddir - builddir \u7684\u7edd\u5bf9\u540d\u79f0\u3002 top_builddir - \u5f53\u524d\u76ee\u5f55\u76f8\u5bf9\u4e8e\u9876\u7ea7\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84\u3002\u5728\u9876\u7ea7\u76ee\u5f55\u4e0e builddir \u76f8\u7b49\u3002 top_build_prefix - \u5f53\u524d\u76ee\u5f55\u76f8\u5bf9\u4e8e\u9876\u7ea7\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u5e26\u6709 / \u5982\u679c\u4e0d\u4e3a\u7a7a\u3002\u5e2e\u52a9make\u5728\u9876\u7ea7\u6784\u5efa\u76ee\u5f55\u533a\u522b\u5bf9\u5f85 ./file \u548c file \u3002 abs_top_builddir - top_builddir \u7684\u7edd\u5bf9\u540d\u79f0\u3002 srcdir - \u5bf9\u4e8emakefile\u5305\u542b\u4e86\u6e90\u7801\u7684\u76ee\u5f55\u3002 abs_srcdir - srcdir \u7684\u7edd\u5bf9\u540d\u79f0\u3002 top_srcdir - \u5bf9\u4e8epackage\u5305\u542b\u4e86\u6e90\u7801\u7684\u9876\u7ea7\u76ee\u5f55\u3002\u5728\u9876\u7ea7\u76ee\u5f55\u7684\u7684configure.ac\u4e2d\u6ca1\u6709\u7528\u5904\uff0c\u662f\u7a7a\u503c\uff01\uff01\uff01\uff1b\u5728\u5b50\u76ee\u5f55\u7684configure.ac\u548cMakefile.am\u4e2d\u624d\u80fd\u53d1\u6325\u4f5c\u7528\u3002 abs_top_srcdir - \u5bf9\u4e8epackage\u5305\u542b\u4e86\u6e90\u7801\u7684\u9876\u7ea7\u76ee\u5f55\u7684\u7edd\u5bf9\u540d\u79f0\u3002 \u66f4\u591a\u8bf4\u660e\u8bf7\u53c2\u8003 Preset Output Variables \u3002 4.8.2 \u5b89\u88c5\u76ee\u5f55\u53d8\u91cf \u540e\u7f00 / \u88ab\u5220\u9664\uff0c\u4f8b\u5982 ${prefix}/lib \u3002 bindir - \u53ef\u6267\u884c\u6587\u4ef6\u7684\u5b89\u88c5\u76ee\u5f55\u3002 datadir - \u5b89\u88c5\u7279\u6b8a\u7684\u53ea\u8bfb\u3001\u67b6\u6784\u4f9d\u8d56\u7684\u6570\u636e\u6587\u4ef6\u76ee\u5f55\u3002 datarootdir - \u53ea\u8bfb\u67b6\u6784\u4f9d\u8d56\u6570\u636e\u6587\u4ef6\u7684\u6839\u76ee\u5f55\u3002\u901a\u5e38\u662f /usr/local/share \uff0c\u4f46\u662f\u5199\u4f5c $(prefix)/share (\u5982\u679c\u4f7f\u7528Autoconf\uff0c\u5199\u4f5c @datarootdir@ \uff0c\u5176\u4f59\u53d8\u91cf\u540c\u7406)\u3002 docdir - \u6587\u6863\u6587\u4ef6\u3002 exec_prefix - \u67b6\u6784\u4f9d\u8d56\u6587\u4ef6\u7684\u5b89\u88c5\u524d\u7f00\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0e prefix \u76f8\u540c\u3002 includedir - \u5b89\u88c5C\u7684\u5934\u6587\u4ef6 infodir - Info\u683c\u5f0f\u7684\u6587\u6863 libdir - \u5bf9\u8c61\u4ee3\u7801\u5e93\u6587\u4ef6 libexecdir - \u5176\u5b83\u7a0b\u5e8f\u8fd0\u884c\u7684\u53ef\u6267\u884c\u6587\u4ef6 mandir - man\u683c\u5f0f\u6587\u6863\u7684\u5b89\u88c5\u9876\u7ea7\u76ee\u5f55 prefix - \u6240\u6709\u6587\u4ef6\u7684\u5b89\u88c5\u524d\u7f00\u3002 sbindir - \u7cfb\u7edfadministrators\u8fd0\u884c\u7684\u53ef\u8fd0\u884c\u6587\u4ef6\u7684\u5b89\u88c5\u76ee\u5f55\u3002 \u66f4\u52a0\u8be6\u7ec6\u7684\u8bf4\u660e\u53c2\u8003 Variables for Installation Directories \u3002 4.9 \u914d\u7f6e\u5934\u6587\u4ef6 AC_CONFIG_HEADERS (header ..., [cmds], [init-cmds]) \u8ba9 AC_OUTPUT \u521b\u5efa\u4e00\u4e2a\u5934\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5217\u51fa\u4e00\u7cfb\u5217\u7684 #define \u58f0\u660e\uff1b\u8d4b\u503c DEFS=-DHAVE_CONFIG_H \u3002\u901a\u5e38\u5934\u6587\u4ef6 header \u7684\u540d\u5b57\u662f config.h \u3002 \u4e00\u822c\u8f93\u5165\u6e90\u662f header.in \uff0c\u53ef\u4ee5\u91c7\u7528\u5192\u53f7\u5206\u9694\u7b26\u6765\u6307\u5b9a\u8f93\u5165\u6765\u6e90\u3002 AC_CONFIG_HEADERS([config.h:config.hin]) 4.10 \u8fd0\u884c\u4efb\u610f\u914d\u7f6e\u547d\u4ee4 AC_CONFIG_COMMANDS (tag..., [cmds], [init-cmds]) config.status\u7ed3\u675f\u7684\u65f6\u5019\u6267\u884c\u989d\u5916\u7684\u547d\u4ee4\u3002 \u4e0b\u9762\u4e24\u4e2a\u7c7b\u4f3c\u7684\u5b8f\u662f\u7531configure\u6267\u884c\u7684\uff0c\u4e0d\u80fd\u4f7f\u7528config.status\u6765\u91cd\u65b0\u8fd0\u884c\u5b83\u4eec\u3002 AC_CONFIG_COMMANDS_PRE (cmds) \u521b\u5efaconfig.status\u4e4b\u524d\u6267\u884c\u3002 AC_CONFIG_COMMANDS_POST (cmds) \u521b\u5efaconfig.status\u4e4b\u540e\u6267\u884c\u3002","title":"4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#41-configure","text":"","title":"4.1 \u521d\u59cb\u5316 configure"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_init-package-version-bug-report-tarname-url","text":"\u7b2c\u4e00\u4e2a\u8981\u6267\u884c\u7684\u5b8f\u3002\u8bbe\u7f6e\u7a0b\u5e8f\u540d\u3001\u7248\u672c\u53f7\u3001\u8054\u7cfb\u65b9\u5f0f...\u3002\u4ed6\u4eec\u90fd\u5e94\u8be5\u662f\u9759\u6001\u7684\u53c2\u6570\uff0c\u4e0d\u80fd\u662fshell\u53c2\u6570\u3001\u5f15\u7528\u6216\u8005\u65b0\u884c\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7m4\u8ba1\u7b97\u51fa\u6765\u3002 AC_INIT([vdsm], [m4_esyscmd([build-aux/pkg-version --version])], [vdsm-devel@lists.fedorahosted.org])","title":"AC_INIT (package, version, [bug-report], [tarname], [url])"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#42-autoconf","text":"\u9009\u62e9\u6700\u4f4e\u7684Autoconf\u7684\u7248\u672c\u786e\u4fdd\u53ef\u4ee5\u6210\u529f\u7684\u7f16\u8bd1 configure.ac \u3002","title":"4.2 \u89e3\u51b3Autoconf\u7684\u7248\u672c"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_prereq-version","text":"\u8981\u6c42Autoconf\u7684\u6700\u4f4e\u7248\u672c\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\u5219\u62a5\u9519\u5e76\u9000\u51fa\u3002\u5fc5\u987b\u5728 AC_INIT \u4e4b\u524d\u5b9a\u4e49\u3002 AC_PREREQ([2.69])","title":"AC_PREREQ (version)"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#44-configure","text":"","title":"4.4 \u627e\u5230 configure \u7684\u8f93\u5165"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_config_srcdir-unique-file-in-source-dir","text":"unique-file-in-source-dir \u662f\u5305\u7684\u6e90\u7801\u76ee\u5f55\u4e0b\u7684\u67d0\u4e9b\u6587\u4ef6\u3002configure\u68c0\u67e5\u8fd9\u4e9b\u6587\u4ef6\u786e\u4fdd\u76ee\u5f55\u5305\u542b\u6e90\u7801\u3002","title":"AC_CONFIG_SRCDIR (unique-file-in-source-dir)"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_config_aux_dir-dir","text":"\u8f85\u52a9\u6784\u5efa\u5de5\u5177\uff08e.g., install-sh, config.sub, config.guess, Cygnus configure, Automake and Libtool scripts, etc.\uff09\u6240\u5728\u7684\u76ee\u5f55\u3002 dir \u53ef\u4ee5\u662f srcdir \u7684\u7edd\u5bf9\u6216\u76f8\u5bf9\u8def\u5f84\uff0c\u901a\u5e38\u547d\u540d\u4e3a build-aux \u3002 AC_CONFIG_AUX_DIR([build-aux])","title":"AC_CONFIG_AUX_DIR (dir)"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_require_aux_file-file","text":"\u58f0\u660e file \u5fc5\u987b\u5728\u4e0a\u8ff0\u5b9a\u4e49\u7684\u6587\u4ef6\u5939\u4e2d\u5fc5\u987b\u5b58\u5728\u3002 AC_REQUIRE_AUX_FILE([tap-driver.sh])","title":"AC_REQUIRE_AUX_FILE (file)"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_config_macro_dir-dir","text":"\u6307\u5b9a dir \u4f5c\u4e3a\u989d\u5916\u7684Autoconf\u5b8f\u7684\u5b9a\u4f4d\u3002 note \uff1a\u5982\u679c\u5728Automake\u4e2d\u4f7f\u7528 aclocal \u751f\u6210 aclocal.m4 \u6587\u4ef6\uff0c\u5fc5\u987b\u5728\u9876\u7ea7\u7684Makefile.am\u6587\u4ef6\u4e2d\u8bbe\u7f6e ACLOCAL_AMFLAGS = -I dir \u3002","title":"AC_CONFIG_MACRO_DIR (dir)"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#45","text":"","title":"4.5 \u8f93\u51fa\u6587\u4ef6"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_output-file-extra-cmds-init-cmds","text":"\u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u4e2a\u5e9f\u5f03\u7684\u63a5\u53e3\uff0c\u7528\u4ee5\u4e0b\u4e09\u4e2a\u5b8f\u4ee3\u66ff\uff1a AC_CONFIG_FILES(file...) AC_CONFIG_COMMANDS([default], extra-cmds, init-cmds) AC_OUTPUT","title":"AC_OUTPUT ([file]..., [extra-cmds], [init-cmds])"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_output","text":"\u751f\u6210config.status\u5e76\u542f\u52a8\u5b83\u3002configure.ac\u5e94\u8be5\u4ee5\u8c03\u7528\u6b64\u5b8f\u7ed3\u675f\u3002 config.status\u6267\u884c\u6240\u6709\u7684\u914d\u7f6e\u52a8\u4f5c\uff1a\u6240\u6709\u7684\u8f93\u51fa\u6587\u4ef6\u3001\u5934\u6587\u4ef6\u3001\u547d\u4ee4\u3001\u94fe\u63a5\u3001\u8981\u914d\u7f6e\u7684\u5b50\u76ee\u5f55","title":"AC_OUTPUT"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_prog_make_set","text":"\u5982\u679cMake\u547d\u4ee4\u3001$MAKE\u88ab\u8bbe\u7f6e\u6216\u8005\u5176\u4ed6 make \uff0c\u9884\u5b9a\u4e49\u4e86 $(MAKE) \uff0c\u5b9a\u4e49\u8f93\u51fa\u53d8\u91cf SET_MAKE \u5c06\u662f\u7a7a\u503c\u3002\u5426\u5219\u5c06SET_MAKE\u5b9a\u4e49\u4e3a\u8bbe\u7f6e$(MAKE)\u7684\u5b8f\u5b9a\u4e49\u3002","title":"AC_PROG_MAKE_SET"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#46","text":"configure\u5b9e\u9645\u4e0a\u8fd8\u6709\u4e00\u4e2a\u9690\u85cf\u7684\u5b50\u6587\u4ef6config.status\u3002configure\u68c0\u67e5\u7cfb\u7edf\uff0cconfig.status\u57fa\u4e8e\u68c0\u67e5\u7684\u7ed3\u679c\u6267\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\u3002","title":"4.6 \u6267\u884c\u914d\u7f6e\u52a8\u4f5c"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#47","text":"","title":"4.7 \u521b\u5efa\u914d\u7f6e\u6587\u4ef6"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_config_files-file-cmds-init-cmds","text":"\u8ba9 AC_OUTPUT \u901a\u8fc7\u590d\u5236\u8f93\u5165\u6587\u4ef6\uff08\u9ed8\u8ba4\u662f file.in \u6587\u4ef6\uff09\u5e76\u4ee3\u66ff\u91cc\u9762\u7684\u53d8\u91cf\u7684\u503c\u6765\u521b\u5efa\u6bcf\u4e00\u4e2a file \u3002\u901a\u5e38\u7528\u4e8e\u751f\u6210Makefile\uff0c\u4f46\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5176\u5b83\u6587\u4ef6\u3002 AC_CONFIG_FILES([Makefile src/Makefile man/Makefile X/Imakefile]) AC_CONFIG_FILES([autoconf], [chmod +x autoconf]) \u5192\u53f7\u5206\u9694\u6307\u5b9a\u8f93\u5165\u6587\u4ef6\uff1a AC_CONFIG_FILES([Makefile:boiler/top.mk:boiler/bot.mk] [lib/Makefile:boiler/lib.mk])","title":"AC_CONFIG_FILES (file..., [cmds], [init-cmds])"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#48-makefile","text":"\u88ab\u66ff\u6362\u5230\u8f93\u51fa\u6587\u4ef6\u7684\u53d8\u91cf\u79f0\u4f5c output variables \u3002","title":"4.8 Makefile\u4e2d\u7684\u66ff\u6362"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#481","text":"CFLAGS - C\u7f16\u8bd1\u5668\u7684\u8c03\u8bd5\u548c\u4f18\u5316\u9009\u9879\u3002 builddir - \u7b49\u4e8e . \u3002 abs_builddir - builddir \u7684\u7edd\u5bf9\u540d\u79f0\u3002 top_builddir - \u5f53\u524d\u76ee\u5f55\u76f8\u5bf9\u4e8e\u9876\u7ea7\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84\u3002\u5728\u9876\u7ea7\u76ee\u5f55\u4e0e builddir \u76f8\u7b49\u3002 top_build_prefix - \u5f53\u524d\u76ee\u5f55\u76f8\u5bf9\u4e8e\u9876\u7ea7\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u5e26\u6709 / \u5982\u679c\u4e0d\u4e3a\u7a7a\u3002\u5e2e\u52a9make\u5728\u9876\u7ea7\u6784\u5efa\u76ee\u5f55\u533a\u522b\u5bf9\u5f85 ./file \u548c file \u3002 abs_top_builddir - top_builddir \u7684\u7edd\u5bf9\u540d\u79f0\u3002 srcdir - \u5bf9\u4e8emakefile\u5305\u542b\u4e86\u6e90\u7801\u7684\u76ee\u5f55\u3002 abs_srcdir - srcdir \u7684\u7edd\u5bf9\u540d\u79f0\u3002 top_srcdir - \u5bf9\u4e8epackage\u5305\u542b\u4e86\u6e90\u7801\u7684\u9876\u7ea7\u76ee\u5f55\u3002\u5728\u9876\u7ea7\u76ee\u5f55\u7684\u7684configure.ac\u4e2d\u6ca1\u6709\u7528\u5904\uff0c\u662f\u7a7a\u503c\uff01\uff01\uff01\uff1b\u5728\u5b50\u76ee\u5f55\u7684configure.ac\u548cMakefile.am\u4e2d\u624d\u80fd\u53d1\u6325\u4f5c\u7528\u3002 abs_top_srcdir - \u5bf9\u4e8epackage\u5305\u542b\u4e86\u6e90\u7801\u7684\u9876\u7ea7\u76ee\u5f55\u7684\u7edd\u5bf9\u540d\u79f0\u3002 \u66f4\u591a\u8bf4\u660e\u8bf7\u53c2\u8003 Preset Output Variables \u3002","title":"4.8.1 \u9884\u7f6e\u8f93\u51fa\u53d8\u91cf"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#482","text":"\u540e\u7f00 / \u88ab\u5220\u9664\uff0c\u4f8b\u5982 ${prefix}/lib \u3002 bindir - \u53ef\u6267\u884c\u6587\u4ef6\u7684\u5b89\u88c5\u76ee\u5f55\u3002 datadir - \u5b89\u88c5\u7279\u6b8a\u7684\u53ea\u8bfb\u3001\u67b6\u6784\u4f9d\u8d56\u7684\u6570\u636e\u6587\u4ef6\u76ee\u5f55\u3002 datarootdir - \u53ea\u8bfb\u67b6\u6784\u4f9d\u8d56\u6570\u636e\u6587\u4ef6\u7684\u6839\u76ee\u5f55\u3002\u901a\u5e38\u662f /usr/local/share \uff0c\u4f46\u662f\u5199\u4f5c $(prefix)/share (\u5982\u679c\u4f7f\u7528Autoconf\uff0c\u5199\u4f5c @datarootdir@ \uff0c\u5176\u4f59\u53d8\u91cf\u540c\u7406)\u3002 docdir - \u6587\u6863\u6587\u4ef6\u3002 exec_prefix - \u67b6\u6784\u4f9d\u8d56\u6587\u4ef6\u7684\u5b89\u88c5\u524d\u7f00\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0e prefix \u76f8\u540c\u3002 includedir - \u5b89\u88c5C\u7684\u5934\u6587\u4ef6 infodir - Info\u683c\u5f0f\u7684\u6587\u6863 libdir - \u5bf9\u8c61\u4ee3\u7801\u5e93\u6587\u4ef6 libexecdir - \u5176\u5b83\u7a0b\u5e8f\u8fd0\u884c\u7684\u53ef\u6267\u884c\u6587\u4ef6 mandir - man\u683c\u5f0f\u6587\u6863\u7684\u5b89\u88c5\u9876\u7ea7\u76ee\u5f55 prefix - \u6240\u6709\u6587\u4ef6\u7684\u5b89\u88c5\u524d\u7f00\u3002 sbindir - \u7cfb\u7edfadministrators\u8fd0\u884c\u7684\u53ef\u8fd0\u884c\u6587\u4ef6\u7684\u5b89\u88c5\u76ee\u5f55\u3002 \u66f4\u52a0\u8be6\u7ec6\u7684\u8bf4\u660e\u53c2\u8003 Variables for Installation Directories \u3002","title":"4.8.2 \u5b89\u88c5\u76ee\u5f55\u53d8\u91cf"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#49","text":"","title":"4.9 \u914d\u7f6e\u5934\u6587\u4ef6"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_config_headers-header-cmds-init-cmds","text":"\u8ba9 AC_OUTPUT \u521b\u5efa\u4e00\u4e2a\u5934\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5217\u51fa\u4e00\u7cfb\u5217\u7684 #define \u58f0\u660e\uff1b\u8d4b\u503c DEFS=-DHAVE_CONFIG_H \u3002\u901a\u5e38\u5934\u6587\u4ef6 header \u7684\u540d\u5b57\u662f config.h \u3002 \u4e00\u822c\u8f93\u5165\u6e90\u662f header.in \uff0c\u53ef\u4ee5\u91c7\u7528\u5192\u53f7\u5206\u9694\u7b26\u6765\u6307\u5b9a\u8f93\u5165\u6765\u6e90\u3002 AC_CONFIG_HEADERS([config.h:config.hin])","title":"AC_CONFIG_HEADERS (header ..., [cmds], [init-cmds])"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#410","text":"","title":"4.10 \u8fd0\u884c\u4efb\u610f\u914d\u7f6e\u547d\u4ee4"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_config_commands-tag-cmds-init-cmds","text":"config.status\u7ed3\u675f\u7684\u65f6\u5019\u6267\u884c\u989d\u5916\u7684\u547d\u4ee4\u3002 \u4e0b\u9762\u4e24\u4e2a\u7c7b\u4f3c\u7684\u5b8f\u662f\u7531configure\u6267\u884c\u7684\uff0c\u4e0d\u80fd\u4f7f\u7528config.status\u6765\u91cd\u65b0\u8fd0\u884c\u5b83\u4eec\u3002","title":"AC_CONFIG_COMMANDS (tag..., [cmds], [init-cmds])"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_config_commands_pre-cmds","text":"\u521b\u5efaconfig.status\u4e4b\u524d\u6267\u884c\u3002","title":"AC_CONFIG_COMMANDS_PRE (cmds)"},{"location":"autoconf/4.\u521d\u59cb\u5316\u548c\u8f93\u51fa\u6587\u4ef6/#ac_config_commands_post-cmds","text":"\u521b\u5efaconfig.status\u4e4b\u540e\u6267\u884c\u3002","title":"AC_CONFIG_COMMANDS_POST (cmds)"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/","text":"5.2 \u5907\u9009\u7a0b\u5e8f \u8fd9\u4e9b\u5b8f\u7528\u4e8e\u68c0\u67e5\u6307\u5b9a\u7a0b\u5e8f\u7684\u5b58\u5728\u6216\u8005\u884c\u4e3a\u3002\u7ecf\u5e38\u4ece\u51e0\u4e2a\u5907\u9009\u7a0b\u5e8f\u4e2d\u9009\u62e9\u4e00\u4e2a\u51fa\u6765\u3002 5.2.1 \u7279\u6b8a\u7a0b\u5e8f\u68c0\u67e5 AC_PROG_LN_S \u5982\u679c\u5f53\u524d\u6587\u4ef6\u7cfb\u7edf\u652f\u6301 ln -s \uff0c\u8bbe\u7f6e\u8f93\u51fa\u53d8\u91cf LN_S \u4e3a ln -s \uff1b\u5426\u5219\uff0c\u5982\u679c\u652f\u6301 ln \uff0c\u8bbe\u7f6e LN_S \u4e3a ln \uff0c\u5426\u5219\u8bbe\u7f6e\u4e3a cp -pR \u3002 AC_PROG_LN_S 5.2.2 \u901a\u7528\u7a0b\u5e8f\u548c\u6587\u4ef6\u68c0\u67e5 \u8fd9\u4e9b\u5b8f\u4e0d\u4f1a\u88ab\u7279\u5b9a\u7684\u6d4b\u8bd5\u5b8f\u6240\u8986\u76d6\u3002 \u5f3a\u70c8\u5efa\u8bae\u58f0\u660e variable \u4e3a precious variable \u3002 See AC_ARG_VAR AC_CHECK_PROG (variable, prog-to-check-for, value-if-found, [value-if-not-found], [path = \u2018$PATH\u2019], [reject]) \u68c0\u67e5 path \u4e2d\u662f\u5426\u5b58\u624d prog-to-check-for \u3002 variable =\u5b58\u5728 ? value-if-found : value-if-not-found \u3002\u603b\u662f\u5ffd\u89c6 reject \uff08\u4e00\u4e2a\u6587\u4ef6\u540d\u7684\u7edd\u5bf9\u8def\u5f84\uff09\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c variable = prog-to-check-for \u7684\u7edd\u5bf9\u8def\u5f84\u3002 \u8c03\u7528 AC_SUBST \u8d4b\u503c\u3002 \u6d4b\u8bd5\u7ed3\u679c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e variable \u6216\u8005 ac_cv_prog_variable \u7684\u503c\u6765\u8986\u76d6\u3002 AC_CHECK_PROGS (variable, progs-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019]) \u68c0\u67e5\u6bcf\u4e2a\u5728 progs-to-check-for \u4e2d\u7684\u7a0b\u5e8f\uff08\u4ee5\u7a7a\u683c\u5206\u9694\uff09\u5728 path \u4e2d\u662f\u5426\u5b58\u5728\u3002\u5982\u679c\u53d1\u73b0\u4e86\u4e00\u4e2a\uff0c\u8bbe\u7f6e variable \u7684\u503c\u4e3a\u8be5\u7a0b\u5e8f\u7684\u540d\u5b57\uff1b\u5426\u5219\u7ee7\u7eed\u67e5\u627e\u4e0b\u4e00\u4e2a\u3002\u5982\u679c\u90fd\u6ca1\u6709\u627e\u5230\uff0c\u8bbe\u503c\u4e3a value-if-not-found \uff1b\u5982\u679c\u8be5\u53c2\u6570\u6ca1\u6709\u6307\u5b9a\uff0c\u53d8\u91cf\u7684\u503c\u4e0d\u4f1a\u6539\u53d8\u3002 \u4f59\u4e0b\u7684\u8bf4\u660e\u540c\u4e0a\u3002 AC_CHECK_PROGS(FLEX,flex,none) AC_CHECK_TOOL (variable, prog-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019]) \u7c7b\u4f3c\u4e8e AC_CHECK_PROG \uff0c\u4f46\u662f\u9996\u5148\u67e5\u627e\u9009\u9879 --host \u6307\u5b9a\u524d\u7f00\u7684\u7a0b\u5e8f\uff0c\u4f7f\u7528 - \u8fde\u63a5\u3002 AC_CHECK_TOOL([RANLIB], [ranlib], [:]) \u8fd0\u884c\u2018configure --build=x86_64-gnu --host=i386-gnu\u2019\uff1a\u9996\u5148\u67e5\u627ei386-gnu-ranlib\uff0c\u6ca1\u6709\u518d\u67e5\u627eranlib\uff0c\u5426\u5219\u5c31\u662f:\u3002 AC_CHECK_TOOLS (variable, progs-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019]) \u5148\u67e5\u627e AC_CANONICAL_HOST \u6307\u5b9a\u524d\u7f00\u7684\u7a0b\u5e8f\uff0c\u4f7f\u7528 - \u8fde\u63a5\u3002\u5982\u679c\u6ca1\u6709\u4e00\u4e2a\u88ab\u627e\u5230\uff0c\u90a3\u4e48\u53bb\u6389\u524d\u7f00\u7ee7\u7eed\u67e5\u627e tools \u3002\u4f59\u4e0b\u7684\u8bf4\u660e\u53c2\u8003 AC_CHECK_PROGS \u3002 AC_CHECK_TOOLS(AR,[ar gar],ar) AC_PATH_PROG (variable, prog-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019]) \u68c0\u67e5\u547d\u4ee4\u662f\u5426\u5b89\u88c5\u3002\u7c7b\u4f3c\u4e8e AC_CHECK_PROG \uff0c\u68c0\u67e5 path \u4e2d\u662f\u5426\u5b58\u5728 prog-to-check-for \u3002\u533a\u522b\u5728\u4e8e\u603b\u662f\u8bbe\u7f6e variable = prog-to-check-for \u7684\u7edd\u5bf9\u8def\u5f84\u3002 \u8be5\u6d4b\u8bd5\u7ed3\u679c\u53ef\u4ee5\u901a\u8fc7\u5bf9 variable \u8d4b\u503c\u7684\u65b9\u5f0f\u6539\u53d8\u3002 \u6d4b\u8bd5\u7ed3\u679c\u88ab\u7f13\u5b58\u5728 ac_cv_path_variable \u53d8\u91cf\u4e2d\u3002 AC_PATH_PROG(LDCONFIG, ldconfig, true, [/sbin /usr/sbin $PATH]) AC_PATH_PROGS (variable, progs-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019]) \u8bf4\u660e\u53c2\u8003 AC_PATH_PROG \u3002\u6709\u4efb\u4f55\u4e00\u4e2a\u7a0b\u5e8f\u88ab\u627e\u5230\uff0c\u8d4b\u503c\u7ed9 variable \u3002 5.4 \u5e93\u6587\u4ef6 AC_CHECK_LIB (library, function, [action-if-found], [action-if-not-found], [other-libraries]) \u901a\u8fc7\u5c1d\u8bd5\u94fe\u63a5\u4e00\u4e2a\u8c03\u7528\u542b\u6709 library \u7684 function \u7684\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u6d4b\u8bd5 library \u662f\u5426\u53ef\u7528\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a action-if-found \uff0c\u9ed8\u8ba4\u7684\u64cd\u4f5c\u662f\u94fe\u63a5-l library \u5230 LIBS \u5e76\u4e14\u5b9a\u4e49'HAVE_LIB library '\uff08\u5168\u90e8\u5927\u5199\uff09\u3002 5.10 \u7f16\u8bd1\u5668\u548c\u6267\u884c\u5668 5.10.3 C\u7f16\u8bd1\u5668\u7279\u6027 AC_PROG_CC ([compiler-search-list]) \u6307\u5b9a\u4e00\u4e2aC\u7f16\u8bd1\u5668\uff0c\u5982\u679c CC \u6ca1\u6709\u5728\u73af\u5883\u4e2d\u8bbe\u7f6e\uff0c\u90a3\u4e48\u68c0\u67e5 gcc and cc \uff0c\u7136\u540e\u662f\u5176\u5b83\u7684C\u7f16\u8bd1\u5668\u3002\u8bbe\u7f6e\u627e\u5230\u7684\u7f16\u8bd1\u5668\u7ed9\u53d8\u91cf CC \u3002","title":"5.\u73b0\u6709\u6d4b\u8bd5"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#52","text":"\u8fd9\u4e9b\u5b8f\u7528\u4e8e\u68c0\u67e5\u6307\u5b9a\u7a0b\u5e8f\u7684\u5b58\u5728\u6216\u8005\u884c\u4e3a\u3002\u7ecf\u5e38\u4ece\u51e0\u4e2a\u5907\u9009\u7a0b\u5e8f\u4e2d\u9009\u62e9\u4e00\u4e2a\u51fa\u6765\u3002","title":"5.2 \u5907\u9009\u7a0b\u5e8f"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#521","text":"","title":"5.2.1 \u7279\u6b8a\u7a0b\u5e8f\u68c0\u67e5"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_prog_ln_s","text":"\u5982\u679c\u5f53\u524d\u6587\u4ef6\u7cfb\u7edf\u652f\u6301 ln -s \uff0c\u8bbe\u7f6e\u8f93\u51fa\u53d8\u91cf LN_S \u4e3a ln -s \uff1b\u5426\u5219\uff0c\u5982\u679c\u652f\u6301 ln \uff0c\u8bbe\u7f6e LN_S \u4e3a ln \uff0c\u5426\u5219\u8bbe\u7f6e\u4e3a cp -pR \u3002 AC_PROG_LN_S","title":"AC_PROG_LN_S"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#522","text":"\u8fd9\u4e9b\u5b8f\u4e0d\u4f1a\u88ab\u7279\u5b9a\u7684\u6d4b\u8bd5\u5b8f\u6240\u8986\u76d6\u3002 \u5f3a\u70c8\u5efa\u8bae\u58f0\u660e variable \u4e3a precious variable \u3002 See AC_ARG_VAR","title":"5.2.2 \u901a\u7528\u7a0b\u5e8f\u548c\u6587\u4ef6\u68c0\u67e5"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_check_prog-variable-prog-to-check-for-value-if-found-value-if-not-found-path-path-reject","text":"\u68c0\u67e5 path \u4e2d\u662f\u5426\u5b58\u624d prog-to-check-for \u3002 variable =\u5b58\u5728 ? value-if-found : value-if-not-found \u3002\u603b\u662f\u5ffd\u89c6 reject \uff08\u4e00\u4e2a\u6587\u4ef6\u540d\u7684\u7edd\u5bf9\u8def\u5f84\uff09\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c variable = prog-to-check-for \u7684\u7edd\u5bf9\u8def\u5f84\u3002 \u8c03\u7528 AC_SUBST \u8d4b\u503c\u3002 \u6d4b\u8bd5\u7ed3\u679c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e variable \u6216\u8005 ac_cv_prog_variable \u7684\u503c\u6765\u8986\u76d6\u3002","title":"AC_CHECK_PROG (variable, prog-to-check-for, value-if-found, [value-if-not-found], [path = \u2018$PATH\u2019], [reject])"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_check_progs-variable-progs-to-check-for-value-if-not-found-path-path","text":"\u68c0\u67e5\u6bcf\u4e2a\u5728 progs-to-check-for \u4e2d\u7684\u7a0b\u5e8f\uff08\u4ee5\u7a7a\u683c\u5206\u9694\uff09\u5728 path \u4e2d\u662f\u5426\u5b58\u5728\u3002\u5982\u679c\u53d1\u73b0\u4e86\u4e00\u4e2a\uff0c\u8bbe\u7f6e variable \u7684\u503c\u4e3a\u8be5\u7a0b\u5e8f\u7684\u540d\u5b57\uff1b\u5426\u5219\u7ee7\u7eed\u67e5\u627e\u4e0b\u4e00\u4e2a\u3002\u5982\u679c\u90fd\u6ca1\u6709\u627e\u5230\uff0c\u8bbe\u503c\u4e3a value-if-not-found \uff1b\u5982\u679c\u8be5\u53c2\u6570\u6ca1\u6709\u6307\u5b9a\uff0c\u53d8\u91cf\u7684\u503c\u4e0d\u4f1a\u6539\u53d8\u3002 \u4f59\u4e0b\u7684\u8bf4\u660e\u540c\u4e0a\u3002 AC_CHECK_PROGS(FLEX,flex,none)","title":"AC_CHECK_PROGS (variable, progs-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019])"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_check_tool-variable-prog-to-check-for-value-if-not-found-path-path","text":"\u7c7b\u4f3c\u4e8e AC_CHECK_PROG \uff0c\u4f46\u662f\u9996\u5148\u67e5\u627e\u9009\u9879 --host \u6307\u5b9a\u524d\u7f00\u7684\u7a0b\u5e8f\uff0c\u4f7f\u7528 - \u8fde\u63a5\u3002 AC_CHECK_TOOL([RANLIB], [ranlib], [:]) \u8fd0\u884c\u2018configure --build=x86_64-gnu --host=i386-gnu\u2019\uff1a\u9996\u5148\u67e5\u627ei386-gnu-ranlib\uff0c\u6ca1\u6709\u518d\u67e5\u627eranlib\uff0c\u5426\u5219\u5c31\u662f:\u3002","title":"AC_CHECK_TOOL (variable, prog-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019])"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_check_tools-variable-progs-to-check-for-value-if-not-found-path-path","text":"\u5148\u67e5\u627e AC_CANONICAL_HOST \u6307\u5b9a\u524d\u7f00\u7684\u7a0b\u5e8f\uff0c\u4f7f\u7528 - \u8fde\u63a5\u3002\u5982\u679c\u6ca1\u6709\u4e00\u4e2a\u88ab\u627e\u5230\uff0c\u90a3\u4e48\u53bb\u6389\u524d\u7f00\u7ee7\u7eed\u67e5\u627e tools \u3002\u4f59\u4e0b\u7684\u8bf4\u660e\u53c2\u8003 AC_CHECK_PROGS \u3002 AC_CHECK_TOOLS(AR,[ar gar],ar)","title":"AC_CHECK_TOOLS (variable, progs-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019])"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_path_prog-variable-prog-to-check-for-value-if-not-found-path-path","text":"\u68c0\u67e5\u547d\u4ee4\u662f\u5426\u5b89\u88c5\u3002\u7c7b\u4f3c\u4e8e AC_CHECK_PROG \uff0c\u68c0\u67e5 path \u4e2d\u662f\u5426\u5b58\u5728 prog-to-check-for \u3002\u533a\u522b\u5728\u4e8e\u603b\u662f\u8bbe\u7f6e variable = prog-to-check-for \u7684\u7edd\u5bf9\u8def\u5f84\u3002 \u8be5\u6d4b\u8bd5\u7ed3\u679c\u53ef\u4ee5\u901a\u8fc7\u5bf9 variable \u8d4b\u503c\u7684\u65b9\u5f0f\u6539\u53d8\u3002 \u6d4b\u8bd5\u7ed3\u679c\u88ab\u7f13\u5b58\u5728 ac_cv_path_variable \u53d8\u91cf\u4e2d\u3002 AC_PATH_PROG(LDCONFIG, ldconfig, true, [/sbin /usr/sbin $PATH])","title":"AC_PATH_PROG (variable, prog-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019])"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_path_progs-variable-progs-to-check-for-value-if-not-found-path-path","text":"\u8bf4\u660e\u53c2\u8003 AC_PATH_PROG \u3002\u6709\u4efb\u4f55\u4e00\u4e2a\u7a0b\u5e8f\u88ab\u627e\u5230\uff0c\u8d4b\u503c\u7ed9 variable \u3002","title":"AC_PATH_PROGS (variable, progs-to-check-for, [value-if-not-found], [path = \u2018$PATH\u2019])"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#54","text":"","title":"5.4 \u5e93\u6587\u4ef6"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_check_lib-library-function-action-if-found-action-if-not-found-other-libraries","text":"\u901a\u8fc7\u5c1d\u8bd5\u94fe\u63a5\u4e00\u4e2a\u8c03\u7528\u542b\u6709 library \u7684 function \u7684\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u6d4b\u8bd5 library \u662f\u5426\u53ef\u7528\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a action-if-found \uff0c\u9ed8\u8ba4\u7684\u64cd\u4f5c\u662f\u94fe\u63a5-l library \u5230 LIBS \u5e76\u4e14\u5b9a\u4e49'HAVE_LIB library '\uff08\u5168\u90e8\u5927\u5199\uff09\u3002","title":"AC_CHECK_LIB (library, function, [action-if-found], [action-if-not-found], [other-libraries])"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#510","text":"","title":"5.10 \u7f16\u8bd1\u5668\u548c\u6267\u884c\u5668"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#5103-c","text":"","title":"5.10.3 C\u7f16\u8bd1\u5668\u7279\u6027"},{"location":"autoconf/5.\u73b0\u6709\u6d4b\u8bd5/#ac_prog_cc-compiler-search-list","text":"\u6307\u5b9a\u4e00\u4e2aC\u7f16\u8bd1\u5668\uff0c\u5982\u679c CC \u6ca1\u6709\u5728\u73af\u5883\u4e2d\u8bbe\u7f6e\uff0c\u90a3\u4e48\u68c0\u67e5 gcc and cc \uff0c\u7136\u540e\u662f\u5176\u5b83\u7684C\u7f16\u8bd1\u5668\u3002\u8bbe\u7f6e\u627e\u5230\u7684\u7f16\u8bd1\u5668\u7ed9\u53d8\u91cf CC \u3002","title":"AC_PROG_CC ([compiler-search-list])"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/","text":"\u8fd9\u4e9b\u5b8f\u68c0\u67e5\u5f53\u524d\u8bed\u8a00\u7684\u7f16\u8bd1\u7cfb\u7edf\u7684\u8f93\u51fa\u3002\u4ed6\u4eec\u4e0d\u4f1a\u7f13\u5b58\u68c0\u67e5\u7ed3\u679c\uff0c\u4e5f\u4e0d\u4f1a\u6253\u5370\u4efb\u4f55\u4fe1\u606f\u3002\u5bf9\u4e8e\u7279\u5b9a\u529f\u80fd\u7684\u68c0\u67e5\u4f1a\u8c03\u7528\u8fd9\u4e9b\u5b8f\uff0c\u7136\u540e\u7f13\u5b58\u7ed3\u679c\u5e76\u6253\u5370\u4fe1\u606f\u3002 6.1 \u8bed\u8a00\u9009\u62e9 configure\u9ed8\u8ba4\u4e3aC\u8bed\u8a00\u68c0\u67e5\u7f16\u8bd1\u5668\u53ca\u5176\u7279\u6027\u3002 AC_LANG (language) \u2018C\u2019 Do compilation tests using CC and CPP and use extension .c for test programs. Use compilation flags: CPPFLAGS with CPP, and both CPPFLAGS and CFLAGS with CC. \u2018C++\u2019 Do compilation tests using CXX and CXXCPP and use extension .C for test programs. Use compilation flags: CPPFLAGS with CXXCPP, and both CPPFLAGS and CXXFLAGS with CXX. \u2018Fortran 77\u2019 Do compilation tests using F77 and use extension .f for test programs. Use compilation flags: FFLAGS. \u2018Fortran\u2019 Do compilation tests using FC and use extension .f (or whatever has been set by AC_FC_SRCEXT) for test programs. Use compilation flags: FCFLAGS. \u2018Erlang\u2019 Compile and execute tests using ERLC and ERL and use extension .erl for test Erlang modules. Use compilation flags: ERLCFLAGS. \u2018Objective C\u2019 Do compilation tests using OBJC and OBJCPP and use extension .m for test programs. Use compilation flags: CPPFLAGS with OBJCPP, and both CPPFLAGS and OBJCFLAGS with OBJC. \u2018Objective C++\u2019 Do compilation tests using OBJCXX and OBJCXXCPP and use extension .mm for test programs. Use compilation flags: CPPFLAGS with OBJCXXCPP, and both CPPFLAGS and OBJCXXFLAGS with OBJCXX. \u2018Go\u2019 Do compilation tests using GOC and use extension .go for test programs. Use compilation flags GOFLAGS. 6.2 \u7f16\u5199\u6d4b\u8bd5\u7a0b\u5e8f feed some program with some input, and most of the time, feed a compiler with some source file. 6.2.1 \u6d4b\u8bd5\u7a0b\u5e8f\u6307\u5bfc \u6d4b\u8bd5\u7a0b\u5e8f\u5fc5\u987b\u548c\u771f\u6b63\u7684\u7a0b\u5e8f\u4e00\u6837\u4e25\u683c\u3002 \u6d4b\u8bd5\u7a0b\u5e8f\u4e0d\u5e94\u8be5\u5199\u5230\u6807\u51c6\u8f93\u51fa\u3002\u5efa\u8bae\uff1a\u6d4b\u8bd5\u6210\u529f\u9000\u51fa\u72b6\u6001\u4e3a0\uff0c\u5426\u5219\u72b6\u6001\u4e3a1\uff0c\u6bb5\u9519\u8bef\u548c\u5176\u5b83\u7c7b\u4f3c\u9519\u8bef\u9000\u51fa\u72b6\u6001\u4e3a\u975e\u96f6\u503c\u3002 \u5982\u679c\u6d4b\u8bd5\u7a0b\u5e8f\u9700\u8981\u4f7f\u7528\u6216\u521b\u5efa\u6570\u636e\u6587\u4ef6\uff0c\u8ba9\u5b83\u7684\u540d\u5b57\u4ee5 conftest \u5f00\u5934\uff0c\u6bd4\u5982conftest.data\u3002\u6d4b\u8bd5\u7a0b\u5e8f\u8fd0\u884c\u5b8c\u6bd5\u540e\u6216\u8005\u4e2d\u65ad\u4e86\uff0cconfigure\u4f1a\u6e05\u7406\u8fd9\u4e9b\u6570\u636e\u6587\u4ef6\u3002 6.2.3 \u751f\u6210\u6e90 AC_LANG_CONFTEST (source) \u4fdd\u5b58 source \u6587\u672c\u5230\u5f53\u524d\u6d4b\u8bd5\u7684\u6e90\u6587\u4ef6\uff1aconftest. extension \uff0c extension \u53d6\u51b3\u4e8e\u5f53\u524d\u8bed\u8a00\u3002\u6e90\u6587\u4ef6\u4e5f\u5305\u62ec\u6240\u6709\u5230\u6b64\u4e3a\u6b62\u7684 AC_DEFINE \u7684\u6267\u884c\u7ed3\u679c\u3002 source \u4e5f\u53ef\u4ee5\u5305\u62ec\u5f15\u7528\u3002 AC_LANG_DEFINES_PROVIDED \u4e3a\u5f53\u524d\u8bed\u8a00\u9002\u914d\u5b8c\u6210\u7684 conftest.extension \u7684\u89c1\u8bc1\u5b8f\uff0c\u5305\u62ec\u6240\u6709\u5148\u524d\u7684 AC_DEFINE \u7684\u6267\u884c\u7ed3\u679c\u3002 AC_LANG_SOURCE (source) \u5c06\u76ee\u524d\u4e3a\u6b62\u6240\u6709\u6267\u884c\u5230 AC_DEFINE \u7684\u5b9a\u4e49\u6269\u5c55\u5230 source \u3002\u6b64\u5b8f\u5305\u542b\u4e86 AC_LANG_DEFINES_PROVIDED \u7684\u6269\u5c55\u3002 configure.ac: AC_INIT([Hello], [1.0], [bug-hello@example.org], [], [http://www.example.org/]) AC_DEFINE([HELLO_WORLD], [ Hello, World\\n ], [Greetings string.]) AC_LANG([C]) AC_LANG_CONFTEST( [AC_LANG_SOURCE([[const char hw[] = Hello, World\\n ;]])]) gcc -E -dD conftest.c on a system with gcc installed, results in: # 1 conftest.c #define PACKAGE_NAME Hello #define PACKAGE_TARNAME hello #define PACKAGE_VERSION 1.0 #define PACKAGE_STRING Hello 1.0 #define PACKAGE_BUGREPORT bug-hello@example.org #define PACKAGE_URL http://www.example.org/ #define HELLO_WORLD Hello, World\\n const char hw[] = Hello, World\\n ; AC_LANG_PROGRAM (prologue, body) \u6269\u5c55\u4e3a\u5305\u542b prologue \u7684\u6e90\u6587\u4ef6\uff0c body \u4f5c\u4e3amain\u51fd\u6570\u7684\u65b9\u6cd5\u4f53\u3002\u4ee5\u4e3a\u4f7f\u7528\u5230\u4e86 AC_LANG_SOURCE \uff0c\u6240\u6709\u540e\u8005\u7684\u7279\u6027\u4e5f\u4f1a\u4f53\u73b0\u51fa\u6765\u3002 configure.ac: AC_INIT([Hello], [1.0], [bug-hello@example.org], [], [http://www.example.org/]) AC_DEFINE([HELLO_WORLD], [ Hello, World\\n ], [Greetings string.]) AC_LANG_CONFTEST( [AC_LANG_PROGRAM([[const char hw[] = Hello, World\\n ;]], [[fputs (hw, stdout);]])]) gcc -E -dD conftest.c on a system with gcc installed, results in: # 1 conftest.c #define PACKAGE_NAME Hello #define PACKAGE_TARNAME hello #define PACKAGE_VERSION 1.0 #define PACKAGE_STRING Hello 1.0 #define PACKAGE_BUGREPORT bug-hello@example.org #define PACKAGE_URL http://www.example.org/ #define HELLO_WORLD Hello, World\\n const char hw[] = Hello, World\\n ; int main () { fputs (hw, stdout); ; return 0; } 6.5 \u8fd0\u884c\u94fe\u63a5 \u4e3a\u4e86\u68c0\u67e5\u5e93\u3001\u51fd\u6570\u3001\u5168\u5c40\u53d8\u91cf\uff0cconfigure\u4f1a\u5c1d\u8bd5\u7f16\u8bd1\u548c\u94fe\u63a5\u4f7f\u7528\u5230\u7684\u7a0b\u5e8f\u3002 AC_LINK_IFELSE (input, [action-if-true], [action-if-false]) \u5728 input \u4e2d\u8fd0\u884c\u7f16\u8bd1\u5668\u53ca\u5176flags\u548c\u7684\u5f53\u524d\u8bed\u8a00\u7684\u8fde\u63a5\u5668\uff0c\u6210\u529f\u7684\u8bdd\u6267\u884cshell\u547d\u4ee4 action-if-true \uff0c\u5426\u5219\u6267\u884c action-if-false \u3002 AC_MSG_CHECKING([whether $CC works]) AC_LINK_IFELSE([AC_LANG_PROGRAM()],AC_MSG_RESULT([yes]), [AC_MSG_RESULT([no]) AC_MSG_ERROR([Cannot build a 32-bit program, you need to install 32-bit development libraries.])])","title":"6.\u7f16\u5199\u6d4b\u8bd5"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#61","text":"configure\u9ed8\u8ba4\u4e3aC\u8bed\u8a00\u68c0\u67e5\u7f16\u8bd1\u5668\u53ca\u5176\u7279\u6027\u3002","title":"6.1 \u8bed\u8a00\u9009\u62e9"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#ac_lang-language","text":"\u2018C\u2019 Do compilation tests using CC and CPP and use extension .c for test programs. Use compilation flags: CPPFLAGS with CPP, and both CPPFLAGS and CFLAGS with CC. \u2018C++\u2019 Do compilation tests using CXX and CXXCPP and use extension .C for test programs. Use compilation flags: CPPFLAGS with CXXCPP, and both CPPFLAGS and CXXFLAGS with CXX. \u2018Fortran 77\u2019 Do compilation tests using F77 and use extension .f for test programs. Use compilation flags: FFLAGS. \u2018Fortran\u2019 Do compilation tests using FC and use extension .f (or whatever has been set by AC_FC_SRCEXT) for test programs. Use compilation flags: FCFLAGS. \u2018Erlang\u2019 Compile and execute tests using ERLC and ERL and use extension .erl for test Erlang modules. Use compilation flags: ERLCFLAGS. \u2018Objective C\u2019 Do compilation tests using OBJC and OBJCPP and use extension .m for test programs. Use compilation flags: CPPFLAGS with OBJCPP, and both CPPFLAGS and OBJCFLAGS with OBJC. \u2018Objective C++\u2019 Do compilation tests using OBJCXX and OBJCXXCPP and use extension .mm for test programs. Use compilation flags: CPPFLAGS with OBJCXXCPP, and both CPPFLAGS and OBJCXXFLAGS with OBJCXX. \u2018Go\u2019 Do compilation tests using GOC and use extension .go for test programs. Use compilation flags GOFLAGS.","title":"AC_LANG (language)"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#62","text":"feed some program with some input, and most of the time, feed a compiler with some source file.","title":"6.2 \u7f16\u5199\u6d4b\u8bd5\u7a0b\u5e8f"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#621","text":"\u6d4b\u8bd5\u7a0b\u5e8f\u5fc5\u987b\u548c\u771f\u6b63\u7684\u7a0b\u5e8f\u4e00\u6837\u4e25\u683c\u3002 \u6d4b\u8bd5\u7a0b\u5e8f\u4e0d\u5e94\u8be5\u5199\u5230\u6807\u51c6\u8f93\u51fa\u3002\u5efa\u8bae\uff1a\u6d4b\u8bd5\u6210\u529f\u9000\u51fa\u72b6\u6001\u4e3a0\uff0c\u5426\u5219\u72b6\u6001\u4e3a1\uff0c\u6bb5\u9519\u8bef\u548c\u5176\u5b83\u7c7b\u4f3c\u9519\u8bef\u9000\u51fa\u72b6\u6001\u4e3a\u975e\u96f6\u503c\u3002 \u5982\u679c\u6d4b\u8bd5\u7a0b\u5e8f\u9700\u8981\u4f7f\u7528\u6216\u521b\u5efa\u6570\u636e\u6587\u4ef6\uff0c\u8ba9\u5b83\u7684\u540d\u5b57\u4ee5 conftest \u5f00\u5934\uff0c\u6bd4\u5982conftest.data\u3002\u6d4b\u8bd5\u7a0b\u5e8f\u8fd0\u884c\u5b8c\u6bd5\u540e\u6216\u8005\u4e2d\u65ad\u4e86\uff0cconfigure\u4f1a\u6e05\u7406\u8fd9\u4e9b\u6570\u636e\u6587\u4ef6\u3002","title":"6.2.1 \u6d4b\u8bd5\u7a0b\u5e8f\u6307\u5bfc"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#623","text":"","title":"6.2.3 \u751f\u6210\u6e90"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#ac_lang_conftest-source","text":"\u4fdd\u5b58 source \u6587\u672c\u5230\u5f53\u524d\u6d4b\u8bd5\u7684\u6e90\u6587\u4ef6\uff1aconftest. extension \uff0c extension \u53d6\u51b3\u4e8e\u5f53\u524d\u8bed\u8a00\u3002\u6e90\u6587\u4ef6\u4e5f\u5305\u62ec\u6240\u6709\u5230\u6b64\u4e3a\u6b62\u7684 AC_DEFINE \u7684\u6267\u884c\u7ed3\u679c\u3002 source \u4e5f\u53ef\u4ee5\u5305\u62ec\u5f15\u7528\u3002","title":"AC_LANG_CONFTEST (source)"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#ac_lang_defines_provided","text":"\u4e3a\u5f53\u524d\u8bed\u8a00\u9002\u914d\u5b8c\u6210\u7684 conftest.extension \u7684\u89c1\u8bc1\u5b8f\uff0c\u5305\u62ec\u6240\u6709\u5148\u524d\u7684 AC_DEFINE \u7684\u6267\u884c\u7ed3\u679c\u3002","title":"AC_LANG_DEFINES_PROVIDED"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#ac_lang_source-source","text":"\u5c06\u76ee\u524d\u4e3a\u6b62\u6240\u6709\u6267\u884c\u5230 AC_DEFINE \u7684\u5b9a\u4e49\u6269\u5c55\u5230 source \u3002\u6b64\u5b8f\u5305\u542b\u4e86 AC_LANG_DEFINES_PROVIDED \u7684\u6269\u5c55\u3002 configure.ac: AC_INIT([Hello], [1.0], [bug-hello@example.org], [], [http://www.example.org/]) AC_DEFINE([HELLO_WORLD], [ Hello, World\\n ], [Greetings string.]) AC_LANG([C]) AC_LANG_CONFTEST( [AC_LANG_SOURCE([[const char hw[] = Hello, World\\n ;]])]) gcc -E -dD conftest.c on a system with gcc installed, results in: # 1 conftest.c #define PACKAGE_NAME Hello #define PACKAGE_TARNAME hello #define PACKAGE_VERSION 1.0 #define PACKAGE_STRING Hello 1.0 #define PACKAGE_BUGREPORT bug-hello@example.org #define PACKAGE_URL http://www.example.org/ #define HELLO_WORLD Hello, World\\n const char hw[] = Hello, World\\n ;","title":"AC_LANG_SOURCE (source)"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#ac_lang_program-prologue-body","text":"\u6269\u5c55\u4e3a\u5305\u542b prologue \u7684\u6e90\u6587\u4ef6\uff0c body \u4f5c\u4e3amain\u51fd\u6570\u7684\u65b9\u6cd5\u4f53\u3002\u4ee5\u4e3a\u4f7f\u7528\u5230\u4e86 AC_LANG_SOURCE \uff0c\u6240\u6709\u540e\u8005\u7684\u7279\u6027\u4e5f\u4f1a\u4f53\u73b0\u51fa\u6765\u3002 configure.ac: AC_INIT([Hello], [1.0], [bug-hello@example.org], [], [http://www.example.org/]) AC_DEFINE([HELLO_WORLD], [ Hello, World\\n ], [Greetings string.]) AC_LANG_CONFTEST( [AC_LANG_PROGRAM([[const char hw[] = Hello, World\\n ;]], [[fputs (hw, stdout);]])]) gcc -E -dD conftest.c on a system with gcc installed, results in: # 1 conftest.c #define PACKAGE_NAME Hello #define PACKAGE_TARNAME hello #define PACKAGE_VERSION 1.0 #define PACKAGE_STRING Hello 1.0 #define PACKAGE_BUGREPORT bug-hello@example.org #define PACKAGE_URL http://www.example.org/ #define HELLO_WORLD Hello, World\\n const char hw[] = Hello, World\\n ; int main () { fputs (hw, stdout); ; return 0; }","title":"AC_LANG_PROGRAM (prologue, body)"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#65","text":"\u4e3a\u4e86\u68c0\u67e5\u5e93\u3001\u51fd\u6570\u3001\u5168\u5c40\u53d8\u91cf\uff0cconfigure\u4f1a\u5c1d\u8bd5\u7f16\u8bd1\u548c\u94fe\u63a5\u4f7f\u7528\u5230\u7684\u7a0b\u5e8f\u3002","title":"6.5 \u8fd0\u884c\u94fe\u63a5"},{"location":"autoconf/6.\u7f16\u5199\u6d4b\u8bd5/#ac_link_ifelse-input-action-if-true-action-if-false","text":"\u5728 input \u4e2d\u8fd0\u884c\u7f16\u8bd1\u5668\u53ca\u5176flags\u548c\u7684\u5f53\u524d\u8bed\u8a00\u7684\u8fde\u63a5\u5668\uff0c\u6210\u529f\u7684\u8bdd\u6267\u884cshell\u547d\u4ee4 action-if-true \uff0c\u5426\u5219\u6267\u884c action-if-false \u3002 AC_MSG_CHECKING([whether $CC works]) AC_LINK_IFELSE([AC_LANG_PROGRAM()],AC_MSG_RESULT([yes]), [AC_MSG_RESULT([no]) AC_MSG_ERROR([Cannot build a 32-bit program, you need to install 32-bit development libraries.])])","title":"AC_LINK_IFELSE (input, [action-if-true], [action-if-false])"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/","text":"\u4e00\u65e6configure\u786e\u5b9a\u4e86\u54ea\u4e9b\u529f\u80fd\u5b58\u5728\uff0c\u5b83\u80fd\u505a\u4ec0\u4e48\u6765\u8bb0\u5f55\u4fe1\u606f\u5462\uff1f \u5b9a\u4e49\u4e00\u4e2aC\u5904\u7406\u5668\u6807\u8bc6 \u5728\u8f93\u51fa\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e00\u4e2a\u53d8\u91cf \u5c06configure\u8fd0\u884c\u7684\u529f\u80fd\u7684\u7ed3\u679c\u4fdd\u5b58\u5728\u4e00\u4e2a\u7f13\u5b58\u6587\u4ef6\u4e2d \u6253\u5370\u4fe1\u606f\u8ba9\u7528\u6237\u77e5\u9053\u6d4b\u8bd5\u7ed3\u679c 7.1 \u5b9a\u4e49C\u5904\u7406\u5668\u6807\u8bc6 \u5bf9\u6709\u54cd\u5e94\u7684\u529f\u80fd\u6d4b\u8bd5\u7684\u666e\u901a\u505a\u6cd5\u5c31\u662f\u5b9a\u4e49\u4e00\u4e2aC\u5904\u7406\u5668\u6807\u8bc6\u6765\u8bf4\u660e\u6d4b\u8bd5\u7ed3\u679c\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c AC_OUPUT \u5c06\u8fd9\u4e9b\u5b8f\u5b9a\u4e49\u7684\u6807\u8bc6\u653e\u5728\u8f93\u51fa\u53d8\u91cf DEFS \u4e2d\u3002\u4f46\u662f\uff0c\u5982\u679c\u4f7f\u7528\u4e86 AC_CONFIG_HEADERS \uff0c\u5c06\u4f1a\u4ee3\u66ff\u521b\u5efa DEFS \u3002 AC_DEFINE (variable, value, [description]) AC_DEFINE (variable) \u901a\u8fc7\u5b9a\u4e49C\u5904\u7406\u5668\u7684\u5b8f\u6765\u5b9a\u4e49 variable \u4e3a value \uff0c\u53ef\u9009\u5730\u5e26\u4e0a\u62ec\u53f7\u53c2\u6570\u5217\u8868\u4ee5\u5904\u7406\u5e26\u53c2\u7684C\u5b8f\u3002\u5982\u679c\u5b8f\u7684\u53c2\u6570\u5217\u8868\u5b58\u5728\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\uff0c\u53ef\u80fd\u4f7f\u7528 ... \u7ed3\u675f\u3002 description \u53ea\u5728\u4f7f\u7528 AC_CONFIG_HEADERS \u65f6\u6709\u7528\uff0c\u4f5c\u4e3a\u6ce8\u91ca\u653e\u5728config.h.in\u4e2d\u3002 \u4f20\u53c2\u53ea\u6709 variable \u65f6\uff0c\u9ed8\u8ba4 value \u4e3a 1 \u3002 AC_DEFINE([PACKAGE_URL], [ https://www.winehq.org ], [Define to the home page for this package.] AC_DEFINE_UNQUOTED (variable, value, [description]) AC_DEFINE_UNQUOTED (variable) \u7c7b\u4f3c\u4e8e AC_DEFINE \uff0c\u4f46\u662f\u53ef\u4ee5\u4f7f\u7528\uff1a\u5f15\u7528\uff08$\uff09\u3001\u8c03\u7528\uff08``\uff09\u3001\u53cd\u659c\u6760\uff08\\\uff09\u3002 AC_DEFINE_UNQUOTED([GETGROUPS_T], [$ac_cv_type_getgroups], [getgroups return type.]) note \uff1a\u5728\u5176\u4ed6\u5b8f\u6216\u8005shell\u4ee3\u7801\u8c03\u7528\u8fd9\u4e24\u4e2a\u5b8f\u7684\u65f6\u5019\uff0c\u4e0d\u8981\u4f7f\u7528\u5206\u53f7\u6765\u5206\u5272 AC_DEFINE \u548c AC_DEFINE_UNQUOTED \u7684\u8bed\u53e5\uff0c\u4f7f\u7528\u7a7a\u683c\u6216\u8005\u6362\u884c\u3002 do this: AC_CHECK_HEADER([elf.h], [AC_DEFINE([SVR4], [1], [System V Release 4]) LIBS= -lelf $LIBS ]) or this: AC_CHECK_HEADER([elf.h], [AC_DEFINE([SVR4], [1], [System V Release 4]) LIBS= -lelf $LIBS ]) instead of this: AC_CHECK_HEADER([elf.h], [AC_DEFINE([SVR4], [1], [System V Release 4]); LIBS= -lelf $LIBS ]) 7.2 \u8bbe\u7f6e\u8f93\u51fa\u53d8\u91cf \u9664\u4e86\u9884\u7f6e\u8f93\u51fa\u53d8\u91cf\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u4e2a\u5b8f\u6765\u8bbe\u7f6e\u8f93\u51fa\u53d8\u91cf\u3002 AC_SUBST (variable, [value]) \u4eceshell\u53d8\u91cf\u521b\u5efa\u8f93\u51fa\u53d8\u91cf\u3002\u4f7f AC_OUTPUT \u66ff\u6362\u53d8\u91cf variable \u7684\u503c\u5230\u8f93\u51fa\u6587\u4ef6\u4e2d\uff08\u4e00\u822c\u662fMakefile\u6587\u4ef6\uff09\u3002\u610f\u601d\u5c31\u662f AC_OUTPUT \u4f7f\u7528shell\u53d8\u91cf variable \u7684\u503c\u66ff\u6362\u8f93\u5165\u6587\u4ef6\uff08Makefile.in\uff09\u7684 @variable@ \u5230\u8f93\u51fa\u6587\u4ef6\uff08Makefile\uff09\u3002\u5982\u679c\u503c\u662f\u65b0\u884c\uff0c\u8003\u8651\u4f7f\u7528 AM_SUBST_NOTMAKE \u9632\u6b62automake\u6dfb\u52a0 variable = @variable@ \u5230Makefile.in\u6587\u4ef6\u3002 AC_SUBST([PACKAGE_RELEASE], [m4_esyscmd([build-aux/pkg-version --release])]) configure\u5bf9\u5e94\u7684\u8bed\u53e5 PACKAGE_RELEASE=44.gitb50346e AC_SUBST_FILE (variable) \u8ba9 AC_OUTPUT \u63d2\u5165\uff08\u6ca1\u6709\u66ff\u6362\uff09\u6587\u4ef6\uff08shell\u53d8\u91cf variable \uff09\u5185\u5bb9\u5230\u8f93\u51fa\u6587\u4ef6\u3002 configure.ac: AC_SUBST_FILE([host_frag]) host_frag=$srcdir/conf/sun4.mh and then a Makefile.in could contain: @host_frag@ \u80fd\u591f\u5bf9\u8f93\u51fa\u7ed3\u679c\u9020\u6210\u5f71\u54cd\u7684\u73af\u5883\u53d8\u91cf\uff08\u6bd4\u5982CC\uff09\uff0c\u79f0\u4f5c precious variable \uff0c\u901a\u8fc7 AC_ARG_VAR \u58f0\u660e\u3002 AC_ARG_VAR (variable, description) \u58f0\u660e variable \u662f precious variable \uff0c\u5c06\u5b83\u7684\u63cf\u8ff0\u653e\u5165\u53d8\u91cf\u7684\u5e2e\u52a9\u6587\u6863\u90e8\u5206 ./configure --help \u3002 precious variable \u610f\u5473\u7740\uff1a \u901a\u8fc7 AC_SUBST \u66ff\u6362 variable configure\u8fd0\u884c\u7684\u65f6\u5019 variable \u7684\u503c\u88ab\u4fdd\u5b58\u5230\u7f13\u5b58\u4e2d\uff0c\u5305\u62ec\u6ca1\u6709\u901a\u8fc7\u547d\u4ee4\u884c\u800c\u662f\u901a\u8fc7\u73af\u5883\u6307\u5b9a\u7684\u60c5\u51b5\u3002 \u6ce8\u610f \uff1a\u4fdd\u5b58\u7684\u662f variable \u7684\u521d\u59cb\u5316\u7684\u503c\uff0c\u800c\u4e0d\u662f\u5728\u6267\u884cconfigure\u7684\u65f6\u5019\u627e\u5230\u7684\u503c\u3002 \u5728\u8fd0\u884c\u4e24\u6b21configure\u7684\u65f6\u5019\u6267\u884c\u4e00\u81f4\u6027\u68c0\u67e5\u3002 \u5728\u81ea\u52a8\u91cd\u65b0\u914d\u7f6e\u7684\u65f6\u5019\u4fdd\u7559\u53d8\u91cf\uff0c\u5c31\u597d\u50cf\u4f5c\u4e3a\u547d\u4ee4\u884c\u53c2\u6570\u4f20\u5165\u4e00\u6837\u3002\u5305\u62ec\u6ca1\u6709\u4f7f\u7528\u7f13\u5b58\u7684\u60c5\u51b5\u3002 7.4 \u7f13\u5b58\u7ed3\u679c \u4e3a\u4e86\u907f\u514d\u5728\u591a\u4e2aconfigure\u811a\u672c\u4e2d\u91cd\u590d\u68c0\u67e5\u4e00\u4e2a\u529f\u80fd\u6216\u8005\u5728\u4e00\u4e2a\u811a\u672c\u4e2d\u91cd\u590d\u8fd0\u884c\uff0c\u53ef\u9009\u5730\u5c06\u6d4b\u8bd5\u7ed3\u679c\u4fdd\u5b58\u5230\u4e00\u4e2a cache file \u3002 AC_CACHE_VAL (cache-id, commands-to-set-it) \u786e\u4fdd cache-id \u6807\u8bc6\u7684\u68c0\u67e5\u7ed3\u679c\u53ef\u7528\u3002\u5982\u679c\u68c0\u67e5\u7ed3\u679c\u518d\u7f13\u5b58\u6587\u4ef6\u4e2d\u88ab\u8bfb\u53d6\u4e86\uff0c\u6253\u5370\u7ed3\u679c\u88ab\u8bfb\u53d6\u7684\u4fe1\u606f\uff1b\u5426\u5219\u6267\u884cshell\u547d\u4ee4 commands-to-set-it \u3002 AC_CACHE_CHECK (message, cache-id, commands-to-set-it) \u5bf9 AC_CACHE_VAL \u5c01\u88c5\uff0c\u5173\u5fc3\u6253\u5370\u4fe1\u606f\u3002\u5b83\u4e3a message \u8c03\u7528 AC_MSG_CHECKING \uff0c\u5e26\u53c2 cache-id\u3001commands \u8c03\u7528 AC_CACHE_VAL \uff0c\u5e26\u53c2 cache-id \u8c03\u7528 AC_MSG_RESULT \u3002 7.5 \u8f93\u51fa\u4fe1\u606f AC_MSG_CHECKING (feature-description) \u63d0\u793a\u7528\u6237configure\u6b63\u5728\u68c0\u67e5\u4e00\u4e2a\u7279\u5b9a\u7684\u529f\u80fd\u3002\u5fc5\u987b\u540e\u8ddf AC_MSG_RESULT \u6253\u5370\u68c0\u67e5\u7ed3\u679c\u548c\u6362\u884c\u3002 --quiet \u548c --silent \u9009\u9879\u4e0d\u4f1a\u6253\u5370\u3002 AC_MSG_CHECKING($PYTHON_NAME module: $1) $THIS_MODULE_PYTHON -c import $1 2 /dev/null if test $? -eq 0; then AC_MSG_RESULT(yes) else AC_MSG_RESULT(no) AC_MSG_RESULT (result-description) \u63d0\u793a\u7528\u6237\u68c0\u67e5\u7684\u7ed3\u679c\uff0c result-description \u4e00\u822c\u662f \u2018yes\u2019, \u2018no\u2019, or a file name \u3002 AC_MSG_WARN (problem-description) \u53d1\u51fa\u8b66\u544a\uff0c\u6253\u5370\u4fe1\u606f\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002 AC_MSG_WARN([pyflakes not found]) AC_MSG_ERROR (error-description, [exit-status = \u2018$?/1\u2019]) \u63d0\u793a\u4e00\u4e2a\u9519\u8bef\uff0c\u7ec8\u6b62configure\u3002 $? \u662f\u9ed8\u8ba4\u7684\uff0c\u9664\u975e0\u53d8\u4e3a\u4e861\u3002 ???","title":"7.\u6d4b\u8bd5\u7ed3\u679c"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#71-c","text":"\u5bf9\u6709\u54cd\u5e94\u7684\u529f\u80fd\u6d4b\u8bd5\u7684\u666e\u901a\u505a\u6cd5\u5c31\u662f\u5b9a\u4e49\u4e00\u4e2aC\u5904\u7406\u5668\u6807\u8bc6\u6765\u8bf4\u660e\u6d4b\u8bd5\u7ed3\u679c\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c AC_OUPUT \u5c06\u8fd9\u4e9b\u5b8f\u5b9a\u4e49\u7684\u6807\u8bc6\u653e\u5728\u8f93\u51fa\u53d8\u91cf DEFS \u4e2d\u3002\u4f46\u662f\uff0c\u5982\u679c\u4f7f\u7528\u4e86 AC_CONFIG_HEADERS \uff0c\u5c06\u4f1a\u4ee3\u66ff\u521b\u5efa DEFS \u3002","title":"7.1 \u5b9a\u4e49C\u5904\u7406\u5668\u6807\u8bc6"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_define-variable-value-description","text":"","title":"AC_DEFINE (variable, value, [description])"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_define-variable","text":"\u901a\u8fc7\u5b9a\u4e49C\u5904\u7406\u5668\u7684\u5b8f\u6765\u5b9a\u4e49 variable \u4e3a value \uff0c\u53ef\u9009\u5730\u5e26\u4e0a\u62ec\u53f7\u53c2\u6570\u5217\u8868\u4ee5\u5904\u7406\u5e26\u53c2\u7684C\u5b8f\u3002\u5982\u679c\u5b8f\u7684\u53c2\u6570\u5217\u8868\u5b58\u5728\uff0c\u4f7f\u7528\u9017\u53f7\u5206\u9694\uff0c\u53ef\u80fd\u4f7f\u7528 ... \u7ed3\u675f\u3002 description \u53ea\u5728\u4f7f\u7528 AC_CONFIG_HEADERS \u65f6\u6709\u7528\uff0c\u4f5c\u4e3a\u6ce8\u91ca\u653e\u5728config.h.in\u4e2d\u3002 \u4f20\u53c2\u53ea\u6709 variable \u65f6\uff0c\u9ed8\u8ba4 value \u4e3a 1 \u3002 AC_DEFINE([PACKAGE_URL], [ https://www.winehq.org ], [Define to the home page for this package.]","title":"AC_DEFINE (variable)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_define_unquoted-variable-value-description","text":"","title":"AC_DEFINE_UNQUOTED (variable, value, [description])"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_define_unquoted-variable","text":"\u7c7b\u4f3c\u4e8e AC_DEFINE \uff0c\u4f46\u662f\u53ef\u4ee5\u4f7f\u7528\uff1a\u5f15\u7528\uff08$\uff09\u3001\u8c03\u7528\uff08``\uff09\u3001\u53cd\u659c\u6760\uff08\\\uff09\u3002 AC_DEFINE_UNQUOTED([GETGROUPS_T], [$ac_cv_type_getgroups], [getgroups return type.]) note \uff1a\u5728\u5176\u4ed6\u5b8f\u6216\u8005shell\u4ee3\u7801\u8c03\u7528\u8fd9\u4e24\u4e2a\u5b8f\u7684\u65f6\u5019\uff0c\u4e0d\u8981\u4f7f\u7528\u5206\u53f7\u6765\u5206\u5272 AC_DEFINE \u548c AC_DEFINE_UNQUOTED \u7684\u8bed\u53e5\uff0c\u4f7f\u7528\u7a7a\u683c\u6216\u8005\u6362\u884c\u3002 do this: AC_CHECK_HEADER([elf.h], [AC_DEFINE([SVR4], [1], [System V Release 4]) LIBS= -lelf $LIBS ]) or this: AC_CHECK_HEADER([elf.h], [AC_DEFINE([SVR4], [1], [System V Release 4]) LIBS= -lelf $LIBS ]) instead of this: AC_CHECK_HEADER([elf.h], [AC_DEFINE([SVR4], [1], [System V Release 4]); LIBS= -lelf $LIBS ])","title":"AC_DEFINE_UNQUOTED (variable)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#72","text":"\u9664\u4e86\u9884\u7f6e\u8f93\u51fa\u53d8\u91cf\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u4e2a\u5b8f\u6765\u8bbe\u7f6e\u8f93\u51fa\u53d8\u91cf\u3002","title":"7.2 \u8bbe\u7f6e\u8f93\u51fa\u53d8\u91cf"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_subst-variable-value","text":"\u4eceshell\u53d8\u91cf\u521b\u5efa\u8f93\u51fa\u53d8\u91cf\u3002\u4f7f AC_OUTPUT \u66ff\u6362\u53d8\u91cf variable \u7684\u503c\u5230\u8f93\u51fa\u6587\u4ef6\u4e2d\uff08\u4e00\u822c\u662fMakefile\u6587\u4ef6\uff09\u3002\u610f\u601d\u5c31\u662f AC_OUTPUT \u4f7f\u7528shell\u53d8\u91cf variable \u7684\u503c\u66ff\u6362\u8f93\u5165\u6587\u4ef6\uff08Makefile.in\uff09\u7684 @variable@ \u5230\u8f93\u51fa\u6587\u4ef6\uff08Makefile\uff09\u3002\u5982\u679c\u503c\u662f\u65b0\u884c\uff0c\u8003\u8651\u4f7f\u7528 AM_SUBST_NOTMAKE \u9632\u6b62automake\u6dfb\u52a0 variable = @variable@ \u5230Makefile.in\u6587\u4ef6\u3002 AC_SUBST([PACKAGE_RELEASE], [m4_esyscmd([build-aux/pkg-version --release])]) configure\u5bf9\u5e94\u7684\u8bed\u53e5 PACKAGE_RELEASE=44.gitb50346e","title":"AC_SUBST (variable, [value])"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_subst_file-variable","text":"\u8ba9 AC_OUTPUT \u63d2\u5165\uff08\u6ca1\u6709\u66ff\u6362\uff09\u6587\u4ef6\uff08shell\u53d8\u91cf variable \uff09\u5185\u5bb9\u5230\u8f93\u51fa\u6587\u4ef6\u3002 configure.ac: AC_SUBST_FILE([host_frag]) host_frag=$srcdir/conf/sun4.mh and then a Makefile.in could contain: @host_frag@ \u80fd\u591f\u5bf9\u8f93\u51fa\u7ed3\u679c\u9020\u6210\u5f71\u54cd\u7684\u73af\u5883\u53d8\u91cf\uff08\u6bd4\u5982CC\uff09\uff0c\u79f0\u4f5c precious variable \uff0c\u901a\u8fc7 AC_ARG_VAR \u58f0\u660e\u3002","title":"AC_SUBST_FILE (variable)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_arg_var-variable-description","text":"\u58f0\u660e variable \u662f precious variable \uff0c\u5c06\u5b83\u7684\u63cf\u8ff0\u653e\u5165\u53d8\u91cf\u7684\u5e2e\u52a9\u6587\u6863\u90e8\u5206 ./configure --help \u3002 precious variable \u610f\u5473\u7740\uff1a \u901a\u8fc7 AC_SUBST \u66ff\u6362 variable configure\u8fd0\u884c\u7684\u65f6\u5019 variable \u7684\u503c\u88ab\u4fdd\u5b58\u5230\u7f13\u5b58\u4e2d\uff0c\u5305\u62ec\u6ca1\u6709\u901a\u8fc7\u547d\u4ee4\u884c\u800c\u662f\u901a\u8fc7\u73af\u5883\u6307\u5b9a\u7684\u60c5\u51b5\u3002 \u6ce8\u610f \uff1a\u4fdd\u5b58\u7684\u662f variable \u7684\u521d\u59cb\u5316\u7684\u503c\uff0c\u800c\u4e0d\u662f\u5728\u6267\u884cconfigure\u7684\u65f6\u5019\u627e\u5230\u7684\u503c\u3002 \u5728\u8fd0\u884c\u4e24\u6b21configure\u7684\u65f6\u5019\u6267\u884c\u4e00\u81f4\u6027\u68c0\u67e5\u3002 \u5728\u81ea\u52a8\u91cd\u65b0\u914d\u7f6e\u7684\u65f6\u5019\u4fdd\u7559\u53d8\u91cf\uff0c\u5c31\u597d\u50cf\u4f5c\u4e3a\u547d\u4ee4\u884c\u53c2\u6570\u4f20\u5165\u4e00\u6837\u3002\u5305\u62ec\u6ca1\u6709\u4f7f\u7528\u7f13\u5b58\u7684\u60c5\u51b5\u3002","title":"AC_ARG_VAR (variable, description)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#74","text":"\u4e3a\u4e86\u907f\u514d\u5728\u591a\u4e2aconfigure\u811a\u672c\u4e2d\u91cd\u590d\u68c0\u67e5\u4e00\u4e2a\u529f\u80fd\u6216\u8005\u5728\u4e00\u4e2a\u811a\u672c\u4e2d\u91cd\u590d\u8fd0\u884c\uff0c\u53ef\u9009\u5730\u5c06\u6d4b\u8bd5\u7ed3\u679c\u4fdd\u5b58\u5230\u4e00\u4e2a cache file \u3002","title":"7.4 \u7f13\u5b58\u7ed3\u679c"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_cache_val-cache-id-commands-to-set-it","text":"\u786e\u4fdd cache-id \u6807\u8bc6\u7684\u68c0\u67e5\u7ed3\u679c\u53ef\u7528\u3002\u5982\u679c\u68c0\u67e5\u7ed3\u679c\u518d\u7f13\u5b58\u6587\u4ef6\u4e2d\u88ab\u8bfb\u53d6\u4e86\uff0c\u6253\u5370\u7ed3\u679c\u88ab\u8bfb\u53d6\u7684\u4fe1\u606f\uff1b\u5426\u5219\u6267\u884cshell\u547d\u4ee4 commands-to-set-it \u3002","title":"AC_CACHE_VAL (cache-id, commands-to-set-it)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_cache_check-message-cache-id-commands-to-set-it","text":"\u5bf9 AC_CACHE_VAL \u5c01\u88c5\uff0c\u5173\u5fc3\u6253\u5370\u4fe1\u606f\u3002\u5b83\u4e3a message \u8c03\u7528 AC_MSG_CHECKING \uff0c\u5e26\u53c2 cache-id\u3001commands \u8c03\u7528 AC_CACHE_VAL \uff0c\u5e26\u53c2 cache-id \u8c03\u7528 AC_MSG_RESULT \u3002","title":"AC_CACHE_CHECK (message, cache-id, commands-to-set-it)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#75","text":"","title":"7.5 \u8f93\u51fa\u4fe1\u606f"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_msg_checking-feature-description","text":"\u63d0\u793a\u7528\u6237configure\u6b63\u5728\u68c0\u67e5\u4e00\u4e2a\u7279\u5b9a\u7684\u529f\u80fd\u3002\u5fc5\u987b\u540e\u8ddf AC_MSG_RESULT \u6253\u5370\u68c0\u67e5\u7ed3\u679c\u548c\u6362\u884c\u3002 --quiet \u548c --silent \u9009\u9879\u4e0d\u4f1a\u6253\u5370\u3002 AC_MSG_CHECKING($PYTHON_NAME module: $1) $THIS_MODULE_PYTHON -c import $1 2 /dev/null if test $? -eq 0; then AC_MSG_RESULT(yes) else AC_MSG_RESULT(no)","title":"AC_MSG_CHECKING (feature-description)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_msg_result-result-description","text":"\u63d0\u793a\u7528\u6237\u68c0\u67e5\u7684\u7ed3\u679c\uff0c result-description \u4e00\u822c\u662f \u2018yes\u2019, \u2018no\u2019, or a file name \u3002","title":"AC_MSG_RESULT (result-description)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_msg_warn-problem-description","text":"\u53d1\u51fa\u8b66\u544a\uff0c\u6253\u5370\u4fe1\u606f\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u3002 AC_MSG_WARN([pyflakes not found])","title":"AC_MSG_WARN (problem-description)"},{"location":"autoconf/7.\u6d4b\u8bd5\u7ed3\u679c/#ac_msg_error-error-description-exit-status-1","text":"\u63d0\u793a\u4e00\u4e2a\u9519\u8bef\uff0c\u7ec8\u6b62configure\u3002 $? \u662f\u9ed8\u8ba4\u7684\uff0c\u9664\u975e0\u53d8\u4e3a\u4e861\u3002 ???","title":"AC_MSG_ERROR (error-description, [exit-status = \u2018$?/1\u2019])"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/","text":"Autoconf\u5728\u4e24\u4e2a\u5c42\u9762\u4e0a\u7f16\u5199\uff1a1\u3001M4sugar\uff0c\u63d0\u4f9b\u6bd4\u7eafM4\u7f16\u7a0b\u66f4\u52a0\u65b9\u4fbf\u7684\u5b8f\uff1b2\u3001M4sh\uff0c\u63d0\u4f9b\u4e13\u7528\u4e8e\u751f\u6210shell\u811a\u672c\u7684\u5b8f\u3002 8.1 M4 \u7684\u5f15\u7528 Autoconf\u7684\u4f7f\u7528\u8005\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u90e8\u5206\uff0c\u5b8f\u7f16\u5199\u8005\u5fc5\u987b\u9605\u8bfb\u3002 M4 Qutation \u3002 \u6bcf\u6b21\u5b8f\u5c55\u5f00\u65f6\uff0c\u90fd\u4f1a\u53bb\u9664\u4e00\u5c42\u5f15\u7528\u3002 8.1.3 \u5f15\u7528\u548c\u53c2\u6570 \u5728M4\u7684\u4e00\u4e2a\u5b8f\u5b9a\u4e49\u4e2d\uff0c\u9047\u5230\u4e86 $(\u20180\u2019...\u20189\u2019, \u2018#\u2019, \u2018@\u2019, or \u2018*\u2019) \uff0c\u4f1a\u6267\u884cM4\u7684\u53c2\u6570\u5c55\u5f00\u3002\u4e0d\u7ba1\u6709\u591a\u5c11\u5c42\u5d4c\u5957\u5f15\u7528\uff0c\u751a\u81f3\u662f\u6ce8\u91ca\u90fd\u4f1a\u6267\u884c\u3002 define([none], [$1]) #\u4f1a\u5bfc\u81f4\u6269\u5c55 \u21d2 define([one], [[$1]]) #\u5f53\u4f5c\u6587\u672c\u5904\u7406 \u21d2 define([two], [[[$1]]]) #\u5f53\u4f5c[\u6587\u672c]\u5904\u7406 \u21d2 define([comment], [# $1]) #\u6ce8\u91ca \u21d2 define([active], [ACTIVE]) \u21d2 none([active]) \u21d2ACTIVE one([active]) \u21d2active two([active]) \u21d2[active] comment([active]) \u21d2# active \u60f3\u8981\u6253\u7834\u8fd9\u4e00\u89c4\u5219\u9700\u8981\u8fd9\u6837\u4f7f\u7528\uff1a define([single], [a single-quoted $[]1 definition]) \u21d2 define([double], [[a double-quoted $][1 definition]]) \u21d2 single \u21d2a single-quoted $1 definition double \u21d2a double-quoted $1 definition warning \uff1aM4\u6269\u5c55\u4e00\u4e2a\u5b8f\u4e4b\u540e\uff0c\u7ed3\u679c\u6587\u672c\u4f1a\u88ab\u7acb\u5373\u8fdb\u884c\u5b8f\u6269\u5c55\u548c\u5f15\u7528\u5220\u9664\u3002\u4f8b\uff1a car([int tab[10];]) \u21d2int tab10; car([[int tab[10];]]) \u21d2int tab[10]; \u7b2c\u4e00\u4e2a\u6269\u5c55\u7684\u7ed3\u679c\u662f int tab[10]; \uff0c\u4f46\u662f\u7ecf\u8fc7\u5f15\u7528\u5220\u9664\u4e4b\u540e\uff0c\u53bb\u9664\u4e86\u5f15\u7528\u7b26\u53f7\uff1b \u7b2c\u4e8c\u4e2a\u6269\u5c55\u7684\u7ed3\u679c\u662f [int tab[10];] \uff0c\u7ecf\u8fc7\u5f15\u7528\u5220\u9664\u4e4b\u540e\uff0c\u8fd8\u4f1a\u4fdd\u7559\u5185\u90e8\u7684\u5f15\u7528\u7b26\u53f7\u3002 8.1.6 \u7279\u6b8a\u5b57\u7b26\u66ff\u6362 \u7f16\u5199Autoconf\u5b8f\u7684\u65f6\u5019\u53ef\u80fd\u9700\u8981\u7279\u6b8a\u5b57\u7b26\uff0c\u4f46\u662f\u4f7f\u7528\u6807\u51c6\u7684\u5f15\u7528\u89c4\u5219\u4f1a\u5f88\u56f0\u96be\u3002 \u8fd8\u6709\uff0c\u5c11\u91cf\u7684M4sugar\u5185\u90e8\u4f7f\u7528\u4e86\u7279\u6b8a\u5b57\u7b26\uff0c\u5982\u679c\u5b8f\u53c2\u5305\u542b\u4e86 -= {( or )} =- \uff0c\u5b83\u4eec\u53ef\u80fd\u4e0d\u4f1a\u6b63\u5e38\u5de5\u4f5c\u3002 \u66ff\u6362\u89c4\u5219\uff1a @ :@ - [ @: @ - ] @S|@ - $ @%:@ - # @{:@ - ( @:}@ - ) @ t@ - Expands to nothing AC_ARG_ENABLE( [ovirt-vmconsole], [AS_HELP_STRING( [--disable-ovirt-vmconsole], [disable ovirt-vmconsole integration @ :@default=no@: @] )], , [enable_ovirt_vmconsole= yes ] ) 8.2 \u4f7f\u7528 autom4te \u9664\u4e86Autoconf\u672c\u8eab\uff0cAutoconf\u5957\u4ef6\u5305\u62ecM4sugar, M4sh, and Autotest\uff0c\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56M4\u3002 8.3 \u4f7f\u7528 M4 \u7684\u8bed\u6cd5 \u4fdd\u7559\u4e86 m4_ \u5f00\u5934\u7684\u5b8f\u547d\u540d\u7a7a\u95f4\u3002 8.3.1 \u91cd\u5b9a\u4e49M4\u5b8f \u9664\u4e86\u51e0\u4e2a\u4f8b\u5916\uff0c\u6240\u6709\u7684M4\u672c\u5730\u5b8f\u90fd\u88ab\u91cd\u547d\u540d\u4e3a m4_ \u5f00\u5934\u3002 \u4e0b\u9762\u8fd9\u4e9b\u5b8f\u6ca1\u6709\u6539\u53d8\uff1a m4_builtin m4_changecom m4_changequote m4_debugfile m4_debugmode m4_decr m4_define m4_divnum m4_errprint m4_esyscmd m4_eval m4_format m4_ifdef m4_incr m4_index m4_indir m4_len m4_pushdef m4_shift m4_substr m4_syscmd m4_sysval m4_traceoff m4_traceon m4_translit \u4e0b\u9762\u7684\u6709\u8f7b\u5fae\u7684\u4e0d\u540c\uff1a m4_include (file) m4_sinclude (file) \u8ddfm4\u5185\u7f6e\u7684\u5b8f\u7c7b\u4f3c\uff0c\u4f46\u662f\u4f1a\u5bf9\u591a\u6b21\u5f15\u5165\u6587\u4ef6\u53d1\u51fa\u8b66\u544a\u3002 m4_include([m4/ax_python_module.m4])","title":"8.\u4f7f\u7528M4\u7f16\u7a0b"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/#81-m4","text":"Autoconf\u7684\u4f7f\u7528\u8005\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u90e8\u5206\uff0c\u5b8f\u7f16\u5199\u8005\u5fc5\u987b\u9605\u8bfb\u3002 M4 Qutation \u3002 \u6bcf\u6b21\u5b8f\u5c55\u5f00\u65f6\uff0c\u90fd\u4f1a\u53bb\u9664\u4e00\u5c42\u5f15\u7528\u3002","title":"8.1 M4 \u7684\u5f15\u7528"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/#813","text":"\u5728M4\u7684\u4e00\u4e2a\u5b8f\u5b9a\u4e49\u4e2d\uff0c\u9047\u5230\u4e86 $(\u20180\u2019...\u20189\u2019, \u2018#\u2019, \u2018@\u2019, or \u2018*\u2019) \uff0c\u4f1a\u6267\u884cM4\u7684\u53c2\u6570\u5c55\u5f00\u3002\u4e0d\u7ba1\u6709\u591a\u5c11\u5c42\u5d4c\u5957\u5f15\u7528\uff0c\u751a\u81f3\u662f\u6ce8\u91ca\u90fd\u4f1a\u6267\u884c\u3002 define([none], [$1]) #\u4f1a\u5bfc\u81f4\u6269\u5c55 \u21d2 define([one], [[$1]]) #\u5f53\u4f5c\u6587\u672c\u5904\u7406 \u21d2 define([two], [[[$1]]]) #\u5f53\u4f5c[\u6587\u672c]\u5904\u7406 \u21d2 define([comment], [# $1]) #\u6ce8\u91ca \u21d2 define([active], [ACTIVE]) \u21d2 none([active]) \u21d2ACTIVE one([active]) \u21d2active two([active]) \u21d2[active] comment([active]) \u21d2# active \u60f3\u8981\u6253\u7834\u8fd9\u4e00\u89c4\u5219\u9700\u8981\u8fd9\u6837\u4f7f\u7528\uff1a define([single], [a single-quoted $[]1 definition]) \u21d2 define([double], [[a double-quoted $][1 definition]]) \u21d2 single \u21d2a single-quoted $1 definition double \u21d2a double-quoted $1 definition warning \uff1aM4\u6269\u5c55\u4e00\u4e2a\u5b8f\u4e4b\u540e\uff0c\u7ed3\u679c\u6587\u672c\u4f1a\u88ab\u7acb\u5373\u8fdb\u884c\u5b8f\u6269\u5c55\u548c\u5f15\u7528\u5220\u9664\u3002\u4f8b\uff1a car([int tab[10];]) \u21d2int tab10; car([[int tab[10];]]) \u21d2int tab[10]; \u7b2c\u4e00\u4e2a\u6269\u5c55\u7684\u7ed3\u679c\u662f int tab[10]; \uff0c\u4f46\u662f\u7ecf\u8fc7\u5f15\u7528\u5220\u9664\u4e4b\u540e\uff0c\u53bb\u9664\u4e86\u5f15\u7528\u7b26\u53f7\uff1b \u7b2c\u4e8c\u4e2a\u6269\u5c55\u7684\u7ed3\u679c\u662f [int tab[10];] \uff0c\u7ecf\u8fc7\u5f15\u7528\u5220\u9664\u4e4b\u540e\uff0c\u8fd8\u4f1a\u4fdd\u7559\u5185\u90e8\u7684\u5f15\u7528\u7b26\u53f7\u3002","title":"8.1.3 \u5f15\u7528\u548c\u53c2\u6570"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/#816","text":"\u7f16\u5199Autoconf\u5b8f\u7684\u65f6\u5019\u53ef\u80fd\u9700\u8981\u7279\u6b8a\u5b57\u7b26\uff0c\u4f46\u662f\u4f7f\u7528\u6807\u51c6\u7684\u5f15\u7528\u89c4\u5219\u4f1a\u5f88\u56f0\u96be\u3002 \u8fd8\u6709\uff0c\u5c11\u91cf\u7684M4sugar\u5185\u90e8\u4f7f\u7528\u4e86\u7279\u6b8a\u5b57\u7b26\uff0c\u5982\u679c\u5b8f\u53c2\u5305\u542b\u4e86 -= {( or )} =- \uff0c\u5b83\u4eec\u53ef\u80fd\u4e0d\u4f1a\u6b63\u5e38\u5de5\u4f5c\u3002 \u66ff\u6362\u89c4\u5219\uff1a @ :@ - [ @: @ - ] @S|@ - $ @%:@ - # @{:@ - ( @:}@ - ) @ t@ - Expands to nothing AC_ARG_ENABLE( [ovirt-vmconsole], [AS_HELP_STRING( [--disable-ovirt-vmconsole], [disable ovirt-vmconsole integration @ :@default=no@: @] )], , [enable_ovirt_vmconsole= yes ] )","title":"8.1.6 \u7279\u6b8a\u5b57\u7b26\u66ff\u6362"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/#82-autom4te","text":"\u9664\u4e86Autoconf\u672c\u8eab\uff0cAutoconf\u5957\u4ef6\u5305\u62ecM4sugar, M4sh, and Autotest\uff0c\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56M4\u3002","title":"8.2 \u4f7f\u7528 autom4te"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/#83-m4","text":"\u4fdd\u7559\u4e86 m4_ \u5f00\u5934\u7684\u5b8f\u547d\u540d\u7a7a\u95f4\u3002","title":"8.3 \u4f7f\u7528 M4 \u7684\u8bed\u6cd5"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/#831-m4","text":"\u9664\u4e86\u51e0\u4e2a\u4f8b\u5916\uff0c\u6240\u6709\u7684M4\u672c\u5730\u5b8f\u90fd\u88ab\u91cd\u547d\u540d\u4e3a m4_ \u5f00\u5934\u3002 \u4e0b\u9762\u8fd9\u4e9b\u5b8f\u6ca1\u6709\u6539\u53d8\uff1a m4_builtin m4_changecom m4_changequote m4_debugfile m4_debugmode m4_decr m4_define m4_divnum m4_errprint m4_esyscmd m4_eval m4_format m4_ifdef m4_incr m4_index m4_indir m4_len m4_pushdef m4_shift m4_substr m4_syscmd m4_sysval m4_traceoff m4_traceon m4_translit \u4e0b\u9762\u7684\u6709\u8f7b\u5fae\u7684\u4e0d\u540c\uff1a","title":"8.3.1 \u91cd\u5b9a\u4e49M4\u5b8f"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/#m4_include-file","text":"","title":"m4_include (file)"},{"location":"autoconf/8.\u4f7f\u7528M4\u7f16\u7a0b/#m4_sinclude-file","text":"\u8ddfm4\u5185\u7f6e\u7684\u5b8f\u7c7b\u4f3c\uff0c\u4f46\u662f\u4f1a\u5bf9\u591a\u6b21\u5f15\u5165\u6587\u4ef6\u53d1\u51fa\u8b66\u544a\u3002 m4_include([m4/ax_python_module.m4])","title":"m4_sinclude (file)"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/","text":"M4sh \uff0c\u79f0\u4f5c mash \uff0c\u76ee\u7684\u662f\u4ea7\u751f\u4fbf\u643a\u5f0f\u53ef\u79fb\u690d Bourne shell \u811a\u672c\u3002\u56e0\u4e3a\u4e0d\u540c\u7684shell\u7684\u8bed\u6cd5\u4e0d\u517c\u5bb9\uff0c\u6545\u521b\u9020\u6b64\u79cd\u5b8f\u6765\u89e3\u51b3\u3002 \u5176\u5b8f\u4ee5 AS_ \u5f00\u5934\u3002\u5728shell\u548c\u73af\u5883\u53d8\u91cf\u4e2d\u4fdd\u7559\u4e86\u53d8\u91cf\u547d\u540d\u7a7a\u95f4 as_ \uff0c\u8f93\u51fa\u6587\u4ef6\u4e2d\u662f _AS[A-Z] \u3002 9.1 \u666e\u901a\u7684shell\u7ed3\u6784 AS_IF (test1, [run-if-true1], ..., [run-if-false]) \u5982\u679c\u6ca1\u6709\u4e00\u4e2a\u6d4b\u8bd5\u662f\u6210\u529f\u7684\uff0c\u6267\u884c run-if-false \u3002 AS_IF([test x$foo = xyes], [HANDLE_FOO([yes])], [test x$foo != xno], [HANDLE_FOO([maybe])], [echo foo not specified]) AS_TR_CPP (expression) \u5c06 expression \u8f6c\u4e3aC\u7684\u5b8f\u5b9a\u4e49 # This outputs #define HAVE_CHAR_P 1 . # Notice the m4 quoting around #, to prevent an m4 comment type= char * echo [#]define AS_TR_CPP([HAVE_$type]) 1 9.2 \u95f4\u63a5\u53d8\u91cf\u540d\u7684\u652f\u6301 AS_LITERAL_IF (expression, [if-literal], [if-not], [if-simple-ref = \u2018if-not\u2019]) AS_LITERAL_WORD_IF (expression, [if-literal], [if-not], [if-simple-ref = \u2018if-not\u2019]) \u82e5 expression \u5b9a\u4e49\u4e3ashell\u6587\u672c\uff0c\u8f93\u51fa if-literal \uff1b\u82e5 expression \u5305\u542b\u4e86shell\u5f15\u7528\u6216\u8005\u8c03\u7528\uff08\u4f8b\u5982$var\u6216 cd \uff09\uff0c\u8f93\u51fa if-not \u3002 expression \u4e3a\u6587\u672c\u7684\u65f6\u5019\uff0c AS_LITERAL_WORD_IF \u4e0d\u5141\u8bb8 expression \u542b\u6709\u7a7a\u683c\uff0c\u4f46\u662f AS_LITERAL_IF \u53ef\u4ee5\u3002 AS_VAR_APPEND (var, text) \u76f8\u5f53\u4e8e var += text \uff0c\u5373 var=${var}text \u3002 AS_VAR_IF (var, [word], [if-equal], [if-not-equal]) \u8f93\u51fashell\u7684\u6761\u4ef6\u8bed\u53e5\u3002 var == word \uff0c\u6267\u884c if-equal \uff1b\u5426\u5219\u6267\u884c if-not-equal \u3002 word \u5fc5\u987b\u662f\u5355\u4e2ashell\u5355\u8bcd\u3002","title":"9.\u4f7f\u7528M4sh\u7f16\u7a0b"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/#91-shell","text":"","title":"9.1 \u666e\u901a\u7684shell\u7ed3\u6784"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/#as_if-test1-run-if-true1-run-if-false","text":"\u5982\u679c\u6ca1\u6709\u4e00\u4e2a\u6d4b\u8bd5\u662f\u6210\u529f\u7684\uff0c\u6267\u884c run-if-false \u3002 AS_IF([test x$foo = xyes], [HANDLE_FOO([yes])], [test x$foo != xno], [HANDLE_FOO([maybe])], [echo foo not specified])","title":"AS_IF (test1, [run-if-true1], ..., [run-if-false])"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/#as_tr_cpp-expression","text":"\u5c06 expression \u8f6c\u4e3aC\u7684\u5b8f\u5b9a\u4e49 # This outputs #define HAVE_CHAR_P 1 . # Notice the m4 quoting around #, to prevent an m4 comment type= char * echo [#]define AS_TR_CPP([HAVE_$type]) 1","title":"AS_TR_CPP (expression)"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/#92","text":"","title":"9.2 \u95f4\u63a5\u53d8\u91cf\u540d\u7684\u652f\u6301"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/#as_literal_if-expression-if-literal-if-not-if-simple-ref-if-not","text":"","title":"AS_LITERAL_IF (expression, [if-literal], [if-not], [if-simple-ref = \u2018if-not\u2019])"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/#as_literal_word_if-expression-if-literal-if-not-if-simple-ref-if-not","text":"\u82e5 expression \u5b9a\u4e49\u4e3ashell\u6587\u672c\uff0c\u8f93\u51fa if-literal \uff1b\u82e5 expression \u5305\u542b\u4e86shell\u5f15\u7528\u6216\u8005\u8c03\u7528\uff08\u4f8b\u5982$var\u6216 cd \uff09\uff0c\u8f93\u51fa if-not \u3002 expression \u4e3a\u6587\u672c\u7684\u65f6\u5019\uff0c AS_LITERAL_WORD_IF \u4e0d\u5141\u8bb8 expression \u542b\u6709\u7a7a\u683c\uff0c\u4f46\u662f AS_LITERAL_IF \u53ef\u4ee5\u3002","title":"AS_LITERAL_WORD_IF (expression, [if-literal], [if-not], [if-simple-ref = \u2018if-not\u2019])"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/#as_var_append-var-text","text":"\u76f8\u5f53\u4e8e var += text \uff0c\u5373 var=${var}text \u3002","title":"AS_VAR_APPEND (var, text)"},{"location":"autoconf/9.\u4f7f\u7528M4sh\u7f16\u7a0b/#as_var_if-var-word-if-equal-if-not-equal","text":"\u8f93\u51fashell\u7684\u6761\u4ef6\u8bed\u53e5\u3002 var == word \uff0c\u6267\u884c if-equal \uff1b\u5426\u5219\u6267\u884c if-not-equal \u3002 word \u5fc5\u987b\u662f\u5355\u4e2ashell\u5355\u8bcd\u3002","title":"AS_VAR_IF (var, [word], [if-equal], [if-not-equal])"},{"location":"autoconf/\u7b80\u4ecb/","text":"\u672c\u7cfb\u5217\u6587\u7ae0\u5747\u7ffb\u8bd1\u81eaAutoconf\u5b98\u65b9\u6587\u6863\uff1a Autoconf Manual Autoconf\u662f\u4e00\u4e2a\u7528\u4e8e\u751f\u6210shell\u811a\u672c\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u81ea\u52a8\u914d\u7f6e\u8f6f\u4ef6\u6e90\u4ee3\u7801\u4ee5\u9002\u5e94\u591a\u79cd\u7c7b\u4f3cPOSIX\u7684\u7cfb\u7edf\u3002\u4e3a\u4e86\u8ba9\u4f60\u7684\u8f6f\u4ef6\u5305\u5728\u6240\u6709\u7684\u4e0d\u540c\u7cfb\u7edf\u4e0a\u90fd\u53ef\u4ee5\u8fdb\u884c\u7f16\u8bd1\u3002 GNU \u6784\u5efa\u7cfb\u7edf Autoconf\u89e3\u51b3\u4e86\u7cfb\u7edf\u7279\u4f7f\u6784\u5efa\u548c\u8fd0\u884c\u65f6\u4fe1\u606f\u7684\u96be\u9898\uff0c\u4f46\u5728\u8f6f\u4ef6\u5f00\u53d1\u65f6\u8fd8\u6709\u66f4\u591a\u7684\u96be\u9898\uff0cGNU\u6784\u5efa\u7cfb\u7edf\u662f\u4e3a\u4e86\u66f4\u597d\u7684\u5f00\u53d1\u8f6f\u4ef6\u800c\u5f00\u53d1\u7684\u4e00\u5957\u5b8c\u6574\u7684\u516c\u76ca\u4e8b\u4e1a\u3002 \u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u6709 Autoconf \u3001 Automake \u548c Libtool \u3002 Automake \u4e3a\u4e86\u517c\u5bb9\u5404\u4e2a\u7cfb\u7edf\u7684make\u4f7f\u7528\u3002 \u4eceMakefile.am\u6587\u4ef6\u548cAutoconf\u4e00\u8d77\u751f\u6210Makefile.in\u6587\u4ef6\u3002 Gnulib \u8fd9\u662fGNU\u4ee3\u7801\u7684\u4e2d\u592e\u4ed3\u5e93\uff0c\u76ee\u7684\u662f\u5171\u4eab\u514d\u8d39\u7684\u8f6f\u4ef6\u5305\u3002\u5b83\u7684\u5171\u4eab\u662f\u6e90\u7801\u7ea7\u522b\u7684\uff0c\u53ea\u9700\u8981\u4ece\u4e0a\u9762\u76f4\u63a5\u62c9\u53d6\u5230\u81ea\u5df1\u7684\u6e90\u7801\u6811\u3002 Libtool \u751f\u4ea7\u52a8\u6001\u7684\u5171\u4eab\u5e93\u662f\u975e\u5e38\u56f0\u96be\u7684\u4e8b\u60c5\uff0c\u6bcf\u4e2a\u7cfb\u7edf\u90fd\u6709\u81ea\u5df1\u7684\u7f16\u8bd1\u5de5\u5177\u3001\u7f16\u8bd1\u6807\u5fd7\u3001etc.\u3002 Libtool\u4f1a\u5904\u7406\u6240\u6709\u7684\u5171\u4eab\u5e93\u8bf7\u6c42\u3002\u9700\u8981\u5171\u4eab\u5e93\u7684\u65f6\u5019\u4f1a\u81eaLibtool\u4f1a\u81ea\u52a8\u5730\u88ab\u4f7f\u7528\uff0c\u65e0\u9700\u77e5\u6653\u5176\u8bed\u6cd5\u89c4\u5219\u3002 \u5236\u4f5cconfigure\u811a\u672c \u4e0b\u9762\u7684\u56fe\u8868\u6f14\u793a\u4e86\u5982\u4f55\u751f\u6210\u53ef\u5728configure\u4e2d\u4f7f\u7528\u7684\u6587\u4ef6\uff1a \u540e\u7f00 * \u4ee3\u8868\u6267\u884c\u8fc7\u7a0b\uff0c[]\u4ee3\u8868\u53ef\u9009\u9879 \u53ea\u4f7f\u7528Autoconf your source files -- [autoscan*] -- [configure.scan] -- configure.ac configure.ac --. | .------ autoconf* ----- configure [aclocal.m4] --+---+ | `----- [autoheader*] -- [config.h.in] [acsite.m4] ---' Makefile.in \u4f7f\u7528Automake\uff1a [acinclude.m4] --. | [local macros] --+-- aclocal* -- aclocal.m4 | configure.ac ----' configure.ac --. +-- automake* -- Makefile.in Makefile.am ---' \u914d\u7f6e\u4e00\u4e2a\u8f6f\u4ef6\u5305\u65f6\u5982\u4f55\u4f7f\u7528\u6587\u4ef6\uff1a .------------- [config.cache] configure* ------------+------------- config.log | [config.h.in] -. v .- [config.h] -. +-- config.status* -+ +-- make* Makefile.in ---' `- Makefile ---' \u7f16\u5199configure.ac configure.ac \u5305\u542b\u4e86Autoconf\u7684\u5b8f\u8c03\u7528\uff0c\u7528\u4e8e\u6d4b\u8bd5\u7a0b\u5e8f\u5305\u9700\u8981\u7684\u6216\u53ef\u4ee5\u4f7f\u7528\u7684\u7cfb\u7edf\u529f\u80fd\u3002 Autoconf\u6709\u5bf9\u8bb8\u591a\u529f\u80fd\u8fdb\u884c\u68c0\u67e5\u7684\u5b8f \u5bf9\u4e8e\u5927\u90e8\u5206\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u6a21\u677f\u5b8f\u8fdb\u884c\u5ba2\u6237\u7aef\u68c0\u67e5 \u5bf9\u4e8e\u4e00\u4e9b\u7279\u522b\u7684\u529f\u80fd\uff0c\u9700\u8981\u624b\u5199shell\u547d\u4ee4 autoscan\u53ef\u4ee5\u662f\u826f\u597d\u7684\u5f00\u7aef\u3002 shell\u811a\u672c\u7f16\u8bd1\u5668 autoconf\u662f\u4e3a\u4e86\u4ea7\u751f\u53ef\u79fb\u690d\u7684shell\u811a\u672c-- configure \u7684\u7f16\u8bd1\u5668\u3002 Autoconf\u8bed\u8a00 Autoconf-Language \u5f15\u7528\u7b26\u53f7\u662f [] \uff0c\u5f3a\u70c8\u5efa\u8bae\u5bf9\u6240\u6709\u5305\u542b \u5b8f\u540d\u3001\u9017\u53f7\u3001\u62ec\u53f7\u3001\u524d\u5bfc\u7a7a\u683c\u3001\u6362\u884c\u7b26 \u7684\u53c2\u6570\u90fd\u52a0\u4e0a\u5f15\u7528\u7b26\u53f7\u3002 \u53c2\u6570\u4e2d\u7684\u4efb\u4f55\u524d\u5bfc\u7a7a\u683c\u548c\u65b0\u7684\u884c\u90fd\u4f1a\u88ab\u5ffd\u89c6\uff0c\u9664\u975e\u88ab\u5f15\u7528\u3002 \u8be6\u7ec6\u5f15\u7528\u89c4\u5219 \u5f53\u5728\u5b8f\u53c2\u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u6587\u672c\u65f6\uff0c\u5fc5\u987b\u6709\u4e00\u4e2a\u989d\u5916\u7684\u5f15\u7528\u7ea7\u522b\uff0c\u5e76\u4e14\u5bf9\u91cd\u590d\u7684\u90e8\u5206\u6216\u8005\u6574\u4f53\u8fdb\u884c\u53cc\u91cd\u7684\u7b26\u53f7\u5f15\u7528\u3002 \u5df2\u7ecf\u5728\u6587\u672c\u4e2d\u5f15\u7528\u4e86AC_DC\uff1a[echo Hard rock was here! --AC_DC ] \u5b8f\u53c2\u4e2d\u5f15\u7528\u65f6\uff1aAC_MSG_WARN([[AC_DC] stinks --Iron Maiden]) \u5f15\u7528\u5b8f\u7684\u9ec4\u91d1\u6cd5\u5219\u662f\u6bcf\u6269\u5c55\u4e00\u6b21\u5b8f\uff0c\u5c31\u53bb\u9664\u4e00\u6b21\u5f15\u7528\u3002 whenever you expect macro expansion, expect quote expansion; i.e., expect one level of quotes to be lost. \u63cf\u8ff0\u4e0d\u80fd\u88ab\u5f15\u7528\u4e24\u6b21\u3002 \u6ce8\u91ca\u4ee5 # \u5f00\u5934 note \uff1a\u5f15\u7528\u53d8\u91cf\uff1a\u5982\u679c\u662f\u5b8f\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u5219\u53ef\u76f4\u63a5 $xxx \uff0c\u5982\u679c\u662fshell\u53d8\u91cf\u5219\u9700\u8981 ${xxx} \u3002\u5982\u679c\u8d4b\u503c\u4e0e\u5f15\u7528\u90fd\u5728\u4e00\u6bb5shell\u811a\u672c\u91cc\u9762\uff0c\u90a3\u4e48\u53ef\u76f4\u63a5\u5f15\u7528 $xxx \u3002 \u6807\u51c6configure.ac\u5e03\u5c40 \u6309\u7167\u63a8\u8350\u987a\u5e8f\u6765\u8c03\u7528\u5b8f\uff1a AC_INIT(package, version, bug-report-address) information on the package checks for programs checks for libraries checks for header files checks for types checks for structures checks for compiler characteristics checks for library functions checks for system services AC_CONFIG_FILES([file...]) AC_OUTPUT \u4f7f\u7528autoscan\u63d2\u4ef6\u751f\u6210configure.ac autoscan\u68c0\u67e5\u5728\u76ee\u5f55\u4e0b\u7684\u6e90\u6587\u4ef6\u3002 \u751f\u6210configure.scan\u6587\u4ef6\u4e4b\u540e\u9700\u8981\u68c0\u67e5\u4fee\u6539\u624d\u80fd\u5c06\u5176\u91cd\u547d\u540d\u4e3aconfigure.ac \u4f7f\u7528ifnames\u5217\u51fa\u6761\u4ef6\u8bed\u53e5 ifnames\u6253\u5370\u6240\u6709\u7ed9\u5b9a\u7684C\u6e90\u6587\u4ef6\u4e2d\u7684 #if, #elif, #ifdef, or #ifndef \u51fa\u73b0\u5728\u6267\u884c\u6587\u4ef6\u4e2d\u7684\u6807\u8bc6\u7b26\u6392\u5e8f\u5217\u8868 \u4f7f\u7528autoconf\u521b\u5efaconfigure \u65e0\u53c2\u8fd0\u884c autoconf \u4ececonfigure.ac\u521b\u5efaconfigure\u3002 autoconf processes configure.ac with the M4 macro processor, using the Autoconf macros. \u5982\u679c\u52a0\u4e86\u53c2\u6570\uff0c\u90a3\u4e48\u5b83\u4ece\u90a3\u4e2a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u5e76\u8f93\u51fa\u914d\u7f6e\u811a\u672c\u5230\u6807\u51c6\u8f93\u51fa\uff1b\u5982\u679c\u52a0\u4e86\u53c2\u6570-\uff0c\u5b83\u4ece\u6807\u51c6\u8f93\u8bfb\u53d6\u7136\u540e\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u3002 Autoconf\u5b8f\u88ab\u5b9a\u4e49\u5728\u591a\u4e2a\u6587\u4ef6\u91cc\u9762\u3002\u5148\u627e\u8ddf\u968fAutoconf\u4e00\u8d77\u53d1\u5e03\u7684\u6587\u4ef6\u4e2d\u7684\u5b8f\uff0c\u518d\u5728\u542b\u6709\u53d1\u5e03\u7684Autoconf\u5b8f\u6587\u4ef6\u7684\u6587\u4ef6\u5939\u4e2d\u627e\u53ef\u9009\u6587\u4ef6[acsite.m4]\u4e2d\u7684\u5b8f\uff0c\u7136\u540e\u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e2d\u627e[aclocal.m4]\u7684\u5b8f\u3002\u540e\u5b9a\u4e49\u7684\u5b8f\u4f1a\u8986\u76d6\u4e4b\u524d\u5b9a\u4e49\u7684\u5b8f\u3002 \u5efa\u8bae\u4f7f\u7528--trace\u9009\u9879\u6765\u68c0\u67e5configure.ac\u6587\u4ef6\u3002 \u4f7f\u7528autoreconf\u66f4\u65b0configure\u811a\u672c autoreconf \u91cd\u590d\u8fd0\u884c autoconf, autoheader, aclocal, automake, libtoolize, and autopoint (when appropriate) \u5728\u7279\u6b8a\u76ee\u5f55\u53ca\u5176\u5b50\u76ee\u5f55\u4e0b\u66f4\u65b0GNU\u6784\u5efa\u7cfb\u7edf\u3002\u9ed8\u8ba4\u53ea\u66f4\u65b0\u8001\u7684\u6587\u4ef6\u3002 \u4e0d\u4f1a\u4f20\u9012--autoconf-dir=dir \u6216 --localdir=dir\u3002","title":"\u7b80\u4ecb"},{"location":"autoconf/\u7b80\u4ecb/#gnu","text":"Autoconf\u89e3\u51b3\u4e86\u7cfb\u7edf\u7279\u4f7f\u6784\u5efa\u548c\u8fd0\u884c\u65f6\u4fe1\u606f\u7684\u96be\u9898\uff0c\u4f46\u5728\u8f6f\u4ef6\u5f00\u53d1\u65f6\u8fd8\u6709\u66f4\u591a\u7684\u96be\u9898\uff0cGNU\u6784\u5efa\u7cfb\u7edf\u662f\u4e3a\u4e86\u66f4\u597d\u7684\u5f00\u53d1\u8f6f\u4ef6\u800c\u5f00\u53d1\u7684\u4e00\u5957\u5b8c\u6574\u7684\u516c\u76ca\u4e8b\u4e1a\u3002 \u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u6709 Autoconf \u3001 Automake \u548c Libtool \u3002","title":"GNU \u6784\u5efa\u7cfb\u7edf"},{"location":"autoconf/\u7b80\u4ecb/#automake","text":"\u4e3a\u4e86\u517c\u5bb9\u5404\u4e2a\u7cfb\u7edf\u7684make\u4f7f\u7528\u3002 \u4eceMakefile.am\u6587\u4ef6\u548cAutoconf\u4e00\u8d77\u751f\u6210Makefile.in\u6587\u4ef6\u3002","title":"Automake"},{"location":"autoconf/\u7b80\u4ecb/#gnulib","text":"\u8fd9\u662fGNU\u4ee3\u7801\u7684\u4e2d\u592e\u4ed3\u5e93\uff0c\u76ee\u7684\u662f\u5171\u4eab\u514d\u8d39\u7684\u8f6f\u4ef6\u5305\u3002\u5b83\u7684\u5171\u4eab\u662f\u6e90\u7801\u7ea7\u522b\u7684\uff0c\u53ea\u9700\u8981\u4ece\u4e0a\u9762\u76f4\u63a5\u62c9\u53d6\u5230\u81ea\u5df1\u7684\u6e90\u7801\u6811\u3002","title":"Gnulib"},{"location":"autoconf/\u7b80\u4ecb/#libtool","text":"\u751f\u4ea7\u52a8\u6001\u7684\u5171\u4eab\u5e93\u662f\u975e\u5e38\u56f0\u96be\u7684\u4e8b\u60c5\uff0c\u6bcf\u4e2a\u7cfb\u7edf\u90fd\u6709\u81ea\u5df1\u7684\u7f16\u8bd1\u5de5\u5177\u3001\u7f16\u8bd1\u6807\u5fd7\u3001etc.\u3002 Libtool\u4f1a\u5904\u7406\u6240\u6709\u7684\u5171\u4eab\u5e93\u8bf7\u6c42\u3002\u9700\u8981\u5171\u4eab\u5e93\u7684\u65f6\u5019\u4f1a\u81eaLibtool\u4f1a\u81ea\u52a8\u5730\u88ab\u4f7f\u7528\uff0c\u65e0\u9700\u77e5\u6653\u5176\u8bed\u6cd5\u89c4\u5219\u3002","title":"Libtool"},{"location":"autoconf/\u7b80\u4ecb/#configure","text":"\u4e0b\u9762\u7684\u56fe\u8868\u6f14\u793a\u4e86\u5982\u4f55\u751f\u6210\u53ef\u5728configure\u4e2d\u4f7f\u7528\u7684\u6587\u4ef6\uff1a \u540e\u7f00 * \u4ee3\u8868\u6267\u884c\u8fc7\u7a0b\uff0c[]\u4ee3\u8868\u53ef\u9009\u9879 \u53ea\u4f7f\u7528Autoconf your source files -- [autoscan*] -- [configure.scan] -- configure.ac configure.ac --. | .------ autoconf* ----- configure [aclocal.m4] --+---+ | `----- [autoheader*] -- [config.h.in] [acsite.m4] ---' Makefile.in \u4f7f\u7528Automake\uff1a [acinclude.m4] --. | [local macros] --+-- aclocal* -- aclocal.m4 | configure.ac ----' configure.ac --. +-- automake* -- Makefile.in Makefile.am ---' \u914d\u7f6e\u4e00\u4e2a\u8f6f\u4ef6\u5305\u65f6\u5982\u4f55\u4f7f\u7528\u6587\u4ef6\uff1a .------------- [config.cache] configure* ------------+------------- config.log | [config.h.in] -. v .- [config.h] -. +-- config.status* -+ +-- make* Makefile.in ---' `- Makefile ---'","title":"\u5236\u4f5cconfigure\u811a\u672c"},{"location":"autoconf/\u7b80\u4ecb/#configureac","text":"configure.ac \u5305\u542b\u4e86Autoconf\u7684\u5b8f\u8c03\u7528\uff0c\u7528\u4e8e\u6d4b\u8bd5\u7a0b\u5e8f\u5305\u9700\u8981\u7684\u6216\u53ef\u4ee5\u4f7f\u7528\u7684\u7cfb\u7edf\u529f\u80fd\u3002 Autoconf\u6709\u5bf9\u8bb8\u591a\u529f\u80fd\u8fdb\u884c\u68c0\u67e5\u7684\u5b8f \u5bf9\u4e8e\u5927\u90e8\u5206\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u6a21\u677f\u5b8f\u8fdb\u884c\u5ba2\u6237\u7aef\u68c0\u67e5 \u5bf9\u4e8e\u4e00\u4e9b\u7279\u522b\u7684\u529f\u80fd\uff0c\u9700\u8981\u624b\u5199shell\u547d\u4ee4 autoscan\u53ef\u4ee5\u662f\u826f\u597d\u7684\u5f00\u7aef\u3002","title":"\u7f16\u5199configure.ac"},{"location":"autoconf/\u7b80\u4ecb/#shell","text":"autoconf\u662f\u4e3a\u4e86\u4ea7\u751f\u53ef\u79fb\u690d\u7684shell\u811a\u672c-- configure \u7684\u7f16\u8bd1\u5668\u3002","title":"shell\u811a\u672c\u7f16\u8bd1\u5668"},{"location":"autoconf/\u7b80\u4ecb/#autoconf","text":"Autoconf-Language \u5f15\u7528\u7b26\u53f7\u662f [] \uff0c\u5f3a\u70c8\u5efa\u8bae\u5bf9\u6240\u6709\u5305\u542b \u5b8f\u540d\u3001\u9017\u53f7\u3001\u62ec\u53f7\u3001\u524d\u5bfc\u7a7a\u683c\u3001\u6362\u884c\u7b26 \u7684\u53c2\u6570\u90fd\u52a0\u4e0a\u5f15\u7528\u7b26\u53f7\u3002 \u53c2\u6570\u4e2d\u7684\u4efb\u4f55\u524d\u5bfc\u7a7a\u683c\u548c\u65b0\u7684\u884c\u90fd\u4f1a\u88ab\u5ffd\u89c6\uff0c\u9664\u975e\u88ab\u5f15\u7528\u3002 \u8be6\u7ec6\u5f15\u7528\u89c4\u5219 \u5f53\u5728\u5b8f\u53c2\u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u6587\u672c\u65f6\uff0c\u5fc5\u987b\u6709\u4e00\u4e2a\u989d\u5916\u7684\u5f15\u7528\u7ea7\u522b\uff0c\u5e76\u4e14\u5bf9\u91cd\u590d\u7684\u90e8\u5206\u6216\u8005\u6574\u4f53\u8fdb\u884c\u53cc\u91cd\u7684\u7b26\u53f7\u5f15\u7528\u3002 \u5df2\u7ecf\u5728\u6587\u672c\u4e2d\u5f15\u7528\u4e86AC_DC\uff1a[echo Hard rock was here! --AC_DC ] \u5b8f\u53c2\u4e2d\u5f15\u7528\u65f6\uff1aAC_MSG_WARN([[AC_DC] stinks --Iron Maiden]) \u5f15\u7528\u5b8f\u7684\u9ec4\u91d1\u6cd5\u5219\u662f\u6bcf\u6269\u5c55\u4e00\u6b21\u5b8f\uff0c\u5c31\u53bb\u9664\u4e00\u6b21\u5f15\u7528\u3002 whenever you expect macro expansion, expect quote expansion; i.e., expect one level of quotes to be lost. \u63cf\u8ff0\u4e0d\u80fd\u88ab\u5f15\u7528\u4e24\u6b21\u3002 \u6ce8\u91ca\u4ee5 # \u5f00\u5934 note \uff1a\u5f15\u7528\u53d8\u91cf\uff1a\u5982\u679c\u662f\u5b8f\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u5219\u53ef\u76f4\u63a5 $xxx \uff0c\u5982\u679c\u662fshell\u53d8\u91cf\u5219\u9700\u8981 ${xxx} \u3002\u5982\u679c\u8d4b\u503c\u4e0e\u5f15\u7528\u90fd\u5728\u4e00\u6bb5shell\u811a\u672c\u91cc\u9762\uff0c\u90a3\u4e48\u53ef\u76f4\u63a5\u5f15\u7528 $xxx \u3002","title":"Autoconf\u8bed\u8a00"},{"location":"autoconf/\u7b80\u4ecb/#configureac_1","text":"\u6309\u7167\u63a8\u8350\u987a\u5e8f\u6765\u8c03\u7528\u5b8f\uff1a AC_INIT(package, version, bug-report-address) information on the package checks for programs checks for libraries checks for header files checks for types checks for structures checks for compiler characteristics checks for library functions checks for system services AC_CONFIG_FILES([file...]) AC_OUTPUT","title":"\u6807\u51c6configure.ac\u5e03\u5c40"},{"location":"autoconf/\u7b80\u4ecb/#autoscanconfigureac","text":"autoscan\u68c0\u67e5\u5728\u76ee\u5f55\u4e0b\u7684\u6e90\u6587\u4ef6\u3002 \u751f\u6210configure.scan\u6587\u4ef6\u4e4b\u540e\u9700\u8981\u68c0\u67e5\u4fee\u6539\u624d\u80fd\u5c06\u5176\u91cd\u547d\u540d\u4e3aconfigure.ac","title":"\u4f7f\u7528autoscan\u63d2\u4ef6\u751f\u6210configure.ac"},{"location":"autoconf/\u7b80\u4ecb/#ifnames","text":"ifnames\u6253\u5370\u6240\u6709\u7ed9\u5b9a\u7684C\u6e90\u6587\u4ef6\u4e2d\u7684 #if, #elif, #ifdef, or #ifndef \u51fa\u73b0\u5728\u6267\u884c\u6587\u4ef6\u4e2d\u7684\u6807\u8bc6\u7b26\u6392\u5e8f\u5217\u8868","title":"\u4f7f\u7528ifnames\u5217\u51fa\u6761\u4ef6\u8bed\u53e5"},{"location":"autoconf/\u7b80\u4ecb/#autoconfconfigure","text":"\u65e0\u53c2\u8fd0\u884c autoconf \u4ececonfigure.ac\u521b\u5efaconfigure\u3002 autoconf processes configure.ac with the M4 macro processor, using the Autoconf macros. \u5982\u679c\u52a0\u4e86\u53c2\u6570\uff0c\u90a3\u4e48\u5b83\u4ece\u90a3\u4e2a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u5e76\u8f93\u51fa\u914d\u7f6e\u811a\u672c\u5230\u6807\u51c6\u8f93\u51fa\uff1b\u5982\u679c\u52a0\u4e86\u53c2\u6570-\uff0c\u5b83\u4ece\u6807\u51c6\u8f93\u8bfb\u53d6\u7136\u540e\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u3002 Autoconf\u5b8f\u88ab\u5b9a\u4e49\u5728\u591a\u4e2a\u6587\u4ef6\u91cc\u9762\u3002\u5148\u627e\u8ddf\u968fAutoconf\u4e00\u8d77\u53d1\u5e03\u7684\u6587\u4ef6\u4e2d\u7684\u5b8f\uff0c\u518d\u5728\u542b\u6709\u53d1\u5e03\u7684Autoconf\u5b8f\u6587\u4ef6\u7684\u6587\u4ef6\u5939\u4e2d\u627e\u53ef\u9009\u6587\u4ef6[acsite.m4]\u4e2d\u7684\u5b8f\uff0c\u7136\u540e\u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e2d\u627e[aclocal.m4]\u7684\u5b8f\u3002\u540e\u5b9a\u4e49\u7684\u5b8f\u4f1a\u8986\u76d6\u4e4b\u524d\u5b9a\u4e49\u7684\u5b8f\u3002 \u5efa\u8bae\u4f7f\u7528--trace\u9009\u9879\u6765\u68c0\u67e5configure.ac\u6587\u4ef6\u3002","title":"\u4f7f\u7528autoconf\u521b\u5efaconfigure"},{"location":"autoconf/\u7b80\u4ecb/#autoreconfconfigure","text":"autoreconf \u91cd\u590d\u8fd0\u884c autoconf, autoheader, aclocal, automake, libtoolize, and autopoint (when appropriate) \u5728\u7279\u6b8a\u76ee\u5f55\u53ca\u5176\u5b50\u76ee\u5f55\u4e0b\u66f4\u65b0GNU\u6784\u5efa\u7cfb\u7edf\u3002\u9ed8\u8ba4\u53ea\u66f4\u65b0\u8001\u7684\u6587\u4ef6\u3002 \u4e0d\u4f1a\u4f20\u9012--autoconf-dir=dir \u6216 --localdir=dir\u3002","title":"\u4f7f\u7528autoreconf\u66f4\u65b0configure\u811a\u672c"},{"location":"autogen/\u7b80\u4ecb/","text":"\u4ecb\u7ecd \u751f\u6210\u7a0b\u5e8f\uff08\u542b\u6709\u5927\u91cf\u91cd\u590d\u6587\u672c\u4f46\u662f\u6709\u5f88\u591a\u66ff\u6362\u7684\u5730\u65b9\uff09\u6587\u4ef6\u7684\u5de5\u5177\u3002\u76ee\u6807\u662f\u7b80\u5316\u542b\u6709\u5927\u91cf\u91cd\u590d\u6587\u672c\u7684\u7a0b\u5e8f\u7684\u7ef4\u62a4\u3002 AutoGen\u7684\u76ee\u6807 \u5b9a\u4e49\u4e0e\u6a21\u677f\u5b8c\u5168\u5206\u79bb\u3002\u53ea\u9700\u8981\u6307\u5b9a\u5fc5\u9700\u7684\u63cf\u8ff0\u5176\u6a21\u677f\u5e94\u7528\u7684\u6570\u636e\u3002 \u5b9a\u4e49\u4e2d\u7684\u6bcf\u4e2a\u6570\u636e\u90fd\u88ab\u547d\u540d\u3002\u5b9a\u4e49\u53ef\u4ee5\u88ab\u91cd\u65b0\u6392\u5b9a\u3001\u589e\u5f3a\u3001\u53d8\u5f97\u8fc7\u65f6\uff0c\u65e0\u9700\u56de\u9000\u548c\u6e05\u7406\u5b9a\u4e49\u6587\u4ef6\u3002\u51cf\u5c11\u4e0d\u517c\u5bb9\u6027\u3002 \u6bcf\u4e2a\u5b9a\u4e49\u7684\u540d\u5b57\u90fd\u5b9a\u4e49\u4e86\u4e00\u4e2avalues\u6570\u7ec4\u3002\u8fd9\u4e9bvalues\u88ab\u7528\u4e8e\u63a7\u5236\u6a21\u677f\u5404\u90e8\u5206\u7684\u590d\u5236\u3002 \u6709\u547d\u540d\u7684\u5b9a\u4e49\u96c6\u5408\u3002\u4ed6\u4eec\u5f62\u6210\u5d4c\u5957\u7ed3\u6784\u3002\u5173\u8054\u7684values\u88ab\u6536\u96c6\u8d77\u6765\u5e76\u5173\u8054\u5230\u7ec4\u540d\u3002\u8fd9\u4e9b\u76f8\u5173\u7684\u6570\u636e\u5728\u4e00\u7ec4\u66ff\u6362\u4e2d\u5171\u540c\u4f7f\u7528\u3002 \u6a21\u677f\u5177\u6709\u7279\u6b8a\u6807\u8bb0\u6765\u6307\u793a\u9700\u8981\u66ff\u6362\u7684\u4f4d\u7f6e\u3002\u8fd9\u4e9b\u6807\u8bb0\u4e0d\u662f\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\u3002\u4ed6\u4eec\u5728\u6bcf\u4e2a\u6a21\u677f\u7684\u5f00\u5934\u6307\u5b9a\u3002\u6a21\u677f\u8bbe\u8ba1\u8005\u6700\u4e86\u89e3\u5176\u8bed\u6cd5\u7684\u5185\u5bb9\uff0c\u5e76\u907f\u514d\u6807\u8bb0\u51b2\u7a81\u3002 \u8fd9\u4e9b\u540c\u6837\u7684\u6807\u8bb0\u4e0e\u5c01\u95ed\u7684\u5173\u952e\u5b57\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u6307\u793a\u8981\u8df3\u8fc7\u7684\u53ca\u8981\u91cd\u590d\u7684\u6587\u672c\u90e8\u5206\u3002 \u63d0\u4f9b\u65b9\u6cd5\u63a7\u5236\u8f93\u51fa\u3002","title":"\u7b80\u4ecb"},{"location":"autogen/\u7b80\u4ecb/#_1","text":"\u751f\u6210\u7a0b\u5e8f\uff08\u542b\u6709\u5927\u91cf\u91cd\u590d\u6587\u672c\u4f46\u662f\u6709\u5f88\u591a\u66ff\u6362\u7684\u5730\u65b9\uff09\u6587\u4ef6\u7684\u5de5\u5177\u3002\u76ee\u6807\u662f\u7b80\u5316\u542b\u6709\u5927\u91cf\u91cd\u590d\u6587\u672c\u7684\u7a0b\u5e8f\u7684\u7ef4\u62a4\u3002","title":"\u4ecb\u7ecd"},{"location":"autogen/\u7b80\u4ecb/#autogen","text":"\u5b9a\u4e49\u4e0e\u6a21\u677f\u5b8c\u5168\u5206\u79bb\u3002\u53ea\u9700\u8981\u6307\u5b9a\u5fc5\u9700\u7684\u63cf\u8ff0\u5176\u6a21\u677f\u5e94\u7528\u7684\u6570\u636e\u3002 \u5b9a\u4e49\u4e2d\u7684\u6bcf\u4e2a\u6570\u636e\u90fd\u88ab\u547d\u540d\u3002\u5b9a\u4e49\u53ef\u4ee5\u88ab\u91cd\u65b0\u6392\u5b9a\u3001\u589e\u5f3a\u3001\u53d8\u5f97\u8fc7\u65f6\uff0c\u65e0\u9700\u56de\u9000\u548c\u6e05\u7406\u5b9a\u4e49\u6587\u4ef6\u3002\u51cf\u5c11\u4e0d\u517c\u5bb9\u6027\u3002 \u6bcf\u4e2a\u5b9a\u4e49\u7684\u540d\u5b57\u90fd\u5b9a\u4e49\u4e86\u4e00\u4e2avalues\u6570\u7ec4\u3002\u8fd9\u4e9bvalues\u88ab\u7528\u4e8e\u63a7\u5236\u6a21\u677f\u5404\u90e8\u5206\u7684\u590d\u5236\u3002 \u6709\u547d\u540d\u7684\u5b9a\u4e49\u96c6\u5408\u3002\u4ed6\u4eec\u5f62\u6210\u5d4c\u5957\u7ed3\u6784\u3002\u5173\u8054\u7684values\u88ab\u6536\u96c6\u8d77\u6765\u5e76\u5173\u8054\u5230\u7ec4\u540d\u3002\u8fd9\u4e9b\u76f8\u5173\u7684\u6570\u636e\u5728\u4e00\u7ec4\u66ff\u6362\u4e2d\u5171\u540c\u4f7f\u7528\u3002 \u6a21\u677f\u5177\u6709\u7279\u6b8a\u6807\u8bb0\u6765\u6307\u793a\u9700\u8981\u66ff\u6362\u7684\u4f4d\u7f6e\u3002\u8fd9\u4e9b\u6807\u8bb0\u4e0d\u662f\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\u3002\u4ed6\u4eec\u5728\u6bcf\u4e2a\u6a21\u677f\u7684\u5f00\u5934\u6307\u5b9a\u3002\u6a21\u677f\u8bbe\u8ba1\u8005\u6700\u4e86\u89e3\u5176\u8bed\u6cd5\u7684\u5185\u5bb9\uff0c\u5e76\u907f\u514d\u6807\u8bb0\u51b2\u7a81\u3002 \u8fd9\u4e9b\u540c\u6837\u7684\u6807\u8bb0\u4e0e\u5c01\u95ed\u7684\u5173\u952e\u5b57\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u6307\u793a\u8981\u8df3\u8fc7\u7684\u53ca\u8981\u91cd\u590d\u7684\u6587\u672c\u90e8\u5206\u3002 \u63d0\u4f9b\u65b9\u6cd5\u63a7\u5236\u8f93\u51fa\u3002","title":"AutoGen\u7684\u76ee\u6807"},{"location":"automake/10.\u5176\u5b83GNU\u5de5\u5177/","text":"10.5 Python AM_PATH_PYTHON ([version], [action-if-found],[action-if-not-found]) \u5bfb\u627epython\u7ffb\u8bd1\u5668\uff0c\u4f1a\u8df3\u8fc7\u6bd4 version \u5c0f\u7684\u7ffb\u8bd1\u5668\u3002 action-if-not-found \u672a\u4f20\u5165\u4e14\u6ca1\u6709\u627e\u5230\u7ffb\u8bd1\u5668\uff0c\u90a3\u4e48\u9ed8\u8ba4\u7684\u52a8\u4f5c\u662f\u7ec8\u6b62configure\u3002\u8fd8\u4f1a\u521b\u5efa\u591a\u4e2a\u57fa\u4e8epython\u7684\u8f93\u51fa\u53d8\u91cf\u3002 AM_PATH_PYTHON([2.6])","title":"10.\u5176\u5b83GNU\u5de5\u5177"},{"location":"automake/10.\u5176\u5b83GNU\u5de5\u5177/#105-python","text":"","title":"10.5 Python"},{"location":"automake/10.\u5176\u5b83GNU\u5de5\u5177/#am_path_python-version-action-if-foundaction-if-not-found","text":"\u5bfb\u627epython\u7ffb\u8bd1\u5668\uff0c\u4f1a\u8df3\u8fc7\u6bd4 version \u5c0f\u7684\u7ffb\u8bd1\u5668\u3002 action-if-not-found \u672a\u4f20\u5165\u4e14\u6ca1\u6709\u627e\u5230\u7ffb\u8bd1\u5668\uff0c\u90a3\u4e48\u9ed8\u8ba4\u7684\u52a8\u4f5c\u662f\u7ec8\u6b62configure\u3002\u8fd8\u4f1a\u521b\u5efa\u591a\u4e2a\u57fa\u4e8epython\u7684\u8f93\u51fa\u53d8\u91cf\u3002 AM_PATH_PYTHON([2.6])","title":"AM_PATH_PYTHON ([version], [action-if-found],[action-if-not-found])"},{"location":"automake/12.\u5b89\u88c5/","text":"\u6587\u4ef6\u683c\u5f0f_\u6587\u4ef6\u7c7b\u578b\u3002\u540d\u5b57\u4e2d\u544a\u8bc9automake\u6784\u5efa\u7684\u662f\u4ec0\u4e48\u7684\u90e8\u5206\u88ab\u79f0\u505a primary \uff0c\u5373\u540e\u7f00\u3002\u4f8b\u5982\uff0c PROGRAMS \u638c\u63e1\u4e86\u5c06\u8981\u88ab\u7f16\u8bd1\u548c\u94fe\u63a5\u7684\u5217\u8868\u3002\u524d\u7f00\u8868\u793a\u5c06\u5b89\u88c5\u5230\u54ea\u4e2a\u6807\u51c6\u76ee\u5f55\u3002 \u76ee\u5f55\u540d\u540e\u7f00\uff1a\u2018PROGRAMS\u2019, \u2018LIBRARIES\u2019, \u2018LTLIBRARIES\u2019, \u2018LISP\u2019, \u2018PYTHON\u2019, \u2018JAVA\u2019, \u2018SCRIPTS\u2019, \u2018DATA\u2019, \u2018HEADERS\u2019, \u2018MANS\u2019, and \u2018TEXINFOS\u2019\u3002 \u5f53\u8fd0\u884c make install \u65f6\uff0c\u6240\u6709\u7684\u88ab\u5404\u79cdprimary\u547d\u540d\u7684\u6587\u4ef6\u90fd\u4f1a\u88ab\u81ea\u52a8\u5b89\u88c5\u5728\u5408\u9002\u7684\u4f4d\u7f6e\u3002 12.1 \u5b89\u88c5\u57fa\u7840 \u5728primary\u4e2d\u6307\u5b9a\u7684\u6587\u4ef6\u7684\u5b89\u88c5\u65b9\u5f0f\u662f\u590d\u5236\u6784\u5efa\u6587\u4ef6\u5230\u5408\u9002\u7684\u76ee\u5f55\u4e0b\u3002\u53ea\u4f7f\u7528\u6587\u4ef6\u540d\uff0c\u4e0d\u4f7f\u7528\u76ee\u5f55\u524d\u7f00\u3002 bin_PROGRAMS = hello subdir/goodbye hello\u4e0egoodbye\u90fd\u4f1a\u88ab\u5b89\u88c5\u5230 $(bindir) \u3002 \u53ef\u4ee5\u4f7f\u7528 no_base \u524d\u7f00\u53d6\u6d88\u8fd9\u4e00\u89c4\u5219\u3002 nobase_include_HEADERS = stdio.h sys/types.h types.h\u4f1a\u88ab\u5b89\u88c5\u5230 $(bindir)/sys \u4e0b\u9762\u3002 12.2 \u5b89\u88c5\u7684\u4e24\u4e2a\u9636\u6bb5 Automake\u901a\u5e38\u5206\u6210 install-data \u548c install-exec \u4e24\u4e2a\u89c4\u5219\u3002\u524d\u8005\u5b89\u88c5\u7684\u662f\u4e0e\u5e73\u53f0\u65e0\u5173\u7684\u6587\u4ef6\uff0c\u540e\u8005\u5b89\u88c5\u7684\u662f\u6587\u4ef6\u5219\u76f8\u53cd\u3002 \u5b89\u88c5\u7684\u6587\u4ef6\u89c4\u5219\uff1a install-data\uff1a\u5e26\u6709 \u2018data\u2019, \u2018info\u2019, \u2018man\u2019, \u2018include\u2019, \u2018oldinclude\u2019, \u2018pkgdata\u2019, or \u2018pkginclude\u2019 \u524d\u7f00\u7684\u6587\u4ef6\u5217\u8868 install-exec\uff1a\u5e26\u6709 \u2018bin\u2019, \u2018sbin\u2019, \u2018libexec\u2019, \u2018sysconf\u2019, \u2018localstate\u2019, \u2018lib\u2019, or \u2018pkglib\u2019 \u524d\u7f00\u7684\u6587\u4ef6\u5217\u8868 \u4efb\u4f55\u4f7f\u7528\u7528\u6237\u81ea\u5b9a\u4e49\u6587\u4ef6\u5939\u3001\u5e26\u6709 exec \u524d\u7f00\u7684\u53d8\u91cf\uff08\u4f8b\u5982 myexecbin_PROGRAMS\uff09\uff0c\u88abinstall-exec\u5b89\u88c5\uff0c\u5176\u4f59\u6240\u6709\u7684\u81ea\u5b9a\u4e49\u524d\u7f00\u88abinstall-data\u5b89\u88c5\u3002 12.3 \u5b89\u88c5\u89c4\u5219\u7684\u6269\u5c55 \u4f7f\u7528 -local \u540e\u7f00\uff1ainstall-exec-local or install-data-local\u3002 \u4f7f\u7528 -hook \u540e\u7f00\uff1ainstall-exec-hook or install-data-hook\u3002 12.4 \u5b89\u88c5\u9636\u6bb5 Automake\u5728\u6240\u6709\u7684\u5b89\u88c5\u89c4\u5219\u4e2d\u652f\u6301 DESTDIR \u53d8\u91cf\u3002\u6bcf\u4e2a\u5bf9\u8c61\u548c\u8def\u5f84\u90fd\u4f1a\u88ab\u52a0\u4e0a DESTDIR \u524d\u7f00\u3002 mkdir /tmp/staging make DESTDIR=/tmp/staging install \u6b64\u9879\u7279\u6027\u901a\u5e38\u88ab\u7528\u4e8e\u6784\u5efa\u5b89\u88c5\u955c\u50cf\u548c\u5b89\u88c5\u5305\u3002 12.5 \u7528\u6237\u7684\u5b89\u88c5\u89c4\u5219 \u652f\u6301\u7684\u89c4\u5219\uff1auninstall, installdirs, and install-strip\u3002 \u652f\u6301\u7684\u6269\u5c55\uff1auninstall-local and uninstall-hook\u3002","title":"12.\u5b89\u88c5"},{"location":"automake/12.\u5b89\u88c5/#121","text":"\u5728primary\u4e2d\u6307\u5b9a\u7684\u6587\u4ef6\u7684\u5b89\u88c5\u65b9\u5f0f\u662f\u590d\u5236\u6784\u5efa\u6587\u4ef6\u5230\u5408\u9002\u7684\u76ee\u5f55\u4e0b\u3002\u53ea\u4f7f\u7528\u6587\u4ef6\u540d\uff0c\u4e0d\u4f7f\u7528\u76ee\u5f55\u524d\u7f00\u3002 bin_PROGRAMS = hello subdir/goodbye hello\u4e0egoodbye\u90fd\u4f1a\u88ab\u5b89\u88c5\u5230 $(bindir) \u3002 \u53ef\u4ee5\u4f7f\u7528 no_base \u524d\u7f00\u53d6\u6d88\u8fd9\u4e00\u89c4\u5219\u3002 nobase_include_HEADERS = stdio.h sys/types.h types.h\u4f1a\u88ab\u5b89\u88c5\u5230 $(bindir)/sys \u4e0b\u9762\u3002","title":"12.1 \u5b89\u88c5\u57fa\u7840"},{"location":"automake/12.\u5b89\u88c5/#122","text":"Automake\u901a\u5e38\u5206\u6210 install-data \u548c install-exec \u4e24\u4e2a\u89c4\u5219\u3002\u524d\u8005\u5b89\u88c5\u7684\u662f\u4e0e\u5e73\u53f0\u65e0\u5173\u7684\u6587\u4ef6\uff0c\u540e\u8005\u5b89\u88c5\u7684\u662f\u6587\u4ef6\u5219\u76f8\u53cd\u3002 \u5b89\u88c5\u7684\u6587\u4ef6\u89c4\u5219\uff1a install-data\uff1a\u5e26\u6709 \u2018data\u2019, \u2018info\u2019, \u2018man\u2019, \u2018include\u2019, \u2018oldinclude\u2019, \u2018pkgdata\u2019, or \u2018pkginclude\u2019 \u524d\u7f00\u7684\u6587\u4ef6\u5217\u8868 install-exec\uff1a\u5e26\u6709 \u2018bin\u2019, \u2018sbin\u2019, \u2018libexec\u2019, \u2018sysconf\u2019, \u2018localstate\u2019, \u2018lib\u2019, or \u2018pkglib\u2019 \u524d\u7f00\u7684\u6587\u4ef6\u5217\u8868 \u4efb\u4f55\u4f7f\u7528\u7528\u6237\u81ea\u5b9a\u4e49\u6587\u4ef6\u5939\u3001\u5e26\u6709 exec \u524d\u7f00\u7684\u53d8\u91cf\uff08\u4f8b\u5982 myexecbin_PROGRAMS\uff09\uff0c\u88abinstall-exec\u5b89\u88c5\uff0c\u5176\u4f59\u6240\u6709\u7684\u81ea\u5b9a\u4e49\u524d\u7f00\u88abinstall-data\u5b89\u88c5\u3002","title":"12.2 \u5b89\u88c5\u7684\u4e24\u4e2a\u9636\u6bb5"},{"location":"automake/12.\u5b89\u88c5/#123","text":"\u4f7f\u7528 -local \u540e\u7f00\uff1ainstall-exec-local or install-data-local\u3002 \u4f7f\u7528 -hook \u540e\u7f00\uff1ainstall-exec-hook or install-data-hook\u3002","title":"12.3 \u5b89\u88c5\u89c4\u5219\u7684\u6269\u5c55"},{"location":"automake/12.\u5b89\u88c5/#124","text":"Automake\u5728\u6240\u6709\u7684\u5b89\u88c5\u89c4\u5219\u4e2d\u652f\u6301 DESTDIR \u53d8\u91cf\u3002\u6bcf\u4e2a\u5bf9\u8c61\u548c\u8def\u5f84\u90fd\u4f1a\u88ab\u52a0\u4e0a DESTDIR \u524d\u7f00\u3002 mkdir /tmp/staging make DESTDIR=/tmp/staging install \u6b64\u9879\u7279\u6027\u901a\u5e38\u88ab\u7528\u4e8e\u6784\u5efa\u5b89\u88c5\u955c\u50cf\u548c\u5b89\u88c5\u5305\u3002","title":"12.4 \u5b89\u88c5\u9636\u6bb5"},{"location":"automake/12.\u5b89\u88c5/#125","text":"\u652f\u6301\u7684\u89c4\u5219\uff1auninstall, installdirs, and install-strip\u3002 \u652f\u6301\u7684\u6269\u5c55\uff1auninstall-local and uninstall-hook\u3002","title":"12.5 \u7528\u6237\u7684\u5b89\u88c5\u89c4\u5219"},{"location":"automake/13.\u6e05\u7406/","text":"\u901a\u5e38Automake\u53ef\u4ee5\u81ea\u52a8\u786e\u5b9a\u6e05\u7406\u7684\u6587\u4ef6\u3002\u4e5f\u63d0\u4f9b\u4e86 MOSTLYCLEANFILES , CLEANFILES , DISTCLEANFILES , and MAINTAINERCLEANFILES \u53d8\u91cf\u6307\u5b9a\u989d\u5916\u7684\u9700\u8981\u6e05\u7406\u7684\u6587\u4ef6\u3002 \u6e05\u7406\u89c4\u5219\uff1a \u5982\u679cmake\u6784\u5efa\u4e86\u5b83\u5e76\u4e14\u662f\u901a\u5e38\u4f1a\u91cd\u65b0\u6784\u5efa\u7684\u6587\u4ef6\uff08\u6bd4\u5982.o\u6587\u4ef6\uff09\uff0c\u90a3\u4e48 mostclean \u5220\u9664\u5b83\u3002 \u5982\u679cmake\u6784\u5efa\u4e86\u5b83\uff0c\u90a3\u4e48 clean \u5220\u6389\u5b83\u3002 \u5982\u679c\u662fconfigure\u6784\u5efa\u4e86\u5b83\uff0c\u90a3\u4e48 distclean \u5220\u9664\u3002 \u5982\u679c\u662f\u7ef4\u62a4\u8005\u6784\u5efa\u7684\uff0c\u90a3\u4e48 maintainer-clean \u5220\u9664\u3002\u4e0d\u80fd\u6e05\u7406\u8fd0\u884c ./configure make \u6240\u5fc5\u987b\u7684\u6587\u4ef6\u3002 \u53ef\u4ee5\u6269\u5c55\u3002\u53c2\u8003 \u89c4\u5219\u6269\u5c55 \u3002","title":"13.\u6e05\u7406"},{"location":"automake/14.\u53d1\u5e03/","text":"14.1 \u53d1\u5e03\u57fa\u7840 \u53ef\u4ee5\u53d1\u5e03\u591a\u79cd\u683c\u5f0f\u7684\u53d1\u5e03\u5305\uff0c\u4e0d\u53ea\u6709tar.gz\u3002 \u53d1\u5e03\u5305\u542b\u7684\u6587\u4ef6\uff1a \u6240\u6709\u7684\u6e90\u6587\u4ef6\uff0cMakefilea.am\u548cMakefile.in\u4e5f\u4f1a\u8fdb\u53bb Automake\u5185\u7f6e\u7684\u5e38\u7528\u6587\u4ef6\u5217\u8868\uff0c\u53ef\u4ee5\u901a\u8fc7 automake --help \u67e5\u770b \u4e00\u4e9b\u7279\u5b9a\u6761\u4ef6\u4e0b\u4ea7\u751f\u7684\u6587\u4ef6\uff08\u6bd4\u5982 AC_CONFIG_HEADERS([config.h]) \u4ea7\u51fa\u7684 config.h.top and config.h.bot \u6587\u4ef6\uff09 \u88abconfigure\u51c6\u5907\u7684\u6587\u4ef6 Makefile.am\u4e2d\u4f7f\u7528 include \u5217\u51fa\u7684\u6587\u4ef6\u3001configure.ac\u4e2d\u4f7f\u7528 m4_include \u5217\u51fa\u7684\u6587\u4ef6??? automake --add-missing \u5b89\u88c5\u7684\u5e2e\u52a9\u811a\u672c \u4e00\u4e9b\u6587\u4ef6\u4e0d\u4f1a\u88ab\u89c4\u5219\u6240\u5305\u542b\uff0c\u53ef\u4ee5\u5728 EXTRA_DIST \u4e2d\u6307\u5b9a\u8fd9\u4e9b\u6587\u4ef6\uff08\u5939\uff09\u3002\u6307\u5b9a\u6587\u4ef6\u5939\u65f6\u53ef\u80fd\u4e0d\u4f1a\u60f3\u8981\u4f8b\u5982\u79c1\u6709\u6587\u4ef6\u5939.svn\u88ab\u5305\u542b\uff0c\u53ef\u4ee5\u4f7f\u7528\u7279\u6027 as-is \uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 disk-hook \u7279\u6027\u6765\u6539\u5584\u8fd9\u4e2a\u95ee\u9898\u3002see The dist Hook SUBDIRS \u4e5f\u4f1a\u9012\u5f52\u7684\u5305\u542b\u5b50\u76ee\u5f55\u3002\u53ef\u4ee5\u8bbe\u7f6e\u6761\u4ef6\uff0c see Conditionals \u3002\u5982\u679c\u9700\u8981\u6709\u6761\u4ef6\u7684\u6307\u5b9a\u4e00\u7cfb\u5217\u76ee\u5f55\uff0c\u53ef\u4ee5\u8bbe\u7f6e DIST_SUBDIRS \uff0c see Conditional Subdirectories \u3002 14.3 The dist Hook \u5728\u6253\u5305\u4e4b\u524d\u6539\u53d8\u3002\u5728\u53d1\u5e03\u6587\u4ef6\u5939\u88ab\u586b\u5145\u4e4b\u540e\u3001\u5b9e\u9645\u53d1\u5e03\u6863\u6848\u88ab\u521b\u5efa\u4e4b\u524d\u8fd0\u884c\u3002 EXTRA_DIST = doc dist-hook: rm -rf `find $(distdir)/doc -type d -name .svn` \u8be5\u89c4\u5219\u4e0d\u4f1a\u8ba4\u4e3a\u6587\u4ef6\u662f\u53ef\u5199\u7684\uff0c\u6240\u4ee5\u9700\u8981\u6539\u53d8\u6587\u4ef6\u5185\u5bb9\u65f6\uff0c\u6dfb\u52a0\u60f3\u5e94\u7684\u6743\u9650\u3002 (distdir) \u6307\u5411\u5f53\u524d\u6587\u4ef6\u5939\uff1b $(top_distdir) \u6307\u5411\u6839\u76ee\u5f55\u3002 Note \uff1awhen packages are nested using AC_CONFIG_SUBDIRS (see Subpackages), then \u2018$(distdir)\u2019 and \u2018$(top_distdir)\u2019 are relative to the package where \u2018make dist\u2019 was run, not to any sub-packages involved.","title":"14.\u53d1\u5e03"},{"location":"automake/14.\u53d1\u5e03/#141","text":"\u53ef\u4ee5\u53d1\u5e03\u591a\u79cd\u683c\u5f0f\u7684\u53d1\u5e03\u5305\uff0c\u4e0d\u53ea\u6709tar.gz\u3002 \u53d1\u5e03\u5305\u542b\u7684\u6587\u4ef6\uff1a \u6240\u6709\u7684\u6e90\u6587\u4ef6\uff0cMakefilea.am\u548cMakefile.in\u4e5f\u4f1a\u8fdb\u53bb Automake\u5185\u7f6e\u7684\u5e38\u7528\u6587\u4ef6\u5217\u8868\uff0c\u53ef\u4ee5\u901a\u8fc7 automake --help \u67e5\u770b \u4e00\u4e9b\u7279\u5b9a\u6761\u4ef6\u4e0b\u4ea7\u751f\u7684\u6587\u4ef6\uff08\u6bd4\u5982 AC_CONFIG_HEADERS([config.h]) \u4ea7\u51fa\u7684 config.h.top and config.h.bot \u6587\u4ef6\uff09 \u88abconfigure\u51c6\u5907\u7684\u6587\u4ef6 Makefile.am\u4e2d\u4f7f\u7528 include \u5217\u51fa\u7684\u6587\u4ef6\u3001configure.ac\u4e2d\u4f7f\u7528 m4_include \u5217\u51fa\u7684\u6587\u4ef6??? automake --add-missing \u5b89\u88c5\u7684\u5e2e\u52a9\u811a\u672c \u4e00\u4e9b\u6587\u4ef6\u4e0d\u4f1a\u88ab\u89c4\u5219\u6240\u5305\u542b\uff0c\u53ef\u4ee5\u5728 EXTRA_DIST \u4e2d\u6307\u5b9a\u8fd9\u4e9b\u6587\u4ef6\uff08\u5939\uff09\u3002\u6307\u5b9a\u6587\u4ef6\u5939\u65f6\u53ef\u80fd\u4e0d\u4f1a\u60f3\u8981\u4f8b\u5982\u79c1\u6709\u6587\u4ef6\u5939.svn\u88ab\u5305\u542b\uff0c\u53ef\u4ee5\u4f7f\u7528\u7279\u6027 as-is \uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 disk-hook \u7279\u6027\u6765\u6539\u5584\u8fd9\u4e2a\u95ee\u9898\u3002see The dist Hook SUBDIRS \u4e5f\u4f1a\u9012\u5f52\u7684\u5305\u542b\u5b50\u76ee\u5f55\u3002\u53ef\u4ee5\u8bbe\u7f6e\u6761\u4ef6\uff0c see Conditionals \u3002\u5982\u679c\u9700\u8981\u6709\u6761\u4ef6\u7684\u6307\u5b9a\u4e00\u7cfb\u5217\u76ee\u5f55\uff0c\u53ef\u4ee5\u8bbe\u7f6e DIST_SUBDIRS \uff0c see Conditional Subdirectories \u3002","title":"14.1 \u53d1\u5e03\u57fa\u7840"},{"location":"automake/14.\u53d1\u5e03/#143-the-dist-hook","text":"\u5728\u6253\u5305\u4e4b\u524d\u6539\u53d8\u3002\u5728\u53d1\u5e03\u6587\u4ef6\u5939\u88ab\u586b\u5145\u4e4b\u540e\u3001\u5b9e\u9645\u53d1\u5e03\u6863\u6848\u88ab\u521b\u5efa\u4e4b\u524d\u8fd0\u884c\u3002 EXTRA_DIST = doc dist-hook: rm -rf `find $(distdir)/doc -type d -name .svn` \u8be5\u89c4\u5219\u4e0d\u4f1a\u8ba4\u4e3a\u6587\u4ef6\u662f\u53ef\u5199\u7684\uff0c\u6240\u4ee5\u9700\u8981\u6539\u53d8\u6587\u4ef6\u5185\u5bb9\u65f6\uff0c\u6dfb\u52a0\u60f3\u5e94\u7684\u6743\u9650\u3002 (distdir) \u6307\u5411\u5f53\u524d\u6587\u4ef6\u5939\uff1b $(top_distdir) \u6307\u5411\u6839\u76ee\u5f55\u3002 Note \uff1awhen packages are nested using AC_CONFIG_SUBDIRS (see Subpackages), then \u2018$(distdir)\u2019 and \u2018$(top_distdir)\u2019 are relative to the package where \u2018make dist\u2019 was run, not to any sub-packages involved.","title":"14.3 The dist Hook"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/","text":"\u6d4b\u8bd5\u5957\u4ef6\u7531\u4e00\u7cfb\u5217\u7684\u6d4b\u8bd5\u7528\u4f8b\u7ec4\u6210\u3002 Automake\u53ef\u4ee5\u751f\u6210\u4ee3\u7801\u6765\u5904\u7406\u4e24\u79cd\u6d4b\u8bd5\u5957\u4ef6\u3002 \u57fa\u4e8e\u548c dejagnu \u6846\u67b6\u96c6\u6210\u3002 \u57fa\u4e8e\u901a\u7528\u6d4b\u8bd5\u811a\u672c\uff0c\u901a\u8fc7\u5b9a\u4e49\u7279\u6b8a\u53d8\u91cf TESTS \u6fc0\u6d3b\u3002\u597d\u50cf\u4e0d\u652f\u6301\u901a\u914d\u7b26\u3002 \u7b2c\u4e8c\u79cd\u5141\u8bb8\u5e76\u53d1\u6267\u884c\u6d4b\u8bd5\u811a\u672c\uff0c\u4f7f\u7528\u5df2\u6709\u7684\u6d4b\u8bd5\u534f\u8bae\uff08\u4f8b\u5982TAP\uff09\uff0c\u4ee5\u53ca\u81ea\u5b9a\u4e49\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f\u548c\u6d4b\u8bd5\u8fd0\u884c\u7a0b\u5e8f\u3002 \u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7 make check \u8c03\u7528\u6d4b\u8bd5\u5957\u4ef6\u3002 \u4e00\u4e9b\u8bf4\u660e\uff1a \u8df3\u8fc7\u6d4b\u8bd5\uff08 skipped \uff09\uff1a\u6d4b\u8bd5\u6ca1\u6709\u610f\u4e49\uff0c\u6d4b\u8bd5\u6761\u4ef6\u4e0d\u6ee1\u8db3\u3002 \u786c\u9519\u8bef\uff08 hard error \uff09\uff1a\u6d4b\u8bd5\u573a\u666f\u4e0d\u5bf9\uff0c\u4e00\u4e9b\u610f\u5916\u60c5\u51b5\u3002 \u9884\u671f\u5931\u8d25 expected failure (xfail) \uff0c\u672a\u9884\u8ba1\u7684\u901a\u8fc7 unexpected pass (xpass) \u3002 15.2 \u7b80\u5355\u6d4b\u8bd5 15.2.1 \u57fa\u4e8e\u811a\u672c\u7684\u6d4b\u8bd5\u5957\u4ef6 \u5982\u679c TESTS \u53d8\u91cf\u88ab\u5b9a\u4e49\u4e86\uff0c\u5176\u503c\u662f\u6267\u884c\u6d4b\u8bd5\u7684\u7a0b\u5e8f\u6216\u811a\u672c\u5217\u8868\u3002 \u6d4b\u8bd5\u811a\u672c\u53ef\u4ee5\u5e76\u884c\u6216\u4e32\u884c\u6267\u884c\uff0c\u9ed8\u8ba4\u7684\u662f\u5e76\u884c\u6d4b\u8bd5\u5957\u4ef6\u3002 \u9ed8\u8ba4\u7684\u6d4b\u8bd5\u7ed3\u679c\u662f\u6d4b\u8bd5\u811a\u672c\u7684\u9000\u51fa\u7ed3\u679c\u3002 Automake\u4e5f\u652f\u6301\u66f4\u591a\u7684\u534f\u8bae\uff1astandard (see Using the TAP test protocol ) \u548c custom (see Custom Test Drivers )\u3002 note \uff1a\u4e0d\u80fd\u5728\u4e32\u884c\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u534f\u8bae\u3002 \u4e0d\u4f7f\u7528\u6d4b\u8bd5\u534f\u8bae\u7684\u65f6\u5019\uff0c\u6d4b\u8bd5\u811a\u672c\u7684\u9000\u51fa\u7801\u7684\u610f\u4e49\u5982\u4e0b\uff1a 0 - \u6210\u529f 77 - \u8df3\u8fc7\u8be5\u6d4b\u8bd5 99 - \u786c\u9519\u8bef \u5176\u5b83 - \u5931\u8d25 \u53ef\u4ee5\u4f7f\u7528 XFAIL_TESTS \u53d8\u91cf\u5217\u51fa xfail \u7684\u6d4b\u8bd5\uff0c\u5b83\u662f TESTS \u7684\u5b50\u96c6\u3002\u5b9a\u4e49 DISABLE_HARD_ERRORS \u53d8\u91cf\u4e3a\u975e\u7a7a\u503c\u6765\u9879\u666e\u901a\u7684\u9519\u8bef\u4e00\u6837\u5bf9\u5f85\u786c\u9519\u8bef\u3002 note \uff1a\u4f7f\u7528\u6d4b\u8bd5\u534f\u8bae\u7684\u65f6\u5019\uff0c\u8fd9\u4e24\u4e2a\u53d8\u91cf\u4e0d\u4f1a\u8d77\u4f5c\u7528\u3002 PASS: foo.sh PASS: zardoz.tap 1 - Daemon started PASS: zardoz.tap 2 - Daemon responding SKIP: zardoz.tap 3 - Daemon uses /proc # SKIP /proc is not mounted PASS: zardoz.tap 4 - Daemon stopped SKIP: bar.sh PASS: mu.tap 1 XFAIL: mu.tap 2 # TODO frobnication not yet implemented AM_COLOR_TESTS=always \uff0c\u5f69\u8272\u8f93\u51fa\u3002 AM_TESTS_ENVIRONMENT \u4e0e TESTS_ENVIRONMENT \u53d8\u91cf\u7528\u4e8e\u7ed9\u6d4b\u8bd5\u811a\u672c\u8fd0\u884c\u521d\u59cb\u5316\u4ee3\u7801\u548c\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u524d\u8005\u662f\u5f00\u53d1\u4eba\u5458\u4fdd\u7559\u7684\uff0c\u540e\u8005\u662f\u7528\u6237\u4fdd\u7559\u7684\uff08\u53ef\u6269\u5c55\u5e76\u4e14\u8986\u76d6\u524d\u8005\u7684\u8bbe\u7f6e\uff09\u3002\u975e\u7a7a\u7684 AM_TESTS_ENVIRONMENT \u5fc5\u987b\u4ee5\u5206\u53f7\u7ed3\u675f\uff0c\u4e14\u4e0d\u652f\u6301\u4e32\u884c\u6d4b\u8bd5\u3002 Automake\u4f1a\u4fdd\u8bc1\u6bcf\u4e2a\u5728 TEST \u4e2d\u5217\u51fa\u7684\u6587\u4ef6\u5728\u8fd0\u884c\u4e4b\u524d\u88ab\u6784\u5efa\u3002 \u5728 check_primary \u4e2d\u5217\u51fa\u7684\u6d4b\u8bd5\u7a0b\u5e8f\u4e4b\u5728 make check \u7684\u65f6\u5019\u6784\u5efa\uff0c\u800c\u4e0d\u662f\u5728 make all \u671f\u95f4\u3002 15.2.2 \u4e32\u884c\u6d4b\u8bd5 \u5f3a\u70c8\u4e0d\u63a8\u8350\u4f7f\u7528\u3002 \u901a\u8fc7Automake\u9009\u9879 serial-tests \u5b9e\u73b0\u4e32\u884c\u6d4b\u8bd5 15.2.3 \u5e76\u884c\u6d4b\u8bd5 make -j \u6267\u884c\u5e76\u884c\u6d4b\u8bd5\u3002 make -j3 check \u6807\u51c6\u9519\u8bef\u4e0e\u6807\u51c6\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u6bcf\u4e2a\u6d4b\u8bd5\u7684 .log \u6587\u4ef6\uff0c\u7ed3\u679c\u5728 .trs \u6587\u4ef6\u3002\u5931\u8d25\u7684\u6d4b\u8bd5\u6536\u96c6\u5728 test-suite.log \u6587\u4ef6\u4e2d\u3002 \u81ea\u5b9a\u4e49\u6d4b\u8bd5\u7a0b\u5e8f\uff1b\u6ca1\u6709\u6ce8\u518c\u7684\u6269\u5c55\u540d\u7684\u6d4b\u8bd5\uff0c\u4f1a\u4f7f\u7528\u53d8\u91cf LOG_COMPILER, AM_LOG_FLAGS, and LOG_FLAGS \uff1a TESTS = foo.pl bar.py baz TEST_EXTENSIONS = .pl .py PL_LOG_COMPILER = $(PERL) AM_PL_LOG_FLAGS = -w PY_LOG_COMPILER = $(PYTHON) AM_PY_LOG_FLAGS = -v LOG_COMPILER = ./wrapper-script AM_LOG_FLAGS = -d \u53ef\u4ee5\u4f7f\u7528 : \u6765\u4fdd\u8bc1\u6d4b\u8bd5\u7684\u4f9d\u8d56\u5173\u7cfb TESTS = foo-compile.test foo-execute.test foo-execute.log: foo-compile.log note \uff1a\u53ea\u4fdd\u8bc1\u987a\u5e8f\uff0c\u4e0d\u4fdd\u8bc1\u7ed3\u679c\u3002\u5373\u65e0\u8bbafoo-compile.test\u662f\u5426\u6210\u529f\uff0c\u90fd\u4f1a\u7ee7\u7eed\u6267\u884cfoo-execute.log\u3002 15.3 \u81ea\u5b9a\u4e49\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f 15.3.1 \u6982\u8ff0 \u81ea\u5b9a\u4e49\u7684\u6d4b\u8bd5\u7a0b\u5e8f\u7684\u9884\u671f\u662f\uff1a\u6b63\u786e\u5730\u8fd0\u884c\u4f20\u9012\u7ed9\u5b83\u7684\u6d4b\u8bd5\u7a0b\u5e8f\uff08\u5305\u62ec\u547d\u4ee4\u884c\u4f20\u9012\u7ed9\u6d4b\u8bd5\u7a0b\u5e8f\u7684\u53c2\u6570\uff09\uff0c\u5206\u6790\u5b83\u4eec\u7684\u6267\u884c\u548c\u7ed3\u679c\uff0c\u521b\u5efa\u76f8\u5173\u7684 .log \u548c .trs \u6587\u4ef6\uff0c\u5728\u63a7\u5236\u53f0\u663e\u793a\u6d4b\u8bd5\u7ed3\u679c\u3002 \u5982\u4f55\u786e\u5b9a\u548c\u5206\u6790\u6d4b\u8bd5\u811a\u672c\u7ed3\u679c\u7684\u786e\u5207\u7ec6\u8282\u7531\u5404\u4e2a\u9a71\u52a8\u7a0b\u5e8f\u51b3\u5b9a\u3002 \u5373\u4f7f\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5e76\u884c\u6d4b\u8bd5\u7684\u5927\u90e8\u5206\u529f\u80fd\u4ecd\u7136\u8981\u5b9e\u73b0\uff1b\u5305\u62ec\u4ee5\u4e0b\u51e0\u70b9\uff1a \u5728 TESTS \u4e2d\u5b9a\u4e49\u6d4b\u8bd5\u811a\u672c\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u53ef\u901a\u8fc7 TESTS \u6216 TEST_LOGS \u8986\u76d6\u3002 \u901a\u8fc7\u4f7f\u7528make\u7684\u9009\u9879-j N \uff0c\u5e76\u53d1\u6267\u884c\u3002 \u6bcf\u4e2a\u6d4b\u8bd5\u7684 .log \u3001 .trs \u6587\u4ef6\uff0c\u8fd8\u6709\u6458\u8981\u7684 .log \u6587\u4ef6\u3002 recheck \u76ee\u6807\uff0c RECHECK_LOGS \u53d8\u91cf\uff0c\u6d4b\u8bd5\u61d2\u91cd\u65b0\u8fd0\u884c\u3002 \u6d4b\u8bd5\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u5bf9 check_* \u53d8\u91cf\u7684\u652f\u6301\uff08check_PROGRAMS, check_LIBRARIES, ...\uff09\u3002 \u4f7f\u7528 VERBOSE \u73af\u5883\u53d8\u91cf\u83b7\u53d6\u6d4b\u8bd5\u5957\u4ef6\u5931\u8d25\u7684\u8be6\u7ec6\u8f93\u51fa\u3002 \u5b9a\u4e49 TESTS_ENVIRONMENT, AM_TESTS_ENVIRONMENT and AM_TESTS_FD_REDIRECT \u53d8\u91cf\u3002 \u901a\u7528\u5b9a\u4e49\u548c\u6269\u5c55\u5b9a\u4e49 LOG_COMPILER \u548c LOG_FLAGS \u53d8\u91cf\u3002 15.3.2 \u58f0\u660e\u9a71\u52a8 \u901a\u8fc7\u5b9a\u4e49make\u53d8\u91cf LOG_DRIVER \u6216 ext_LOG_DRIVER \uff08 ext \u5fc5\u987b\u5728 TEST_EXTENSIONS \u4e2d\u58f0\u660e\uff09\u6765\u58f0\u660e\u81ea\u5b9a\u4e49\u7684\u6d4b\u8bd5\u5957\u4ef6\u9a71\u52a8\u3002 \u5f00\u53d1\u8005\u4fdd\u7559\u53d8\u91cf AM_DRIVER_FLAGS \u548c\u7528\u6237\u4fdd\u7559\u53d8\u91cf LOG_DRIVER_FLAGS \u53ef\u88ab\u7528\u4e8e\u5b9a\u4e49 flags \uff0c\u4f1a\u88ab\u4f20\u7ed9\u6bcf\u4e2a LOG_DRIVER \u8c03\u7528\u3002\u7c7b\u4f3c\u7684\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5728 TEST_EXTENSIONS \u4e2d\u58f0\u660e\u7684\u6269\u5c55 ext \uff0c\u5728 AM_ext_LOG_DRIVER_FLAGS \u548c ext_LOG_DRIVER_FLAGS \u4e2d\u5217\u51fa\u7684 flags \u4f1a\u88ab\u4f20\u9012\u7ed9 ext_LOG_DRIVER \u3002 15.3.3 \u5b9a\u5236\u6d4b\u8bd5\u9a71\u52a8\u7684 API pass 15.4 TAP \u6d4b\u8bd5\u534f\u8bae 15.4.1 \u4ecb\u7ecd TAP\uff0c the Test Anything Protocol\uff0c\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u57fa\u4e8e\u6587\u672c\u7684\u5728\u6d4b\u8bd5\u6a21\u5757\uff08\u6216\u7a0b\u5e8f\uff09\u4e0e\u6d4b\u8bd5\u5de5\u5177\u4e4b\u95f4\u7684\u63a5\u53e3\u3002 The tests (TAP producers) \u5411\u6807\u51c6\u8f93\u51fa\u4e2d\u4ee5\u4e00\u79cd\u7b80\u5355\u7684\u683c\u5f0f\u5199\u5165\u6d4b\u8bd5\u7ed3\u679c\uff1b a test harness (TAP consumer)\u4f1a\u89e3\u6790\u548c\u89e3\u91ca\u8fd9\u4e9b\u7ed3\u679c\uff0c\u6b63\u786e\u5730\u5448\u73b0\u7ed9\u7528\u6237\uff0c\u5e76\u4e14/\u6216\u8005\u4e3a\u7a0d\u540e\u7684\u5206\u6790\u6ce8\u518c\u7ed3\u679c\u3002 15.4.2 \u7ed3\u5408Automake\u6d4b\u8bd5\u5de5\u5177\u4f7f\u7528 \u76ee\u524dAutomake\u9644\u5e26\u7684TAP\u9a71\u52a8\u7a0b\u5e8f\u9700\u8981\u4e00\u4e9b\u624b\u52a8\u914d\u7f6e\u3002\u5fc5\u987b\u4eceAutomake\u7684\u53d1\u884c\u7248\u4e2d\u83b7\u53d6 tap-driver.sh \u811a\u672c\uff0c\u590d\u5236\u5230\u6e90\u7801\u76ee\u5f55\uff0c\u7136\u540e\u4f7f\u7528Automake\u652f\u6301\u7684\u7b2c\u4e09\u65b9\u6d4b\u8bd5\u9a71\u52a8\u6765\u6307\u5bfc\u5de5\u5177\u4fe9\u4f7f\u7528\u8be5\u811a\u672c\u548c AM_INIT_AUTOMAKE \u53d1\u73b0\u7684awk\u7a0b\u5e8f\u6765\u8fd0\u884c\u81ea\u5df1\u7684 TAP-producing \u6d4b\u8bd5\u3002 \u9664\u4e86\u901a\u7528\u7684Automake\u6d4b\u8bd5\u9a71\u52a8\u9009\u9879\uff0c tap-driver.sh \u8fd8\u652f\u6301\u4ee5\u4e0b\u9009\u9879\uff1a --ignore-exit \u5ffd\u89c6\u6d4b\u8bd5\u811a\u672c\u7684\u9000\u51fa\u72b6\u6001\uff1b\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u811a\u672c\u4ee5\u975e\u96f6\u72b6\u6001\u9000\u51fa\uff0c\u9a71\u52a8\u4f1a\u62a5\u544a\u4e00\u4e2a\u9519\u8bef\u3002 --comments \u6307\u793a\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f\u5728\u6d4b\u8bd5\u5957\u4ef6\u7684\u8f93\u51fa\u4e5f\u663e\u793aTAP\u6ce8\u91ca\uff08\u5373\u4ee5 # \u5f00\u5934\u7684\u884c\uff09\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6ce8\u91ca\u53ea\u4f1a\u590d\u5236\u5230 .log \u6587\u4ef6\u3002 --no-comments --merge \u6307\u793a\u6d4b\u8bd5\u9a71\u52a8\u5408\u5e76\u6d4b\u8bd5\u811a\u672c\u7684\u6807\u51c6\u9519\u8bef\u5230\u4ed6\u4eec\u7684\u6807\u51c6\u8f93\u51fa\u3002\u5982\u679c\u4f60\u60f3\u4fdd\u8bc1\u6d4b\u8bd5\u811a\u672c\u4e2d\u7684\u6ce8\u91ca\u4e0e\u6d4b\u8bd5\u7ed3\u679c\u4e00\u8d77\u663e\u793a\uff0c\u8be5\u9009\u9879\u662f\u5fc5\u987b\u7684\u3002 --no-merge --diagnostic-string=STRING \u6539\u53d8\u6ce8\u91ca\u7684\u7b26\u53f7\uff1a # - STRING \u3002\u975eTAP\u5b98\u65b9\u6807\u51c6\u3002","title":"15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#152","text":"","title":"15.2 \u7b80\u5355\u6d4b\u8bd5"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#1521","text":"\u5982\u679c TESTS \u53d8\u91cf\u88ab\u5b9a\u4e49\u4e86\uff0c\u5176\u503c\u662f\u6267\u884c\u6d4b\u8bd5\u7684\u7a0b\u5e8f\u6216\u811a\u672c\u5217\u8868\u3002 \u6d4b\u8bd5\u811a\u672c\u53ef\u4ee5\u5e76\u884c\u6216\u4e32\u884c\u6267\u884c\uff0c\u9ed8\u8ba4\u7684\u662f\u5e76\u884c\u6d4b\u8bd5\u5957\u4ef6\u3002 \u9ed8\u8ba4\u7684\u6d4b\u8bd5\u7ed3\u679c\u662f\u6d4b\u8bd5\u811a\u672c\u7684\u9000\u51fa\u7ed3\u679c\u3002 Automake\u4e5f\u652f\u6301\u66f4\u591a\u7684\u534f\u8bae\uff1astandard (see Using the TAP test protocol ) \u548c custom (see Custom Test Drivers )\u3002 note \uff1a\u4e0d\u80fd\u5728\u4e32\u884c\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u534f\u8bae\u3002 \u4e0d\u4f7f\u7528\u6d4b\u8bd5\u534f\u8bae\u7684\u65f6\u5019\uff0c\u6d4b\u8bd5\u811a\u672c\u7684\u9000\u51fa\u7801\u7684\u610f\u4e49\u5982\u4e0b\uff1a 0 - \u6210\u529f 77 - \u8df3\u8fc7\u8be5\u6d4b\u8bd5 99 - \u786c\u9519\u8bef \u5176\u5b83 - \u5931\u8d25 \u53ef\u4ee5\u4f7f\u7528 XFAIL_TESTS \u53d8\u91cf\u5217\u51fa xfail \u7684\u6d4b\u8bd5\uff0c\u5b83\u662f TESTS \u7684\u5b50\u96c6\u3002\u5b9a\u4e49 DISABLE_HARD_ERRORS \u53d8\u91cf\u4e3a\u975e\u7a7a\u503c\u6765\u9879\u666e\u901a\u7684\u9519\u8bef\u4e00\u6837\u5bf9\u5f85\u786c\u9519\u8bef\u3002 note \uff1a\u4f7f\u7528\u6d4b\u8bd5\u534f\u8bae\u7684\u65f6\u5019\uff0c\u8fd9\u4e24\u4e2a\u53d8\u91cf\u4e0d\u4f1a\u8d77\u4f5c\u7528\u3002 PASS: foo.sh PASS: zardoz.tap 1 - Daemon started PASS: zardoz.tap 2 - Daemon responding SKIP: zardoz.tap 3 - Daemon uses /proc # SKIP /proc is not mounted PASS: zardoz.tap 4 - Daemon stopped SKIP: bar.sh PASS: mu.tap 1 XFAIL: mu.tap 2 # TODO frobnication not yet implemented AM_COLOR_TESTS=always \uff0c\u5f69\u8272\u8f93\u51fa\u3002 AM_TESTS_ENVIRONMENT \u4e0e TESTS_ENVIRONMENT \u53d8\u91cf\u7528\u4e8e\u7ed9\u6d4b\u8bd5\u811a\u672c\u8fd0\u884c\u521d\u59cb\u5316\u4ee3\u7801\u548c\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u524d\u8005\u662f\u5f00\u53d1\u4eba\u5458\u4fdd\u7559\u7684\uff0c\u540e\u8005\u662f\u7528\u6237\u4fdd\u7559\u7684\uff08\u53ef\u6269\u5c55\u5e76\u4e14\u8986\u76d6\u524d\u8005\u7684\u8bbe\u7f6e\uff09\u3002\u975e\u7a7a\u7684 AM_TESTS_ENVIRONMENT \u5fc5\u987b\u4ee5\u5206\u53f7\u7ed3\u675f\uff0c\u4e14\u4e0d\u652f\u6301\u4e32\u884c\u6d4b\u8bd5\u3002 Automake\u4f1a\u4fdd\u8bc1\u6bcf\u4e2a\u5728 TEST \u4e2d\u5217\u51fa\u7684\u6587\u4ef6\u5728\u8fd0\u884c\u4e4b\u524d\u88ab\u6784\u5efa\u3002 \u5728 check_primary \u4e2d\u5217\u51fa\u7684\u6d4b\u8bd5\u7a0b\u5e8f\u4e4b\u5728 make check \u7684\u65f6\u5019\u6784\u5efa\uff0c\u800c\u4e0d\u662f\u5728 make all \u671f\u95f4\u3002","title":"15.2.1 \u57fa\u4e8e\u811a\u672c\u7684\u6d4b\u8bd5\u5957\u4ef6"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#1522","text":"\u5f3a\u70c8\u4e0d\u63a8\u8350\u4f7f\u7528\u3002 \u901a\u8fc7Automake\u9009\u9879 serial-tests \u5b9e\u73b0\u4e32\u884c\u6d4b\u8bd5","title":"15.2.2 \u4e32\u884c\u6d4b\u8bd5"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#1523","text":"make -j \u6267\u884c\u5e76\u884c\u6d4b\u8bd5\u3002 make -j3 check \u6807\u51c6\u9519\u8bef\u4e0e\u6807\u51c6\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u6bcf\u4e2a\u6d4b\u8bd5\u7684 .log \u6587\u4ef6\uff0c\u7ed3\u679c\u5728 .trs \u6587\u4ef6\u3002\u5931\u8d25\u7684\u6d4b\u8bd5\u6536\u96c6\u5728 test-suite.log \u6587\u4ef6\u4e2d\u3002 \u81ea\u5b9a\u4e49\u6d4b\u8bd5\u7a0b\u5e8f\uff1b\u6ca1\u6709\u6ce8\u518c\u7684\u6269\u5c55\u540d\u7684\u6d4b\u8bd5\uff0c\u4f1a\u4f7f\u7528\u53d8\u91cf LOG_COMPILER, AM_LOG_FLAGS, and LOG_FLAGS \uff1a TESTS = foo.pl bar.py baz TEST_EXTENSIONS = .pl .py PL_LOG_COMPILER = $(PERL) AM_PL_LOG_FLAGS = -w PY_LOG_COMPILER = $(PYTHON) AM_PY_LOG_FLAGS = -v LOG_COMPILER = ./wrapper-script AM_LOG_FLAGS = -d \u53ef\u4ee5\u4f7f\u7528 : \u6765\u4fdd\u8bc1\u6d4b\u8bd5\u7684\u4f9d\u8d56\u5173\u7cfb TESTS = foo-compile.test foo-execute.test foo-execute.log: foo-compile.log note \uff1a\u53ea\u4fdd\u8bc1\u987a\u5e8f\uff0c\u4e0d\u4fdd\u8bc1\u7ed3\u679c\u3002\u5373\u65e0\u8bbafoo-compile.test\u662f\u5426\u6210\u529f\uff0c\u90fd\u4f1a\u7ee7\u7eed\u6267\u884cfoo-execute.log\u3002","title":"15.2.3 \u5e76\u884c\u6d4b\u8bd5"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#153","text":"","title":"15.3 \u81ea\u5b9a\u4e49\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#1531","text":"\u81ea\u5b9a\u4e49\u7684\u6d4b\u8bd5\u7a0b\u5e8f\u7684\u9884\u671f\u662f\uff1a\u6b63\u786e\u5730\u8fd0\u884c\u4f20\u9012\u7ed9\u5b83\u7684\u6d4b\u8bd5\u7a0b\u5e8f\uff08\u5305\u62ec\u547d\u4ee4\u884c\u4f20\u9012\u7ed9\u6d4b\u8bd5\u7a0b\u5e8f\u7684\u53c2\u6570\uff09\uff0c\u5206\u6790\u5b83\u4eec\u7684\u6267\u884c\u548c\u7ed3\u679c\uff0c\u521b\u5efa\u76f8\u5173\u7684 .log \u548c .trs \u6587\u4ef6\uff0c\u5728\u63a7\u5236\u53f0\u663e\u793a\u6d4b\u8bd5\u7ed3\u679c\u3002 \u5982\u4f55\u786e\u5b9a\u548c\u5206\u6790\u6d4b\u8bd5\u811a\u672c\u7ed3\u679c\u7684\u786e\u5207\u7ec6\u8282\u7531\u5404\u4e2a\u9a71\u52a8\u7a0b\u5e8f\u51b3\u5b9a\u3002 \u5373\u4f7f\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5e76\u884c\u6d4b\u8bd5\u7684\u5927\u90e8\u5206\u529f\u80fd\u4ecd\u7136\u8981\u5b9e\u73b0\uff1b\u5305\u62ec\u4ee5\u4e0b\u51e0\u70b9\uff1a \u5728 TESTS \u4e2d\u5b9a\u4e49\u6d4b\u8bd5\u811a\u672c\uff0c\u5e76\u5728\u8fd0\u884c\u65f6\u53ef\u901a\u8fc7 TESTS \u6216 TEST_LOGS \u8986\u76d6\u3002 \u901a\u8fc7\u4f7f\u7528make\u7684\u9009\u9879-j N \uff0c\u5e76\u53d1\u6267\u884c\u3002 \u6bcf\u4e2a\u6d4b\u8bd5\u7684 .log \u3001 .trs \u6587\u4ef6\uff0c\u8fd8\u6709\u6458\u8981\u7684 .log \u6587\u4ef6\u3002 recheck \u76ee\u6807\uff0c RECHECK_LOGS \u53d8\u91cf\uff0c\u6d4b\u8bd5\u61d2\u91cd\u65b0\u8fd0\u884c\u3002 \u6d4b\u8bd5\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u5bf9 check_* \u53d8\u91cf\u7684\u652f\u6301\uff08check_PROGRAMS, check_LIBRARIES, ...\uff09\u3002 \u4f7f\u7528 VERBOSE \u73af\u5883\u53d8\u91cf\u83b7\u53d6\u6d4b\u8bd5\u5957\u4ef6\u5931\u8d25\u7684\u8be6\u7ec6\u8f93\u51fa\u3002 \u5b9a\u4e49 TESTS_ENVIRONMENT, AM_TESTS_ENVIRONMENT and AM_TESTS_FD_REDIRECT \u53d8\u91cf\u3002 \u901a\u7528\u5b9a\u4e49\u548c\u6269\u5c55\u5b9a\u4e49 LOG_COMPILER \u548c LOG_FLAGS \u53d8\u91cf\u3002","title":"15.3.1 \u6982\u8ff0"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#1532","text":"\u901a\u8fc7\u5b9a\u4e49make\u53d8\u91cf LOG_DRIVER \u6216 ext_LOG_DRIVER \uff08 ext \u5fc5\u987b\u5728 TEST_EXTENSIONS \u4e2d\u58f0\u660e\uff09\u6765\u58f0\u660e\u81ea\u5b9a\u4e49\u7684\u6d4b\u8bd5\u5957\u4ef6\u9a71\u52a8\u3002 \u5f00\u53d1\u8005\u4fdd\u7559\u53d8\u91cf AM_DRIVER_FLAGS \u548c\u7528\u6237\u4fdd\u7559\u53d8\u91cf LOG_DRIVER_FLAGS \u53ef\u88ab\u7528\u4e8e\u5b9a\u4e49 flags \uff0c\u4f1a\u88ab\u4f20\u7ed9\u6bcf\u4e2a LOG_DRIVER \u8c03\u7528\u3002\u7c7b\u4f3c\u7684\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5728 TEST_EXTENSIONS \u4e2d\u58f0\u660e\u7684\u6269\u5c55 ext \uff0c\u5728 AM_ext_LOG_DRIVER_FLAGS \u548c ext_LOG_DRIVER_FLAGS \u4e2d\u5217\u51fa\u7684 flags \u4f1a\u88ab\u4f20\u9012\u7ed9 ext_LOG_DRIVER \u3002","title":"15.3.2 \u58f0\u660e\u9a71\u52a8"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#1533-api","text":"pass","title":"15.3.3 \u5b9a\u5236\u6d4b\u8bd5\u9a71\u52a8\u7684 API"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#154-tap","text":"","title":"15.4 TAP \u6d4b\u8bd5\u534f\u8bae"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#1541","text":"TAP\uff0c the Test Anything Protocol\uff0c\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u57fa\u4e8e\u6587\u672c\u7684\u5728\u6d4b\u8bd5\u6a21\u5757\uff08\u6216\u7a0b\u5e8f\uff09\u4e0e\u6d4b\u8bd5\u5de5\u5177\u4e4b\u95f4\u7684\u63a5\u53e3\u3002 The tests (TAP producers) \u5411\u6807\u51c6\u8f93\u51fa\u4e2d\u4ee5\u4e00\u79cd\u7b80\u5355\u7684\u683c\u5f0f\u5199\u5165\u6d4b\u8bd5\u7ed3\u679c\uff1b a test harness (TAP consumer)\u4f1a\u89e3\u6790\u548c\u89e3\u91ca\u8fd9\u4e9b\u7ed3\u679c\uff0c\u6b63\u786e\u5730\u5448\u73b0\u7ed9\u7528\u6237\uff0c\u5e76\u4e14/\u6216\u8005\u4e3a\u7a0d\u540e\u7684\u5206\u6790\u6ce8\u518c\u7ed3\u679c\u3002","title":"15.4.1 \u4ecb\u7ecd"},{"location":"automake/15.\u6d4b\u8bd5\u5957\u4ef6\u7684\u652f\u6301/#1542-automake","text":"\u76ee\u524dAutomake\u9644\u5e26\u7684TAP\u9a71\u52a8\u7a0b\u5e8f\u9700\u8981\u4e00\u4e9b\u624b\u52a8\u914d\u7f6e\u3002\u5fc5\u987b\u4eceAutomake\u7684\u53d1\u884c\u7248\u4e2d\u83b7\u53d6 tap-driver.sh \u811a\u672c\uff0c\u590d\u5236\u5230\u6e90\u7801\u76ee\u5f55\uff0c\u7136\u540e\u4f7f\u7528Automake\u652f\u6301\u7684\u7b2c\u4e09\u65b9\u6d4b\u8bd5\u9a71\u52a8\u6765\u6307\u5bfc\u5de5\u5177\u4fe9\u4f7f\u7528\u8be5\u811a\u672c\u548c AM_INIT_AUTOMAKE \u53d1\u73b0\u7684awk\u7a0b\u5e8f\u6765\u8fd0\u884c\u81ea\u5df1\u7684 TAP-producing \u6d4b\u8bd5\u3002 \u9664\u4e86\u901a\u7528\u7684Automake\u6d4b\u8bd5\u9a71\u52a8\u9009\u9879\uff0c tap-driver.sh \u8fd8\u652f\u6301\u4ee5\u4e0b\u9009\u9879\uff1a --ignore-exit \u5ffd\u89c6\u6d4b\u8bd5\u811a\u672c\u7684\u9000\u51fa\u72b6\u6001\uff1b\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u811a\u672c\u4ee5\u975e\u96f6\u72b6\u6001\u9000\u51fa\uff0c\u9a71\u52a8\u4f1a\u62a5\u544a\u4e00\u4e2a\u9519\u8bef\u3002 --comments \u6307\u793a\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f\u5728\u6d4b\u8bd5\u5957\u4ef6\u7684\u8f93\u51fa\u4e5f\u663e\u793aTAP\u6ce8\u91ca\uff08\u5373\u4ee5 # \u5f00\u5934\u7684\u884c\uff09\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6ce8\u91ca\u53ea\u4f1a\u590d\u5236\u5230 .log \u6587\u4ef6\u3002 --no-comments --merge \u6307\u793a\u6d4b\u8bd5\u9a71\u52a8\u5408\u5e76\u6d4b\u8bd5\u811a\u672c\u7684\u6807\u51c6\u9519\u8bef\u5230\u4ed6\u4eec\u7684\u6807\u51c6\u8f93\u51fa\u3002\u5982\u679c\u4f60\u60f3\u4fdd\u8bc1\u6d4b\u8bd5\u811a\u672c\u4e2d\u7684\u6ce8\u91ca\u4e0e\u6d4b\u8bd5\u7ed3\u679c\u4e00\u8d77\u663e\u793a\uff0c\u8be5\u9009\u9879\u662f\u5fc5\u987b\u7684\u3002 --no-merge --diagnostic-string=STRING \u6539\u53d8\u6ce8\u91ca\u7684\u7b26\u53f7\uff1a # - STRING \u3002\u975eTAP\u5b98\u65b9\u6807\u51c6\u3002","title":"15.4.2 \u7ed3\u5408Automake\u6d4b\u8bd5\u5de5\u5177\u4f7f\u7528"},{"location":"automake/18.\u89c4\u5219\u6742\u9879/","text":"\u5904\u7406\u65b0\u7684\u6587\u4ef6\u6269\u5c55\uff08\u540e\u7f00\u89c4\u5219\uff09 \u5411Automake\u4ecb\u7ecd\u4e00\u79cd\u65b0\u7684\u9690\u542b\u89c4\u5219\u6765\u5904\u7406\u4e00\u79cd\u6587\u4ef6\u7c7b\u578b\u3002 1.\u6bd4\u5982\uff0c\u4f60\u6709\u4e00\u4e2a\u7f16\u8bd1\u5668\u53ef\u4ee5\u7f16\u8bd1.foo\u6587\u4ef6\u5230.o\u6587\u4ef6\u3002\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u540e\u7f00\u89c4\u5219\uff1a .foo.o: foocc -c -o $@ $ \u7136\u540e\u5728 _SOURCE \u53d8\u91cf\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528.foo\u6587\u4ef6\uff1a bin_PROGRAMS = doit doit_SOURCES = doit.foo 2.\u53e6\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5e2e\u52a9Automake\u8bc6\u522b\u4f60\u4e3a\u540e\u7f00\u89c4\u5219\u5b9a\u4e49\u7684\u6269\u5c55\u3002\u901a\u5e38\u662f\u4f60\u7684\u6269\u5c55\u4e0d\u662f\u4ee5 . \u5f00\u5934\u7684\u60c5\u51b5\u3002\u4f60\u9700\u8981\u5728\u5b9a\u4e49\u81ea\u5df1\u7684\u94f6\u884c\u89c4\u5219\u4e4b\u524d\uff0c\u5c06\u653e\u7f6e\u65b0\u540e\u7f00\u5217\u8868\u5230 SUFFIXES \u53d8\u91cf\u4e2d\u3002 SUFFIXES = .idl C.cpp .idlC.cpp: # whatever SUFFIXES \u7684\u884c\u4e3a\u5f88\u50cfmake\u4e2d\u7684 .SUFFIXES \u7279\u6b8a\u76ee\u6807\uff0c\u5e94\u8be5\u4f7f\u7528 SUFFIXES \u8ba9Automake\u4e3a .SUFFIXES \u751f\u6210\u540e\u7f00\u5217\u8868\u3002\u8be5\u53d8\u91cf\u4e2d\u7684\u540e\u7f00\u4f1a\u5728\u751f\u6210\u7684\u540e\u7f00\u5217\u8868\u7684\u5934\u90e8\uff0c\u5373\u4f1a\u8986\u76d6\u6389\u539f\u5148\u7684\u9690\u542b\u89c4\u5219\u3002","title":"18.\u89c4\u5219\u6742\u9879"},{"location":"automake/18.\u89c4\u5219\u6742\u9879/#_1","text":"\u5411Automake\u4ecb\u7ecd\u4e00\u79cd\u65b0\u7684\u9690\u542b\u89c4\u5219\u6765\u5904\u7406\u4e00\u79cd\u6587\u4ef6\u7c7b\u578b\u3002 1.\u6bd4\u5982\uff0c\u4f60\u6709\u4e00\u4e2a\u7f16\u8bd1\u5668\u53ef\u4ee5\u7f16\u8bd1.foo\u6587\u4ef6\u5230.o\u6587\u4ef6\u3002\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u540e\u7f00\u89c4\u5219\uff1a .foo.o: foocc -c -o $@ $ \u7136\u540e\u5728 _SOURCE \u53d8\u91cf\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528.foo\u6587\u4ef6\uff1a bin_PROGRAMS = doit doit_SOURCES = doit.foo 2.\u53e6\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5e2e\u52a9Automake\u8bc6\u522b\u4f60\u4e3a\u540e\u7f00\u89c4\u5219\u5b9a\u4e49\u7684\u6269\u5c55\u3002\u901a\u5e38\u662f\u4f60\u7684\u6269\u5c55\u4e0d\u662f\u4ee5 . \u5f00\u5934\u7684\u60c5\u51b5\u3002\u4f60\u9700\u8981\u5728\u5b9a\u4e49\u81ea\u5df1\u7684\u94f6\u884c\u89c4\u5219\u4e4b\u524d\uff0c\u5c06\u653e\u7f6e\u65b0\u540e\u7f00\u5217\u8868\u5230 SUFFIXES \u53d8\u91cf\u4e2d\u3002 SUFFIXES = .idl C.cpp .idlC.cpp: # whatever SUFFIXES \u7684\u884c\u4e3a\u5f88\u50cfmake\u4e2d\u7684 .SUFFIXES \u7279\u6b8a\u76ee\u6807\uff0c\u5e94\u8be5\u4f7f\u7528 SUFFIXES \u8ba9Automake\u4e3a .SUFFIXES \u751f\u6210\u540e\u7f00\u5217\u8868\u3002\u8be5\u53d8\u91cf\u4e2d\u7684\u540e\u7f00\u4f1a\u5728\u751f\u6210\u7684\u540e\u7f00\u5217\u8868\u7684\u5934\u90e8\uff0c\u5373\u4f1a\u8986\u76d6\u6389\u539f\u5148\u7684\u9690\u542b\u89c4\u5219\u3002","title":"\u5904\u7406\u65b0\u7684\u6587\u4ef6\u6269\u5c55\uff08\u540e\u7f00\u89c4\u5219\uff09"},{"location":"automake/19.Include/","text":"Automake\u652f\u6301 include \u6307\u4ee4\uff0c\u53ef\u4ee5\u7528\u4e8e\u5728automake\u8fd0\u884c\u7684\u65f6\u5019\u5305\u62ec\u5176\u4ed6Makefile\u7247\u6bb5\u3002 include $(top_srcdir)/build-aux/Makefile.subs \u5728\u7247\u6bb5\u4e2d\uff0c\u7ed3\u6784\u4f53 %reldir% \u88ab\u66ff\u6362\u4e3a\u5bf9\u4e8e\u57fa\u672c\u7684Makefile.am\u7684\u76f8\u5bf9\u8def\u5f84\u3002\u76f8\u4f3c\u7684\uff0c %canon_reldir% \u4e5f\u4ece %reldir% \u4e2d\u88ab\u89c4\u8303\u5730\u66ff\u6362\u4e86\u3002 note \uff1a\u5982\u679c\u7247\u6bb5\u4e0eMakefile.am\u5728\u540c\u4e00\u4e2a\u76ee\u5f55\u4e0b\uff0c\u90a3\u4e48\u4e0a\u8ff0\u7684\u7ed3\u6784\u4f53\u4f1a\u662f\u7a7a\u5b57\u7b26\u4e32","title":"19.Include"},{"location":"automake/20.\u6761\u4ef6\u8bed\u53e5/","text":"\u8fd9\u4e9b\u6761\u4ef6\u8bed\u53e5\u548cMake\u7684\u6761\u4ef6\u8bed\u53e5\u4e0d\u4e00\u6837\u3002Automake\u7684\u6761\u4ef6\u8bed\u53e5\u7684\u68c0\u67e5\u662f\u5728\u8fd0\u884cconfigure\u811a\u672c\u7684\u671f\u95f4\uff0c\u5f71\u54cd\u7684\u662f Makefile.in - Makefile \u3002 \u6761\u4ef6\u8bed\u53e5\u7684\u4f7f\u7528 AM_CONDITIONAL (name, condition) \u5728\u4f7f\u7528\u6761\u4ef6\u8bed\u53e5\u4e4b\u524d\uff0c\u5fc5\u987b\u5728configure.ac\u7684\u6b64\u5b8f\u4e2d\u5b9a\u4e49\u3002 \u8be5\u5b8f\u7684\u4f5c\u7528\u5c31\u662f\u6267\u884c condition \uff0c\u5c06\u771f\u5047\u7ed3\u679c\u8fd4\u56de\u7ed9 name \u3002 name \u5fc5\u987b\u7531\u5b57\u6bcd\u5f00\u5934\u4e14\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u5e76\u4e14\u4e0d\u80fd\u662fAutomake\u7684\u4fdd\u7559\u5b57\u3002 \u5f53configure\u8fd0\u884c\u7684\u65f6\u5019shell\u811a\u672c condition \u4f1a\u88ab\u6267\u884c\u3002 \u6ce8\u610f\u6bcf\u6b21\u8fd0\u884cconfigure\u7684\u65f6\u5019\u6bcf\u4e2a AM_CONDITIONAL \u90fd\u5fc5\u987b\u88ab\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u6df7\u6dc6automake\u3002\u6b64\u5b8f\u4e2d\u5b9a\u4e49\u7684\u5224\u65ad\u8bed\u53e5\u53ef\u5728Makefile.am\u4e2d\u88ab\u8c03\u7528\u3002 AC_ARG_ENABLE([debug], [ --enable-debug Turn on debugging], [case ${enableval} in yes) debug=true ;; no) debug=false ;; *) AC_MSG_ERROR([bad value ${enableval} for --enable-debug]) ;; esac],[debug=false]) AM_CONDITIONAL([DEBUG], [test x$debug = xtrue]) \u7136\u540e\u4f60\u53ef\u4ee5\u5728Makefile.am\u4e2d\u8fd9\u6837\u4f7f\u7528\uff08make\u8bed\u6cd5\uff09\uff1a if DEBUG DBG = debug else DBG = endif noinst_PROGRAMS = $(DBG) \u4e3a\u4e86\u53ef\u4ee5\u83b7\u53d6\u5728configure.ac\u4e2d\u6b64\u5b8f\u6ce8\u518c\u7684\u6761\u4ef6\u8bed\u53e5\uff0c\u5e76\u4e14\u5141\u8bb8\u6761\u4ef6\u7684\u5b9a\u4e49 AC_CONFIG_FILES \uff0c AM_COND_IF \u53ef\u80fd\u4f1a\u88ab\u4f7f\u7528\uff1a AM_COND_IF (conditional, [if-true], [if-false]) \u5982\u679c\u4efb\u4e00\u5206\u652f\u5305\u542b AC_CONFIG_FILES \uff0c\u4f1a\u5bfc\u81f4automake\u4ec5\u9488\u5bf9\u76f8\u5e94\u7684\u6761\u4ef6\u8f93\u51fa\u76f8\u5e94\u6587\u4ef6\u7684\u89c4\u5219\u3002 AM_CONDITIONAL([SHELL_WRAPPER], [test x$with_wrapper = xtrue]) AM_COND_IF([SHELL_WRAPPER], [AC_CONFIG_FILES([wrapper:wrapper.in])]) \u6761\u4ef6\u8bed\u53e5\u7684\u9650\u5236 \u6761\u4ef6\u8bed\u53e5\u5e94\u8be5\u5b8c\u6574\u7684\u5305\u62ec\u53d8\u91cf\u6216\u89c4\u5219\u7684\u5b9a\u4e49\u3002\u4f8b\u5982\uff0cAutomake\u65e0\u6cd5\u5904\u7406\u5728\u53d8\u91cf\u5b9a\u4e49\u4e2d\u7684\u4f7f\u7528\u6761\u4ef6\u8bed\u53e5\uff1a # This syntax is not understood by Automake AM_CPPFLAGS = \\ -DFEATURE_A \\ if WANT_DEBUG -DDEBUG \\ endif -DFEATURE_B","title":"20.\u6761\u4ef6\u8bed\u53e5"},{"location":"automake/20.\u6761\u4ef6\u8bed\u53e5/#_1","text":"","title":"\u6761\u4ef6\u8bed\u53e5\u7684\u4f7f\u7528"},{"location":"automake/20.\u6761\u4ef6\u8bed\u53e5/#am_conditional-name-condition","text":"\u5728\u4f7f\u7528\u6761\u4ef6\u8bed\u53e5\u4e4b\u524d\uff0c\u5fc5\u987b\u5728configure.ac\u7684\u6b64\u5b8f\u4e2d\u5b9a\u4e49\u3002 \u8be5\u5b8f\u7684\u4f5c\u7528\u5c31\u662f\u6267\u884c condition \uff0c\u5c06\u771f\u5047\u7ed3\u679c\u8fd4\u56de\u7ed9 name \u3002 name \u5fc5\u987b\u7531\u5b57\u6bcd\u5f00\u5934\u4e14\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\uff0c\u5e76\u4e14\u4e0d\u80fd\u662fAutomake\u7684\u4fdd\u7559\u5b57\u3002 \u5f53configure\u8fd0\u884c\u7684\u65f6\u5019shell\u811a\u672c condition \u4f1a\u88ab\u6267\u884c\u3002 \u6ce8\u610f\u6bcf\u6b21\u8fd0\u884cconfigure\u7684\u65f6\u5019\u6bcf\u4e2a AM_CONDITIONAL \u90fd\u5fc5\u987b\u88ab\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u6df7\u6dc6automake\u3002\u6b64\u5b8f\u4e2d\u5b9a\u4e49\u7684\u5224\u65ad\u8bed\u53e5\u53ef\u5728Makefile.am\u4e2d\u88ab\u8c03\u7528\u3002 AC_ARG_ENABLE([debug], [ --enable-debug Turn on debugging], [case ${enableval} in yes) debug=true ;; no) debug=false ;; *) AC_MSG_ERROR([bad value ${enableval} for --enable-debug]) ;; esac],[debug=false]) AM_CONDITIONAL([DEBUG], [test x$debug = xtrue]) \u7136\u540e\u4f60\u53ef\u4ee5\u5728Makefile.am\u4e2d\u8fd9\u6837\u4f7f\u7528\uff08make\u8bed\u6cd5\uff09\uff1a if DEBUG DBG = debug else DBG = endif noinst_PROGRAMS = $(DBG) \u4e3a\u4e86\u53ef\u4ee5\u83b7\u53d6\u5728configure.ac\u4e2d\u6b64\u5b8f\u6ce8\u518c\u7684\u6761\u4ef6\u8bed\u53e5\uff0c\u5e76\u4e14\u5141\u8bb8\u6761\u4ef6\u7684\u5b9a\u4e49 AC_CONFIG_FILES \uff0c AM_COND_IF \u53ef\u80fd\u4f1a\u88ab\u4f7f\u7528\uff1a","title":"AM_CONDITIONAL (name, condition)"},{"location":"automake/20.\u6761\u4ef6\u8bed\u53e5/#am_cond_if-conditional-if-true-if-false","text":"\u5982\u679c\u4efb\u4e00\u5206\u652f\u5305\u542b AC_CONFIG_FILES \uff0c\u4f1a\u5bfc\u81f4automake\u4ec5\u9488\u5bf9\u76f8\u5e94\u7684\u6761\u4ef6\u8f93\u51fa\u76f8\u5e94\u6587\u4ef6\u7684\u89c4\u5219\u3002 AM_CONDITIONAL([SHELL_WRAPPER], [test x$with_wrapper = xtrue]) AM_COND_IF([SHELL_WRAPPER], [AC_CONFIG_FILES([wrapper:wrapper.in])])","title":"AM_COND_IF (conditional, [if-true], [if-false])"},{"location":"automake/20.\u6761\u4ef6\u8bed\u53e5/#_2","text":"\u6761\u4ef6\u8bed\u53e5\u5e94\u8be5\u5b8c\u6574\u7684\u5305\u62ec\u53d8\u91cf\u6216\u89c4\u5219\u7684\u5b9a\u4e49\u3002\u4f8b\u5982\uff0cAutomake\u65e0\u6cd5\u5904\u7406\u5728\u53d8\u91cf\u5b9a\u4e49\u4e2d\u7684\u4f7f\u7528\u6761\u4ef6\u8bed\u53e5\uff1a # This syntax is not understood by Automake AM_CPPFLAGS = \\ -DFEATURE_A \\ if WANT_DEBUG -DDEBUG \\ endif -DFEATURE_B","title":"\u6761\u4ef6\u8bed\u53e5\u7684\u9650\u5236"},{"location":"automake/23.Automake\u4e0d\u80fd\u6ee1\u8db3\u4f7f\u7528\u65f6/","text":"\u6269\u5c55Automake\u89c4\u5219 Makefile.in\u6587\u4ef6\u4ece\u4e09\u4e2a\u6e90\uff08Makefile.am\u3001configure.ac\u4ee5\u53caautomake\u81ea\u8eab\uff09\u6784\u5efa\u3002\u9075\u5b88\u4ee5\u4e0b\u7ea6\u5b9a\uff1a \u7528\u6237\u5728Makefile.am\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u5728configure.ac\u4e2d\u4f7f\u7528 AC_SUBST \u5b9a\u4e49\u7684\u53d8\u91cf\uff0c AC_SUBST \u7684\u4f18\u5148\u7ea7\u5927\u4e8eautomake\u5b9a\u4e49\u7684\u53d8\u91cf\u3002 \u5bf9\u4e8e\u540c\u4e00\u4e2a\u76ee\u6807\uff0c\u7528\u6237\u5b9a\u4e49\u7684\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u4efb\u4f55automake\u5b9a\u4e49\u7684\u89c4\u5219\u3002 \u8986\u76d6\u9ed8\u8ba4\u89c4\u5219 \u5f53\u4f60\u76f8\u8981\u8986\u76d6\u9ed8\u8ba4\u7684\u89c4\u5219\u65f6\uff0c\u9700\u8981\u91cd\u5199\u7684\u89c4\u5219\u7684\u76ee\u6807\u662f\uff1a all-recursive check-recursive cscopelist-recursive ctags-recursive dvi-recursive html-recursive info-recursive install-data-recursive install-dvi-recursive install-exec-recursive install-html-recursive install-info-recursive install-pdf-recursive install-ps-recursive install-recursive installcheck-recursive installdirs-recursive pdf-recursive ps-recursive tags-recursive uninstall-recursive \u6bd4\u5982\u76f8\u5e94\u8986\u76d6\u9ed8\u8ba4\u7684 make check \u89c4\u5219\uff0c\u9700\u8981\u8fd9\u6837\u91cd\u5199: check-recursive: @echo I'm not the default make check. warning \uff1a\u91cd\u5199\u4e4b\u540e\u5176\u76f8\u5e94\u7684\u540e\u7f00\u89c4\u5219\u4e5f\u4f1a\u5931\u6548\u3002\u6bd4\u5982check-local\u5c06\u4e0d\u518d\u6267\u884c\u3002 \u8865\u5145\u9ed8\u8ba4\u89c4\u5219\uff08\u65e0\u5e8f\uff09 \u53ef\u4ee5\u5728Makefile.am\u4e2d\u6307\u5b9a\u591a\u79cd\u76ee\u6807\u7684 -local \u7248\u672c\uff0cAutomake\u4f1a\u7528 -local \u76ee\u6807\u6765\u8865\u5145\u6807\u51c6\u7684\u76ee\u6807\u3002\u652f\u6301\u7684\u76ee\u6807\u6709\uff1a all, info, dvi, ps, pdf, html, check, install-data, install-dvi, install-exec, install-html, install-info, install-pdf, install-ps, uninstall, installdirs, installcheck and the various clean targets (mostlyclean, clean, distclean, and maintainer-clean) \u3002 clean-local: -rm -rf testSubDir note \uff1a\u5e26\u6709 -local \u7684\u76ee\u6807\u4e0d\u80fd\u786e\u5b9a\u5176\u6267\u884c\u987a\u5e8f\u3002 \u8865\u5145\u9ed8\u8ba4\u89c4\u5219\uff08\u6709\u5e8f\uff09 \u76f8\u53cd\u7684\uff0c\u4e00\u4e9b\u89c4\u5219\u6709\u8fd0\u884c\u53e6\u4e00\u4e2a\u89c4\u5219\u7684\u65b9\u6cd5\uff0c\u79f0\u4f5c hook \uff0c hook \u603b\u662f\u5728\u4e3b\u89c4\u5219\u6267\u884c\u5b8c\u6bd5\u540e\u6267\u884c\u3002 \u652f\u6301 -hook \u7684\u76ee\u6807\u6709\uff1a install-data, install-exec, uninstall, dist, distcheck \u3002 install-exec-hook: ln $(DESTDIR)$(bindir)/program$(EXEEXT) \\ $(DESTDIR)$(bindir)/proglink$(EXEEXT) \u7b2c\u4e09\u65b9MakefileS \u7b2c\u4e09\u65b9MakefileS\u5e94\u8be5\u652f\u6301\u7684\u89c4\u5219\u6709\uff1a all distdir install install-data install-exec uninstall install-dvi install-html install-info install-ps install-pdf installdirs check installcheck mostlyclean clean distclean maintainer-clean dvi pdf ps info html tags ctags \u3002 \u53ea\u5728 DIST_SUBDIRS \u4e2d\u5217\u51fa\u800c\u4e0d\u5728 SUBDIRS \u4e2d\u9700\u8981\u7684\u53ea\u6709\u4e09\u4e2a\u89c4\u5219\uff1a distclean, maintainer-clean, distdir \u3002","title":"23.Automake\u4e0d\u80fd\u6ee1\u8db3\u4f7f\u7528\u65f6"},{"location":"automake/23.Automake\u4e0d\u80fd\u6ee1\u8db3\u4f7f\u7528\u65f6/#automake","text":"Makefile.in\u6587\u4ef6\u4ece\u4e09\u4e2a\u6e90\uff08Makefile.am\u3001configure.ac\u4ee5\u53caautomake\u81ea\u8eab\uff09\u6784\u5efa\u3002\u9075\u5b88\u4ee5\u4e0b\u7ea6\u5b9a\uff1a \u7528\u6237\u5728Makefile.am\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u5728configure.ac\u4e2d\u4f7f\u7528 AC_SUBST \u5b9a\u4e49\u7684\u53d8\u91cf\uff0c AC_SUBST \u7684\u4f18\u5148\u7ea7\u5927\u4e8eautomake\u5b9a\u4e49\u7684\u53d8\u91cf\u3002 \u5bf9\u4e8e\u540c\u4e00\u4e2a\u76ee\u6807\uff0c\u7528\u6237\u5b9a\u4e49\u7684\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u4efb\u4f55automake\u5b9a\u4e49\u7684\u89c4\u5219\u3002","title":"\u6269\u5c55Automake\u89c4\u5219"},{"location":"automake/23.Automake\u4e0d\u80fd\u6ee1\u8db3\u4f7f\u7528\u65f6/#_1","text":"\u5f53\u4f60\u76f8\u8981\u8986\u76d6\u9ed8\u8ba4\u7684\u89c4\u5219\u65f6\uff0c\u9700\u8981\u91cd\u5199\u7684\u89c4\u5219\u7684\u76ee\u6807\u662f\uff1a all-recursive check-recursive cscopelist-recursive ctags-recursive dvi-recursive html-recursive info-recursive install-data-recursive install-dvi-recursive install-exec-recursive install-html-recursive install-info-recursive install-pdf-recursive install-ps-recursive install-recursive installcheck-recursive installdirs-recursive pdf-recursive ps-recursive tags-recursive uninstall-recursive \u6bd4\u5982\u76f8\u5e94\u8986\u76d6\u9ed8\u8ba4\u7684 make check \u89c4\u5219\uff0c\u9700\u8981\u8fd9\u6837\u91cd\u5199: check-recursive: @echo I'm not the default make check. warning \uff1a\u91cd\u5199\u4e4b\u540e\u5176\u76f8\u5e94\u7684\u540e\u7f00\u89c4\u5219\u4e5f\u4f1a\u5931\u6548\u3002\u6bd4\u5982check-local\u5c06\u4e0d\u518d\u6267\u884c\u3002","title":"\u8986\u76d6\u9ed8\u8ba4\u89c4\u5219"},{"location":"automake/23.Automake\u4e0d\u80fd\u6ee1\u8db3\u4f7f\u7528\u65f6/#_2","text":"\u53ef\u4ee5\u5728Makefile.am\u4e2d\u6307\u5b9a\u591a\u79cd\u76ee\u6807\u7684 -local \u7248\u672c\uff0cAutomake\u4f1a\u7528 -local \u76ee\u6807\u6765\u8865\u5145\u6807\u51c6\u7684\u76ee\u6807\u3002\u652f\u6301\u7684\u76ee\u6807\u6709\uff1a all, info, dvi, ps, pdf, html, check, install-data, install-dvi, install-exec, install-html, install-info, install-pdf, install-ps, uninstall, installdirs, installcheck and the various clean targets (mostlyclean, clean, distclean, and maintainer-clean) \u3002 clean-local: -rm -rf testSubDir note \uff1a\u5e26\u6709 -local \u7684\u76ee\u6807\u4e0d\u80fd\u786e\u5b9a\u5176\u6267\u884c\u987a\u5e8f\u3002","title":"\u8865\u5145\u9ed8\u8ba4\u89c4\u5219\uff08\u65e0\u5e8f\uff09"},{"location":"automake/23.Automake\u4e0d\u80fd\u6ee1\u8db3\u4f7f\u7528\u65f6/#_3","text":"\u76f8\u53cd\u7684\uff0c\u4e00\u4e9b\u89c4\u5219\u6709\u8fd0\u884c\u53e6\u4e00\u4e2a\u89c4\u5219\u7684\u65b9\u6cd5\uff0c\u79f0\u4f5c hook \uff0c hook \u603b\u662f\u5728\u4e3b\u89c4\u5219\u6267\u884c\u5b8c\u6bd5\u540e\u6267\u884c\u3002 \u652f\u6301 -hook \u7684\u76ee\u6807\u6709\uff1a install-data, install-exec, uninstall, dist, distcheck \u3002 install-exec-hook: ln $(DESTDIR)$(bindir)/program$(EXEEXT) \\ $(DESTDIR)$(bindir)/proglink$(EXEEXT)","title":"\u8865\u5145\u9ed8\u8ba4\u89c4\u5219\uff08\u6709\u5e8f\uff09"},{"location":"automake/23.Automake\u4e0d\u80fd\u6ee1\u8db3\u4f7f\u7528\u65f6/#makefiles","text":"\u7b2c\u4e09\u65b9MakefileS\u5e94\u8be5\u652f\u6301\u7684\u89c4\u5219\u6709\uff1a all distdir install install-data install-exec uninstall install-dvi install-html install-info install-ps install-pdf installdirs check installcheck mostlyclean clean distclean maintainer-clean dvi pdf ps info html tags ctags \u3002 \u53ea\u5728 DIST_SUBDIRS \u4e2d\u5217\u51fa\u800c\u4e0d\u5728 SUBDIRS \u4e2d\u9700\u8981\u7684\u53ea\u6709\u4e09\u4e2a\u89c4\u5219\uff1a distclean, maintainer-clean, distdir \u3002","title":"\u7b2c\u4e09\u65b9MakefileS"},{"location":"automake/5.\u521b\u5efaMakefile.in/","text":"automake\u603b\u662f\u5728\u9879\u76ee\u7684\u6700\u9876\u5c42\u76ee\u5f55\u8fd0\u884c\uff0c\u8fd9\u662f\u5fc5\u987b\u7684\u56e0\u4e3aautomake\u5fc5\u987b\u626b\u63cfconfigure.ac\uff0c\u8fd8\u6709\u4e00\u4e2a\u539f\u56e0\u5c31\u662f\u4e00\u4e9bMakefile.in\u6587\u4ef6\u5728\u5b50\u76ee\u5f55\u4e2d\u3002 Automake\u4f1a\u8fd0\u884cautoconf\u6765\u626b\u63cfconfigure.ac\u548c\u4f9d\u8d56\uff0c\u6240\u4ee5autoconf\u5fc5\u987b\u5728PATH\u73af\u5883\u53d8\u91cf\u4e2d\u3002\u4f46\u662f\u5e76\u4e0d\u4f1a\u6784\u5efaconfigure\u811a\u672c\uff0c\u6240\u4ee5\u4ecd\u7136\u8981\u4f60\u81ea\u5df1\u8fd0\u884cautoconf\u3002 automake\u63a5\u53d7\u7684\u4e00\u4e9b\u9009\u9879\u3002","title":"5.\u521b\u5efaMakefile.in"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/","text":"6.1 \u914d\u7f6e\u8981\u6c42 \u552f\u4e00\u7684\u8981\u6c42\u5c31\u662f\u5728configure.ac\u6587\u4ef6\u4e2d\u52a0\u4e0a AM_INIT_AUTOMAKE \u5b8f\u3002 \u4e0b\u9762\u662f\u51e0\u4e2aAutomake\u8981\u6c42\u7684\u4f46\u662f\u4e0d\u4f1a\u88ab AM_INIT_AUTOMAKE \u8fd0\u884c\u7684\u5b8f AC_CONFIG_FILES AC_OUTPUT \u8fd9\u4e24\u4e2a\u7ecf\u5e38\u5728\u672b\u5c3e\u88ab\u8c03\u7528\uff0c\u6307\u660e\u4e86\u54ea\u4e9b\u6587\u4ef6\u4f1a\u88ab\u751f\u6210\u3002\u5982\u679c\u4ee5.am\u7ed3\u5c3e\u5219\u751f\u6210.in\u7ed3\u5c3e\u7684\u6587\u4ef6\u3002\u4e0d\u80fd\u8bc6\u522bshell\u53d8\u91cf\uff0c\u9700\u8981\u5728 AC_SUBST \u4e2d\u6ce8\u518c\uff0c\u5e76\u4e14\u4ee5 ${xxx} \u5f62\u5f0f\u5f15\u7528\u624d\u53ef\u8bc6\u522b\u3002 AC_SUBST([APIVERSION], \u2026) \u2026 AC_CONFIG_FILES( [tests/aclocal-${APIVERSION}:tests/aclocal.in], [chmod +x tests/aclocal-${APIVERSION}], [APIVERSION=$APIVERSION]) AC_CONFIG_FILES( [tests/automake-${APIVERSION}:tests/automake.in], [chmod +x tests/automake-${APIVERSION}]) \u7b49\u7b49... 6.3 \u81ea\u52a8\u751f\u6210aclocal.m4 \u4e00\u4e9b\u5b8f\u5fc5\u987b\u88ab\u5b9a\u4e49\u5728aclocal.m4\u4e2d\uff0c\u5426\u5219autoconf\u4e0d\u4f1a\u627e\u5230\u4ed6\u4eec\u3002 aclocal\u53ef\u4ee5\u6839\u636econfigure.ac\u751f\u6210aclocal.m4\u3002\u9996\u5148aclocal\u626b\u63cf\u6240\u6709\u7684.m4\u6587\u4ef6\u641c\u96c6\u5b8f\u5b9a\u4e49\uff0c\u7136\u540e\u626b\u63cfconfigure.ac\uff0c\u6240\u6709\u5728\u7b2c\u4e00\u6b65\u627e\u5230\u7684\u5b8f\u53ca\u5176\u4f9d\u8d56\u7684\u5b8f\u90fd\u4f1a\u88ab\u653e\u5728aclocal.m4\u6587\u4ef6\u4e2d\u3002\u5982\u679c\u672c\u5730\u6ca1\u6709\u627e\u5230\u5c31\u4f1a\u5728\u7cfb\u7edf\u5c42\u9762\u7684\u76ee\u5f55\u4e2d\u5bfb\u627e\u3002 \u901a\u5e38\u5b8f\u653e\u5230aclocal.m4\u4e2d\u662f\u901a\u8fc7\u590d\u5236\u6574\u4e2a\u6587\u4ef6\u5185\u5bb9\u6765\u5b8c\u6210\u7684\u3002\u4f46\u662f\u901a\u8fc7\u547d\u4ee4\u53c2\u6570 -I \u6765\u6307\u5b9a\u76f8\u5bf9\u8def\u5f84\u65f6\uff0c\u4f7f\u7528 m4_include \u4ee3\u66ff\u590d\u5236\u5b83\u5230aclocal.m4\u6587\u4ef6\u4e2d\uff1b\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\u65f6\u6216\u8005\u662f\u7cfb\u7edf\u5c42\u9762\u7684\u76ee\u5f55\u65f6\uff0c\u4f1a\u76f4\u63a5\u590d\u5236\u8fc7\u6765\u3002\u6545\u6700\u597d\u4f7f\u7528 -I `pwd`/reldir \u4ee3\u66ff -I reldir \u3002 acinclude.m4\u4e5f\u4f1a\u88ab\u6307\u5b9a\u653e\u5230aclocal.m4\u6587\u4ef6\u4e2d\uff0c\u5efa\u8bae\u4e0d\u8981\u5728\u65b0\u5305\u4e2d\u4f7f\u7528\u8be5\u6587\u4ef6\u3002 \u64cd\u4f5caclocal.m4\u65f6\uff0caclocal\u8fd0\u884c autom4te (see Using Autom4te in The Autoconf Manual) \u8ffd\u8e2a\u54ea\u4e9b\u5b8f\u88ab\u771f\u6b63\u7684\u4f7f\u7528\u4e86\u3002autom4e\u4e5f\u8981\u5b58\u5728\u4e8ePATH\u73af\u5883\u53d8\u91cf\u4e2d\u3002 6.3.1 aclocal\u63a5\u53d7\u7684\u4e00\u4e9b\u9009\u9879\u3002 \u6bd4\u8f83\u91cd\u8981\u7684\u4e24\u4e2a\u9009\u9879 -I dir Add the directory dir to the list of directories searched for .m4 files. --install Install system-wide third-party macros into the first directory specified with \u2018-I dir\u2019 instead of copying them in the output file. Note that this will happen also if dir is an absolute path. When this option is used, and only when this option is used, aclocal will also honor \u2018#serial number\u2019 lines that appear in macros: an M4 file is ignored if there exists another M4 file with the same basename and a greater serial number in the search path (see Serials). 6.3.2 \u5b8f\u641c\u7d22\u8def\u5f84 \u9ed8\u8ba4\u7684\u641c\u7d22\u8def\u5f84\u53ca\u987a\u5e8f: - acdir-APIVERSION APIVERSION\u53d6\u51b3\u4e8eAutomake\u7684\u7248\u672c - acdir \u6b64\u76ee\u5f55\u9002\u7528\u4e8e\u7b2c\u4e09\u65b9.m4\u6587\u4ef6\uff0cautomake\u6784\u5efa\u65f6\u88ab\u914d\u7f6e\u3002\u901a\u5e38\u88ab\u914d\u7f6e\u4e3a${prefix}/share/aclocal/ \u4fee\u6539\u641c\u7d20\u8def\u5f84\u65b9\u5f0f\u4e00\uff1a -I dir1 -I dir2 \u628a\u4f1adir\u52a0\u5230\u9ed8\u8ba4\u7684\u524d\u9762\uff1a dir1 - dir2 - \u9ed8\u8ba4\u8def\u5f84 \u4fee\u6539\u641c\u7d20\u8def\u5f84\u65b9\u5f0f\u4e8c\uff1a dirlist \u4fee\u6539\u641c\u7d20\u8def\u5f84\u65b9\u5f0f\u4e09\uff1a ACLOCAL_PATH 6.3.3 \u7f16\u5199\u81ea\u5df1\u7684aclocal\u5b8f \u8fd9\u4e2a\u6280\u672f\u53ef\u4ee5\u88ab\u7528\u4e8e\u60f3\u8981\u652f\u6301\u81ea\u5df1\u7684Autoconf\u5b8f\u88ab\u5176\u5b83\u7a0b\u5e8f\u4f7f\u7528\u7684\u5e93\uff08This can be used by libraries that want to supply their own Autoconf macros for use by other programs\uff09\u3002\u6bd4\u5982\uff0cgettext\u5e93\u652f\u6301AM_GNU_GETTEXT\u5b8f\u88ab\u7528\u4e8e\u4efb\u4f55\u4f7f\u7528gettext\u7684\u5305\u3002\u5e93\u5b89\u88c5\u4e4b\u540e\uff0c\u5176\u5b8f\u4e5f\u88ab\u5b89\u88c5\uff0c\u8fd9\u6837aclocal\u5c31\u80fd\u627e\u5230\u5b83\u3002 A macro file\u2019s name should end in .m4. Such files should be installed in $(datadir)/aclocal. This is as simple as writing: aclocaldir = $(datadir)/aclocal aclocal_DATA = mymacro.m4 myothermacro.m4 \u5b8f\u6587\u4ef6\u5e94\u8be5\u7531\u4e00\u7cfb\u5217\u7684 quoted AC_DEFUN (see Macro Definitions in The Autoconf Manual)\u7ec4\u6210\u3002 6.3.4 \u5904\u7406\u672c\u5730\u5b8f Autoconf\u63d0\u4f9b\u7684\u529f\u80fd\u6d4b\u8bd5\u4e0d\u80fd\u6ee1\u8db3\u6240\u6709\u7684\u9700\u6c42\u3002\u4eba\u4eec\u9700\u8981\u7528\u81ea\u5df1\u7684\u5b8f\u6216\u8005\u7b2c\u4e09\u65b9\u5b8f\u8865\u5145\u73b0\u6709\u7684\u6d4b\u8bd5\u3002\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\uff1a \u5728acinclude.m4\u4e2d\u5217\u51fa\u4f60\u6240\u6709\u7684\u5b8f \uff08\u63a8\u8350\u65b9\u6cd5\uff09\u5c06\u6bcf\u4e2a\u5b8f\u5199\u5230\u81ea\u5df1\u7684\u6587\u4ef6\u4e2d\u7136\u540e\u653e\u5230\u4e00\u4e2a\u76ee\u5f55\u4e2d\uff08\u901a\u5e38\u662fm4\uff09\uff0c\u7136\u540e\u5728configure.ac\u4e2d\u6dfb\u52a0\u53d8\u91cf\uff1a AC_CONFIG_MACRO_DIRS([m4]) \u3002\u7b2c\u4e09\u65b9\u7684\u5b8f\u6587\u4ef6\u6700\u597d\u4e5f\u653e\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u3002 aclocal\u63d0\u4f9b\u4e86 --install \u9009\u9879\u6765\u590d\u5236\u7cfb\u7edf\u5c42\u9762\u7684\u5b8f\u5230\u4f60\u672c\u5730\u7684\u5b8f\u76ee\u5f55\uff0c\u5e2e\u52a9\u4f60\u89e3\u51b3\u4e0a\u9762\u7684\u95ee\u9898\u3002\u672c\u5730\u7684\u5b8f\u6bd4\u7cfb\u7edf\u5c42\u9762\u7684\u5b8f\u6709\u4f18\u5148\u6743\u3002\u63a8\u8350\u5728\u6bcf\u6b21\u8fd0\u884caclocal\u65f6\u4f7f\u7528 --install \u9009\u9879\u3002 6.3.5 \u7f16\u53f7 \u4e3a\u4e86\u533a\u5206\u4e00\u4e2a\u5b8f\u7684\u7248\u672c\u3002 \u4f4d\u4e8eM4\u6587\u4ef6\u7684\u5b8f\u5b9a\u4e49\u7684\u524d\u9762\u3002 # \u5fc5\u987b\u662f\u6b64\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5141\u8bb8\u5728version\u4e4b\u540e\u6dfb\u52a0\u5176\u4ed6\u5b57\u7b26 #serial version garbage \u4f7f\u7528\u4e86alcohol\u7684--install\u9009\u9879\u7684\u8bdd\uff0caclocal\u4f1a\u9009\u62e9\u542b\u6709#serial\u7684\u6216\u8005\u7f16\u53f7\u6bd4\u8f83\u65b0\u7684\u90a3\u4e2a\u6587\u4ef6\u3002\u6b64\u7f16\u53f7\u5bf9\u5e94\u7684\u662f\u6574\u4e2a\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u5355\u4e00\u7684\u4e00\u4e2a\u5b8f\u3002 6.3.6 aclocal\u7684\u672a\u6765 aclocal\u53ef\u80fd\u4f1a\u6d88\u5931\u3002\u56e0\u4e3a\u5904\u7406M4\u7684\u5b8f\u662fAutoconf\u7684\u4efb\u52a1\u3002 \u6c38\u8fdc\u4e0d\u8981\u81ea\u5df1\u8c03\u7528aclocal\uff0c\u8ba9\u5b83\u5904\u4e8eautoreconf\u548cAutomake\u7684\u6784\u5efa\u89c4\u5219\u7684\u63a7\u5236\u4e0b\u3002 \u5f88\u591a\u5305\u542b\u6709bootstrap\u6216\u8005autogen.sh\u811a\u672c\uff0c\u5b9e\u9645\u4e0a\u4ed6\u4eec\u53ea\u662f\u5b89\u7167\u6b63\u786e\u7684\u987a\u5e8f\u8c03\u7528\u547d\u4ee4\uff08aclocal, libtoolize, gettextize or autopoint, autoconf, autoheader, and automake\uff09\uff0c\u8fd9\u4e9b\u5de5\u4f5cautoreconf\u5c31\u53ef\u4ee5\u505a\u5230\u3002 6.4 Automake\u63d0\u4f9b\u7684Autoconf\u5b8f \u2022 Public Macros: Macros that you can use. \u2022 Obsolete Macros: Macros that will soon be removed. \u2022 Private Macros: Macros that you should not use. \u516c\u5171\u5b8f AM_INIT_AUTOMAKE ([options]) \u4f7f\u7528\u7a7a\u683c\u5206\u9694\u7684automake\u9009\u9879\u3002 AM_INIT_AUTOMAKE([-Wno-portability])","title":"6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#61","text":"\u552f\u4e00\u7684\u8981\u6c42\u5c31\u662f\u5728configure.ac\u6587\u4ef6\u4e2d\u52a0\u4e0a AM_INIT_AUTOMAKE \u5b8f\u3002 \u4e0b\u9762\u662f\u51e0\u4e2aAutomake\u8981\u6c42\u7684\u4f46\u662f\u4e0d\u4f1a\u88ab AM_INIT_AUTOMAKE \u8fd0\u884c\u7684\u5b8f AC_CONFIG_FILES AC_OUTPUT \u8fd9\u4e24\u4e2a\u7ecf\u5e38\u5728\u672b\u5c3e\u88ab\u8c03\u7528\uff0c\u6307\u660e\u4e86\u54ea\u4e9b\u6587\u4ef6\u4f1a\u88ab\u751f\u6210\u3002\u5982\u679c\u4ee5.am\u7ed3\u5c3e\u5219\u751f\u6210.in\u7ed3\u5c3e\u7684\u6587\u4ef6\u3002\u4e0d\u80fd\u8bc6\u522bshell\u53d8\u91cf\uff0c\u9700\u8981\u5728 AC_SUBST \u4e2d\u6ce8\u518c\uff0c\u5e76\u4e14\u4ee5 ${xxx} \u5f62\u5f0f\u5f15\u7528\u624d\u53ef\u8bc6\u522b\u3002 AC_SUBST([APIVERSION], \u2026) \u2026 AC_CONFIG_FILES( [tests/aclocal-${APIVERSION}:tests/aclocal.in], [chmod +x tests/aclocal-${APIVERSION}], [APIVERSION=$APIVERSION]) AC_CONFIG_FILES( [tests/automake-${APIVERSION}:tests/automake.in], [chmod +x tests/automake-${APIVERSION}]) \u7b49\u7b49...","title":"6.1 \u914d\u7f6e\u8981\u6c42"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#63-aclocalm4","text":"\u4e00\u4e9b\u5b8f\u5fc5\u987b\u88ab\u5b9a\u4e49\u5728aclocal.m4\u4e2d\uff0c\u5426\u5219autoconf\u4e0d\u4f1a\u627e\u5230\u4ed6\u4eec\u3002 aclocal\u53ef\u4ee5\u6839\u636econfigure.ac\u751f\u6210aclocal.m4\u3002\u9996\u5148aclocal\u626b\u63cf\u6240\u6709\u7684.m4\u6587\u4ef6\u641c\u96c6\u5b8f\u5b9a\u4e49\uff0c\u7136\u540e\u626b\u63cfconfigure.ac\uff0c\u6240\u6709\u5728\u7b2c\u4e00\u6b65\u627e\u5230\u7684\u5b8f\u53ca\u5176\u4f9d\u8d56\u7684\u5b8f\u90fd\u4f1a\u88ab\u653e\u5728aclocal.m4\u6587\u4ef6\u4e2d\u3002\u5982\u679c\u672c\u5730\u6ca1\u6709\u627e\u5230\u5c31\u4f1a\u5728\u7cfb\u7edf\u5c42\u9762\u7684\u76ee\u5f55\u4e2d\u5bfb\u627e\u3002 \u901a\u5e38\u5b8f\u653e\u5230aclocal.m4\u4e2d\u662f\u901a\u8fc7\u590d\u5236\u6574\u4e2a\u6587\u4ef6\u5185\u5bb9\u6765\u5b8c\u6210\u7684\u3002\u4f46\u662f\u901a\u8fc7\u547d\u4ee4\u53c2\u6570 -I \u6765\u6307\u5b9a\u76f8\u5bf9\u8def\u5f84\u65f6\uff0c\u4f7f\u7528 m4_include \u4ee3\u66ff\u590d\u5236\u5b83\u5230aclocal.m4\u6587\u4ef6\u4e2d\uff1b\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\u65f6\u6216\u8005\u662f\u7cfb\u7edf\u5c42\u9762\u7684\u76ee\u5f55\u65f6\uff0c\u4f1a\u76f4\u63a5\u590d\u5236\u8fc7\u6765\u3002\u6545\u6700\u597d\u4f7f\u7528 -I `pwd`/reldir \u4ee3\u66ff -I reldir \u3002 acinclude.m4\u4e5f\u4f1a\u88ab\u6307\u5b9a\u653e\u5230aclocal.m4\u6587\u4ef6\u4e2d\uff0c\u5efa\u8bae\u4e0d\u8981\u5728\u65b0\u5305\u4e2d\u4f7f\u7528\u8be5\u6587\u4ef6\u3002 \u64cd\u4f5caclocal.m4\u65f6\uff0caclocal\u8fd0\u884c autom4te (see Using Autom4te in The Autoconf Manual) \u8ffd\u8e2a\u54ea\u4e9b\u5b8f\u88ab\u771f\u6b63\u7684\u4f7f\u7528\u4e86\u3002autom4e\u4e5f\u8981\u5b58\u5728\u4e8ePATH\u73af\u5883\u53d8\u91cf\u4e2d\u3002","title":"6.3 \u81ea\u52a8\u751f\u6210aclocal.m4"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#631-aclocal","text":"\u6bd4\u8f83\u91cd\u8981\u7684\u4e24\u4e2a\u9009\u9879 -I dir Add the directory dir to the list of directories searched for .m4 files. --install Install system-wide third-party macros into the first directory specified with \u2018-I dir\u2019 instead of copying them in the output file. Note that this will happen also if dir is an absolute path. When this option is used, and only when this option is used, aclocal will also honor \u2018#serial number\u2019 lines that appear in macros: an M4 file is ignored if there exists another M4 file with the same basename and a greater serial number in the search path (see Serials).","title":"6.3.1 aclocal\u63a5\u53d7\u7684\u4e00\u4e9b\u9009\u9879\u3002"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#632","text":"\u9ed8\u8ba4\u7684\u641c\u7d22\u8def\u5f84\u53ca\u987a\u5e8f: - acdir-APIVERSION APIVERSION\u53d6\u51b3\u4e8eAutomake\u7684\u7248\u672c - acdir \u6b64\u76ee\u5f55\u9002\u7528\u4e8e\u7b2c\u4e09\u65b9.m4\u6587\u4ef6\uff0cautomake\u6784\u5efa\u65f6\u88ab\u914d\u7f6e\u3002\u901a\u5e38\u88ab\u914d\u7f6e\u4e3a${prefix}/share/aclocal/ \u4fee\u6539\u641c\u7d20\u8def\u5f84\u65b9\u5f0f\u4e00\uff1a -I dir1 -I dir2 \u628a\u4f1adir\u52a0\u5230\u9ed8\u8ba4\u7684\u524d\u9762\uff1a dir1 - dir2 - \u9ed8\u8ba4\u8def\u5f84 \u4fee\u6539\u641c\u7d20\u8def\u5f84\u65b9\u5f0f\u4e8c\uff1a dirlist \u4fee\u6539\u641c\u7d20\u8def\u5f84\u65b9\u5f0f\u4e09\uff1a ACLOCAL_PATH","title":"6.3.2 \u5b8f\u641c\u7d22\u8def\u5f84"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#633-aclocal","text":"\u8fd9\u4e2a\u6280\u672f\u53ef\u4ee5\u88ab\u7528\u4e8e\u60f3\u8981\u652f\u6301\u81ea\u5df1\u7684Autoconf\u5b8f\u88ab\u5176\u5b83\u7a0b\u5e8f\u4f7f\u7528\u7684\u5e93\uff08This can be used by libraries that want to supply their own Autoconf macros for use by other programs\uff09\u3002\u6bd4\u5982\uff0cgettext\u5e93\u652f\u6301AM_GNU_GETTEXT\u5b8f\u88ab\u7528\u4e8e\u4efb\u4f55\u4f7f\u7528gettext\u7684\u5305\u3002\u5e93\u5b89\u88c5\u4e4b\u540e\uff0c\u5176\u5b8f\u4e5f\u88ab\u5b89\u88c5\uff0c\u8fd9\u6837aclocal\u5c31\u80fd\u627e\u5230\u5b83\u3002 A macro file\u2019s name should end in .m4. Such files should be installed in $(datadir)/aclocal. This is as simple as writing: aclocaldir = $(datadir)/aclocal aclocal_DATA = mymacro.m4 myothermacro.m4 \u5b8f\u6587\u4ef6\u5e94\u8be5\u7531\u4e00\u7cfb\u5217\u7684 quoted AC_DEFUN (see Macro Definitions in The Autoconf Manual)\u7ec4\u6210\u3002","title":"6.3.3 \u7f16\u5199\u81ea\u5df1\u7684aclocal\u5b8f"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#634","text":"Autoconf\u63d0\u4f9b\u7684\u529f\u80fd\u6d4b\u8bd5\u4e0d\u80fd\u6ee1\u8db3\u6240\u6709\u7684\u9700\u6c42\u3002\u4eba\u4eec\u9700\u8981\u7528\u81ea\u5df1\u7684\u5b8f\u6216\u8005\u7b2c\u4e09\u65b9\u5b8f\u8865\u5145\u73b0\u6709\u7684\u6d4b\u8bd5\u3002\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\uff1a \u5728acinclude.m4\u4e2d\u5217\u51fa\u4f60\u6240\u6709\u7684\u5b8f \uff08\u63a8\u8350\u65b9\u6cd5\uff09\u5c06\u6bcf\u4e2a\u5b8f\u5199\u5230\u81ea\u5df1\u7684\u6587\u4ef6\u4e2d\u7136\u540e\u653e\u5230\u4e00\u4e2a\u76ee\u5f55\u4e2d\uff08\u901a\u5e38\u662fm4\uff09\uff0c\u7136\u540e\u5728configure.ac\u4e2d\u6dfb\u52a0\u53d8\u91cf\uff1a AC_CONFIG_MACRO_DIRS([m4]) \u3002\u7b2c\u4e09\u65b9\u7684\u5b8f\u6587\u4ef6\u6700\u597d\u4e5f\u653e\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u3002 aclocal\u63d0\u4f9b\u4e86 --install \u9009\u9879\u6765\u590d\u5236\u7cfb\u7edf\u5c42\u9762\u7684\u5b8f\u5230\u4f60\u672c\u5730\u7684\u5b8f\u76ee\u5f55\uff0c\u5e2e\u52a9\u4f60\u89e3\u51b3\u4e0a\u9762\u7684\u95ee\u9898\u3002\u672c\u5730\u7684\u5b8f\u6bd4\u7cfb\u7edf\u5c42\u9762\u7684\u5b8f\u6709\u4f18\u5148\u6743\u3002\u63a8\u8350\u5728\u6bcf\u6b21\u8fd0\u884caclocal\u65f6\u4f7f\u7528 --install \u9009\u9879\u3002","title":"6.3.4 \u5904\u7406\u672c\u5730\u5b8f"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#635","text":"\u4e3a\u4e86\u533a\u5206\u4e00\u4e2a\u5b8f\u7684\u7248\u672c\u3002 \u4f4d\u4e8eM4\u6587\u4ef6\u7684\u5b8f\u5b9a\u4e49\u7684\u524d\u9762\u3002 # \u5fc5\u987b\u662f\u6b64\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u5141\u8bb8\u5728version\u4e4b\u540e\u6dfb\u52a0\u5176\u4ed6\u5b57\u7b26 #serial version garbage \u4f7f\u7528\u4e86alcohol\u7684--install\u9009\u9879\u7684\u8bdd\uff0caclocal\u4f1a\u9009\u62e9\u542b\u6709#serial\u7684\u6216\u8005\u7f16\u53f7\u6bd4\u8f83\u65b0\u7684\u90a3\u4e2a\u6587\u4ef6\u3002\u6b64\u7f16\u53f7\u5bf9\u5e94\u7684\u662f\u6574\u4e2a\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u5355\u4e00\u7684\u4e00\u4e2a\u5b8f\u3002","title":"6.3.5 \u7f16\u53f7"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#636-aclocal","text":"aclocal\u53ef\u80fd\u4f1a\u6d88\u5931\u3002\u56e0\u4e3a\u5904\u7406M4\u7684\u5b8f\u662fAutoconf\u7684\u4efb\u52a1\u3002 \u6c38\u8fdc\u4e0d\u8981\u81ea\u5df1\u8c03\u7528aclocal\uff0c\u8ba9\u5b83\u5904\u4e8eautoreconf\u548cAutomake\u7684\u6784\u5efa\u89c4\u5219\u7684\u63a7\u5236\u4e0b\u3002 \u5f88\u591a\u5305\u542b\u6709bootstrap\u6216\u8005autogen.sh\u811a\u672c\uff0c\u5b9e\u9645\u4e0a\u4ed6\u4eec\u53ea\u662f\u5b89\u7167\u6b63\u786e\u7684\u987a\u5e8f\u8c03\u7528\u547d\u4ee4\uff08aclocal, libtoolize, gettextize or autopoint, autoconf, autoheader, and automake\uff09\uff0c\u8fd9\u4e9b\u5de5\u4f5cautoreconf\u5c31\u53ef\u4ee5\u505a\u5230\u3002","title":"6.3.6 aclocal\u7684\u672a\u6765"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#64-automakeautoconf","text":"\u2022 Public Macros: Macros that you can use. \u2022 Obsolete Macros: Macros that will soon be removed. \u2022 Private Macros: Macros that you should not use.","title":"6.4 Automake\u63d0\u4f9b\u7684Autoconf\u5b8f"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#_1","text":"","title":"\u516c\u5171\u5b8f"},{"location":"automake/6.\u626b\u63cfconfigure.ac\uff0c\u4f7f\u7528aclocal/#am_init_automake-options","text":"\u4f7f\u7528\u7a7a\u683c\u5206\u9694\u7684automake\u9009\u9879\u3002 AM_INIT_AUTOMAKE([-Wno-portability])","title":"AM_INIT_AUTOMAKE ([options])"},{"location":"automake/7.\u6587\u4ef6\u5939/","text":"7.1 \u9012\u5f52\u5b50\u6587\u4ef6\u5939 \u9876\u5c42\u7684Makefile.am\u5fc5\u987b\u544a\u8bc9Automake\u54ea\u4e9b\u5b50\u6587\u4ef6\u5939\u5c06\u88ab\u6784\u5efa\u3002\u901a\u8fc7 SUBDIRS \u53d8\u91cf\u5b9e\u73b0\u3002 \u5f53\u4f60\u5728\u9876\u7ea7\u76ee\u5f55\u6267\u884cmake\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u5728\u6240\u6709\u7684\u5b50\u6587\u4ef6\u5939\u4e2d\u4e5f\u4f1a\u6267\u884c\uff0c\u81ea\u5b9a\u4e49\u7684\u89c4\u5219\u9664\u5916\u3002 note \uff1a\u8fd9\u4e9b\u5b50\u6587\u4ef6\u5939\u4e2d\u4e0d\u8981\u6c42\u542b\u6709Makefile.am\u6587\u4ef6\uff0c\u53ea\u8981\u6c42\u542b\u6709Makefile\u6587\u4ef6\uff08after configure\uff09\u3002 \u9ed8\u8ba4\u5b50\u6587\u4ef6\u5939\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e4b\u524d\u6784\u5efa\uff0c\u53ef\u4ee5\u5728\u4efb\u4f55\u4f4d\u7f6e\u6dfb\u52a0 . \u6765\u6539\u53d8\u8fd9\u4e00\u987a\u5e8f\u3002 SUBDIRS = lib src . tests \u603b\u662f\u628a\u6d4b\u8bd5\u7684\u653e\u5728\u6700\u540e\u3002 7.2 \u6761\u4ef6\u5b50\u6587\u4ef6\u5939 7.2.1 SUBDIRS vs DIST_SUBDIRS SUBDIRS \u5305\u542b\u4e86\u5f53\u524d\u76ee\u5f55\u4e0b\u5fc5\u987b\u6784\u5efa\u7684\u5b50\u76ee\u5f55\u3002\u9700\u8981\u624b\u52a8\u5b9a\u4e49\u3002 DIST_SUBDIRS \u7528\u4e8e\u9700\u8981\u5728\u6240\u6709\u7684\u76ee\u5f55\u4e0b\u9012\u5f52\u7684\u89c4\u5219\u3002 \u2018make maintainer-clean\u2019, \u2018make distclean\u2019 and \u2018make dist\u2019\u89c4\u5219\u4f7f\u7528 DIST_SUBDIRS \uff0c\u5176\u5b83\u89c4\u5219\u4f7f\u7528 SUBDIRS \u3002 \u5982\u679c\u4f7f\u7528Automake\u7684conditionals\u5b9a\u4e49 SUBDIRS \uff0cAutomake\u4f1a\u81ea\u52a8\u5b9a\u4e49 DIST_SUBDIRS \uff1b\u5982\u679c SUBDIRS \u5305\u542b\u4e86 AC_SUBST \u53d8\u91cf\uff0c DIST_SUBDIRS \u9700\u8981\u624b\u52a8\u5b9a\u4e49\u3002 7.2.2 \u4f7f\u7528 AM_CONDITIONAL \u5b9a\u4e49\u5b50\u76ee\u5f55 \u4e3e\u4f8b\uff1a configure AM_CONDITIONAL([COND_OPT], [test $want_opt = yes]) AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile]) Makefil.am if COND_OPT MAYBE_OPT = opt endif SUBDIRS = src $(MAYBE_OPT) \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cAutomake\u4f1a\u81ea\u52a8\u5b9a\u4e49 DIST_SUBDIRS = src opt \uff0c\u56e0\u4e3a\u77e5\u9053\u5728\u7279\u5b9a\u7684\u6761\u4ef6\u4e0b MAYBE_OPT \u4f1a\u542b\u6709 opt \u3002 7.2.3 \u4f7f\u7528 AC_SUBST \u5b9a\u4e49\u5b50\u76ee\u5f55 \u4e3e\u4f8b\uff1a configure if test $want_opt = yes; then MAYBE_OPT=opt else MAYBE_OPT= fi AC_SUBST([MAYBE_OPT]) AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile]) Makefil.am SUBDIRS = src $(MAYBE_OPT) DIST_SUBDIRS = src opt Automake\u4e0d\u80fd\u731c\u6d4b MAYBE_OPT \u7684\u503c\u662f\u4ec0\u4e48\uff0c\u9700\u8981\u624b\u52a8\u5b9a\u4e49 DIST_SUBDIRS \u3002 7.4 \u5d4c\u5957\u5305 \u5d4c\u5957\u7684\u5305\u76ee\u5f55\u5e94\u8be5\u4e5f\u5728 SUBDIRS \u4e2d\u5217\u51fa\u3002\u5b50\u5305\u7684Makefile\u5e94\u8be5\u7531\u81ea\u5df1\u7684configure\u811a\u672c\u751f\u6210\uff0c\u800c\u4e0d\u662f\u7236\u5305\u7684configure\u3002\u901a\u8fc7\u4f7f\u7528 AC_CONFIG_SUBDIRS \u8fbe\u5230\u8fd9\u4e00\u76ee\u7684\u3002 arm\u2019s configure.ac: AC_INIT([arm], [1.0]) AC_CONFIG_AUX_DIR([.]) AM_INIT_AUTOMAKE AC_PROG_CC AC_CONFIG_FILES([Makefile]) # Call hand's ./configure script recursively. AC_CONFIG_SUBDIRS([hand]) AC_OUTPUT arm\u2019s Makefile.am: # Build the library in the hand subdirectory first. SUBDIRS = hand # Include hand's header when compiling this directory. AM_CPPFLAGS = -I$(srcdir)/hand bin_PROGRAMS = arm arm_SOURCES = arm.c # link with the hand library. arm_LDADD = hand/libhand.a","title":"7.\u6587\u4ef6\u5939"},{"location":"automake/7.\u6587\u4ef6\u5939/#71","text":"\u9876\u5c42\u7684Makefile.am\u5fc5\u987b\u544a\u8bc9Automake\u54ea\u4e9b\u5b50\u6587\u4ef6\u5939\u5c06\u88ab\u6784\u5efa\u3002\u901a\u8fc7 SUBDIRS \u53d8\u91cf\u5b9e\u73b0\u3002 \u5f53\u4f60\u5728\u9876\u7ea7\u76ee\u5f55\u6267\u884cmake\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u5728\u6240\u6709\u7684\u5b50\u6587\u4ef6\u5939\u4e2d\u4e5f\u4f1a\u6267\u884c\uff0c\u81ea\u5b9a\u4e49\u7684\u89c4\u5219\u9664\u5916\u3002 note \uff1a\u8fd9\u4e9b\u5b50\u6587\u4ef6\u5939\u4e2d\u4e0d\u8981\u6c42\u542b\u6709Makefile.am\u6587\u4ef6\uff0c\u53ea\u8981\u6c42\u542b\u6709Makefile\u6587\u4ef6\uff08after configure\uff09\u3002 \u9ed8\u8ba4\u5b50\u6587\u4ef6\u5939\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e4b\u524d\u6784\u5efa\uff0c\u53ef\u4ee5\u5728\u4efb\u4f55\u4f4d\u7f6e\u6dfb\u52a0 . \u6765\u6539\u53d8\u8fd9\u4e00\u987a\u5e8f\u3002 SUBDIRS = lib src . tests \u603b\u662f\u628a\u6d4b\u8bd5\u7684\u653e\u5728\u6700\u540e\u3002","title":"7.1 \u9012\u5f52\u5b50\u6587\u4ef6\u5939"},{"location":"automake/7.\u6587\u4ef6\u5939/#72","text":"","title":"7.2 \u6761\u4ef6\u5b50\u6587\u4ef6\u5939"},{"location":"automake/7.\u6587\u4ef6\u5939/#721-subdirs-vs-dist_subdirs","text":"SUBDIRS \u5305\u542b\u4e86\u5f53\u524d\u76ee\u5f55\u4e0b\u5fc5\u987b\u6784\u5efa\u7684\u5b50\u76ee\u5f55\u3002\u9700\u8981\u624b\u52a8\u5b9a\u4e49\u3002 DIST_SUBDIRS \u7528\u4e8e\u9700\u8981\u5728\u6240\u6709\u7684\u76ee\u5f55\u4e0b\u9012\u5f52\u7684\u89c4\u5219\u3002 \u2018make maintainer-clean\u2019, \u2018make distclean\u2019 and \u2018make dist\u2019\u89c4\u5219\u4f7f\u7528 DIST_SUBDIRS \uff0c\u5176\u5b83\u89c4\u5219\u4f7f\u7528 SUBDIRS \u3002 \u5982\u679c\u4f7f\u7528Automake\u7684conditionals\u5b9a\u4e49 SUBDIRS \uff0cAutomake\u4f1a\u81ea\u52a8\u5b9a\u4e49 DIST_SUBDIRS \uff1b\u5982\u679c SUBDIRS \u5305\u542b\u4e86 AC_SUBST \u53d8\u91cf\uff0c DIST_SUBDIRS \u9700\u8981\u624b\u52a8\u5b9a\u4e49\u3002","title":"7.2.1 SUBDIRS vs DIST_SUBDIRS"},{"location":"automake/7.\u6587\u4ef6\u5939/#722-am_conditional","text":"\u4e3e\u4f8b\uff1a configure AM_CONDITIONAL([COND_OPT], [test $want_opt = yes]) AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile]) Makefil.am if COND_OPT MAYBE_OPT = opt endif SUBDIRS = src $(MAYBE_OPT) \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cAutomake\u4f1a\u81ea\u52a8\u5b9a\u4e49 DIST_SUBDIRS = src opt \uff0c\u56e0\u4e3a\u77e5\u9053\u5728\u7279\u5b9a\u7684\u6761\u4ef6\u4e0b MAYBE_OPT \u4f1a\u542b\u6709 opt \u3002","title":"7.2.2 \u4f7f\u7528AM_CONDITIONAL\u5b9a\u4e49\u5b50\u76ee\u5f55"},{"location":"automake/7.\u6587\u4ef6\u5939/#723-ac_subst","text":"\u4e3e\u4f8b\uff1a configure if test $want_opt = yes; then MAYBE_OPT=opt else MAYBE_OPT= fi AC_SUBST([MAYBE_OPT]) AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile]) Makefil.am SUBDIRS = src $(MAYBE_OPT) DIST_SUBDIRS = src opt Automake\u4e0d\u80fd\u731c\u6d4b MAYBE_OPT \u7684\u503c\u662f\u4ec0\u4e48\uff0c\u9700\u8981\u624b\u52a8\u5b9a\u4e49 DIST_SUBDIRS \u3002","title":"7.2.3 \u4f7f\u7528AC_SUBST\u5b9a\u4e49\u5b50\u76ee\u5f55"},{"location":"automake/7.\u6587\u4ef6\u5939/#74","text":"\u5d4c\u5957\u7684\u5305\u76ee\u5f55\u5e94\u8be5\u4e5f\u5728 SUBDIRS \u4e2d\u5217\u51fa\u3002\u5b50\u5305\u7684Makefile\u5e94\u8be5\u7531\u81ea\u5df1\u7684configure\u811a\u672c\u751f\u6210\uff0c\u800c\u4e0d\u662f\u7236\u5305\u7684configure\u3002\u901a\u8fc7\u4f7f\u7528 AC_CONFIG_SUBDIRS \u8fbe\u5230\u8fd9\u4e00\u76ee\u7684\u3002 arm\u2019s configure.ac: AC_INIT([arm], [1.0]) AC_CONFIG_AUX_DIR([.]) AM_INIT_AUTOMAKE AC_PROG_CC AC_CONFIG_FILES([Makefile]) # Call hand's ./configure script recursively. AC_CONFIG_SUBDIRS([hand]) AC_OUTPUT arm\u2019s Makefile.am: # Build the library in the hand subdirectory first. SUBDIRS = hand # Include hand's header when compiling this directory. AM_CPPFLAGS = -I$(srcdir)/hand bin_PROGRAMS = arm arm_SOURCES = arm.c # link with the hand library. arm_LDADD = hand/libhand.a","title":"7.4 \u5d4c\u5957\u5305"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/","text":"8.1 \u6784\u5efa\u4e00\u4e2a\u7a0b\u5e8f \u4e3a\u4e86\u6784\u5efa\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u9700\u8981\u544a\u77e5Automake\u54ea\u4e9b\u6e90\u662f\u5b83\u7684\u4e00\u90e8\u5206\uff0c\u548c\u5b83\u5e94\u8be5\u94fe\u63a5\u54ea\u4e9b\u5e93\u3002 8.1.1 \u5b9a\u4e49\u7a0b\u5e8f\u6e90 \u5728\u4e00\u4e2a\u5305\u542b\u4e86\u8981\u88ab\u6784\u5efa\u8fdb\u7a0b\u5e8f\u7684\u8d44\u6e90\uff08\u975e\u5e93\u6216\u811a\u672c\uff09\u7684\u6587\u4ef6\u5939\uff0c\u4f7f\u7528 PROGRAMS \u3002 \u7a0b\u5e8f\u53ef\u4ee5\u88ab\u5b89\u88c5\u5230 bindir, sbindir, libexecdir, pkglibexecdir \uff0c\u6216\u8005\u6839\u672c\u4e0d\u5b89\u88c5(noinst_)\uff0c\u6216\u8005\u53ea\u5728 make check \u7684\u65f6\u5019\u6784\u5efa\uff08check_\uff09\u3002 bin_PROGRAMS = hello \u4e0e\u6bcf\u4e2a\u7a0b\u5e8f\u76f8\u5173\u8054\u7684\u662f\u4ee5\u7a0b\u5e8f\u547d\u540d\u7684\u51e0\u4e2a\u8f85\u52a9\u53d8\u91cf\u3002\u8fd9\u4e9b\u53d8\u91cf\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u6709\u5408\u7406\u7684\u9ed8\u8ba4\u503c\u3002\u4e0b\u9762\u4ee5hello\u4e3a\u4f8b\u505a\u51fa\u8bf4\u660e\u3002 hello_SOURCES \u7528\u4e8e\u6307\u5b9a\u54ea\u4e9b\u6e90\u6587\u4ef6\u88ab\u6784\u5efa\u8fdb\u5165\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff1a hello_SOURCES = hello.c version.c getopt.c getopt1.c getopt.h system.h \u6539\u53d8\u91cf\u7684\u9ed8\u8ba4\u53d8\u91cf\u662f\u5355\u4e2a\u6587\u4ef6 hello.c \u3002 \u4e00\u4e2a\u6587\u4ef6\u5939\u53ef\u4ee5\u6784\u5efa\u591a\u4e2a\u7a0b\u5e8f\u3002\u591a\u4e2a\u7a0b\u5e8f\u4e5f\u53ef\u4ee5\u5171\u4eab\u4e00\u4e2a\u5355\u4e2a\u7684\u6e90\u6587\u4ef6\u3002 8.1.2 \u94fe\u63a5\u7a0b\u5e8f \u5982\u679c\u4f60\u60f3\u94fe\u63a5\u6ca1\u6709\u88abconfigure\u53d1\u73b0\u7684\u5e93\uff0c\u4f7f\u7528 LDADD \u53d8\u91cf\uff0c\u94fe\u63a5\u6807\u5fd7\u5219\u4f7f\u7528 AM_LDFLAGS \u53d8\u91cf\u3002 \u6709\u65f6\uff0c\u591a\u4e2a\u7a0b\u5e8f\u5728\u4e00\u4e2a\u76ee\u5f55\u4e0b\u6784\u5efa\uff0c\u4f46\u662f\u94fe\u63a5\u9700\u6c42\u4e0d\u540c\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528 prog _LDADD \u53d8\u91cf\u6765\u8986\u76d6 LDADD \u3002 \u4f8b\u5982\uff0ccpio\u3001pax\u3001mt \u4e0e\u5e93\u6587\u4ef6 libcpio.a \u94fe\u63a5\uff0c\u4f46\u662f\u540c\u4e00\u4e2a\u76ee\u5f55\u4e0b\u8fd8\u6709\u53e6\u4e00\u4e2a\u7a0b\u5e8f rmt \u88ab\u6784\u5efa\uff0c\u5b83\u4e0d\u9700\u8981\u8fd9\u4e2a\u5e93\u6587\u4ef6\u3002\u5e76\u4e14\uff0cmt \u548c rmt \u53ea\u4f1a\u5728\u7279\u5b9a\u67b6\u6784\u4e0b\u88ab\u6784\u5efa\u3002\u4e0b\u9762\u662f cpio \u7684src/Makefile.am \u6587\u4ef6\u7684\u5199\u6cd5\uff1a bin_PROGRAMS = cpio pax $(MT) libexec_PROGRAMS = $(RMT) EXTRA_PROGRAMS = mt rmt LDADD = ../lib/libcpio.a $(INTLLIBS) rmt_LDADD = cpio_SOURCES = \u2026 pax_SOURCES = \u2026 mt_SOURCES = \u2026 rmt_SOURCES = \u2026 \u4f7f\u7528\u53d8\u91cf prog _LDFLAGS \u4f20\u9012\u94fe\u63a5\u6807\u5fd7\u3002 8.1.3 \u6e90\u6587\u4ef6\u7684\u6761\u4ef6\u7f16\u8bd1 \u4f60\u4e0d\u80fd\u653e\u7f6e\u4e00\u4e2a\u914d\u7f6e\u66ff\u6362\uff08e.g., \u2018@FOO@\u2019 or \u2018$(FOO)\u2019 where FOO is defined via AC_SUBST\uff09\u5230 _SOURCES \u53d8\u91cf\u4e2d\u3002 \u4f46\u662f\u6709\u4e24\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8fbe\u5230\u540c\u6837\u7684\u76ee\u7684\uff1a1\u3001\u5728 _LDADD \u4e2d\u4f7f\u7528\u914d\u7f6e\u66ff\u6362\uff1b2\u3001\u4f7f\u7528Automake\u7684\u6761\u4ef6\u8bed\u53e5\u3002 1.\u4f7f\u7528 _LDADD Automake\u5fc5\u987b\u77e5\u9053\u6240\u6709\u7684\u53ef\u80fd\u7528\u5230\u7684\u6e90\u6587\u4ef6\u3002\u4efb\u4f55\u6761\u4ef6\u6784\u5efa\u7684\u6587\u4ef6\u90fd\u5e94\u653e\u5230\u5408\u9002\u7684 EXTRA_ \u53d8\u91cf\u4e2d\u3002 \u4f8b\u5982\uff0c\u76f8\u8981 hello-linux.c \u6216 hello-generic.c \u6709\u6761\u4ef6\u5730\u6784\u5efa\u5230 hello \u4e2d\uff1a Makefile.am\uff1a bin_PROGRAMS = hello hello_SOURCES = hello-common.c EXTRA_hello_SOURCES = hello-linux.c hello-generic.c hello_LDADD = $(HELLO_SYSTEM) hello_DEPENDENCIES = $(HELLO_SYSTEM) configure.ac\uff1a case $host in *linux*) HELLO_SYSTEM='hello-linux.$(OBJEXT)' ;; *) HELLO_SYSTEM='hello-generic.$(OBJEXT)' ;; esac AC_SUBST([HELLO_SYSTEM]) hello_DEPENDENCIES and hello_LDADD\u4fdd\u8bc1\u4e86\u6784\u5efa\u548c\u94fe\u63a5\u3002 2.\u4f7f\u7528Automake\u7684\u6761\u4ef6\u8bed\u53e5 \u8fd9\u79cd\u65b9\u5f0f\u66f4\u7b80\u5355\u3002\u8fd8\u662f\u4e0a\u8ff0\u7684\u4f8b\u5b50\uff1a Makefile.am\uff1a bin_PROGRAMS = hello hello_SOURCES = hello-common.c if LINUX hello_SOURCES += hello-linux.c else hello_SOURCES += hello-generic.c endif configure.ac\uff1a AM_CONDITIONAL([LINUX],[ case $host in *linux*) HELLO_SYSTEM='hello-linux.$(OBJEXT)' ;; *) HELLO_SYSTEM='hello-generic.$(OBJEXT)' ;; esac ]) \u4f60\u4e0d\u9700\u8981\u5b9a\u4e49 EXTRA_ \u53d8\u91cf\u3002 8.1.3 \u7a0b\u5e8f\u7684\u6761\u4ef6\u7f16\u8bd1 _PROGRAMS \u540c\u6837\u53ef\u4ee5\u4f7f\u7528 \u66ff\u6362\u6216\u6761\u4ef6\u8bed\u53e5 \u6765\u5b9e\u73b0\u76ee\u7684\u3002 1.\u4f7f\u7528configure\u6765\u66ff\u6362 bin_PROGRAMS = cpio pax $(MT) libexec_PROGRAMS = $(RMT) EXTRA_PROGRAMS = mt rmt note \uff1aAs explained in EXEEXT , Automake will rewrite bin_PROGRAMS, libexec_PROGRAMS, and EXTRA_PROGRAMS, appending \u2018$(EXEEXT)\u2019 to each binary. \u4f46\u662f\u5982\u679c\u4f7f\u7528\u4e86\u53d8\u91cf\u66ff\u6362\uff0c\u5219\u4e0d\u4f1a\u6269\u5c55\u540e\u7f00\u3002 2.\u4f7f\u7528\u6761\u4ef6\u8bed\u53e5 bin_PROGRAMS = cpio pax if WANT_MT bin_PROGRAMS += mt endif if WANT_RMT libexec_PROGRAMS = rmt endif \u8fd9\u79cd\u65b9\u5f0f\u4e0d\u5fc5\u62c5\u5fc3 \u2018$(EXEEXT)\u2019 or EXTRA_PROGRAMS\u3002 8.4 \u7a0b\u5e8f\u4e0e\u5e93 \u7684\u53d8\u91cf \u6709\u4e00\u7ec4\u53d8\u91cf\u548c\u6bcf\u4e2a\u7a0b\u5e8f\u76f8\u5173\uff0c\u53ef\u7528\u4e8e\u4fee\u6539\u7a0b\u5e8f\u7684\u6784\u5efa\u65b9\u5f0f\u3002\u5e93\u4e5f\u7c7b\u4f3c\u3002\u5b83\u4eec\u7684\u540d\u5b57\u5457\u7528\u4e8e\u547d\u540d\u8fd9\u4e9b\u53d8\u91cf\u7684\u57fa\u7840\u3002 \u4e0b\u9762\uff0c\u6211\u4f7f\u7528\u540d\u5b57 maude \u4ee3\u8868\u7a0b\u5e8f\u6216\u8005\u5e93\u6765\u8bf4\u660e\u8fd9\u4e9b\u53d8\u91cf\u3002 maude_SOURCES EXTRA_maude_SOURCES maude_LDADD maude_LDFLAGS maude_DEPENDENCIES EXTRA_maude_DEPENDENCIES 8.5 \u9ed8\u8ba4\u7684 _SOURCES _SOURCES variables are used to specify source files of programs ( see A Program ), libraries ( see A Library ), and Libtool libraries ( see A Shared Library ). \u8be5\u53d8\u91cf\u6ca1\u6709\u88ab\u6307\u5b9a\u7684\u65f6\u5019\uff0c\u9ed8\u8ba4\u503c\u662f\u5355\u4e2a\u7684\u540c\u540d C\u6587\u4ef6 \uff0c\u5e26\u6709\u4efb\u4f55\u88ab AM_DEFAULT_SOURCE_EXT \u66ff\u6362\u7684\u540e\u7f00\uff0c\u9ed8\u8ba4\u7684\u540e\u7f00\u662f .c \u3002 check_PROGRAMS = test1 test2 test3 AM_DEFAULT_SOURCE_EXT = .cpp 8.20 \u53ef\u6267\u884c\u6269\u5c55\u7684\u652f\u6301 \u5728\u4e00\u4e9b\u5e73\u53f0\uff0c\u6bd4\u5982windows\uff0c\u53ef\u6267\u884c\u7a0b\u5e8f\u4f1a\u88ab\u6269\u5c55\u6210\u542b\u6709.exe\u7684\u7a0b\u5e8f\u3002 Automake\u652f\u6301\u5927\u90e8\u5206\u8fd9\u79cd\u8f6c\u6362\u3002 One thing you must be aware of is that, internally, Automake rewrites something like this: bin_PROGRAMS = liver to this: bin_PROGRAMS = liver$(EXEEXT) TESTS and XFAIL_TESTS \u4e5f\u4f1a\u88ab\u91cd\u5199\u5982\u679c\u5728\u540c\u4e00\u4e2aMakefile\u4e2d\u4ed6\u4eec\u5305\u542b\u4e86\u5df2\u7ecf\u88ab\u58f0\u660e\u4e3a\u7a0b\u5e8f\u7684\u6587\u4ef6\u540d\u3002 \u4f46\u662f\uff0c\u8fd9\u4e2a\u6280\u672f\u4e0d\u80fd\u5e94\u7528\u4e8econfigure\u53d8\u91cf\u66ff\u6362\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u4f60\u4f7f\u7528\u4e86\u6761\u4ef6\u6784\u5efa\uff0c\u90a3\u4e48\u4f60\u5fc5\u987b\u81ea\u5df1\u5728configure.ac\u4e2d\u6dfb\u52a0 $(EXEEXT) \u6269\u5c55\u5176\u540e\u7f00\u3002 no-exeext \u9009\u9879\u53ef\u4ee5\u5173\u95ed\u8fd9\u4e2a\u7279\u6027\uff0c\u5b83\u4f1a\u8986\u76d6 foo$(EXEEXT) \u89c4\u5219\u3002","title":"8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#81","text":"\u4e3a\u4e86\u6784\u5efa\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u9700\u8981\u544a\u77e5Automake\u54ea\u4e9b\u6e90\u662f\u5b83\u7684\u4e00\u90e8\u5206\uff0c\u548c\u5b83\u5e94\u8be5\u94fe\u63a5\u54ea\u4e9b\u5e93\u3002","title":"8.1 \u6784\u5efa\u4e00\u4e2a\u7a0b\u5e8f"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#811","text":"\u5728\u4e00\u4e2a\u5305\u542b\u4e86\u8981\u88ab\u6784\u5efa\u8fdb\u7a0b\u5e8f\u7684\u8d44\u6e90\uff08\u975e\u5e93\u6216\u811a\u672c\uff09\u7684\u6587\u4ef6\u5939\uff0c\u4f7f\u7528 PROGRAMS \u3002 \u7a0b\u5e8f\u53ef\u4ee5\u88ab\u5b89\u88c5\u5230 bindir, sbindir, libexecdir, pkglibexecdir \uff0c\u6216\u8005\u6839\u672c\u4e0d\u5b89\u88c5(noinst_)\uff0c\u6216\u8005\u53ea\u5728 make check \u7684\u65f6\u5019\u6784\u5efa\uff08check_\uff09\u3002 bin_PROGRAMS = hello \u4e0e\u6bcf\u4e2a\u7a0b\u5e8f\u76f8\u5173\u8054\u7684\u662f\u4ee5\u7a0b\u5e8f\u547d\u540d\u7684\u51e0\u4e2a\u8f85\u52a9\u53d8\u91cf\u3002\u8fd9\u4e9b\u53d8\u91cf\u662f\u53ef\u9009\u7684\uff0c\u5e76\u4e14\u6709\u5408\u7406\u7684\u9ed8\u8ba4\u503c\u3002\u4e0b\u9762\u4ee5hello\u4e3a\u4f8b\u505a\u51fa\u8bf4\u660e\u3002 hello_SOURCES \u7528\u4e8e\u6307\u5b9a\u54ea\u4e9b\u6e90\u6587\u4ef6\u88ab\u6784\u5efa\u8fdb\u5165\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff1a hello_SOURCES = hello.c version.c getopt.c getopt1.c getopt.h system.h \u6539\u53d8\u91cf\u7684\u9ed8\u8ba4\u53d8\u91cf\u662f\u5355\u4e2a\u6587\u4ef6 hello.c \u3002 \u4e00\u4e2a\u6587\u4ef6\u5939\u53ef\u4ee5\u6784\u5efa\u591a\u4e2a\u7a0b\u5e8f\u3002\u591a\u4e2a\u7a0b\u5e8f\u4e5f\u53ef\u4ee5\u5171\u4eab\u4e00\u4e2a\u5355\u4e2a\u7684\u6e90\u6587\u4ef6\u3002","title":"8.1.1 \u5b9a\u4e49\u7a0b\u5e8f\u6e90"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#812","text":"\u5982\u679c\u4f60\u60f3\u94fe\u63a5\u6ca1\u6709\u88abconfigure\u53d1\u73b0\u7684\u5e93\uff0c\u4f7f\u7528 LDADD \u53d8\u91cf\uff0c\u94fe\u63a5\u6807\u5fd7\u5219\u4f7f\u7528 AM_LDFLAGS \u53d8\u91cf\u3002 \u6709\u65f6\uff0c\u591a\u4e2a\u7a0b\u5e8f\u5728\u4e00\u4e2a\u76ee\u5f55\u4e0b\u6784\u5efa\uff0c\u4f46\u662f\u94fe\u63a5\u9700\u6c42\u4e0d\u540c\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528 prog _LDADD \u53d8\u91cf\u6765\u8986\u76d6 LDADD \u3002 \u4f8b\u5982\uff0ccpio\u3001pax\u3001mt \u4e0e\u5e93\u6587\u4ef6 libcpio.a \u94fe\u63a5\uff0c\u4f46\u662f\u540c\u4e00\u4e2a\u76ee\u5f55\u4e0b\u8fd8\u6709\u53e6\u4e00\u4e2a\u7a0b\u5e8f rmt \u88ab\u6784\u5efa\uff0c\u5b83\u4e0d\u9700\u8981\u8fd9\u4e2a\u5e93\u6587\u4ef6\u3002\u5e76\u4e14\uff0cmt \u548c rmt \u53ea\u4f1a\u5728\u7279\u5b9a\u67b6\u6784\u4e0b\u88ab\u6784\u5efa\u3002\u4e0b\u9762\u662f cpio \u7684src/Makefile.am \u6587\u4ef6\u7684\u5199\u6cd5\uff1a bin_PROGRAMS = cpio pax $(MT) libexec_PROGRAMS = $(RMT) EXTRA_PROGRAMS = mt rmt LDADD = ../lib/libcpio.a $(INTLLIBS) rmt_LDADD = cpio_SOURCES = \u2026 pax_SOURCES = \u2026 mt_SOURCES = \u2026 rmt_SOURCES = \u2026 \u4f7f\u7528\u53d8\u91cf prog _LDFLAGS \u4f20\u9012\u94fe\u63a5\u6807\u5fd7\u3002","title":"8.1.2 \u94fe\u63a5\u7a0b\u5e8f"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#813","text":"\u4f60\u4e0d\u80fd\u653e\u7f6e\u4e00\u4e2a\u914d\u7f6e\u66ff\u6362\uff08e.g., \u2018@FOO@\u2019 or \u2018$(FOO)\u2019 where FOO is defined via AC_SUBST\uff09\u5230 _SOURCES \u53d8\u91cf\u4e2d\u3002 \u4f46\u662f\u6709\u4e24\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8fbe\u5230\u540c\u6837\u7684\u76ee\u7684\uff1a1\u3001\u5728 _LDADD \u4e2d\u4f7f\u7528\u914d\u7f6e\u66ff\u6362\uff1b2\u3001\u4f7f\u7528Automake\u7684\u6761\u4ef6\u8bed\u53e5\u3002","title":"8.1.3 \u6e90\u6587\u4ef6\u7684\u6761\u4ef6\u7f16\u8bd1"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#1_ldadd","text":"Automake\u5fc5\u987b\u77e5\u9053\u6240\u6709\u7684\u53ef\u80fd\u7528\u5230\u7684\u6e90\u6587\u4ef6\u3002\u4efb\u4f55\u6761\u4ef6\u6784\u5efa\u7684\u6587\u4ef6\u90fd\u5e94\u653e\u5230\u5408\u9002\u7684 EXTRA_ \u53d8\u91cf\u4e2d\u3002 \u4f8b\u5982\uff0c\u76f8\u8981 hello-linux.c \u6216 hello-generic.c \u6709\u6761\u4ef6\u5730\u6784\u5efa\u5230 hello \u4e2d\uff1a Makefile.am\uff1a bin_PROGRAMS = hello hello_SOURCES = hello-common.c EXTRA_hello_SOURCES = hello-linux.c hello-generic.c hello_LDADD = $(HELLO_SYSTEM) hello_DEPENDENCIES = $(HELLO_SYSTEM) configure.ac\uff1a case $host in *linux*) HELLO_SYSTEM='hello-linux.$(OBJEXT)' ;; *) HELLO_SYSTEM='hello-generic.$(OBJEXT)' ;; esac AC_SUBST([HELLO_SYSTEM]) hello_DEPENDENCIES and hello_LDADD\u4fdd\u8bc1\u4e86\u6784\u5efa\u548c\u94fe\u63a5\u3002","title":"1.\u4f7f\u7528_LDADD"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#2automake","text":"\u8fd9\u79cd\u65b9\u5f0f\u66f4\u7b80\u5355\u3002\u8fd8\u662f\u4e0a\u8ff0\u7684\u4f8b\u5b50\uff1a Makefile.am\uff1a bin_PROGRAMS = hello hello_SOURCES = hello-common.c if LINUX hello_SOURCES += hello-linux.c else hello_SOURCES += hello-generic.c endif configure.ac\uff1a AM_CONDITIONAL([LINUX],[ case $host in *linux*) HELLO_SYSTEM='hello-linux.$(OBJEXT)' ;; *) HELLO_SYSTEM='hello-generic.$(OBJEXT)' ;; esac ]) \u4f60\u4e0d\u9700\u8981\u5b9a\u4e49 EXTRA_ \u53d8\u91cf\u3002","title":"2.\u4f7f\u7528Automake\u7684\u6761\u4ef6\u8bed\u53e5"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#813_1","text":"_PROGRAMS \u540c\u6837\u53ef\u4ee5\u4f7f\u7528 \u66ff\u6362\u6216\u6761\u4ef6\u8bed\u53e5 \u6765\u5b9e\u73b0\u76ee\u7684\u3002","title":"8.1.3 \u7a0b\u5e8f\u7684\u6761\u4ef6\u7f16\u8bd1"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#1configure","text":"bin_PROGRAMS = cpio pax $(MT) libexec_PROGRAMS = $(RMT) EXTRA_PROGRAMS = mt rmt note \uff1aAs explained in EXEEXT , Automake will rewrite bin_PROGRAMS, libexec_PROGRAMS, and EXTRA_PROGRAMS, appending \u2018$(EXEEXT)\u2019 to each binary. \u4f46\u662f\u5982\u679c\u4f7f\u7528\u4e86\u53d8\u91cf\u66ff\u6362\uff0c\u5219\u4e0d\u4f1a\u6269\u5c55\u540e\u7f00\u3002","title":"1.\u4f7f\u7528configure\u6765\u66ff\u6362"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#2","text":"bin_PROGRAMS = cpio pax if WANT_MT bin_PROGRAMS += mt endif if WANT_RMT libexec_PROGRAMS = rmt endif \u8fd9\u79cd\u65b9\u5f0f\u4e0d\u5fc5\u62c5\u5fc3 \u2018$(EXEEXT)\u2019 or EXTRA_PROGRAMS\u3002","title":"2.\u4f7f\u7528\u6761\u4ef6\u8bed\u53e5"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#84","text":"\u6709\u4e00\u7ec4\u53d8\u91cf\u548c\u6bcf\u4e2a\u7a0b\u5e8f\u76f8\u5173\uff0c\u53ef\u7528\u4e8e\u4fee\u6539\u7a0b\u5e8f\u7684\u6784\u5efa\u65b9\u5f0f\u3002\u5e93\u4e5f\u7c7b\u4f3c\u3002\u5b83\u4eec\u7684\u540d\u5b57\u5457\u7528\u4e8e\u547d\u540d\u8fd9\u4e9b\u53d8\u91cf\u7684\u57fa\u7840\u3002 \u4e0b\u9762\uff0c\u6211\u4f7f\u7528\u540d\u5b57 maude \u4ee3\u8868\u7a0b\u5e8f\u6216\u8005\u5e93\u6765\u8bf4\u660e\u8fd9\u4e9b\u53d8\u91cf\u3002 maude_SOURCES EXTRA_maude_SOURCES maude_LDADD maude_LDFLAGS maude_DEPENDENCIES EXTRA_maude_DEPENDENCIES","title":"8.4 \u7a0b\u5e8f\u4e0e\u5e93 \u7684\u53d8\u91cf"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#85-_sources","text":"_SOURCES variables are used to specify source files of programs ( see A Program ), libraries ( see A Library ), and Libtool libraries ( see A Shared Library ). \u8be5\u53d8\u91cf\u6ca1\u6709\u88ab\u6307\u5b9a\u7684\u65f6\u5019\uff0c\u9ed8\u8ba4\u503c\u662f\u5355\u4e2a\u7684\u540c\u540d C\u6587\u4ef6 \uff0c\u5e26\u6709\u4efb\u4f55\u88ab AM_DEFAULT_SOURCE_EXT \u66ff\u6362\u7684\u540e\u7f00\uff0c\u9ed8\u8ba4\u7684\u540e\u7f00\u662f .c \u3002 check_PROGRAMS = test1 test2 test3 AM_DEFAULT_SOURCE_EXT = .cpp","title":"8.5 \u9ed8\u8ba4\u7684 _SOURCES"},{"location":"automake/8.\u6784\u5efa\u7a0b\u5e8f\u548c\u5e93/#820","text":"\u5728\u4e00\u4e9b\u5e73\u53f0\uff0c\u6bd4\u5982windows\uff0c\u53ef\u6267\u884c\u7a0b\u5e8f\u4f1a\u88ab\u6269\u5c55\u6210\u542b\u6709.exe\u7684\u7a0b\u5e8f\u3002 Automake\u652f\u6301\u5927\u90e8\u5206\u8fd9\u79cd\u8f6c\u6362\u3002 One thing you must be aware of is that, internally, Automake rewrites something like this: bin_PROGRAMS = liver to this: bin_PROGRAMS = liver$(EXEEXT) TESTS and XFAIL_TESTS \u4e5f\u4f1a\u88ab\u91cd\u5199\u5982\u679c\u5728\u540c\u4e00\u4e2aMakefile\u4e2d\u4ed6\u4eec\u5305\u542b\u4e86\u5df2\u7ecf\u88ab\u58f0\u660e\u4e3a\u7a0b\u5e8f\u7684\u6587\u4ef6\u540d\u3002 \u4f46\u662f\uff0c\u8fd9\u4e2a\u6280\u672f\u4e0d\u80fd\u5e94\u7528\u4e8econfigure\u53d8\u91cf\u66ff\u6362\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u4f60\u4f7f\u7528\u4e86\u6761\u4ef6\u6784\u5efa\uff0c\u90a3\u4e48\u4f60\u5fc5\u987b\u81ea\u5df1\u5728configure.ac\u4e2d\u6dfb\u52a0 $(EXEEXT) \u6269\u5c55\u5176\u540e\u7f00\u3002 no-exeext \u9009\u9879\u53ef\u4ee5\u5173\u95ed\u8fd9\u4e2a\u7279\u6027\uff0c\u5b83\u4f1a\u8986\u76d6 foo$(EXEEXT) \u89c4\u5219\u3002","title":"8.20 \u53ef\u6267\u884c\u6269\u5c55\u7684\u652f\u6301"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/","text":"Automake\u8fd8\u652f\u6301\u5904\u7406 C\u7a0b\u5e8f\u4ee5\u5916 \u7684\u6d3e\u751f\u5bf9\u8c61\u3002 9.1 \u53ef\u6267\u884c\u811a\u672c \u5b8c\u5168\u53ef\u4ee5\u5b9a\u4e49\u548c\u5b89\u88c5\u811a\u672c\u7c7b\u578b\u7684\u7a0b\u5e8f\u3002\u4f7f\u7528 _SCRIPTS primary\u3002 \u811a\u672c\u9ed8\u8ba4\u662f\u4e0d\u53d1\u5e03\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528 dist_ \u6765\u6539\u53d8\u3002 # Install my_script in $(bindir) and distribute it. dist_bin_SCRIPTS = my_script \u811a\u672c\u53ef\u4ee5\u5b89\u88c5\u5230 bindir, sbindir, libexecdir, pkglibexecdir, pkgdatadir \u3002 \u65e0\u9700\u5b89\u88c5\u7684\u811a\u672c\u5217\u5728 noinst_SCRIPTS \uff0c\u5728\u4ed6\u4eec\u4e2d\uff0c\u53ea\u88ab make check \u9700\u8981\u7684\u5217\u5728 check_SCRIPTS \u3002 9.2 \u5934\u6587\u4ef6 \u5fc5\u987b\u88ab\u5b89\u88c5\u7684\u5934\u6587\u4ef6\u901a\u8fc7 _HEADERS \u53d8\u91cf\u5b9e\u73b0\u3002\u53ef\u4ee5\u88ab\u5b89\u88c5\u5230 includedir, oldincludedir, pkgincludedir \u6216\u8005\u4efb\u4f55\u81ea\u5b9a\u4e49\u7684\u76ee\u5f55\u3002\u4f8b\u5982\uff1a include_HEADERS = foo.h bar/bar.h \u5c06\u5b89\u88c5\u4e24\u4e2a\u6587\u4ef6 $(includedir)/foo.h and $(includedir)/bar.h\u3002 \u6240\u6709\u7684\u5934\u6587\u4ef6\u5fc5\u987b\u88ab\u5217\u5728 _SOURCES \u6216 _HEADERS \u4e2d\u3002 \u4e00\u5b9a\u4e0d\u80fd\u53d1\u5e03\u7684\u5934\u6587\u4ef6\u5199\u5728 nodist_include_HEADERS or nodist_prog_SOURCES \u4e2d\u3002 9.3 \u67b6\u6784\u65e0\u5173\u6570\u636e\u6587\u4ef6 Automake\u652f\u6301\u6742\u6570\u636e\u6587\u4ef6\u7684\u5b89\u88c5\uff0c\u4f7f\u7528 _DATA \u53d8\u91cf\u3002 \u53ef\u4ee5\u88ab\u5b89\u88c5\u5230\u7684\u6587\u4ef6\u5939\uff1a datadir, sysconfdir, sharedstatedir, localstatedir, or pkgdatadir \u3002 dist_pkgdata_DATA = clean-kr.am clean.am \u2026 9.4 \u6784\u5efa\u6e90\u6587\u4ef6 \u81ea\u52a8\u4f9d\u8d56\u8ffd\u8e2a\u4f9d\u8d56\u4e8e\u7f16\u8bd1\uff0c\u6240\u4ee5\u53ea\u6709\u5728\u7b2c\u4e00\u6b21\u7f16\u8bd1\u7684\u65f6\u5019\u624d\u80fd\u77e5\u9053\u5176\u4f9d\u8d56\u5173\u7cfb\u3002 \u5b58\u5728\u7684\u95ee\u9898\uff1a\u5982\u679c\u9700\u8981\u6784\u5efa\u53ef\u6267\u884c\u7a0b\u5e8ffoo\uff0c\u4f46\u662f\u5374\u6ca1\u6709foo.h\uff0c\u6bd4\u5982foo.h\u662f\u5176\u5b83\u89c4\u5219\u7684\u5bf9\u8c61\u5e76\u4e14\u8be5\u89c4\u5219\u6ca1\u6709\u6267\u884c\uff0c\u90a3\u4e48\u4f1a\u6784\u5efa\u5931\u8d25\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u53ef\u4f7f\u7528 BUILT_SOURCES \u53d8\u91cf\u3002\u5728\u8be5\u53d8\u91cf\u4e2d\u5217\u51fa\u7684\u6e90\u6587\u4ef6\u662f\u5728 make all or make check (or even make install) \u65f6\u5728\u5176\u4ed6\u76ee\u6807\u88ab\u6267\u884c\u4e4b\u524d\u521b\u5efa\u7684\u3002 1.\u4f7f\u7528 BUILT_SOURCES \u6240\u4ee5\uff0c\u53ef\u4ee5\u4f7f\u7528 BUILT_SOURCES = foo.h \u6765\u786e\u4fdd make all or make check \u7684\u65f6\u5019\uff0c\u8be5\u6587\u4ef6\u5728\u5176\u4ed6\u76ee\u6807\u4e4b\u524d\u88ab\u6784\u5efa\u3002 2.\u624b\u52a8\u7f16\u5199\u4f9d\u8d56 \u5982\u679c\u4f60\u5728\u4e0a\u8ff0\u4e09\u4e2amake\u547d\u4ee4\u4e4b\u524d\u6267\u884c\u4e86\u5176\u4ed6\u7684 make foo \u547d\u4ee4\uff0c\u90a3\u4e48\u4f1a\u62a5\u9519\u3002\uff1f\uff1f\uff1f\u4e0d\u4f1a\u62a5\u9519\u554a \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u66ff\u4ee3 BUILT_SOURCES \u7684\u5199\u6cd5\u662f foo.$(OBJEXT): bindir.h 3.\u4ece configure \u6784\u5efa \u5934\u6587\u4ef6 \u53ef\u4ee5\u5728config.h\u4e2d\u5b9a\u4e49\u5934\u6587\u4ef6\u7684\u5b8f\uff08 see Defining Directories \uff09\uff0c\u6216\u8005\u4f7f\u7528 AC_CONFIG_FILES ( see Configuration Actions )\u9a71\u52a8 bindir.h.in \u6587\u4ef6\u3002 \u5982\u6b64\u4e00\u6765\uff0cMakefile.am\u5c31\u80fd\u5199\u5730\u5f88\u7b80\u77ed\uff1a bin_PROGRAMS = foo foo_SOURCES = foo.c \u4f46\u662f\u603b\u4f1a\u6709\u4e0d\u80fd\u4ececonfigure\u6784\u5efa\u6e90\u6587\u4ef6\u7684\u60c5\u51b5\u3002 4.\u6784\u5efa .c \u6587\u4ef6\uff0c\u800c\u4e0d\u662f .h \u6587\u4ef6 noinst_PROGRAMS = foo foo_SOURCES = foo.c bindir.h nodist_foo_SOURCES = bindir.c CLEANFILES = bindir.c bindir.c: Makefile echo 'const char bindir[] = $(bindir) ;' $@","title":"9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/#91","text":"\u5b8c\u5168\u53ef\u4ee5\u5b9a\u4e49\u548c\u5b89\u88c5\u811a\u672c\u7c7b\u578b\u7684\u7a0b\u5e8f\u3002\u4f7f\u7528 _SCRIPTS primary\u3002 \u811a\u672c\u9ed8\u8ba4\u662f\u4e0d\u53d1\u5e03\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528 dist_ \u6765\u6539\u53d8\u3002 # Install my_script in $(bindir) and distribute it. dist_bin_SCRIPTS = my_script \u811a\u672c\u53ef\u4ee5\u5b89\u88c5\u5230 bindir, sbindir, libexecdir, pkglibexecdir, pkgdatadir \u3002 \u65e0\u9700\u5b89\u88c5\u7684\u811a\u672c\u5217\u5728 noinst_SCRIPTS \uff0c\u5728\u4ed6\u4eec\u4e2d\uff0c\u53ea\u88ab make check \u9700\u8981\u7684\u5217\u5728 check_SCRIPTS \u3002","title":"9.1 \u53ef\u6267\u884c\u811a\u672c"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/#92","text":"\u5fc5\u987b\u88ab\u5b89\u88c5\u7684\u5934\u6587\u4ef6\u901a\u8fc7 _HEADERS \u53d8\u91cf\u5b9e\u73b0\u3002\u53ef\u4ee5\u88ab\u5b89\u88c5\u5230 includedir, oldincludedir, pkgincludedir \u6216\u8005\u4efb\u4f55\u81ea\u5b9a\u4e49\u7684\u76ee\u5f55\u3002\u4f8b\u5982\uff1a include_HEADERS = foo.h bar/bar.h \u5c06\u5b89\u88c5\u4e24\u4e2a\u6587\u4ef6 $(includedir)/foo.h and $(includedir)/bar.h\u3002 \u6240\u6709\u7684\u5934\u6587\u4ef6\u5fc5\u987b\u88ab\u5217\u5728 _SOURCES \u6216 _HEADERS \u4e2d\u3002 \u4e00\u5b9a\u4e0d\u80fd\u53d1\u5e03\u7684\u5934\u6587\u4ef6\u5199\u5728 nodist_include_HEADERS or nodist_prog_SOURCES \u4e2d\u3002","title":"9.2 \u5934\u6587\u4ef6"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/#93","text":"Automake\u652f\u6301\u6742\u6570\u636e\u6587\u4ef6\u7684\u5b89\u88c5\uff0c\u4f7f\u7528 _DATA \u53d8\u91cf\u3002 \u53ef\u4ee5\u88ab\u5b89\u88c5\u5230\u7684\u6587\u4ef6\u5939\uff1a datadir, sysconfdir, sharedstatedir, localstatedir, or pkgdatadir \u3002 dist_pkgdata_DATA = clean-kr.am clean.am \u2026","title":"9.3 \u67b6\u6784\u65e0\u5173\u6570\u636e\u6587\u4ef6"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/#94","text":"\u81ea\u52a8\u4f9d\u8d56\u8ffd\u8e2a\u4f9d\u8d56\u4e8e\u7f16\u8bd1\uff0c\u6240\u4ee5\u53ea\u6709\u5728\u7b2c\u4e00\u6b21\u7f16\u8bd1\u7684\u65f6\u5019\u624d\u80fd\u77e5\u9053\u5176\u4f9d\u8d56\u5173\u7cfb\u3002 \u5b58\u5728\u7684\u95ee\u9898\uff1a\u5982\u679c\u9700\u8981\u6784\u5efa\u53ef\u6267\u884c\u7a0b\u5e8ffoo\uff0c\u4f46\u662f\u5374\u6ca1\u6709foo.h\uff0c\u6bd4\u5982foo.h\u662f\u5176\u5b83\u89c4\u5219\u7684\u5bf9\u8c61\u5e76\u4e14\u8be5\u89c4\u5219\u6ca1\u6709\u6267\u884c\uff0c\u90a3\u4e48\u4f1a\u6784\u5efa\u5931\u8d25\u3002 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u53ef\u4f7f\u7528 BUILT_SOURCES \u53d8\u91cf\u3002\u5728\u8be5\u53d8\u91cf\u4e2d\u5217\u51fa\u7684\u6e90\u6587\u4ef6\u662f\u5728 make all or make check (or even make install) \u65f6\u5728\u5176\u4ed6\u76ee\u6807\u88ab\u6267\u884c\u4e4b\u524d\u521b\u5efa\u7684\u3002","title":"9.4 \u6784\u5efa\u6e90\u6587\u4ef6"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/#1-built_sources","text":"\u6240\u4ee5\uff0c\u53ef\u4ee5\u4f7f\u7528 BUILT_SOURCES = foo.h \u6765\u786e\u4fdd make all or make check \u7684\u65f6\u5019\uff0c\u8be5\u6587\u4ef6\u5728\u5176\u4ed6\u76ee\u6807\u4e4b\u524d\u88ab\u6784\u5efa\u3002","title":"1.\u4f7f\u7528 BUILT_SOURCES"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/#2","text":"\u5982\u679c\u4f60\u5728\u4e0a\u8ff0\u4e09\u4e2amake\u547d\u4ee4\u4e4b\u524d\u6267\u884c\u4e86\u5176\u4ed6\u7684 make foo \u547d\u4ee4\uff0c\u90a3\u4e48\u4f1a\u62a5\u9519\u3002\uff1f\uff1f\uff1f\u4e0d\u4f1a\u62a5\u9519\u554a \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u66ff\u4ee3 BUILT_SOURCES \u7684\u5199\u6cd5\u662f foo.$(OBJEXT): bindir.h","title":"2.\u624b\u52a8\u7f16\u5199\u4f9d\u8d56"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/#3-configure","text":"\u53ef\u4ee5\u5728config.h\u4e2d\u5b9a\u4e49\u5934\u6587\u4ef6\u7684\u5b8f\uff08 see Defining Directories \uff09\uff0c\u6216\u8005\u4f7f\u7528 AC_CONFIG_FILES ( see Configuration Actions )\u9a71\u52a8 bindir.h.in \u6587\u4ef6\u3002 \u5982\u6b64\u4e00\u6765\uff0cMakefile.am\u5c31\u80fd\u5199\u5730\u5f88\u7b80\u77ed\uff1a bin_PROGRAMS = foo foo_SOURCES = foo.c \u4f46\u662f\u603b\u4f1a\u6709\u4e0d\u80fd\u4ececonfigure\u6784\u5efa\u6e90\u6587\u4ef6\u7684\u60c5\u51b5\u3002","title":"3.\u4ece configure \u6784\u5efa \u5934\u6587\u4ef6"},{"location":"automake/9.\u5176\u5b83\u6d3e\u751f\u5bf9\u8c61/#4-c-h","text":"noinst_PROGRAMS = foo foo_SOURCES = foo.c bindir.h nodist_foo_SOURCES = bindir.c CLEANFILES = bindir.c bindir.c: Makefile echo 'const char bindir[] = $(bindir) ;' $@","title":"4.\u6784\u5efa .c \u6587\u4ef6\uff0c\u800c\u4e0d\u662f .h \u6587\u4ef6"},{"location":"automake/\u7b80\u4ecb/","text":"Automake\u4ecb\u7ecd Autotools\u4ecb\u7ecd 2.2.3 \u6807\u51c6\u76ee\u5f55\u53d8\u91cf 2.2.6 \u5e76\u884c\u6784\u5efa\u6811\uff08VPATH \u6784\u5efa\uff09 \u5bf9\u6bd4\u6e90\u7801\u6811\u4e0e\u6784\u5efa\u6811 \u865a\u62df\u8def\u5f84\u6784\u5efa \u4e00\u4e9b\u7279\u6027 2.2.8 \u4ea4\u53c9\u7f16\u8bd1 2.2.9 \u91cd\u547d\u540d\u7a0b\u5e8f 2.2.10 \u6307\u5b9a\u76ee\u7684\u6587\u4ef6\u5939\u6784\u5efa\u4e8c\u8fdb\u5236\u6587\u4ef6 2.2.11 \u51c6\u5907\u53d1\u5e03 \u751f\u6210\u6784\u5efa\u7cfb\u7edf 2.4 \u5c0f\u7a0b\u5e8f\u6587\u4ef6\u89e3\u8bfb configure.ac src/Makefile.am Makefil.am 3. \u57fa\u672c\u7406\u5ff5 3.1 \u4e00\u822c\u64cd\u4f5c 3.2 \u4e25\u683c\u7a0b\u5ea6 3.3 \u547d\u540d\u683c\u5f0f 3.4 \u547d\u4ee4\u957f\u5ea6\u9650\u5236 3.6 \u7528\u6237\u4fdd\u7559\u53d8\u91cf 4. \u4e00\u4e9b\u793a\u4f8b\u5305 2018-11-19 Automake\u4ecb\u7ecd Automake\u662f\u4eceMakefile.am(\u5b9a\u4e49\u4e00\u7cfb\u5217make\u53d8\u91cf\u7684\u6587\u4ef6)\u81ea\u52a8\u751f\u6210Makefile.in\u6587\u4ef6\u7684\u5de5\u5177\u3002\u751f\u6210\u7684Makefile.in\u7b26\u5408GNU Makefile \u6807\u51c6\u3002 \u56e0\u4e3a\u4e0d\u540c\u7684\u5e73\u53f0\u9700\u8981\u4fee\u6539Makefile\uff0c\u6240\u4ee5\u7f16\u5199 configure \u811a\u672c\u81ea\u52a8\u4fee\u6539Makefile\uff0c\u518d\u6267\u884c ./configure make make install \u547d\u4ee4\u5b89\u88c5\u5305\uff0c\u5f62\u6210\u4e86GNU\u6784\u5efa\u7cfb\u7edf\u3002 Autotools\u4ecb\u7ecd Autotools \u662f\u4e3a\u5305\u521b\u5efaGNU\u6784\u5efa\u7cfb\u7edf\u7684\u5de5\u5177\uff1b Autoconf \u4e3b\u8981\u5173\u6ce8 configure \uff1b Automake \u4e3b\u8981\u5173\u6ce8 Makefile \u3002 \u5f53\u5b89\u88c5\u4e00\u4e2a\u7a0b\u5e8f\u65f6\uff0c\u5b89\u88c5\u6b65\u9aa4\u6709\u4ee5\u4e0b\u51e0\u6b65\uff1a tar -zxf xxx.tar.gz cd xxx ./configure #\u68c0\u67e5\u8981\u6c42\u7684\u73af\u5883\uff0c\u751f\u6210\u5305\u62ecMakefile\uff08s\uff09\u5728\u5185\u7684\u591a\u4e2a\u6587\u4ef6 make #\u6784\u5efa\u6240\u6709\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u751f\u6210\u6587\u4ef6 make check #\u6e90\u7801\u68c0\u67e5 su #\u5207\u6362\u5230root\u7528\u6237 make install #\u590d\u5236\u6e90\u7801\u6587\u4ef6\u5230\u76ee\u7684\u76ee\u5f55 make installcheck #\u5b89\u88c5\u540e\u68c0\u67e5 note \uff1a make uninstall \u9700\u8981\u5728\u6784\u5efa\u6811\u4e0b\u8fd0\u884c make clean \u5220\u9664make\u751f\u6210\u7684\u6587\u4ef6 make distclean \u989d\u5916\u5220\u9664 ./configure\u751f\u6210\u7684\u6587\u4ef6 make dist \u4ece\u6e90\u7801\u91cd\u65b0\u521b\u5efaxxx.tar.gz \u6709\u4e00\u4e9b\u53ef\u914d\u7f6e\u53d8\u91cf\uff0c\u53ef\u4ee5\u901a\u8fc7 ./configure --help \u67e5\u770b\u5b8c\u6574\u7248 \u5982\u679c\u60f3\u914d\u7f6e\u7cfb\u7edf\u9ed8\u8ba4\u53d8\u91cf\uff0c\u53ef\u4ee5\u4fee\u6539 /usr/local/share/config.site \u6587\u4ef6\u4e2d\u6307\u5b9a 2.2.3 \u6807\u51c6\u76ee\u5f55\u53d8\u91cf Directory variable Default value prefix /usr/local exec_prefix ${prefix} bindir ${exec_prefix}/bin libdir ${exec_prefix}/lib \u2026 includedir ${prefix}/include datarootdir ${prefix}/share datadir ${datarootdir} mandir ${datarootdir}/man infodir ${datarootdir}/info docdir ${datarootdir}/doc/${PACKAGE} \u901a\u8fc7 ./configure --help \u67e5\u770b\u5b8c\u6574\u7248\u3002 \u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u6539\u53d8\u8fd9\u4e9b\u76ee\u5f55\uff1a ./configure --prefix ~/usr \u3002 2.2.6 \u5e76\u884c\u6784\u5efa\u6811\uff08VPATH \u6784\u5efa\uff09 \u5bf9\u6bd4\u6e90\u7801\u6811\u4e0e\u6784\u5efa\u6811 \u6e90\u7801\u6811 \uff1a\u5305\u542b\u4e86configure\u6587\u4ef6\u7684\u6240\u6709\u6e90\u6587\u4ef6 \u6784\u5efa\u6811 \uff1a\u5728\u6e90\u7801\u6811\u7684\u57fa\u7840\u4e0a\uff0c\u5305\u542b\u4e0a\u8fd0\u884cconfigure\u4e4b\u540e\u6d3e\u751f\u51fa\u6765\u7684\u6587\u4ef6\u3002\u901a\u5e38\u76ee\u5f55\u7ed3\u6784\u4e0e\u6e90\u7801\u6811\u4e00\u81f4\uff0c\u5b50\u76ee\u5f55\u662f\u88ab\u6784\u5efa\u7cfb\u7edf\u81ea\u52a8\u521b\u5efa\u51fa\u6765\u7684 \u865a\u62df\u8def\u5f84\u6784\u5efa \u53ef\u4ee5\u5728\u89e3\u538b\u5b8c\u538b\u7f29\u5305\u4e4b\u540e\u5728\u4efb\u610f\u4f4d\u7f6e\u65b0\u5efa\u4e00\u4e2abuild\u5b50\u6587\u4ef6\u5939\u5e76\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u6267\u884c\u540e\u7eed\u6b65\u9aa4\uff0c\u6240\u6709\u7684\u6d3e\u751f\u6587\u4ef6\u4f1a\u5b58\u653e\u5728build\u76ee\u5f55\u4e0b\uff0c\u8fd9\u6837\u7684\u6784\u5efa\u53eb\u505a parallel build \u6216\u8005 VPATH builds \u3002 \u865a\u62df\u8def\u5f84\u6784\u5efa\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u5b50\u6587\u4ef6\u5939\u8fdb\u884c\u6784\u5efa\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6784\u5efa\u540c\u4e00\u4efd\u6e90\u7801\u3002 \u4e00\u4e9b\u7279\u6027 2.2.8 \u4ea4\u53c9\u7f16\u8bd1 \u5728\u6307\u5b9a\u7684\u6784\u5efa\u5e73\u53f0\u4e0a\u7f16\u8bd1\u53ef\u4ee5\u5728\u8fd0\u884c\u5e73\u53f0\u4e0a\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6 ./configure --build\u6307\u5b9a\u6784\u5efa\u5e73\u53f0\uff0c--host\u6307\u5b9a\u8fd0\u884c\u5e73\u53f0 notes \uff1a\u5982\u679c\u9700\u8981\u6784\u5efa\u7684\u5305\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u9700\u8981\u4f7f\u7528--target\u53c2\u6570\u6307\u5b9a\u67b6\u6784 2.2.9 \u91cd\u547d\u540d\u7a0b\u5e8f \u53ef\u4ee5\u5728\u6267\u884cconfigure\u7684\u65f6\u5019\u5bf9\u5b89\u88c5\u7684\u7a0b\u5e8f\u91cd\u547d\u540d\uff0c\u6bd4\u5982\u5b89\u88c5 tar \u53d8\u4e3a gtar \u4ee5\u4e0b\u4e09\u4e2a\u53c2\u6570\u53ef\u4ee5\u6ee1\u8db3\u8be5\u9700\u6c42\uff1a --program-prefix #\u7ed9\u7a0b\u5e8f\u540d\u5b57\u6dfb\u52a0\u524d\u7f00 --program-suffix #\u7ed9\u7a0b\u5e8f\u540d\u5b57\u6dfb\u52a0\u540e\u7f00 --program-transform-name #\u91cd\u547d\u540d\u7a0b\u5e8f eg. ./configure --program-prefix tea 2.2.10 \u6307\u5b9a\u76ee\u7684\u6587\u4ef6\u5939\u6784\u5efa\u4e8c\u8fdb\u5236\u6587\u4ef6 make DESTDIR=$HOME/inst install \u6b64\u4e3e\u4f1a\u5c06\u7a0b\u5e8f\u5b89\u88c5\u5728 ~/inst \u6587\u4ef6\u5939\u4e0b\uff0c\u6587\u4ef6\u5939\u4e0b\u5305\u542b\u4e86\u7a0b\u5e8f\u7684\u5b89\u88c5\u7ed3\u6784 \u5b89\u88c5\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\u6240\u793a\uff1a \u6253\u5305\uff1a cd ~/inst find . -type f -print ../files.lst tar zcvf ~/amhello-1.0-i686.tar.gz `cat ../files.lst` \u5982\u6b64\u4e00\u6765\uff0c\u76f4\u63a5\u89e3\u538b\u8fd9\u4e2a\u538b\u7f29\u5305\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u5b8c\u6210amhello\u7684\u5b89\u88c5\u3002 2.2.11 \u51c6\u5907\u53d1\u5e03 \u4f7f\u7528 make distcheck \u6765\u4fdd\u8bc1\u5305\u62e5\u6709\u6240\u9700\u8981\u7684\u6784\u5efa\u6b65\u9aa4\u5e76\u4e14\u4e0d\u4f1a\u62a5\u9519 \u5c1d\u8bd5\u5b8c\u6574\u7684\u6253\u5305\u3001\u89e3\u5305\u3001\u8fd0\u884cmake\u3001make check\u3001make install\u3001make installcheck\u3001make dist \u6d4b\u8bd5\u53ea\u8bfb\u6e90\u7801\u6811\u7684 VPATH Builds \u4fdd\u8bc1make clean\u3001make distclean\u3001make uninstall\u4e0d\u4f1a\u9057\u6f0f\u4efb\u4f55\u6587\u4ef6 \u68c0\u67e5 DESTDIR \u5b89\u88c5\u5de5\u4f5c \u751f\u6210\u6784\u5efa\u7cfb\u7edf autoreconfig \u662f\u4e00\u4e2a\u6309\u7167\u6b63\u786e\u6267\u884cautoconf\u3001automake\u548c\u4e00\u5806\u5176\u5b83\u547d\u4ee4\u7684\u811a\u672c\uff0c\u7528\u4e8e\u751f\u6210\u6784\u5efa\u7cfb\u7edf\u3002 \u7f16\u5199configure.ac\u3001Makefile.am\u3001main.c\u3001README\u6587\u4ef6\uff0c\u6267\u884c autoreconfig --install \u5b9e\u4f8b\u5316\u4e00\u4e2a\u6784\u5efa\u7cfb\u7edf autoconf\u8d1f\u8d23\u4ececonfigure.ac\u751f\u6210configure\u6587\u4ef6 automake\u8d1f\u8d23\u4eceMakefile.am\u548cconfigure.ac\u751f\u6210Makefile.in\u6587\u4ef6 note \uff1a\u53ea\u6709\u6784\u5efa\u7cfb\u7edf\u6ca1\u6709\u65f6\u624d\u6267\u884c autoreconfig \uff0c\u5982\u679c\u4fee\u6539\u4e86 configure.ac \u6216\u8005 Makefile.am \uff0c\u6267\u884cmake\u65f6\u4f1a\u81ea\u52a8\u91cd\u65b0\u751f\u6210\u76f8\u5173\u6587\u4ef6\u3002 configure.ac \u7684\u8bed\u6cd5\u53c2\u8003Autoconf\u624b\u518c\u3002 2.4 \u5c0f\u7a0b\u5e8f\u6587\u4ef6\u89e3\u8bfb \u5728 /usr/share/doc/automake-1.13.4 \u76ee\u5f55\u4e0b\uff0c\u4f1a\u6709\u4e00\u4e2aamhello\u7684\u8f6f\u4ef6\u5305\uff0c\u4ee5\u5b83\u4f5c\u4e3a\u4f8b\u5b50\u8bb2\u89e3\uff1a amhello-1.0 \u251c\u2500\u2500 aclocal.m4 \u251c\u2500\u2500 config.h.in \u251c\u2500\u2500 configure \u251c\u2500\u2500 configure.ac \u251c\u2500\u2500 depcomp \u251c\u2500\u2500 install-sh \u251c\u2500\u2500 Makefile.am \u251c\u2500\u2500 Makefile.in \u251c\u2500\u2500 missing \u251c\u2500\u2500 README \u2514\u2500\u2500 src \u251c\u2500\u2500 main.c \u251c\u2500\u2500 Makefile.am \u2514\u2500\u2500 Makefile.in configure.ac AC_INIT([amhello], [1.0], [bug-automake@gnu.org]) AM_INIT_AUTOMAKE([-Wall -Werror foreign]) AC_PROG_CC AC_CONFIG_HEADERS([config.h]) AC_CONFIG_FILES([ Makefile src/Makefile ]) AC_OUTPUT AC_ \u5f00\u5934\u7684\u662fautocofig\u7684\u5b8f\uff1b AM_ \u5f00\u5934\u7684\u662fautomake\u7684\u5b8f\u3002 AC_INIT \u5b9a\u4e49\u4e86\u5305\u540d\u3001\u7248\u672c\u3001\u8054\u7cfb\u5730\u5740 AM_INIT_AUTOMAKE \u62ec\u53f7\u4e2d\u7684\u662fautomake\u7684\u9009\u9879\u3002-Wall -Werror \u610f\u5473\u7740\u5173\u95ed\u8b66\u544a\u5e76\u4f5c\u4e3a\u9519\u8bef\u8fdb\u884c\u62a5\u544a\uff1bforeign \u4e0d\u8981\u9075\u5b88GNU\u7684\u89c4\u5219\uff0cGNU\u5305\u603b\u662f\u8fd8\u5e94\u8be5\u6709\u5176\u4ed6\u7684\u6587\u4ef6 AC_PROG_CC \u4f7fconfigure\u811a\u672c\u641c\u7d22C\u7f16\u8bd1\u5668\u7136\u540e\u7528\u5176\u540d\u5b57\u5b9a\u4e49\u53d8\u91cfCC\uff0csrc/Makefile.in\u6587\u4ef6\u9700\u8981\u4f7f\u7528CC\u53d8\u91cf\u6765\u6784\u5efahello AC_CONFIG_HEADERS \u4f7fconfigure\u811a\u672c\u521b\u5efaconfig.h\u6587\u4ef6\u6536\u96c6\u5728configure.ac\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u5b8f AC_CONFIG_FILES \u58f0\u660e\u4e86configure\u6587\u4ef6\u5e94\u8be5\u4ece*.in\u6a21\u677f\u521b\u5efa\u7684\u6587\u4ef6\u5217\u8868\uff0c\u5426\u5219\u4e0d\u4f1a\u4f7f\u7528Makefile.am\u6587\u4ef6 AC_OUTPUT \u662f\u4e00\u4e2a\u5173\u95ed\u547d\u4ee4\uff0c\u662f\u771f\u6b63\u7684\u8d1f\u8d23\u751f\u6210\u6587\u4ef6\uff08\u5728AC_CONFIG_HEADERS\u548cAC_CONFIG_FILES\u4e2d\u6ce8\u518c\u7684\uff09\u7684\u811a\u672c\u90e8\u5206 src/Makefile.am bin_PROGRAMS = hello hello_SOURCES = main.c \u4e0eMakefile\u7684\u8bed\u6cd5\u4e00\u6837\u3002automake\u9a71\u52a8\u8be5\u6587\u4ef6\u65f6\u4f1a\u5c06\u6574\u4e2a\u5185\u5bb9\u590d\u5236\u5230 Makefile.in \u6587\u4ef6\uff0c\u4f46\u662f\u4f1a\u901a\u8fc7\u6784\u5efa\u89c4\u5219\u548c\u5176\u4ed6\u53d8\u91cf\u5bf9\u7279\u5b9a\u7684\u53d8\u91cf\u5b9a\u4e49\u505a\u51fa\u53cd\u5e94\u3002\u901a\u5e38\u8be5\u6587\u4ef6\u53ea\u5305\u542b\u4e0a\u8ff0\u7684\u53d8\u91cf\u5b9a\u4e49\u5217\u8868\uff0c\u4f46\u4e5f\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u7684\u53d8\u91cf\u548c\u89c4\u5219\uff0c\u53ea\u662fautomake\u4ec5\u4ec5\u4f20\u9012\u4ed6\u4eec\uff0c\u4e0d\u5bf9\u5176\u8fdb\u884c\u5904\u7406\u3002 bin\u8868\u660e\u4e86\u5b89\u88c5\u4f4d\u7f6e \u4ee5 _PROGRAMS \u7ed3\u5c3e\u7684\u7279\u6b8a\u53d8\u91cf\u6307\u5b9a\u4e86Makefile\u5e94\u8be5\u6784\u5efa\u7684\u6587\u4ef6\u7c7b\u578b\u3002Automake\u5c06\u8fd9\u4e9b\u53d8\u91cf\u79f0\u4e4b\u4e3a primary \uff0c\u5176\u4ed6\u7684primary\u4f8b\u5982 _SCRIPTS\uff0c _DATA\uff0c _LIBRARIES \u7b49\u7b49\uff0c\u5bf9\u5e94\u4e0d\u540c\u7684\u6587\u4ef6\u7c7b\u578b\u3002 bin \u610f\u5473\u7740\u7a0b\u5e8f\u5e94\u8be5\u88ab\u5b89\u88c5\u5230 ${exec_prefix}/bin \u6587\u4ef6\u5939\u4e0b hello_SOURCES \u8be5\u58f0\u660e\u7684\u526f\u4f5c\u7528\u662f\u5f53\u6267\u884c make dist \u65f6main.c\u4f1a\u6210\u4e3atar\u5305\u7684\u4e00\u90e8\u5206 \u56e0\u4e3a\u7a0b\u5e8f\u9700\u8981\u4ece\u6e90\u6587\u4ef6\u6784\u5efa\uff0c\u6240\u4ee5\u6bcf\u4e2a\u7a0b\u5e8f\u5728\u4e00\u4e2a _PROGRAMS \u53d8\u91cf\u4e2d\u5217\u51fa\u4e86 prog \uff0cautomake\u4f1a\u5bfb\u627e\u53e6\u4e00\u4e2a\u540d\u4e3a prog_SOURCES \u7684\u53d8\u91cf\u5217\u51fa\u5176\u6240\u6709\u7684\u6e90\u6587\u4ef6\u3002\u6240\u6709\u7684\u6e90\u6587\u4ef6\u4f1a\u88ab\u4e00\u8d77\u7f16\u8bd1\u548c\u94fe\u63a5\u3002 Makefil.am SUBDIRS = src dist_doc_DATA = README SUBDIRS \u5217\u51fa\u6240\u6709\u7684\u5728\u9a71\u52a8\u5f53\u524d\u76ee\u5f55\u4e4b\u524dmake\u9700\u8981\u9012\u5f52\u8fdb\u5165\u7684\u6587\u4ef6\u5939\uff0cmake install\u4e5f\u4f1a\u5148\u5b89\u88c5src/hello\uff0c\u518d\u5b89\u88c5README dist_doc_DATA _DATA primary \u5217\u51fa\u7684\u6587\u4ef6\u5217\u8868\u4e0d\u4f1a\u81ea\u52a8\u5730\u6210\u4e3atar\u5305\u7684\u4e00\u90e8\u5206\uff0c\u6240\u4ee5\u52a0\u4e0a\u4e86dist\u524d\u7f00\u6765\u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\u3002\u552f\u4e00\u91cd\u8981\u7684\u5f71\u54cd\u662f\u6b64\u884c\u5728 make install \u7684\u65f6\u5019\u4f1a\u5b89\u88c5README\u3002 note \uff1a\u6587\u4ef6\u4e2d\u6ca1\u6709\u6d89\u53ca\u5230\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u53c2\u8003autocong\u624b\u518c\u4e2d\u7684 Defining Directories \u3002 3. \u57fa\u672c\u7406\u5ff5 3.1 \u4e00\u822c\u64cd\u4f5c Automake\u8bfb\u53d6Makefile.am\u751f\u6210Makefile.in\u6587\u4ef6\u3002\u67d0\u4e9b\u5728Makefile.am\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u548c\u89c4\u5219\u6307\u5bfcAutomake\u751f\u6210\u66f4\u52a0\u4e13\u7528\u7684\u4ee3\u7801\u3002 \u5927\u90e8\u5206GNU make\u6269\u5c55\u4e0d\u80fd\u88abAutomake\u6240\u8bc6\u522b\u3002 \u5b9a\u4e49\u5728Makefile.am\u6216\u8005configure.ac\u4e2d\u7684\u53d8\u91cf\u4f1a\u8986\u76d6automake\u7684\u9ed8\u8ba4\u53d8\u91cf\u3002 automake\u5728\u68c0\u67e5\u53d8\u91cf\u5b9a\u4e49\u7684\u65f6\u5019\u4f1a\u9012\u5f52\u68c0\u67e5\u6240\u6709\u5f15\u7528\u7684\u53d8\u91cf \u6ce8\u91ca\u4ee5 ## \u5f00\u5934 3.2 \u4e25\u683c\u7a0b\u5ea6 \u867d\u7136Automake\u65e8\u5728\u4f9bGNU\u5305\u7ef4\u62a4\u4e2d\u4f7f\u7528\uff0c\u4f46\u662f\u5e76\u4e0d\u60f3\u9075\u5b88\u5176\u5168\u90e8\u7684\u89c4\u5b9a\u3002 \u6709\u4ee5\u4e0b\u4e09\u4e2a\u7b49\u7ea7\uff1a foreign - \u53ea\u68c0\u67e5\u6b63\u786e\u64cd\u4f5c\u6240\u5fc5\u987b\u7684\u4e1c\u897f\u3002 gnu - \u4f1a\u5c3d\u53ef\u80fd\u591a\u7684\u6ee1\u8db3GNU\u6807\u51c6\u3002\u9ed8\u8ba4\u9009\u9879 gnits - \u4f1a\u68c0\u67e5\u8fd8\u672a\u6210\u6587\u7684GNU\u6807\u51c6\uff0c\u6bd4GNU\u6807\u51c6\u66f4\u7ec6\u3002\u901a\u5e38\u4e0d\u4f1a\u4f7f\u7528\u8be5\u9009\u9879 3.3 \u547d\u540d\u683c\u5f0f Automake\u53d8\u91cf\u9075\u5b88 uniform naming scheme \uff0c\u4f7f\u4f55\u65f6\u7a0b\u5e8f\u88ab\u6784\u5efa\u548c\u5982\u4f55\u88ab\u5b89\u88c5\u53d8\u5f97\u5f88\u5bb9\u6613\u3002 \u4e00\u5957\u4e0d\u540c\u7684\u540d\u5b57\u7528\u6765\u51b3\u5b9a\u6784\u5efa\u5bf9\u8c61\u5e94\u8be5\u88ab\u5b89\u88c5\u5230\u54ea\u91cc\u3002\u8fd9\u4e9b\u540d\u5b57\u662fprimary\u7684\u524d\u7f00\uff0c\u5b9a\u4e49\u4e86\u54ea\u4e2a\u6807\u51c6\u6587\u4ef6\u5939\u662f\u5b89\u88c5\u76ee\u5f55\u3002\u6807\u51c6\u7684\u6587\u4ef6\u5939\u540d\u5b57\u53c2\u8003 Directory Variables in The GNU Coding Standards \u6bcf\u4e2aprimary\u90fd\u6709\u4e00\u4e2a\u989d\u5916\u7684\u4ee5 EXTRA_ \u4f5c\u4e3a\u524d\u7f00\u7684\u53d8\u91cf\u540d\u3002\u5b83\u7528\u4e8e\u5217\u51fa\u53ef\u80fd\u4f1a\u6216\u4e0d\u4f1a\u88ab\u6784\u5efa\u7684\u5bf9\u8c61\uff0c\u53d6\u51b3\u4e8econfigure\u3002 \u53ef\u4ee5\u81ea\u5b9a\u4e49\u76ee\u5f55\uff0c\u4efb\u4f55\u5728Makefile.am\u4e2d\u4ee5 dir \u7ed3\u5c3e\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u90fd\u53ef\u4ee5\u7528\u4f5c primary \u7684\u5408\u6cd5\u524d\u7f00\uff1a xmldir = $(datadir)/xml xml_DATA = file.xml \u4e0d\u662f\u5728\u6bcf\u4e2a\u6587\u4ef6\u5939\u7684\u6bcf\u4e2a\u5bf9\u8c61\u7684\u6bcf\u4e2a\u90e8\u5206\u90fd\u4f1a\u88ab\u5b89\u88c5\u3002Automake\u4f1a\u6807\u8bb0\u8fd9\u4e9b\u9519\u8bef\u3002\u8fd8\u4f1a\u68c0\u67e5\u76ee\u5f55\u540d\u7684\u62fc\u5199\u9519\u8bef\u3002 noinst_ \u524d\u7f00\u8868\u793a\u53d8\u91cf\u53ea\u6784\u5efa\u4e0d\u5b89\u88c5\u3002 check_ \u8868\u660e\u53d8\u91cf\u4e0d\u80fd\u88ab\u6784\u5efa\u76f4\u5230 make check \u547d\u4ee4\u8fd0\u884c\u3002\u4e5f\u4e0d\u53ef\u5b89\u88c5\u3002 \u6240\u6709\u7684\u53d8\u91cf\u540d\u671f\u671b \u5b57\u6bcd\u3001\u6570\u5b57\u3001@\u3001\u5176\u5b83\u7b26\u53f7\u53d8\u4e3a\u4e0b\u5212\u7ebf\uff0c\u6bd4\u5982libmum++.a\uff0c\u6d3e\u751f\u53d8\u91cf\u4f1a\u662flibmum___a_SOURCES \u8d85\u7ea7\u524d\u7f00\uff1a dist #\u6307\u660e\u54ea\u4e9b\u6587\u4ef6\u5e94\u8be5\u88ab\u53d1\u5e03 nodist nobase #\u7981\u6b62\u53bb\u6389\u8def\u5f84\u524d\u7f00\u7684\u89c4\u5219\uff0c\u4e3e\u4f8b\uff1a nobase_dist_include_HEADERS = \\ jupiter/jupiter_interface.h \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u8be5\u5934\u6587\u4ef6\u4f1a\u88ab\u5b89\u88c5\u5230 /usr(/local)/include/jupiter_interface.h \uff0c\u52a0\u4e86 nobase \u524d\u7f00\u4e4b\u540e\uff0c\u4f1a\u53d8\u4e3a /usr(/local)/include/jupiter/jupiter_interface.h \u3002 nobase_ \u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u4ee3\u66ff: nobase_dist_pkgdata_HEADERS = jupiter/jupiter.ogg jupiterdir = $(pkgdatadir)/jupiter dist_jupiter_DATA = jupiter/jupiter.ogg EXTRA_DIST\u53d8\u91cf\u5e94\u8be5\u88ab\u52a0\u5230\u53d1\u5e03\u5305\u7684\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u3002 3.4 \u547d\u4ee4\u957f\u5ea6\u9650\u5236 \u4f8b\u5982 data_DATA = file1 \u2026 fileN fileN+1 \u2026 file2N \u53ef\u4ee5\u5199\u6210 data_DATA = file1 \u2026 fileN data2dir = $(datadir) data2_DATA = fileN+1 \u2026 file2N 3.6 \u7528\u6237\u4fdd\u7559\u53d8\u91cf \u4e00\u4e9b\u4fdd\u7559\u53d8\u91cf\u4e3a\u6784\u5efa\u5305\u7684\u7528\u6237\u4f7f\u7528\uff0c\u8ba9\u4ed6\u4eec\u7684\u5de5\u4f5c\u66f4\u8f7b\u677e\u3002\u4f46\u662f\u8fd9\u4e9b\u53d8\u91cf\u4e0d\u80fd\u51fa\u73b0\u5728\u8981\u6c42\u6b63\u786e\u7f16\u8bd1\u7684\u5305\u4e2d\u3002 Automake\u5f15\u5165\u4e86\u7279\u6b8a\u7684\u9634\u5f71\u4fbf\u91cf\u4e3a\u7528\u6237\u6807\u8bb0\u53d8\u91cf\u3002\u6dfb\u52a0\u524d\u7f00 AM_ \u5230\u7528\u6237\u53d8\u91cf\u540d\u5c31\u662f\u9634\u5f71\u53d8\u91cf\u3002 4. \u4e00\u4e9b\u793a\u4f8b\u5305 \u4f7f\u7528\u4e0d\u540c\u7684\u7f16\u8bd1\u53c2\u6570\u4ece\u4e00\u4e2a\u6587\u4ef6\u6784\u5efa\u4e24\u4e2a\u9879\u76ee\u3002\u901a\u8fc7\u8bbe\u5b9a\u4e0d\u540c\u7684\u53d8\u91cf\u540d\u53ca\u5176\u6807\u5fd7\u6307\u5411\u540c\u4e00\u4e2a\u6587\u4ef6\u4fe9\u8fbe\u5230\u6548\u679c bin_PROGRAMS = true false false_SOURCES = false_LDADD = false.o true.o: true.c $(COMPILE) -DEXIT_CODE=0 -c true.c false.o: true.c $(COMPILE) -DEXIT_CODE=1 -o false.o -c true.c true_SOURCES\u6ca1\u6709\u5199\uff0cAutomake\u4f1a\u9ed8\u8ba4\u6709\u4e00\u4e2atrue.c\u6587\u4ef6\u548c\u9ed8\u8ba4\u7684\u89c4\u5219\u6765\u7f16\u8bd1true.o\u3001\u94fe\u63a5true\u3002 see Default _SOURCES bin_PROGRAMS = false true false_SOURCES = true.c false_CPPFLAGS = -DEXIT_CODE=1 true_SOURCES = true.c true_CPPFLAGS = -DEXIT_CODE=0 \u8be5\u79cd\u5199\u6cd5\u4f1a\u751f\u6210 false-true.o and true-true.o","title":"\u7b80\u4ecb"},{"location":"automake/\u7b80\u4ecb/#automake","text":"Automake\u662f\u4eceMakefile.am(\u5b9a\u4e49\u4e00\u7cfb\u5217make\u53d8\u91cf\u7684\u6587\u4ef6)\u81ea\u52a8\u751f\u6210Makefile.in\u6587\u4ef6\u7684\u5de5\u5177\u3002\u751f\u6210\u7684Makefile.in\u7b26\u5408GNU Makefile \u6807\u51c6\u3002 \u56e0\u4e3a\u4e0d\u540c\u7684\u5e73\u53f0\u9700\u8981\u4fee\u6539Makefile\uff0c\u6240\u4ee5\u7f16\u5199 configure \u811a\u672c\u81ea\u52a8\u4fee\u6539Makefile\uff0c\u518d\u6267\u884c ./configure make make install \u547d\u4ee4\u5b89\u88c5\u5305\uff0c\u5f62\u6210\u4e86GNU\u6784\u5efa\u7cfb\u7edf\u3002","title":"Automake\u4ecb\u7ecd"},{"location":"automake/\u7b80\u4ecb/#autotools","text":"Autotools \u662f\u4e3a\u5305\u521b\u5efaGNU\u6784\u5efa\u7cfb\u7edf\u7684\u5de5\u5177\uff1b Autoconf \u4e3b\u8981\u5173\u6ce8 configure \uff1b Automake \u4e3b\u8981\u5173\u6ce8 Makefile \u3002 \u5f53\u5b89\u88c5\u4e00\u4e2a\u7a0b\u5e8f\u65f6\uff0c\u5b89\u88c5\u6b65\u9aa4\u6709\u4ee5\u4e0b\u51e0\u6b65\uff1a tar -zxf xxx.tar.gz cd xxx ./configure #\u68c0\u67e5\u8981\u6c42\u7684\u73af\u5883\uff0c\u751f\u6210\u5305\u62ecMakefile\uff08s\uff09\u5728\u5185\u7684\u591a\u4e2a\u6587\u4ef6 make #\u6784\u5efa\u6240\u6709\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u751f\u6210\u6587\u4ef6 make check #\u6e90\u7801\u68c0\u67e5 su #\u5207\u6362\u5230root\u7528\u6237 make install #\u590d\u5236\u6e90\u7801\u6587\u4ef6\u5230\u76ee\u7684\u76ee\u5f55 make installcheck #\u5b89\u88c5\u540e\u68c0\u67e5 note \uff1a make uninstall \u9700\u8981\u5728\u6784\u5efa\u6811\u4e0b\u8fd0\u884c make clean \u5220\u9664make\u751f\u6210\u7684\u6587\u4ef6 make distclean \u989d\u5916\u5220\u9664 ./configure\u751f\u6210\u7684\u6587\u4ef6 make dist \u4ece\u6e90\u7801\u91cd\u65b0\u521b\u5efaxxx.tar.gz \u6709\u4e00\u4e9b\u53ef\u914d\u7f6e\u53d8\u91cf\uff0c\u53ef\u4ee5\u901a\u8fc7 ./configure --help \u67e5\u770b\u5b8c\u6574\u7248 \u5982\u679c\u60f3\u914d\u7f6e\u7cfb\u7edf\u9ed8\u8ba4\u53d8\u91cf\uff0c\u53ef\u4ee5\u4fee\u6539 /usr/local/share/config.site \u6587\u4ef6\u4e2d\u6307\u5b9a","title":"Autotools\u4ecb\u7ecd"},{"location":"automake/\u7b80\u4ecb/#223","text":"Directory variable Default value prefix /usr/local exec_prefix ${prefix} bindir ${exec_prefix}/bin libdir ${exec_prefix}/lib \u2026 includedir ${prefix}/include datarootdir ${prefix}/share datadir ${datarootdir} mandir ${datarootdir}/man infodir ${datarootdir}/info docdir ${datarootdir}/doc/${PACKAGE} \u901a\u8fc7 ./configure --help \u67e5\u770b\u5b8c\u6574\u7248\u3002 \u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u6539\u53d8\u8fd9\u4e9b\u76ee\u5f55\uff1a ./configure --prefix ~/usr \u3002","title":"2.2.3 \u6807\u51c6\u76ee\u5f55\u53d8\u91cf"},{"location":"automake/\u7b80\u4ecb/#226-vpath","text":"","title":"2.2.6 \u5e76\u884c\u6784\u5efa\u6811\uff08VPATH \u6784\u5efa\uff09"},{"location":"automake/\u7b80\u4ecb/#_1","text":"\u6e90\u7801\u6811 \uff1a\u5305\u542b\u4e86configure\u6587\u4ef6\u7684\u6240\u6709\u6e90\u6587\u4ef6 \u6784\u5efa\u6811 \uff1a\u5728\u6e90\u7801\u6811\u7684\u57fa\u7840\u4e0a\uff0c\u5305\u542b\u4e0a\u8fd0\u884cconfigure\u4e4b\u540e\u6d3e\u751f\u51fa\u6765\u7684\u6587\u4ef6\u3002\u901a\u5e38\u76ee\u5f55\u7ed3\u6784\u4e0e\u6e90\u7801\u6811\u4e00\u81f4\uff0c\u5b50\u76ee\u5f55\u662f\u88ab\u6784\u5efa\u7cfb\u7edf\u81ea\u52a8\u521b\u5efa\u51fa\u6765\u7684","title":"\u5bf9\u6bd4\u6e90\u7801\u6811\u4e0e\u6784\u5efa\u6811"},{"location":"automake/\u7b80\u4ecb/#_2","text":"\u53ef\u4ee5\u5728\u89e3\u538b\u5b8c\u538b\u7f29\u5305\u4e4b\u540e\u5728\u4efb\u610f\u4f4d\u7f6e\u65b0\u5efa\u4e00\u4e2abuild\u5b50\u6587\u4ef6\u5939\u5e76\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u6267\u884c\u540e\u7eed\u6b65\u9aa4\uff0c\u6240\u6709\u7684\u6d3e\u751f\u6587\u4ef6\u4f1a\u5b58\u653e\u5728build\u76ee\u5f55\u4e0b\uff0c\u8fd9\u6837\u7684\u6784\u5efa\u53eb\u505a parallel build \u6216\u8005 VPATH builds \u3002 \u865a\u62df\u8def\u5f84\u6784\u5efa\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u5b50\u6587\u4ef6\u5939\u8fdb\u884c\u6784\u5efa\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6784\u5efa\u540c\u4e00\u4efd\u6e90\u7801\u3002","title":"\u865a\u62df\u8def\u5f84\u6784\u5efa"},{"location":"automake/\u7b80\u4ecb/#_3","text":"","title":"\u4e00\u4e9b\u7279\u6027"},{"location":"automake/\u7b80\u4ecb/#228","text":"\u5728\u6307\u5b9a\u7684\u6784\u5efa\u5e73\u53f0\u4e0a\u7f16\u8bd1\u53ef\u4ee5\u5728\u8fd0\u884c\u5e73\u53f0\u4e0a\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6 ./configure --build\u6307\u5b9a\u6784\u5efa\u5e73\u53f0\uff0c--host\u6307\u5b9a\u8fd0\u884c\u5e73\u53f0 notes \uff1a\u5982\u679c\u9700\u8981\u6784\u5efa\u7684\u5305\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u9700\u8981\u4f7f\u7528--target\u53c2\u6570\u6307\u5b9a\u67b6\u6784","title":"2.2.8 \u4ea4\u53c9\u7f16\u8bd1"},{"location":"automake/\u7b80\u4ecb/#229","text":"\u53ef\u4ee5\u5728\u6267\u884cconfigure\u7684\u65f6\u5019\u5bf9\u5b89\u88c5\u7684\u7a0b\u5e8f\u91cd\u547d\u540d\uff0c\u6bd4\u5982\u5b89\u88c5 tar \u53d8\u4e3a gtar \u4ee5\u4e0b\u4e09\u4e2a\u53c2\u6570\u53ef\u4ee5\u6ee1\u8db3\u8be5\u9700\u6c42\uff1a --program-prefix #\u7ed9\u7a0b\u5e8f\u540d\u5b57\u6dfb\u52a0\u524d\u7f00 --program-suffix #\u7ed9\u7a0b\u5e8f\u540d\u5b57\u6dfb\u52a0\u540e\u7f00 --program-transform-name #\u91cd\u547d\u540d\u7a0b\u5e8f eg. ./configure --program-prefix tea","title":"2.2.9 \u91cd\u547d\u540d\u7a0b\u5e8f"},{"location":"automake/\u7b80\u4ecb/#2210","text":"make DESTDIR=$HOME/inst install \u6b64\u4e3e\u4f1a\u5c06\u7a0b\u5e8f\u5b89\u88c5\u5728 ~/inst \u6587\u4ef6\u5939\u4e0b\uff0c\u6587\u4ef6\u5939\u4e0b\u5305\u542b\u4e86\u7a0b\u5e8f\u7684\u5b89\u88c5\u7ed3\u6784 \u5b89\u88c5\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\u6240\u793a\uff1a \u6253\u5305\uff1a cd ~/inst find . -type f -print ../files.lst tar zcvf ~/amhello-1.0-i686.tar.gz `cat ../files.lst` \u5982\u6b64\u4e00\u6765\uff0c\u76f4\u63a5\u89e3\u538b\u8fd9\u4e2a\u538b\u7f29\u5305\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u5b8c\u6210amhello\u7684\u5b89\u88c5\u3002","title":"2.2.10 \u6307\u5b9a\u76ee\u7684\u6587\u4ef6\u5939\u6784\u5efa\u4e8c\u8fdb\u5236\u6587\u4ef6"},{"location":"automake/\u7b80\u4ecb/#2211","text":"\u4f7f\u7528 make distcheck \u6765\u4fdd\u8bc1\u5305\u62e5\u6709\u6240\u9700\u8981\u7684\u6784\u5efa\u6b65\u9aa4\u5e76\u4e14\u4e0d\u4f1a\u62a5\u9519 \u5c1d\u8bd5\u5b8c\u6574\u7684\u6253\u5305\u3001\u89e3\u5305\u3001\u8fd0\u884cmake\u3001make check\u3001make install\u3001make installcheck\u3001make dist \u6d4b\u8bd5\u53ea\u8bfb\u6e90\u7801\u6811\u7684 VPATH Builds \u4fdd\u8bc1make clean\u3001make distclean\u3001make uninstall\u4e0d\u4f1a\u9057\u6f0f\u4efb\u4f55\u6587\u4ef6 \u68c0\u67e5 DESTDIR \u5b89\u88c5\u5de5\u4f5c","title":"2.2.11 \u51c6\u5907\u53d1\u5e03"},{"location":"automake/\u7b80\u4ecb/#_4","text":"autoreconfig \u662f\u4e00\u4e2a\u6309\u7167\u6b63\u786e\u6267\u884cautoconf\u3001automake\u548c\u4e00\u5806\u5176\u5b83\u547d\u4ee4\u7684\u811a\u672c\uff0c\u7528\u4e8e\u751f\u6210\u6784\u5efa\u7cfb\u7edf\u3002 \u7f16\u5199configure.ac\u3001Makefile.am\u3001main.c\u3001README\u6587\u4ef6\uff0c\u6267\u884c autoreconfig --install \u5b9e\u4f8b\u5316\u4e00\u4e2a\u6784\u5efa\u7cfb\u7edf autoconf\u8d1f\u8d23\u4ececonfigure.ac\u751f\u6210configure\u6587\u4ef6 automake\u8d1f\u8d23\u4eceMakefile.am\u548cconfigure.ac\u751f\u6210Makefile.in\u6587\u4ef6 note \uff1a\u53ea\u6709\u6784\u5efa\u7cfb\u7edf\u6ca1\u6709\u65f6\u624d\u6267\u884c autoreconfig \uff0c\u5982\u679c\u4fee\u6539\u4e86 configure.ac \u6216\u8005 Makefile.am \uff0c\u6267\u884cmake\u65f6\u4f1a\u81ea\u52a8\u91cd\u65b0\u751f\u6210\u76f8\u5173\u6587\u4ef6\u3002 configure.ac \u7684\u8bed\u6cd5\u53c2\u8003Autoconf\u624b\u518c\u3002","title":"\u751f\u6210\u6784\u5efa\u7cfb\u7edf"},{"location":"automake/\u7b80\u4ecb/#24","text":"\u5728 /usr/share/doc/automake-1.13.4 \u76ee\u5f55\u4e0b\uff0c\u4f1a\u6709\u4e00\u4e2aamhello\u7684\u8f6f\u4ef6\u5305\uff0c\u4ee5\u5b83\u4f5c\u4e3a\u4f8b\u5b50\u8bb2\u89e3\uff1a amhello-1.0 \u251c\u2500\u2500 aclocal.m4 \u251c\u2500\u2500 config.h.in \u251c\u2500\u2500 configure \u251c\u2500\u2500 configure.ac \u251c\u2500\u2500 depcomp \u251c\u2500\u2500 install-sh \u251c\u2500\u2500 Makefile.am \u251c\u2500\u2500 Makefile.in \u251c\u2500\u2500 missing \u251c\u2500\u2500 README \u2514\u2500\u2500 src \u251c\u2500\u2500 main.c \u251c\u2500\u2500 Makefile.am \u2514\u2500\u2500 Makefile.in","title":"2.4 \u5c0f\u7a0b\u5e8f\u6587\u4ef6\u89e3\u8bfb"},{"location":"automake/\u7b80\u4ecb/#configureac","text":"AC_INIT([amhello], [1.0], [bug-automake@gnu.org]) AM_INIT_AUTOMAKE([-Wall -Werror foreign]) AC_PROG_CC AC_CONFIG_HEADERS([config.h]) AC_CONFIG_FILES([ Makefile src/Makefile ]) AC_OUTPUT AC_ \u5f00\u5934\u7684\u662fautocofig\u7684\u5b8f\uff1b AM_ \u5f00\u5934\u7684\u662fautomake\u7684\u5b8f\u3002 AC_INIT \u5b9a\u4e49\u4e86\u5305\u540d\u3001\u7248\u672c\u3001\u8054\u7cfb\u5730\u5740 AM_INIT_AUTOMAKE \u62ec\u53f7\u4e2d\u7684\u662fautomake\u7684\u9009\u9879\u3002-Wall -Werror \u610f\u5473\u7740\u5173\u95ed\u8b66\u544a\u5e76\u4f5c\u4e3a\u9519\u8bef\u8fdb\u884c\u62a5\u544a\uff1bforeign \u4e0d\u8981\u9075\u5b88GNU\u7684\u89c4\u5219\uff0cGNU\u5305\u603b\u662f\u8fd8\u5e94\u8be5\u6709\u5176\u4ed6\u7684\u6587\u4ef6 AC_PROG_CC \u4f7fconfigure\u811a\u672c\u641c\u7d22C\u7f16\u8bd1\u5668\u7136\u540e\u7528\u5176\u540d\u5b57\u5b9a\u4e49\u53d8\u91cfCC\uff0csrc/Makefile.in\u6587\u4ef6\u9700\u8981\u4f7f\u7528CC\u53d8\u91cf\u6765\u6784\u5efahello AC_CONFIG_HEADERS \u4f7fconfigure\u811a\u672c\u521b\u5efaconfig.h\u6587\u4ef6\u6536\u96c6\u5728configure.ac\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u5b8f AC_CONFIG_FILES \u58f0\u660e\u4e86configure\u6587\u4ef6\u5e94\u8be5\u4ece*.in\u6a21\u677f\u521b\u5efa\u7684\u6587\u4ef6\u5217\u8868\uff0c\u5426\u5219\u4e0d\u4f1a\u4f7f\u7528Makefile.am\u6587\u4ef6 AC_OUTPUT \u662f\u4e00\u4e2a\u5173\u95ed\u547d\u4ee4\uff0c\u662f\u771f\u6b63\u7684\u8d1f\u8d23\u751f\u6210\u6587\u4ef6\uff08\u5728AC_CONFIG_HEADERS\u548cAC_CONFIG_FILES\u4e2d\u6ce8\u518c\u7684\uff09\u7684\u811a\u672c\u90e8\u5206","title":"configure.ac"},{"location":"automake/\u7b80\u4ecb/#srcmakefileam","text":"bin_PROGRAMS = hello hello_SOURCES = main.c \u4e0eMakefile\u7684\u8bed\u6cd5\u4e00\u6837\u3002automake\u9a71\u52a8\u8be5\u6587\u4ef6\u65f6\u4f1a\u5c06\u6574\u4e2a\u5185\u5bb9\u590d\u5236\u5230 Makefile.in \u6587\u4ef6\uff0c\u4f46\u662f\u4f1a\u901a\u8fc7\u6784\u5efa\u89c4\u5219\u548c\u5176\u4ed6\u53d8\u91cf\u5bf9\u7279\u5b9a\u7684\u53d8\u91cf\u5b9a\u4e49\u505a\u51fa\u53cd\u5e94\u3002\u901a\u5e38\u8be5\u6587\u4ef6\u53ea\u5305\u542b\u4e0a\u8ff0\u7684\u53d8\u91cf\u5b9a\u4e49\u5217\u8868\uff0c\u4f46\u4e5f\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u7684\u53d8\u91cf\u548c\u89c4\u5219\uff0c\u53ea\u662fautomake\u4ec5\u4ec5\u4f20\u9012\u4ed6\u4eec\uff0c\u4e0d\u5bf9\u5176\u8fdb\u884c\u5904\u7406\u3002 bin\u8868\u660e\u4e86\u5b89\u88c5\u4f4d\u7f6e \u4ee5 _PROGRAMS \u7ed3\u5c3e\u7684\u7279\u6b8a\u53d8\u91cf\u6307\u5b9a\u4e86Makefile\u5e94\u8be5\u6784\u5efa\u7684\u6587\u4ef6\u7c7b\u578b\u3002Automake\u5c06\u8fd9\u4e9b\u53d8\u91cf\u79f0\u4e4b\u4e3a primary \uff0c\u5176\u4ed6\u7684primary\u4f8b\u5982 _SCRIPTS\uff0c _DATA\uff0c _LIBRARIES \u7b49\u7b49\uff0c\u5bf9\u5e94\u4e0d\u540c\u7684\u6587\u4ef6\u7c7b\u578b\u3002 bin \u610f\u5473\u7740\u7a0b\u5e8f\u5e94\u8be5\u88ab\u5b89\u88c5\u5230 ${exec_prefix}/bin \u6587\u4ef6\u5939\u4e0b hello_SOURCES \u8be5\u58f0\u660e\u7684\u526f\u4f5c\u7528\u662f\u5f53\u6267\u884c make dist \u65f6main.c\u4f1a\u6210\u4e3atar\u5305\u7684\u4e00\u90e8\u5206 \u56e0\u4e3a\u7a0b\u5e8f\u9700\u8981\u4ece\u6e90\u6587\u4ef6\u6784\u5efa\uff0c\u6240\u4ee5\u6bcf\u4e2a\u7a0b\u5e8f\u5728\u4e00\u4e2a _PROGRAMS \u53d8\u91cf\u4e2d\u5217\u51fa\u4e86 prog \uff0cautomake\u4f1a\u5bfb\u627e\u53e6\u4e00\u4e2a\u540d\u4e3a prog_SOURCES \u7684\u53d8\u91cf\u5217\u51fa\u5176\u6240\u6709\u7684\u6e90\u6587\u4ef6\u3002\u6240\u6709\u7684\u6e90\u6587\u4ef6\u4f1a\u88ab\u4e00\u8d77\u7f16\u8bd1\u548c\u94fe\u63a5\u3002","title":"src/Makefile.am"},{"location":"automake/\u7b80\u4ecb/#makefilam","text":"SUBDIRS = src dist_doc_DATA = README SUBDIRS \u5217\u51fa\u6240\u6709\u7684\u5728\u9a71\u52a8\u5f53\u524d\u76ee\u5f55\u4e4b\u524dmake\u9700\u8981\u9012\u5f52\u8fdb\u5165\u7684\u6587\u4ef6\u5939\uff0cmake install\u4e5f\u4f1a\u5148\u5b89\u88c5src/hello\uff0c\u518d\u5b89\u88c5README dist_doc_DATA _DATA primary \u5217\u51fa\u7684\u6587\u4ef6\u5217\u8868\u4e0d\u4f1a\u81ea\u52a8\u5730\u6210\u4e3atar\u5305\u7684\u4e00\u90e8\u5206\uff0c\u6240\u4ee5\u52a0\u4e0a\u4e86dist\u524d\u7f00\u6765\u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\u3002\u552f\u4e00\u91cd\u8981\u7684\u5f71\u54cd\u662f\u6b64\u884c\u5728 make install \u7684\u65f6\u5019\u4f1a\u5b89\u88c5README\u3002 note \uff1a\u6587\u4ef6\u4e2d\u6ca1\u6709\u6d89\u53ca\u5230\u5b89\u88c5\u8def\u5f84\uff0c\u8bf7\u53c2\u8003autocong\u624b\u518c\u4e2d\u7684 Defining Directories \u3002","title":"Makefil.am"},{"location":"automake/\u7b80\u4ecb/#3","text":"","title":"3. \u57fa\u672c\u7406\u5ff5"},{"location":"automake/\u7b80\u4ecb/#31","text":"Automake\u8bfb\u53d6Makefile.am\u751f\u6210Makefile.in\u6587\u4ef6\u3002\u67d0\u4e9b\u5728Makefile.am\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u548c\u89c4\u5219\u6307\u5bfcAutomake\u751f\u6210\u66f4\u52a0\u4e13\u7528\u7684\u4ee3\u7801\u3002 \u5927\u90e8\u5206GNU make\u6269\u5c55\u4e0d\u80fd\u88abAutomake\u6240\u8bc6\u522b\u3002 \u5b9a\u4e49\u5728Makefile.am\u6216\u8005configure.ac\u4e2d\u7684\u53d8\u91cf\u4f1a\u8986\u76d6automake\u7684\u9ed8\u8ba4\u53d8\u91cf\u3002 automake\u5728\u68c0\u67e5\u53d8\u91cf\u5b9a\u4e49\u7684\u65f6\u5019\u4f1a\u9012\u5f52\u68c0\u67e5\u6240\u6709\u5f15\u7528\u7684\u53d8\u91cf \u6ce8\u91ca\u4ee5 ## \u5f00\u5934","title":"3.1 \u4e00\u822c\u64cd\u4f5c"},{"location":"automake/\u7b80\u4ecb/#32","text":"\u867d\u7136Automake\u65e8\u5728\u4f9bGNU\u5305\u7ef4\u62a4\u4e2d\u4f7f\u7528\uff0c\u4f46\u662f\u5e76\u4e0d\u60f3\u9075\u5b88\u5176\u5168\u90e8\u7684\u89c4\u5b9a\u3002 \u6709\u4ee5\u4e0b\u4e09\u4e2a\u7b49\u7ea7\uff1a foreign - \u53ea\u68c0\u67e5\u6b63\u786e\u64cd\u4f5c\u6240\u5fc5\u987b\u7684\u4e1c\u897f\u3002 gnu - \u4f1a\u5c3d\u53ef\u80fd\u591a\u7684\u6ee1\u8db3GNU\u6807\u51c6\u3002\u9ed8\u8ba4\u9009\u9879 gnits - \u4f1a\u68c0\u67e5\u8fd8\u672a\u6210\u6587\u7684GNU\u6807\u51c6\uff0c\u6bd4GNU\u6807\u51c6\u66f4\u7ec6\u3002\u901a\u5e38\u4e0d\u4f1a\u4f7f\u7528\u8be5\u9009\u9879","title":"3.2 \u4e25\u683c\u7a0b\u5ea6"},{"location":"automake/\u7b80\u4ecb/#33","text":"Automake\u53d8\u91cf\u9075\u5b88 uniform naming scheme \uff0c\u4f7f\u4f55\u65f6\u7a0b\u5e8f\u88ab\u6784\u5efa\u548c\u5982\u4f55\u88ab\u5b89\u88c5\u53d8\u5f97\u5f88\u5bb9\u6613\u3002 \u4e00\u5957\u4e0d\u540c\u7684\u540d\u5b57\u7528\u6765\u51b3\u5b9a\u6784\u5efa\u5bf9\u8c61\u5e94\u8be5\u88ab\u5b89\u88c5\u5230\u54ea\u91cc\u3002\u8fd9\u4e9b\u540d\u5b57\u662fprimary\u7684\u524d\u7f00\uff0c\u5b9a\u4e49\u4e86\u54ea\u4e2a\u6807\u51c6\u6587\u4ef6\u5939\u662f\u5b89\u88c5\u76ee\u5f55\u3002\u6807\u51c6\u7684\u6587\u4ef6\u5939\u540d\u5b57\u53c2\u8003 Directory Variables in The GNU Coding Standards \u6bcf\u4e2aprimary\u90fd\u6709\u4e00\u4e2a\u989d\u5916\u7684\u4ee5 EXTRA_ \u4f5c\u4e3a\u524d\u7f00\u7684\u53d8\u91cf\u540d\u3002\u5b83\u7528\u4e8e\u5217\u51fa\u53ef\u80fd\u4f1a\u6216\u4e0d\u4f1a\u88ab\u6784\u5efa\u7684\u5bf9\u8c61\uff0c\u53d6\u51b3\u4e8econfigure\u3002 \u53ef\u4ee5\u81ea\u5b9a\u4e49\u76ee\u5f55\uff0c\u4efb\u4f55\u5728Makefile.am\u4e2d\u4ee5 dir \u7ed3\u5c3e\u7684\u81ea\u5b9a\u4e49\u53d8\u91cf\u90fd\u53ef\u4ee5\u7528\u4f5c primary \u7684\u5408\u6cd5\u524d\u7f00\uff1a xmldir = $(datadir)/xml xml_DATA = file.xml \u4e0d\u662f\u5728\u6bcf\u4e2a\u6587\u4ef6\u5939\u7684\u6bcf\u4e2a\u5bf9\u8c61\u7684\u6bcf\u4e2a\u90e8\u5206\u90fd\u4f1a\u88ab\u5b89\u88c5\u3002Automake\u4f1a\u6807\u8bb0\u8fd9\u4e9b\u9519\u8bef\u3002\u8fd8\u4f1a\u68c0\u67e5\u76ee\u5f55\u540d\u7684\u62fc\u5199\u9519\u8bef\u3002 noinst_ \u524d\u7f00\u8868\u793a\u53d8\u91cf\u53ea\u6784\u5efa\u4e0d\u5b89\u88c5\u3002 check_ \u8868\u660e\u53d8\u91cf\u4e0d\u80fd\u88ab\u6784\u5efa\u76f4\u5230 make check \u547d\u4ee4\u8fd0\u884c\u3002\u4e5f\u4e0d\u53ef\u5b89\u88c5\u3002 \u6240\u6709\u7684\u53d8\u91cf\u540d\u671f\u671b \u5b57\u6bcd\u3001\u6570\u5b57\u3001@\u3001\u5176\u5b83\u7b26\u53f7\u53d8\u4e3a\u4e0b\u5212\u7ebf\uff0c\u6bd4\u5982libmum++.a\uff0c\u6d3e\u751f\u53d8\u91cf\u4f1a\u662flibmum___a_SOURCES \u8d85\u7ea7\u524d\u7f00\uff1a dist #\u6307\u660e\u54ea\u4e9b\u6587\u4ef6\u5e94\u8be5\u88ab\u53d1\u5e03 nodist nobase #\u7981\u6b62\u53bb\u6389\u8def\u5f84\u524d\u7f00\u7684\u89c4\u5219\uff0c\u4e3e\u4f8b\uff1a nobase_dist_include_HEADERS = \\ jupiter/jupiter_interface.h \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u8be5\u5934\u6587\u4ef6\u4f1a\u88ab\u5b89\u88c5\u5230 /usr(/local)/include/jupiter_interface.h \uff0c\u52a0\u4e86 nobase \u524d\u7f00\u4e4b\u540e\uff0c\u4f1a\u53d8\u4e3a /usr(/local)/include/jupiter/jupiter_interface.h \u3002 nobase_ \u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u4ee3\u66ff: nobase_dist_pkgdata_HEADERS = jupiter/jupiter.ogg jupiterdir = $(pkgdatadir)/jupiter dist_jupiter_DATA = jupiter/jupiter.ogg EXTRA_DIST\u53d8\u91cf\u5e94\u8be5\u88ab\u52a0\u5230\u53d1\u5e03\u5305\u7684\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u3002","title":"3.3 \u547d\u540d\u683c\u5f0f"},{"location":"automake/\u7b80\u4ecb/#34","text":"\u4f8b\u5982 data_DATA = file1 \u2026 fileN fileN+1 \u2026 file2N \u53ef\u4ee5\u5199\u6210 data_DATA = file1 \u2026 fileN data2dir = $(datadir) data2_DATA = fileN+1 \u2026 file2N","title":"3.4 \u547d\u4ee4\u957f\u5ea6\u9650\u5236"},{"location":"automake/\u7b80\u4ecb/#36","text":"\u4e00\u4e9b\u4fdd\u7559\u53d8\u91cf\u4e3a\u6784\u5efa\u5305\u7684\u7528\u6237\u4f7f\u7528\uff0c\u8ba9\u4ed6\u4eec\u7684\u5de5\u4f5c\u66f4\u8f7b\u677e\u3002\u4f46\u662f\u8fd9\u4e9b\u53d8\u91cf\u4e0d\u80fd\u51fa\u73b0\u5728\u8981\u6c42\u6b63\u786e\u7f16\u8bd1\u7684\u5305\u4e2d\u3002 Automake\u5f15\u5165\u4e86\u7279\u6b8a\u7684\u9634\u5f71\u4fbf\u91cf\u4e3a\u7528\u6237\u6807\u8bb0\u53d8\u91cf\u3002\u6dfb\u52a0\u524d\u7f00 AM_ \u5230\u7528\u6237\u53d8\u91cf\u540d\u5c31\u662f\u9634\u5f71\u53d8\u91cf\u3002","title":"3.6 \u7528\u6237\u4fdd\u7559\u53d8\u91cf"},{"location":"automake/\u7b80\u4ecb/#4","text":"\u4f7f\u7528\u4e0d\u540c\u7684\u7f16\u8bd1\u53c2\u6570\u4ece\u4e00\u4e2a\u6587\u4ef6\u6784\u5efa\u4e24\u4e2a\u9879\u76ee\u3002\u901a\u8fc7\u8bbe\u5b9a\u4e0d\u540c\u7684\u53d8\u91cf\u540d\u53ca\u5176\u6807\u5fd7\u6307\u5411\u540c\u4e00\u4e2a\u6587\u4ef6\u4fe9\u8fbe\u5230\u6548\u679c bin_PROGRAMS = true false false_SOURCES = false_LDADD = false.o true.o: true.c $(COMPILE) -DEXIT_CODE=0 -c true.c false.o: true.c $(COMPILE) -DEXIT_CODE=1 -o false.o -c true.c true_SOURCES\u6ca1\u6709\u5199\uff0cAutomake\u4f1a\u9ed8\u8ba4\u6709\u4e00\u4e2atrue.c\u6587\u4ef6\u548c\u9ed8\u8ba4\u7684\u89c4\u5219\u6765\u7f16\u8bd1true.o\u3001\u94fe\u63a5true\u3002 see Default _SOURCES bin_PROGRAMS = false true false_SOURCES = true.c false_CPPFLAGS = -DEXIT_CODE=1 true_SOURCES = true.c true_CPPFLAGS = -DEXIT_CODE=0 \u8be5\u79cd\u5199\u6cd5\u4f1a\u751f\u6210 false-true.o and true-true.o","title":"4. \u4e00\u4e9b\u793a\u4f8b\u5305"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/","text":"3.2 shell\u547d\u4ee4 3.2.4 \u590d\u5408\u547d\u4ee4 3.2.4.1 \u5faa\u73af\u7ed3\u6784 note \uff1a\u4e0d\u8bba ; \u51fa\u73b0\u5728\u547d\u4ee4\u8bed\u6cd5\u7684\u4f55\u5904\uff0c\u90fd\u53ef\u80fd\u4f1a\u88ab\u4e00\u884c\u6216\u591a\u884c\u4ee3\u66ff\u3002 - until - while - for for name [ [in [words \u2026] ] ; ] do commands; done \u5c55\u5f00 words \uff0c\u5e76\u5bf9\u7ed3\u679c\u4e2d\u7684\u6bcf\u4e2a\u6210\u5458\u6267\u884c\u4e00\u6b21\u547d\u4ee4\u3002\u5982\u679c in words \u6ca1\u6709\u586b\u5199\uff0c\u4e3a\u6bcf\u4e2a\u4f4d\u7f6e\u53c2\u6570\u6267\u884c\u4e00\u6b21\u547d\u4ee4\uff0c\u5c31\u50cf $@ \u88ab\u6307\u5b9a\u4e86 see Special Parameters \u3002 \u53e6\u5916\u4e00\u79cd\u683c\u5f0f\uff1a??? for (( expr1 ; expr2 ; expr3 )) ; do commands ; done 3.2.4.2 \u6761\u4ef6\u7ed3\u6784 if if test-commands; then consequent-commands; [elif more-test-commands; then more-consequents;] [else alternate-consequents;] fi case case word in [ [(] pattern [| pattern]\u2026) command-list ;;]\u2026 esac \u6267\u884c pattern \u5339\u914d\u5230 word \u7684\u547d\u4ee4\u7ec4\u3002 patterns \u4e0e\u76f8\u5173\u7684 command-list \u4e00\u8d77\u88ab\u79f0\u4f5c clause \u3002 \u6bcf\u4e2aclause\u5fc5\u987b\u4ee5\u4e09\u79cd\u7b26\u53f7\u7ed3\u675f\uff1a ;; , ; , ;; \u3002\u4f8b\uff1a echo -n Enter the name of an animal: read ANIMAL echo -n The $ANIMAL has case $ANIMAL in horse | dog | cat) echo -n four ;; man | kangaroo ) echo -n two ;; *) echo -n an unknown number of ;; esac echo legs. \u5982\u679c\u4f7f\u7528 ;; \u7ed3\u675f\uff0c\u90a3\u4e48\u5339\u914d\u5230\u7b2c\u4e00\u4e2aclause\u540e\u5373\u505c\u6b62\uff0c\u4e0d\u4f1a\u5411\u540e\u7ee7\u7eed\u5339\u914d\u3002\u4f7f\u7528 ;\uff1b \u53ef\u8fbe\u5230\u76f8\u53cd\u7684\u6548\u679c\u3002\u4f7f\u7528 ; \u5219\u4f1a\u5bfc\u81f4\u7ee7\u7eed\u6267\u884c\u4e0b\u4e00\u4e2aclause\u3002\u5982\u679c\u6ca1\u6709\u5339\u914d\u5219\u8fd4\u56de0\uff0c\u5426\u5219\u8fd4\u56de\u6267\u884c\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u3002 - select - ((...)) - [[...]] 3.2.4.3 \u7ec4\u547d\u4ee4 Bash\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u6765\u5c06\u4e00\u7ec4\u547d\u4ee4\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u6765\u6267\u884c\u3002\u5f53\u547d\u4ee4\u88ab\u7ec4\u6240\u5305\u62ec\u65f6\uff0c\u91cd\u5b9a\u5411\u53ef\u80fd\u4f1a\u5e94\u7528\u5230\u6574\u4e2a\u547d\u4ee4\u5217\u8868\u4e2d\u3002 ()\uff1a (list) \uff0c\u4ee5\u5c0f\u62ec\u53f7\u7684\u65b9\u5f0f\u5305\u56f4\u547d\u4ee4\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b50shell\u73af\u5883\uff0c\u6bcf\u4e2a\u547d\u4ee4\u4f1a\u5728\u5b50shell\u4e2d\u6267\u884c\u3002 {}\uff1a {list} \uff0c\u4ee5\u82b1\u62ec\u53f7\u7684\u65b9\u5f0f\u5305\u56f4\u547d\u4ee4\u4f1a\u5728\u5f53\u524dshell\u7684\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c list \u3002 list \u4e2d\u7684\u547d\u4ee4\u9700\u8981\u4ee5\u6362\u884c\u6216\u8005\u5206\u53f7\u9694\u5f00\u3002 3.3 shell \u51fd\u6570 \u8bed\u6cd5\uff1a name () compound-command [ redirections ] or function name [()] compound-command [ redirections ] \u51fd\u6570\u4f53 compound-command \uff0c\u53c2\u89c1 Compound Commands \u4f8b\uff1a as_fn_append () { eval $[1]=\\$$[1]\\$[2]; } 3.4 3.4.2 \u7279\u6b8a\u53c2\u6570 \u4e0d\u5141\u8bb8\u8d4b\u503c\u3002\u4f7f\u7528 $ \u5f15\u7528\u3002 *\uff1a\u4ece\u7b2c\u4e00\u4e2a\u5f00\u59cb\u5c55\u5f00\u6210\u4f4d\u7f6e\u53c2\u6570\u3002 @\uff1a\u4ece\u7b2c\u4e00\u4e2a\u5f00\u59cb\u5c55\u5f00\u6210\u4f4d\u7f6e\u53c2\u6570\u3002 #\uff1a\u53c2\u6570\u6570\u91cf\u3002 ?\uff1a\u6700\u8fd1\u7684\u7ba1\u9053\u6267\u884c\u7684\u9000\u51fa\u72b6\u6001\u3002 -\uff1a\u8c03\u7528\u65f6\u6307\u5b9a\u7684\u5f53\u524d\u9009\u9879\u6807\u5fd7\u3002 $\uff1ashell\u8fdb\u7a0bID\u3002\u5728\u4e00\u4e2a () \u5b50shell\u4e2d\uff0c\u6269\u5c55\u4e3a\u8c03\u7528shell\uff0c\u800c\u4e0d\u662f\u5b50shell\u3002 !\uff1a\u6700\u8fd1\u522b\u653e\u5728\u540e\u53f0\u8fd0\u884c\u7684job\u7684ID\uff0c\u4e0d\u8bba\u662f\u5f02\u6b65\u547d\u4ee4\u6216\u8005\u4f7f\u7528\u7684 bg \u3002 0\uff1ashell\u7684\u540d\u5b57\u6216\u8005shell\u811a\u672c\u7684\u540d\u5b57\u3002 _\uff1a\u5728shell\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u88ab\u8bbe\u7f6e\u4e3a\u7edd\u5bf9\u8def\u5f84\u7528\u4e8e\uff1a\u5f53\u88ab\u4f20\u9012\u7ed9\u73af\u5883\u6216\u8005\u53c2\u6570\u5217\u8868\u4e2d\u65f6\uff0c\u8c03\u7528\u6b63\u5728\u88ab\u6267\u884c\u7684shell\u6216shell\u811a\u672c\u3002 3.5 shell\u6269\u5c55 3.5.2 shell\u53c2\u6570\u6269\u5c55 \u7279\u6b8a\u60c5\u51b5\uff1a\u5982\u679c parameter \u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f ! \uff0c\u90a3\u4e48\u5b83\u4e0d\u662f nameref \uff0c\u800c\u662f\u53d8\u91cf\u7ea7\u522b\u7684\u6307\u4ee4\u3002\u8be5\u53d8\u91cf\u7684\u503c\u7531\u5176\u4f59\u53c2\u6570\u7ec4\u6210\u3002\u79f0\u4f5c indirect expansion \u3002 parameter\uff1a\u53d8\u91cf\u540d\u3002 * \u4e0e @ \u4f1a\u4f5c\u7528\u5230\u6bcf\u4e2a\u6210\u5458\u4e0a\u9762\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u53c2\u8003 see Filename Expansion \u3002 \u5305\u62ec\u5192\u53f7\u5219\u4f1a\u6d4b\u8bd5\u53c2\u6570\u7684\u5b58\u5728\u4e14\u503c\u975e\u7a7a\uff0c\u7701\u7565\u5192\u53f7\u53ea\u6d4b\u8bd5\u53c2\u6570\u662f\u5426\u5b58\u5728\u3002 ${parameter:-word} - \u5982\u679c parameter \u672a\u8bbe\u7f6e\u6216\u4e3anull\uff0c\u66ff\u6362 word \u7684\u6269\u5c55\u3002\u5426\u5219\u66ff\u6362\u53c2\u6570\u7684\u503c\u3002 ${parameter:=word} - \u5982\u679c parameter \u672a\u8bbe\u7f6e\u6216\u4e3anull\uff0c word \u7684\u6269\u5c55\u88ab\u5206\u914d\u7ed9\u53c2\u6570\u3002\u7136\u540e parameter \u7684\u503c\u88ab\u66ff\u6362\u3002\u4f4d\u7f6e\u53c2\u6570\u4e0e\u7279\u6b8a\u53c2\u6570\u4e0d\u80fd\u4f7f\u7528\u8fd9\u79cd\u5f62\u5f0f\u3002 ${parameter:?word} - \u5982\u679c parameter \u672a\u8bbe\u7f6e\u6216\u4e3anull\uff0c word \u7684\u6269\u5c55\uff08\u6216\u8005\u662f word \u4e0d\u5b58\u5728\u53d1\u51fa\u7684\u4fe1\u606f\uff09\u88ab\u5199\u5165\u6807\u51c6\u9519\u8bef\u548cshell\u4e2d\uff0c\u5982\u679c\u4e0d\u662f\u4ea4\u4e92\u5f0f\u7684shell\uff0c\u5219\u9000\u51fa\u3002\u5426\u5219\u66ff\u6362\u53c2\u6570\u7684\u503c\u3002 ${parameter:+word} - \u5982\u679c parameter \u672a\u8bbe\u7f6e\u6216\u4e3anull\uff0c\u6ca1\u6709\u4e1c\u897f\u88ab\u66ff\u6362\u3002\u5426\u5219 word \u7684\u6269\u5c55\u88ab\u66ff\u6362\u3002 ${with_fontconfig:-no} ${#parameter} - parameter \u7684\u957f\u5ea6\u3002\u5982\u679c\u662f\u6570\u7ec4\uff1a\u4e0b\u6807\u4e3a\u6570\u5b57\u65f6\uff0c\u957f\u5ea6\u4e3a1\uff1b\u4e0b\u6807\u662f * or @ \u65f6\uff0c\u957f\u5ea6\u662f\u5143\u7d20\u7684\u6570\u91cf\u3002 ${parameter#word} word \u662f\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5339\u914d\u7684\u662f parameter \u7684\u5934\u90e8\uff0c\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u4ece parameter \u4e2d\u5220\u9664\u3002\u6700\u77ed\u5339\u914d\u89c4\u5219\u3002 ${parameter##word} - \u6700\u957f\u5339\u914d\u89c4\u5219\u3002 ${parameter%word} - \u5339\u914d\u7684\u662f parameter \u7684\u5c3e\u90e8\uff0c\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u4ece parameter \u4e2d\u5220\u9664\u3002\u6700\u77ed\u5339\u914d\u89c4\u5219\u3002 ${parameter%%word} - \u6700\u957f\u5339\u914d\u89c4\u5219\u3002 ${parameter/pattern/string} - \u5c06 pattern \u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u7528 string \u4ee3\u66ff\u3002\u6700\u957f\u5339\u914d\u89c4\u5219\u3002 \u5982\u679c pattern \u4ee5 / \u5f00\u59cb\uff0c\u6240\u6709\u7684\u5339\u914d\u90fd\u4f1a\u88ab\u66ff\u6362\uff1b\u6b63\u5e38\u60c5\u51b5\u4e0b\u53ea\u6709\u7b2c\u4e00\u4e2a\u4f1a\u88ab\u66ff\u6362\u3002 \u4ee5 # \u5f00\u59cb\uff0c\u5339\u914d\u5934\u90e8 \u4ee5 % \u5f00\u59cb\uff0c\u5339\u914d\u5c3e\u90e8 \u5982\u679c string \u662f\u7a7a\u7684\uff0c\u5339\u914d\u5230\u7684\u4f1a\u88ab\u5220\u6389 [root@vdsm-dev home]# echo ${str} abcdefgaabdd [root@vdsm-dev home]# echo ${str/a/ss} ssbcdefgaabdd [root@vdsm-dev home]# echo ${str//a/ss} ssbcdefgssssbdd [root@vdsm-dev home]# echo ${str//a/} bcdefgbdd ${parameter^pattern} - \u5339\u914d\u5b57\u6bcd\u5b57\u7b26\uff0c pattern \u5e94\u8be5\u53ea\u5339\u914d\u4e00\u4e2a\u5b57\u7b26\u3002\u5982\u679c pattern \u4e3a\u7a7a\uff0c\u5339\u914d\u6240\u6709\u7684\u5b57\u7b26\u3002\u5c0f\u5199\u8f6c\u5927\u5199\uff0c\u5339\u914d\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002 ${parameter^^pattern} - \u5339\u914d\u6240\u6709\u7684\u5b57\u7b26\u3002 ${parameter,pattern} - \u5927\u5199\u8f6c\u5c0f\u5199\uff0c\u5339\u914d\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002 ${parameter,,pattern} - \u5339\u914d\u6240\u6709\u7684\u5b57\u7b26\u3002 [root@vdsm-dev home]# echo ${str} abcdefgaabdd [root@vdsm-dev home]# echo ${str^a} Abcdefgaabdd [root@vdsm-dev home]# echo ${str^^} ABCDEFGAABDD 3.5.8 \u6587\u4ef6\u540d\u6269\u5c55 3.5.8.1 \u6b63\u5219\u5339\u914d \u53cd\u659c\u6760\u7528\u4e8e\u8f6c\u4e49\u4e0b\u9762\u8fd9\u4e9b\u7279\u6b8a\u5b57\u7b26\uff0c\u6765\u4f7f\u4ed6\u4eec\u53d8\u6210\u5b57\u9762\u4e0a\u7684\u610f\u601d\u3002 \u5339\u914d\u4efb\u4f55\u5b57\u7b26\u4e32\uff0c\u5305\u62ec\u7a7a\u4e32\u3002shell\u9009\u9879 globstar \u53ef\u7528\u65f6\uff0c * \u5728\u4e00\u4e2a\u6587\u4ef6\u540d\u6269\u5c55\u5185\u5bb9\u4e2d\u4f7f\u7528\uff0c ** \u4f5c\u4e3a\u4e00\u4e2a\u5355\u4e00\u7684\u6b63\u5219\u4f1a\u5339\u914d\u6240\u6709\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u53ca\u5176\u5b50\u6587\u4ef6\u5939\u3002\u5982\u679c\u540e\u8ddf / \uff0c ** \u53ea\u5339\u914d\u6587\u4ef6\u5939\u548c\u5b50\u6587\u4ef6\u5939\u3002 ? - \u5339\u914d\u4efb\u4f55\u5355\u4e2a\u5b57\u7b26\u3002 [...] - \u5339\u914d\u4efb\u4f55\u5c01\u88c5\u7684\u5b57\u7b26\u4e32\u3002\u4ee5 ! \u6216 ^ \u5f00\u5934\u65f6\uff0c\u8868\u793a\u4e0d\u5339\u914d\u3002 - \u8868\u793a\u8303\u56f4\u8868\u8fbe\u5f0f\u3002 ?(pattern-list) - 0\u6b21\u62161\u6b21\u5339\u914d\u3002 *(pattern-list) - 0\u6b21\u6216\u591a\u6b21\u5339\u914d\u3002 +(pattern-list) - 1\u6b21\u6216\u591a\u6b21\u5339\u914d\u3002 @(pattern-list) - 1\u6b21\u5339\u914d\u3002 !(pattern-list) - \u4e0d\u5339\u914d\u3002","title":"3.\u57fa\u672cshell\u529f\u80fd"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#32-shell","text":"","title":"3.2 shell\u547d\u4ee4"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#324","text":"","title":"3.2.4 \u590d\u5408\u547d\u4ee4"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#3241","text":"note \uff1a\u4e0d\u8bba ; \u51fa\u73b0\u5728\u547d\u4ee4\u8bed\u6cd5\u7684\u4f55\u5904\uff0c\u90fd\u53ef\u80fd\u4f1a\u88ab\u4e00\u884c\u6216\u591a\u884c\u4ee3\u66ff\u3002 - until - while - for for name [ [in [words \u2026] ] ; ] do commands; done \u5c55\u5f00 words \uff0c\u5e76\u5bf9\u7ed3\u679c\u4e2d\u7684\u6bcf\u4e2a\u6210\u5458\u6267\u884c\u4e00\u6b21\u547d\u4ee4\u3002\u5982\u679c in words \u6ca1\u6709\u586b\u5199\uff0c\u4e3a\u6bcf\u4e2a\u4f4d\u7f6e\u53c2\u6570\u6267\u884c\u4e00\u6b21\u547d\u4ee4\uff0c\u5c31\u50cf $@ \u88ab\u6307\u5b9a\u4e86 see Special Parameters \u3002 \u53e6\u5916\u4e00\u79cd\u683c\u5f0f\uff1a??? for (( expr1 ; expr2 ; expr3 )) ; do commands ; done","title":"3.2.4.1 \u5faa\u73af\u7ed3\u6784"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#3242","text":"if if test-commands; then consequent-commands; [elif more-test-commands; then more-consequents;] [else alternate-consequents;] fi case case word in [ [(] pattern [| pattern]\u2026) command-list ;;]\u2026 esac \u6267\u884c pattern \u5339\u914d\u5230 word \u7684\u547d\u4ee4\u7ec4\u3002 patterns \u4e0e\u76f8\u5173\u7684 command-list \u4e00\u8d77\u88ab\u79f0\u4f5c clause \u3002 \u6bcf\u4e2aclause\u5fc5\u987b\u4ee5\u4e09\u79cd\u7b26\u53f7\u7ed3\u675f\uff1a ;; , ; , ;; \u3002\u4f8b\uff1a echo -n Enter the name of an animal: read ANIMAL echo -n The $ANIMAL has case $ANIMAL in horse | dog | cat) echo -n four ;; man | kangaroo ) echo -n two ;; *) echo -n an unknown number of ;; esac echo legs. \u5982\u679c\u4f7f\u7528 ;; \u7ed3\u675f\uff0c\u90a3\u4e48\u5339\u914d\u5230\u7b2c\u4e00\u4e2aclause\u540e\u5373\u505c\u6b62\uff0c\u4e0d\u4f1a\u5411\u540e\u7ee7\u7eed\u5339\u914d\u3002\u4f7f\u7528 ;\uff1b \u53ef\u8fbe\u5230\u76f8\u53cd\u7684\u6548\u679c\u3002\u4f7f\u7528 ; \u5219\u4f1a\u5bfc\u81f4\u7ee7\u7eed\u6267\u884c\u4e0b\u4e00\u4e2aclause\u3002\u5982\u679c\u6ca1\u6709\u5339\u914d\u5219\u8fd4\u56de0\uff0c\u5426\u5219\u8fd4\u56de\u6267\u884c\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u3002 - select - ((...)) - [[...]]","title":"3.2.4.2 \u6761\u4ef6\u7ed3\u6784"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#3243","text":"Bash\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u5f0f\u6765\u5c06\u4e00\u7ec4\u547d\u4ee4\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u6765\u6267\u884c\u3002\u5f53\u547d\u4ee4\u88ab\u7ec4\u6240\u5305\u62ec\u65f6\uff0c\u91cd\u5b9a\u5411\u53ef\u80fd\u4f1a\u5e94\u7528\u5230\u6574\u4e2a\u547d\u4ee4\u5217\u8868\u4e2d\u3002 ()\uff1a (list) \uff0c\u4ee5\u5c0f\u62ec\u53f7\u7684\u65b9\u5f0f\u5305\u56f4\u547d\u4ee4\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b50shell\u73af\u5883\uff0c\u6bcf\u4e2a\u547d\u4ee4\u4f1a\u5728\u5b50shell\u4e2d\u6267\u884c\u3002 {}\uff1a {list} \uff0c\u4ee5\u82b1\u62ec\u53f7\u7684\u65b9\u5f0f\u5305\u56f4\u547d\u4ee4\u4f1a\u5728\u5f53\u524dshell\u7684\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c list \u3002 list \u4e2d\u7684\u547d\u4ee4\u9700\u8981\u4ee5\u6362\u884c\u6216\u8005\u5206\u53f7\u9694\u5f00\u3002","title":"3.2.4.3 \u7ec4\u547d\u4ee4"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#33-shell","text":"\u8bed\u6cd5\uff1a name () compound-command [ redirections ] or function name [()] compound-command [ redirections ] \u51fd\u6570\u4f53 compound-command \uff0c\u53c2\u89c1 Compound Commands \u4f8b\uff1a as_fn_append () { eval $[1]=\\$$[1]\\$[2]; }","title":"3.3 shell \u51fd\u6570"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#34","text":"","title":"3.4"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#342","text":"\u4e0d\u5141\u8bb8\u8d4b\u503c\u3002\u4f7f\u7528 $ \u5f15\u7528\u3002 *\uff1a\u4ece\u7b2c\u4e00\u4e2a\u5f00\u59cb\u5c55\u5f00\u6210\u4f4d\u7f6e\u53c2\u6570\u3002 @\uff1a\u4ece\u7b2c\u4e00\u4e2a\u5f00\u59cb\u5c55\u5f00\u6210\u4f4d\u7f6e\u53c2\u6570\u3002 #\uff1a\u53c2\u6570\u6570\u91cf\u3002 ?\uff1a\u6700\u8fd1\u7684\u7ba1\u9053\u6267\u884c\u7684\u9000\u51fa\u72b6\u6001\u3002 -\uff1a\u8c03\u7528\u65f6\u6307\u5b9a\u7684\u5f53\u524d\u9009\u9879\u6807\u5fd7\u3002 $\uff1ashell\u8fdb\u7a0bID\u3002\u5728\u4e00\u4e2a () \u5b50shell\u4e2d\uff0c\u6269\u5c55\u4e3a\u8c03\u7528shell\uff0c\u800c\u4e0d\u662f\u5b50shell\u3002 !\uff1a\u6700\u8fd1\u522b\u653e\u5728\u540e\u53f0\u8fd0\u884c\u7684job\u7684ID\uff0c\u4e0d\u8bba\u662f\u5f02\u6b65\u547d\u4ee4\u6216\u8005\u4f7f\u7528\u7684 bg \u3002 0\uff1ashell\u7684\u540d\u5b57\u6216\u8005shell\u811a\u672c\u7684\u540d\u5b57\u3002 _\uff1a\u5728shell\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u88ab\u8bbe\u7f6e\u4e3a\u7edd\u5bf9\u8def\u5f84\u7528\u4e8e\uff1a\u5f53\u88ab\u4f20\u9012\u7ed9\u73af\u5883\u6216\u8005\u53c2\u6570\u5217\u8868\u4e2d\u65f6\uff0c\u8c03\u7528\u6b63\u5728\u88ab\u6267\u884c\u7684shell\u6216shell\u811a\u672c\u3002","title":"3.4.2 \u7279\u6b8a\u53c2\u6570"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#35-shell","text":"","title":"3.5 shell\u6269\u5c55"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#352-shell","text":"\u7279\u6b8a\u60c5\u51b5\uff1a\u5982\u679c parameter \u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f ! \uff0c\u90a3\u4e48\u5b83\u4e0d\u662f nameref \uff0c\u800c\u662f\u53d8\u91cf\u7ea7\u522b\u7684\u6307\u4ee4\u3002\u8be5\u53d8\u91cf\u7684\u503c\u7531\u5176\u4f59\u53c2\u6570\u7ec4\u6210\u3002\u79f0\u4f5c indirect expansion \u3002 parameter\uff1a\u53d8\u91cf\u540d\u3002 * \u4e0e @ \u4f1a\u4f5c\u7528\u5230\u6bcf\u4e2a\u6210\u5458\u4e0a\u9762\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u53c2\u8003 see Filename Expansion \u3002 \u5305\u62ec\u5192\u53f7\u5219\u4f1a\u6d4b\u8bd5\u53c2\u6570\u7684\u5b58\u5728\u4e14\u503c\u975e\u7a7a\uff0c\u7701\u7565\u5192\u53f7\u53ea\u6d4b\u8bd5\u53c2\u6570\u662f\u5426\u5b58\u5728\u3002 ${parameter:-word} - \u5982\u679c parameter \u672a\u8bbe\u7f6e\u6216\u4e3anull\uff0c\u66ff\u6362 word \u7684\u6269\u5c55\u3002\u5426\u5219\u66ff\u6362\u53c2\u6570\u7684\u503c\u3002 ${parameter:=word} - \u5982\u679c parameter \u672a\u8bbe\u7f6e\u6216\u4e3anull\uff0c word \u7684\u6269\u5c55\u88ab\u5206\u914d\u7ed9\u53c2\u6570\u3002\u7136\u540e parameter \u7684\u503c\u88ab\u66ff\u6362\u3002\u4f4d\u7f6e\u53c2\u6570\u4e0e\u7279\u6b8a\u53c2\u6570\u4e0d\u80fd\u4f7f\u7528\u8fd9\u79cd\u5f62\u5f0f\u3002 ${parameter:?word} - \u5982\u679c parameter \u672a\u8bbe\u7f6e\u6216\u4e3anull\uff0c word \u7684\u6269\u5c55\uff08\u6216\u8005\u662f word \u4e0d\u5b58\u5728\u53d1\u51fa\u7684\u4fe1\u606f\uff09\u88ab\u5199\u5165\u6807\u51c6\u9519\u8bef\u548cshell\u4e2d\uff0c\u5982\u679c\u4e0d\u662f\u4ea4\u4e92\u5f0f\u7684shell\uff0c\u5219\u9000\u51fa\u3002\u5426\u5219\u66ff\u6362\u53c2\u6570\u7684\u503c\u3002 ${parameter:+word} - \u5982\u679c parameter \u672a\u8bbe\u7f6e\u6216\u4e3anull\uff0c\u6ca1\u6709\u4e1c\u897f\u88ab\u66ff\u6362\u3002\u5426\u5219 word \u7684\u6269\u5c55\u88ab\u66ff\u6362\u3002 ${with_fontconfig:-no} ${#parameter} - parameter \u7684\u957f\u5ea6\u3002\u5982\u679c\u662f\u6570\u7ec4\uff1a\u4e0b\u6807\u4e3a\u6570\u5b57\u65f6\uff0c\u957f\u5ea6\u4e3a1\uff1b\u4e0b\u6807\u662f * or @ \u65f6\uff0c\u957f\u5ea6\u662f\u5143\u7d20\u7684\u6570\u91cf\u3002 ${parameter#word} word \u662f\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5339\u914d\u7684\u662f parameter \u7684\u5934\u90e8\uff0c\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u4ece parameter \u4e2d\u5220\u9664\u3002\u6700\u77ed\u5339\u914d\u89c4\u5219\u3002 ${parameter##word} - \u6700\u957f\u5339\u914d\u89c4\u5219\u3002 ${parameter%word} - \u5339\u914d\u7684\u662f parameter \u7684\u5c3e\u90e8\uff0c\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u4ece parameter \u4e2d\u5220\u9664\u3002\u6700\u77ed\u5339\u914d\u89c4\u5219\u3002 ${parameter%%word} - \u6700\u957f\u5339\u914d\u89c4\u5219\u3002 ${parameter/pattern/string} - \u5c06 pattern \u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u7528 string \u4ee3\u66ff\u3002\u6700\u957f\u5339\u914d\u89c4\u5219\u3002 \u5982\u679c pattern \u4ee5 / \u5f00\u59cb\uff0c\u6240\u6709\u7684\u5339\u914d\u90fd\u4f1a\u88ab\u66ff\u6362\uff1b\u6b63\u5e38\u60c5\u51b5\u4e0b\u53ea\u6709\u7b2c\u4e00\u4e2a\u4f1a\u88ab\u66ff\u6362\u3002 \u4ee5 # \u5f00\u59cb\uff0c\u5339\u914d\u5934\u90e8 \u4ee5 % \u5f00\u59cb\uff0c\u5339\u914d\u5c3e\u90e8 \u5982\u679c string \u662f\u7a7a\u7684\uff0c\u5339\u914d\u5230\u7684\u4f1a\u88ab\u5220\u6389 [root@vdsm-dev home]# echo ${str} abcdefgaabdd [root@vdsm-dev home]# echo ${str/a/ss} ssbcdefgaabdd [root@vdsm-dev home]# echo ${str//a/ss} ssbcdefgssssbdd [root@vdsm-dev home]# echo ${str//a/} bcdefgbdd ${parameter^pattern} - \u5339\u914d\u5b57\u6bcd\u5b57\u7b26\uff0c pattern \u5e94\u8be5\u53ea\u5339\u914d\u4e00\u4e2a\u5b57\u7b26\u3002\u5982\u679c pattern \u4e3a\u7a7a\uff0c\u5339\u914d\u6240\u6709\u7684\u5b57\u7b26\u3002\u5c0f\u5199\u8f6c\u5927\u5199\uff0c\u5339\u914d\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002 ${parameter^^pattern} - \u5339\u914d\u6240\u6709\u7684\u5b57\u7b26\u3002 ${parameter,pattern} - \u5927\u5199\u8f6c\u5c0f\u5199\uff0c\u5339\u914d\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002 ${parameter,,pattern} - \u5339\u914d\u6240\u6709\u7684\u5b57\u7b26\u3002 [root@vdsm-dev home]# echo ${str} abcdefgaabdd [root@vdsm-dev home]# echo ${str^a} Abcdefgaabdd [root@vdsm-dev home]# echo ${str^^} ABCDEFGAABDD","title":"3.5.2 shell\u53c2\u6570\u6269\u5c55"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#358","text":"","title":"3.5.8 \u6587\u4ef6\u540d\u6269\u5c55"},{"location":"bash/3.\u57fa\u672cshell\u529f\u80fd/#3581","text":"\u53cd\u659c\u6760\u7528\u4e8e\u8f6c\u4e49\u4e0b\u9762\u8fd9\u4e9b\u7279\u6b8a\u5b57\u7b26\uff0c\u6765\u4f7f\u4ed6\u4eec\u53d8\u6210\u5b57\u9762\u4e0a\u7684\u610f\u601d\u3002 \u5339\u914d\u4efb\u4f55\u5b57\u7b26\u4e32\uff0c\u5305\u62ec\u7a7a\u4e32\u3002shell\u9009\u9879 globstar \u53ef\u7528\u65f6\uff0c * \u5728\u4e00\u4e2a\u6587\u4ef6\u540d\u6269\u5c55\u5185\u5bb9\u4e2d\u4f7f\u7528\uff0c ** \u4f5c\u4e3a\u4e00\u4e2a\u5355\u4e00\u7684\u6b63\u5219\u4f1a\u5339\u914d\u6240\u6709\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u53ca\u5176\u5b50\u6587\u4ef6\u5939\u3002\u5982\u679c\u540e\u8ddf / \uff0c ** \u53ea\u5339\u914d\u6587\u4ef6\u5939\u548c\u5b50\u6587\u4ef6\u5939\u3002 ? - \u5339\u914d\u4efb\u4f55\u5355\u4e2a\u5b57\u7b26\u3002 [...] - \u5339\u914d\u4efb\u4f55\u5c01\u88c5\u7684\u5b57\u7b26\u4e32\u3002\u4ee5 ! \u6216 ^ \u5f00\u5934\u65f6\uff0c\u8868\u793a\u4e0d\u5339\u914d\u3002 - \u8868\u793a\u8303\u56f4\u8868\u8fbe\u5f0f\u3002 ?(pattern-list) - 0\u6b21\u62161\u6b21\u5339\u914d\u3002 *(pattern-list) - 0\u6b21\u6216\u591a\u6b21\u5339\u914d\u3002 +(pattern-list) - 1\u6b21\u6216\u591a\u6b21\u5339\u914d\u3002 @(pattern-list) - 1\u6b21\u5339\u914d\u3002 !(pattern-list) - \u4e0d\u5339\u914d\u3002","title":"3.5.8.1 \u6b63\u5219\u5339\u914d"},{"location":"bash/4.shell\u5185\u7f6e\u547d\u4ee4/","text":"4.1 Bourne Shell : [arguments] - \u4ec0\u4e48\u90fd\u4e0d\u505a\uff0c\u9664\u4e86\u6269\u5c55 arguments \u548c\u91cd\u5b9a\u5411\u3002\u8fd4\u56de\u72b6\u6001\u662f0\u3002 . filename [arguments] - \u5728\u5f53\u524d\u7684shell\u73af\u5883\u8bfb\u53d6\u548c\u6267\u884c filename \u4e2d\u7684\u547d\u4ee4 eval [arguments] - \u53c2\u6570\u8fde\u63a5\u5230\u4e00\u8d77\u6210\u4e3a\u4e00\u4e2a\u547d\u4ee4\uff0c\u7136\u540e\u8bfb\u53d6\u548c\u6267\u884c\uff0c\u9000\u51fa\u72b6\u6001\u662feval\u7684\u9000\u51fa\u72b6\u6001\u3002 exec [-cl] [-a name] [command [arguments]] - \u5982\u679c\u63d0\u4f9b\u4e86 command \uff0c\u4f1a\u4ee3\u66ff\u5f53\u524d\u7684shell\uff0c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u8fdb\u7a0b\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a command \uff0c\u53ef\u80fd\u4f1a\u7528\u5230\u91cd\u5b9a\u5411\u6765\u5f71\u54cd\u5f53\u524d\u7684shell\u73af\u5883\u3002 if [ $# -gt 0 ];then exec 0 $1; #\u5c06\u6587\u4ef6\u7ed1\u5b9a\u5230\u6807\u51c6\u8f93\u5165\uff080-\u6807\u51c6\u8f93\u5165 1-\u6807\u51c6\u8f93\u51fa 2-\u6807\u51c6\u9519\u8bef\uff09\uff0c\u9ed8\u8ba4\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8f93\u5165\u7684\u6587\u4ef6\uff1b fi while read line do echo $line; done 0; #\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u6570\u636e exec 0 - #\u91cd\u65b0\u7ed1\u5b9a\u6807\u51c6\u8f93\u5165\u5230\u547d\u4ee4\u884c export [-fn] [-p] [name[=value]] - \u6807\u8bb0\u6bcf\u4e2a name \u4f20\u9012\u7ed9\u5b50\u7ebf\u7a0b\u3002","title":"4.shell\u5185\u7f6e\u547d\u4ee4"},{"location":"bash/4.shell\u5185\u7f6e\u547d\u4ee4/#41-bourne-shell","text":": [arguments] - \u4ec0\u4e48\u90fd\u4e0d\u505a\uff0c\u9664\u4e86\u6269\u5c55 arguments \u548c\u91cd\u5b9a\u5411\u3002\u8fd4\u56de\u72b6\u6001\u662f0\u3002 . filename [arguments] - \u5728\u5f53\u524d\u7684shell\u73af\u5883\u8bfb\u53d6\u548c\u6267\u884c filename \u4e2d\u7684\u547d\u4ee4 eval [arguments] - \u53c2\u6570\u8fde\u63a5\u5230\u4e00\u8d77\u6210\u4e3a\u4e00\u4e2a\u547d\u4ee4\uff0c\u7136\u540e\u8bfb\u53d6\u548c\u6267\u884c\uff0c\u9000\u51fa\u72b6\u6001\u662feval\u7684\u9000\u51fa\u72b6\u6001\u3002 exec [-cl] [-a name] [command [arguments]] - \u5982\u679c\u63d0\u4f9b\u4e86 command \uff0c\u4f1a\u4ee3\u66ff\u5f53\u524d\u7684shell\uff0c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u8fdb\u7a0b\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a command \uff0c\u53ef\u80fd\u4f1a\u7528\u5230\u91cd\u5b9a\u5411\u6765\u5f71\u54cd\u5f53\u524d\u7684shell\u73af\u5883\u3002 if [ $# -gt 0 ];then exec 0 $1; #\u5c06\u6587\u4ef6\u7ed1\u5b9a\u5230\u6807\u51c6\u8f93\u5165\uff080-\u6807\u51c6\u8f93\u5165 1-\u6807\u51c6\u8f93\u51fa 2-\u6807\u51c6\u9519\u8bef\uff09\uff0c\u9ed8\u8ba4\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8f93\u5165\u7684\u6587\u4ef6\uff1b fi while read line do echo $line; done 0; #\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u6570\u636e exec 0 - #\u91cd\u65b0\u7ed1\u5b9a\u6807\u51c6\u8f93\u5165\u5230\u547d\u4ee4\u884c export [-fn] [-p] [name[=value]] - \u6807\u8bb0\u6bcf\u4e2a name \u4f20\u9012\u7ed9\u5b50\u7ebf\u7a0b\u3002","title":"4.1 Bourne Shell"},{"location":"c and c++/\u52a8\u6001\u7f16\u8bd1/","text":"\u52a8\u6001\u5e93\u6587\u4ef6\u653e\u5728 /usr/lib64 \u4e0b\u9762\u3002 \u94fe\u63a5\u7684\u65f6\u5019\u8981\u6390\u5934\u53bb\u5c3e\u3002\u6bd4\u5982\u94fe\u63a5 libkmip.so \u6587\u4ef6\uff1a gcc test.c -o test -lkmip -ldl -lssl -lcrypto \u5b89\u88c5\u52a8\u6001\u5e93\u6587\u4ef6\u7684\u65f6\u5019\u8981\u901a\u8fc7rpm\u7684\u65b9\u5f0f\u5b89\u88c5\uff0c\u5728secretclient\u9879\u76ee\u4e2d\u6dfb\u52a0\u76f8\u5e94\u7684\u5e93\u6587\u4ef6\u548c\u4fee\u6539\u6587\u4ef6\uff0c\u6253\u5305\u4e3arpm\u540e\u518d\u5728\u9700\u8981\u5e93\u6587\u4ef6\u7684\u4e3b\u673a\u4e0a\u9762\u5347\u7ea7\u3002","title":"\u52a8\u6001\u7f16\u8bd1"},{"location":"c and c++/\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4/","text":"#include time.h time_t start, end;//\u8ba1\u7b97\u7684\u662f1970\u5e741\u67081\u53f7\u4ee5\u6765\u7684 \u79d2\u6570 , time_t = long start= time(NULL); \u2026 end = time(NULL); difftime(end, start);//\u8fd4\u56de\u65f6\u95f4\u95f4\u9694\uff0c\u8fd4\u56dedouble\u7c7b\u578b clock_t start, end;//\u8fd4\u56de\u4ece\u201c\u5f00\u542f\u8fd9\u4e2a\u7a0b\u5e8f\u8fdb\u7a0b\u201d\u5230\u201c\u7a0b\u5e8f\u4e2d\u8c03\u7528clock()\u51fd\u6570\u201d\u65f6\u4e4b\u95f4\u7684CPU\u65f6\u949f\u8ba1\u65f6\u5355\u5143\uff08clock tick\uff09\u6570\u3002 //1\u5355\u5143 = 1 ms,\u8981\u5728\u540c\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\u4f7f\u7528\u624d\u53ef\u8ba1\u7b97\u51fa\u65f6\u95f4\u5dee, clock_t = unsigned long start = clock(); \u2026 end = clock(); difftime(end, start);","title":"\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4"},{"location":"command/linux\u6302\u8f7dwindows\u5171\u4eab\u6587\u4ef6\u5939/","text":"mount.cifs //172.16.2.27/mkdocs blog/ -o user=phy,pass=KVM.123456","title":"linux\u6302\u8f7dwindows\u5171\u4eab\u6587\u4ef6\u5939"},{"location":"command/ssh\u514d\u5bc6\u767b\u5f55/","text":"\u547d\u4ee4\u6dfb\u52a0\u516c\u94a5 ssh-copy-id -i ~/.ssh/id_rsa.pub root@xxx \u6dfb\u52a0\u5b8c\u6210\u5373\u53ef\u514d\u5bc6\u767b\u5f55 root@xxx","title":"ssh\u514d\u5bc6\u767b\u5f55"},{"location":"command/tar\u547d\u4ee4\u6253\u5305\u53bb\u6389\u8def\u5f84\u524d\u7f00/","text":"\u6240\u6709\u7684\u6587\u4ef6\u90fd\u5728\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\u8fdb\u884c\u6253\u5305\uff1a tar -cvf tar-name -C dir files \u6587\u4ef6\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u5939\u4e0b\uff0c\u5c31\u9700\u8981\u4f7f\u7528 -r \u9009\u9879\u6765\u628a\u6587\u4ef6\u9010\u4e2a\u6dfb\u52a0\u5230\u538b\u7f29\u5305\u4e2d\uff08\u6ca1\u6709\u538b\u7f29\u5305\u7684\u8bdd\u4f1a\u521b\u5efa\uff09\uff1a tar -rf tar-name -C dir-1 dir-1/file(s)-1 ... tar -rf tar-name -C dir1-N dir-N/file(s)-N","title":"tar\u547d\u4ee4\u6253\u5305\u53bb\u6389\u8def\u5f84\u524d\u7f00"},{"location":"command/wget\u7528\u6cd5/","text":"\u5b83\u7684\u7528\u6cd5\u5f88\u7b80\u5355\uff0cwget\u4f7f\u7528\u683c\u5f0f\u5982\u4e0b\uff1a wget [\u9009\u9879] [\u4e0b\u8f7d\u5730\u5740] \u9009\u9879\uff1a -b\uff1a\u540e\u53f0\u4e0b\u8f7d\uff0cWget\u9ed8\u8ba4\u7684\u662f\u628a\u6587\u4ef6\u4e0b\u8f7d\u5230\u5f53\u524d\u76ee\u5f55\u3002 -O\uff1a\u5c06\u6587\u4ef6\u4e0b\u8f7d\u5230\u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u3002 -P\uff1a\u4fdd\u5b58\u6587\u4ef6\u4e4b\u524d\u5148\u521b\u5efa\u6307\u5b9a\u540d\u79f0\u7684\u76ee\u5f55\u3002 -t\uff1a\u5c1d\u8bd5\u8fde\u63a5\u6b21\u6570\uff0c\u5f53Wget\u65e0\u6cd5\u4e0e\u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\u65f6\uff0c\u5c1d\u8bd5\u8fde\u63a5\u591a\u5c11\u6b21\u3002 -c\uff1a\u65ad\u70b9\u7eed\u4f20\uff0c\u5982\u679c\u4e0b\u8f7d\u4e2d\u65ad\uff0c\u90a3\u4e48\u8fde\u63a5\u6062\u590d\u65f6\u4f1a\u4ece\u4e0a\u6b21\u65ad\u70b9\u5f00\u59cb\u4e0b\u8f7d\u3002 -r\uff1a\u4f7f\u7528\u9012\u5f52\u4e0b\u8f7d","title":"wget\u7528\u6cd5"},{"location":"command/\u663e\u793a\u6587\u4ef6\u5939\u5927\u5c0f/","text":"du -h --max-depth=1 . \u663e\u793a\u7279\u5b9a\u6587\u4ef6\u5939\u7684\u5927\u5c0f\uff1a du -sh xxx","title":"\u663e\u793a\u6587\u4ef6\u5939\u5927\u5c0f"},{"location":"command/\u66f4\u65b0\u3001\u7981\u7528yum\u4ed3\u5e93\u3001\u53ea\u4e0b\u8f7drpm/","text":"\u66f4\u65b0 createrepo --update-md-path=/home/pub/vms-sec/rpm/ /home/pub/vms-sec/rpm/ \u7981\u7528\u3001\u5f00\u542f yum-config-manager --disable base epel epel/x86_64/metalink extras updates yum-config-manager --enable base epel epel/x86_64/metalink extras updates \u53ea\u4e0b\u8f7d\u4e0d\u5b89\u88c5rpm yum install --downloadonly --downloaddir=/tmp package-name yumdownloader --resolve --downloadonly --downloaddir=/tmp package-name","title":"\u66f4\u65b0\u3001\u7981\u7528yum\u4ed3\u5e93\u3001\u53ea\u4e0b\u8f7drpm"},{"location":"command/\u6dfb\u52a0\u516c\u94a5/","text":"\u5728\u76ee\u6807\u4e3b\u673a\u4e0a\u9762\u5220\u9664\u6e90\u4e3b\u673a\u7684\u516c\u94a5\uff1a vi authorized_keys \u5728\u6e90\u4e3b\u673a\u4e0a\u9762\u53d1\u9001\u516c\u94a5\u5230\u76ee\u6807\u4e3b\u673a\uff1a ssh-copy-id -i ~/.ssh/id_rsa.pub username @ target-ip","title":"\u6dfb\u52a0\u516c\u94a5"},{"location":"datastruct/\u4e8c\u53c9\u6811/","text":"\u4f7f\u7528\u4e8c\u53c9\u6811\u5b9e\u73b0\u6709\u5e8f\u7b26\u53f7\u8868\u3002 \u5b58\u50a8\u7ed3\u6784 /** * \u4e8c\u53c9\u67e5\u627e\u6811\u6709\u5e8f\u7b26\u53f7\u8868\uff0c\u63d2\u5165\u548c\u67e5\u627e\u90fd\u5f88\u5feb */ public class BST K extends Comparable K , V { private Node root; // \u6839\u8282\u70b9 private int base; void setRoot(Node node){ this.root = node; } private class Node { private K k; private V v; private Node left, right; private int N; // \u8be5\u5b50\u6811\u7684\u8282\u70b9\u6570 private Node(K k, V v, int N) { this.k = k; this.v = v; this.N = N; } } \u5de5\u5177\u51fd\u6570 public int size(){ return size(root); } private int size(Node x){ if (null == x){ return 0; } return x.N; } boolean isEmpty(){ return root == null; } get\u65b9\u6cd5 //\u8fed\u4ee3\u5b9e\u73b0 V get(K k) { /*Node tmp = root; while (tmp != null){ int re = k.compareTo(tmp.k); if (re == 0){ return tmp.v; }else if (re 0){ tmp = tmp.right; }else { tmp = tmp.left; } } return null;*/ //\u9012\u5f52\u5b9e\u73b0 return get(root, k); } //\u9012\u5f52\u5b9e\u73b0 private V get(Node x, K k){ if (null == x){ return null; } int re = k.compareTo(x.k); if (re == 0){ return x.v; }else if (re 0){ return get(x.right, k); }else { return get(x.left, k); } } \u63d2\u5165\u65b9\u6cd5 //\u8fed\u4ee3\u5b9e\u73b0 void put(K k, V v) { /* if (null == root){ root = new Node(k, v, 1); return; } Node tmp = root; while (true){ int re = k.compareTo(tmp.k); if (re == 0){ // \u7b49\u4e8e\u5f53\u524d\u8282\u70b9 tmp.v = v; break; }else if(re 0){ // \u5927\u4e8e tmp.N++; if (tmp.right == null){ tmp.right = new Node(k, v, 1); break; }else { tmp = tmp.right; } }else { // \u5c0f\u4e8e tmp.N++; if (tmp.left == null){ tmp.left = new Node(k, v, 1); break; }else { tmp = tmp.left; } } }*/ //\u9012\u5f52\u5b9e\u73b0 root = put(root, k, v); } //\u9012\u5f52\u5b9e\u73b0 Node put(Node h, K k, V v){ if (h == null){ return new Node(k, v, 1); } int re = k.compareTo(h.k); if (re 0){ h.left = put2(h.left, k, v); }else if (re 0){ h.right = put2(h.right, k, v); }else { h.v = v; return h; } //\u522b\u5fd8\u4e86\u8c03\u6574\u5927\u5c0f\uff01\uff01\uff01 h.N = size(h.left) + size(h.right) + 1; return h; } \u5220\u9664\u65b9\u6cd5 void delete(K k) { root = delete(root, k); } private Node delete(Node x, K k){ if (x == null) { return null; } int re = k.compareTo(x.k); if (re 0 ){ //forward and rebuild right-tree x.right = delete(x.right, k); }else if (re 0){ //forward and rebuild left-tree x.left = delete(x.left, k); }else { //x = deleteNode if (x.left == null){ //only right-tree exist or null return x.right; }else if (x.right == null){ //only left-tree exist or null return x.left; }else { //both left and right tree Node t = x; x = min(t.right); x.right = deleteMin(t.right); x.left = t.left; } } x.N = size(x.left) + size(x.right) + 1; return x; } void deleteMin() { if(isEmpty()){ //\u9632\u6b62\u7a7a\u6307\u9488\u5f02\u5e38 return; } root = deleteMin(root); } private Node deleteMin(Node x){ if (x.left == null){ //\u8fd4\u56de\u5230\u4e0a\u4e00\u7ea7\u7ed3\u70b9 return x.right; //\u6ce8\u610f\u6b64\u5904\u8fd4\u56de\u7684\u662f\u53f3\u5b50\u7ed3\u70b9 } x.left = deleteMin(x.left); //\u66f4\u65b0\u5de6\u7ed3\u70b9 x.N = size(x.left) + size(x.right) + 1; return x; } void deleteMax() { if (isEmpty()){ return; } root = deleteMax(root); } private Node deleteMax(Node x){ if (x.right == null){ return x.left; } x.right = deleteMax(x.right); x.N = size(x.left) + size(x.right) + 1; return x; } \u83b7\u53d6\u6781\u503c K min() { if (isEmpty()){ return null; } //\u9012\u5f52\u5b9e\u73b0 return min(root).k; } private Node min(Node x){ if (x.left == null){ return x; }else { return min(x.left); } } //\u8fed\u4ee3\u5b9e\u73b0 K max() { if (isEmpty()){ return null; }else { Node tmp = root; while (tmp != null){ if (tmp.right == null){ return tmp.k; }else { tmp = tmp.right; } } } return null; } \u5411\u4e0a\u3001\u5411\u4e0b\u53d6\u6574 K floor(K k) { /* \u5411\u4e0b\u53d6\u6574\uff1b\u5c0f\u4e8e\u7b49\u4e8ek\u7684\u6700\u5927\u503c */ if (isEmpty()){ return null; } //recursive return floor(root, k).k; } private Node floor(Node x, K k){ if (x == null){ //\u5230\u8fbe\u53f6\u5b50\u8282\u70b9\u7684\u7a7a\u679d return null; } int re = k.compareTo(x.k); if (re == 0){ return x; }else if(re 0){ //left-tree return floor(x.left, k); } Node tmp = floor(x.right, k); //right-tree if (tmp == null){ return x; }else { return tmp; } } K ceiling(K k) { if(isEmpty()){ return null; } return ceiling(root, k).k; } private Node ceiling(Node x, K k){ /* \u5411\u4e0a\u53d6\u6574\uff1b\u5927\u4e8e\u7b49\u4e8ek\u7684\u6700\u5c0f\u503c */ if (x == null){ return null; } int re = k.compareTo(x.k); if (re == 0){ return x; }else if(re 0){ return ceiling(x.right, k); } Node tmp = ceiling(x.left, k); if (tmp == null){ return x; }else { return tmp; } } \u6309\u5e8f\u83b7\u53d6\uff0c\u6b21\u5e8f K select(int i) { /* \u83b7\u53d6\u7b2ci\u4e2a\u503c */ Node re = select(root, i); if (re == null){ return null; }else { return re.k; } } private Node select(Node x, int i){ if (x == null){ return null; } int tmp = size(x.left); if (tmp == i){ return x; }else if(tmp i){ return select(x.left, i); }else { return select(x.right, i-tmp-1); } } int rank(K k) { /* \u6b21\u5e8f */ return rank(root, k); } private int rank(Node x, K k){ if (x == null){ return 0; } int tmp = size(x.left); int re = k.compareTo(x.k); if (re == 0){ return tmp; }else if(re 0){ return tmp + rank(x.right, k) + 1; }else { return rank(x.left, k); } } void print(){ print(root); } private void print(Node x){ if (x == null){ return; } print(x.left); System.out.println(x.k); print(x.right); } }","title":"\u4e8c\u53c9\u6811"},{"location":"datastruct/\u4e8c\u53c9\u6811/#_1","text":"/** * \u4e8c\u53c9\u67e5\u627e\u6811\u6709\u5e8f\u7b26\u53f7\u8868\uff0c\u63d2\u5165\u548c\u67e5\u627e\u90fd\u5f88\u5feb */ public class BST K extends Comparable K , V { private Node root; // \u6839\u8282\u70b9 private int base; void setRoot(Node node){ this.root = node; } private class Node { private K k; private V v; private Node left, right; private int N; // \u8be5\u5b50\u6811\u7684\u8282\u70b9\u6570 private Node(K k, V v, int N) { this.k = k; this.v = v; this.N = N; } }","title":"\u5b58\u50a8\u7ed3\u6784"},{"location":"datastruct/\u4e8c\u53c9\u6811/#_2","text":"public int size(){ return size(root); } private int size(Node x){ if (null == x){ return 0; } return x.N; } boolean isEmpty(){ return root == null; }","title":"\u5de5\u5177\u51fd\u6570"},{"location":"datastruct/\u4e8c\u53c9\u6811/#get","text":"//\u8fed\u4ee3\u5b9e\u73b0 V get(K k) { /*Node tmp = root; while (tmp != null){ int re = k.compareTo(tmp.k); if (re == 0){ return tmp.v; }else if (re 0){ tmp = tmp.right; }else { tmp = tmp.left; } } return null;*/ //\u9012\u5f52\u5b9e\u73b0 return get(root, k); } //\u9012\u5f52\u5b9e\u73b0 private V get(Node x, K k){ if (null == x){ return null; } int re = k.compareTo(x.k); if (re == 0){ return x.v; }else if (re 0){ return get(x.right, k); }else { return get(x.left, k); } }","title":"get\u65b9\u6cd5"},{"location":"datastruct/\u4e8c\u53c9\u6811/#_3","text":"//\u8fed\u4ee3\u5b9e\u73b0 void put(K k, V v) { /* if (null == root){ root = new Node(k, v, 1); return; } Node tmp = root; while (true){ int re = k.compareTo(tmp.k); if (re == 0){ // \u7b49\u4e8e\u5f53\u524d\u8282\u70b9 tmp.v = v; break; }else if(re 0){ // \u5927\u4e8e tmp.N++; if (tmp.right == null){ tmp.right = new Node(k, v, 1); break; }else { tmp = tmp.right; } }else { // \u5c0f\u4e8e tmp.N++; if (tmp.left == null){ tmp.left = new Node(k, v, 1); break; }else { tmp = tmp.left; } } }*/ //\u9012\u5f52\u5b9e\u73b0 root = put(root, k, v); } //\u9012\u5f52\u5b9e\u73b0 Node put(Node h, K k, V v){ if (h == null){ return new Node(k, v, 1); } int re = k.compareTo(h.k); if (re 0){ h.left = put2(h.left, k, v); }else if (re 0){ h.right = put2(h.right, k, v); }else { h.v = v; return h; } //\u522b\u5fd8\u4e86\u8c03\u6574\u5927\u5c0f\uff01\uff01\uff01 h.N = size(h.left) + size(h.right) + 1; return h; }","title":"\u63d2\u5165\u65b9\u6cd5"},{"location":"datastruct/\u4e8c\u53c9\u6811/#_4","text":"void delete(K k) { root = delete(root, k); } private Node delete(Node x, K k){ if (x == null) { return null; } int re = k.compareTo(x.k); if (re 0 ){ //forward and rebuild right-tree x.right = delete(x.right, k); }else if (re 0){ //forward and rebuild left-tree x.left = delete(x.left, k); }else { //x = deleteNode if (x.left == null){ //only right-tree exist or null return x.right; }else if (x.right == null){ //only left-tree exist or null return x.left; }else { //both left and right tree Node t = x; x = min(t.right); x.right = deleteMin(t.right); x.left = t.left; } } x.N = size(x.left) + size(x.right) + 1; return x; } void deleteMin() { if(isEmpty()){ //\u9632\u6b62\u7a7a\u6307\u9488\u5f02\u5e38 return; } root = deleteMin(root); } private Node deleteMin(Node x){ if (x.left == null){ //\u8fd4\u56de\u5230\u4e0a\u4e00\u7ea7\u7ed3\u70b9 return x.right; //\u6ce8\u610f\u6b64\u5904\u8fd4\u56de\u7684\u662f\u53f3\u5b50\u7ed3\u70b9 } x.left = deleteMin(x.left); //\u66f4\u65b0\u5de6\u7ed3\u70b9 x.N = size(x.left) + size(x.right) + 1; return x; } void deleteMax() { if (isEmpty()){ return; } root = deleteMax(root); } private Node deleteMax(Node x){ if (x.right == null){ return x.left; } x.right = deleteMax(x.right); x.N = size(x.left) + size(x.right) + 1; return x; }","title":"\u5220\u9664\u65b9\u6cd5"},{"location":"datastruct/\u4e8c\u53c9\u6811/#_5","text":"K min() { if (isEmpty()){ return null; } //\u9012\u5f52\u5b9e\u73b0 return min(root).k; } private Node min(Node x){ if (x.left == null){ return x; }else { return min(x.left); } } //\u8fed\u4ee3\u5b9e\u73b0 K max() { if (isEmpty()){ return null; }else { Node tmp = root; while (tmp != null){ if (tmp.right == null){ return tmp.k; }else { tmp = tmp.right; } } } return null; }","title":"\u83b7\u53d6\u6781\u503c"},{"location":"datastruct/\u4e8c\u53c9\u6811/#_6","text":"K floor(K k) { /* \u5411\u4e0b\u53d6\u6574\uff1b\u5c0f\u4e8e\u7b49\u4e8ek\u7684\u6700\u5927\u503c */ if (isEmpty()){ return null; } //recursive return floor(root, k).k; } private Node floor(Node x, K k){ if (x == null){ //\u5230\u8fbe\u53f6\u5b50\u8282\u70b9\u7684\u7a7a\u679d return null; } int re = k.compareTo(x.k); if (re == 0){ return x; }else if(re 0){ //left-tree return floor(x.left, k); } Node tmp = floor(x.right, k); //right-tree if (tmp == null){ return x; }else { return tmp; } } K ceiling(K k) { if(isEmpty()){ return null; } return ceiling(root, k).k; } private Node ceiling(Node x, K k){ /* \u5411\u4e0a\u53d6\u6574\uff1b\u5927\u4e8e\u7b49\u4e8ek\u7684\u6700\u5c0f\u503c */ if (x == null){ return null; } int re = k.compareTo(x.k); if (re == 0){ return x; }else if(re 0){ return ceiling(x.right, k); } Node tmp = ceiling(x.left, k); if (tmp == null){ return x; }else { return tmp; } }","title":"\u5411\u4e0a\u3001\u5411\u4e0b\u53d6\u6574"},{"location":"datastruct/\u4e8c\u53c9\u6811/#_7","text":"K select(int i) { /* \u83b7\u53d6\u7b2ci\u4e2a\u503c */ Node re = select(root, i); if (re == null){ return null; }else { return re.k; } } private Node select(Node x, int i){ if (x == null){ return null; } int tmp = size(x.left); if (tmp == i){ return x; }else if(tmp i){ return select(x.left, i); }else { return select(x.right, i-tmp-1); } } int rank(K k) { /* \u6b21\u5e8f */ return rank(root, k); } private int rank(Node x, K k){ if (x == null){ return 0; } int tmp = size(x.left); int re = k.compareTo(x.k); if (re == 0){ return tmp; }else if(re 0){ return tmp + rank(x.right, k) + 1; }else { return rank(x.left, k); } } void print(){ print(root); } private void print(Node x){ if (x == null){ return; } print(x.left); System.out.println(x.k); print(x.right); } }","title":"\u6309\u5e8f\u83b7\u53d6\uff0c\u6b21\u5e8f"},{"location":"datastruct/\u6563\u5217\u8868/","text":"\u4e3a\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\u5b9e\u73b0\u4e00\u4e2a\u4f18\u79c0\u7684\u6563\u5217\u65b9\u6cd5\u9700\u8981\u6ee1\u8db3\u4e09\u4e2a\u6761\u4ef6\uff1a \u4e00\u81f4\u6027----\u7b49\u4ef7\u7684\u952e\u5fc5\u7136\u4ea7\u751f\u76f8\u7b49\u7684\u6563\u5217\u503c \u9ad8\u6548\u6027----\u8ba1\u7b97\u7b80\u4fbf \u5747\u5300\u6027----\u5747\u5300\u5730\u6563\u5217\u6240\u6709\u7684\u952e \u5bf9\u4e8e\u6563\u5217\u8ba1\u7b97\u5f88\u8017\u65f6\uff0c\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u952e\u7684\u6563\u5217\u503c\u7f13\u5b58\u8d77\u6765\u3002 pdf\uff1a149 union-find pdf\uff1a363 \u5b9a\u4e49\uff1a\u7ed9\u5b9a\u65e0\u5b64\u7acb\u7ed3\u70b9\u56feG\uff0c\u82e5\u5b58\u5728\u4e00\u6761\u8def\uff0c\u7ecf\u8fc7\u56fe\u4e2d\u6bcf\u8fb9\u4e00\u6b21\u4e14\u4ec5\u4e00\u6b21\uff0c\u8be5\u6761\u8def\u79f0\u4e3a\u6b27\u62c9\u8def\uff1b\u82e5\u5b58\u5728\u4e00\u6761\u56de\u8def\uff0c\u7ecf\u8fc7\u56fe\u4e2d\u6bcf\u8fb9\u4e00\u6b21\u4e14\u4ec5\u4e00\u6b21\uff0c\u8be5\u56de\u8def\u79f0\u4e3a\u6b27\u62c9\u56de\u8def\u3002 \u5177\u6709\u6b27\u62c9\u56de\u8def\u7684\u56fe\u79f0\u4f5c\u6b27\u62c9\u56fe\u3002 - \u65e0\u5411\u56fe\u5b9a\u7406\uff1a 1. \u65e0\u5411\u56feG\u5177\u6709\u4e00\u6761\u6b27\u62c9\u8def\uff0c\u5f53\u4e14\u4ec5\u5f53G\u662f\u8fde\u901a\u7684\uff0c\u4e14\u6709\u96f6\u4e2a\u6216\u4e24\u4e2a\u5947\u6570\u5ea6\u7ed3\u70b9\u3002 2. \u65e0\u5411\u56feG\u5177\u6709\u4e00\u6761\u6b27\u62c9\u56de\u8def\uff0c\u5f53\u4e14\u4ec5\u5f53G\u662f\u8fde\u901a\u7684\uff0c\u5e76\u4e14\u6240\u6709\u7ed3\u70b9\u5ea6\u6570\u5168\u4e3a\u5076\u6570\u3002 - \u6709\u5411\u56fe\u5b9a\u7406\uff1a 1. \u7ed9\u5b9a\u6709\u5411\u56feG\uff0c\u901a\u8fc7\u56fe\u4e2d\u6bcf\u8fb9\u4e00\u6b21\u4e14\u4ec5\u4e00\u6b21\u7684\u4e00\u6761\u5355\u5411\u8def(\u56de\u8def)\uff0c\u79f0\u4f5c\u5355\u5411\u6b27\u62c9\u8def(\u56de\u8def)\u3002 2. \u6709\u5411\u56feG\u5177\u6709\u4e00\u6761\u5355\u5411\u6b27\u62c9\u56de\u8def\uff0c\u5f53\u4e14\u4ec5\u5f53\u662f\u8fde\u901a\u7684\uff0c\u4e14\u6bcf\u4e2a\u7ed3\u70b9\u5165\u5ea6\u7b49\u4e8e\u51fa\u5ea6\u3002\u4e00\u4e2a\u6709\u5411\u56feG\u5177\u6709\u5355\u5411\u6b27\u62c9\u8def\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b83\u662f\u8fde\u901a\u7684\uff0c\u800c\u4e14\u9664\u4e24\u4e2a\u7ed3\u70b9\u5916\uff0c\u6bcf\u4e2a\u7ed3\u70b9\u7684\u5165\u5ea6\u7b49\u4e8e\u51fa\u5ea6\uff0c\u4f46\u8fd9\u4e24\u4e2a\u7ed3\u70b9\u4e2d\uff0c\u4e00\u4e2a\u7ed3\u70b9\u7684\u5165\u5ea6\u6bd4\u51fa\u5ea6\u59271\uff0c\u53e6\u4e00\u4e2a\u7ed3\u70b9\u7684\u5165\u5ea6\u6bd4\u51fa\u5ea6\u5c0f1\u3002 \u5b9a\u4e49\uff1a\u7ed9\u5b9a\u56feG\uff0c\u82e5\u5b58\u5728\u4e00\u6761\u8def\u7ecf\u8fc7\u56fe\u4e2d\u7684\u6bcf\u4e2a\u7ed3\u70b9\u6070\u597d\u4e00\u6b21\uff0c\u8fd9\u6761\u8def\u79f0\u4f5c\u6c49\u5bc6\u5c14\u987f\u8def\u3002\u82e5\u5b58\u5728\u4e00\u6761\u56de\u8def\uff0c\u7ecf\u8fc7\u56fe\u4e2d\u7684\u6bcf\u4e2a\u7ed3\u70b9\u6070\u597d\u4e00\u6b21\uff0c\u8fd9\u6761\u56de\u8def\u79f0\u4f5c\u6c49\u5bc6\u5c14\u987f\u56de\u8def\u3002 \u5177\u6709\u6c49\u5bc6\u5c14\u987f\u56de\u8def\u7684\u56fe\u79f0\u4f5c\u6c49\u5bc6\u5c14\u987f\u56fe\u3002 - \u65e0\u5411\u56fe\u5b9a\u7406\uff1a 1. \u8bbeG\u662f\u5177\u6709n\u4e2a\u7ed3\u70b9\u7684\u7b80\u5355\u56fe\u3002\u5982\u679cG\u4e2d\u6bcf\u4e00\u5bf9\u7ed3\u70b9\u5ea6\u6570\u4e4b\u548c\u5927\u4e8e\u7b49\u4e8en\uff0c\u5219\u5728G\u4e2d\u5b58\u5728\u4e00\u6761\u6c49\u5bc6\u5c14\u987f\u56de\u8def","title":"\u6563\u5217\u8868"},{"location":"datastruct/\u7ea2\u9ed1\u6811/","text":"\u4e00\u4e9b\u6982\u5ff5\uff1a \u5982\u679c\u4e00\u4e2a\u7ed3\u70b9\u53ea\u5b58\u50a8\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u90a3\u4e48\u53eb\u505a 2-\u7ed3\u70b9 \uff0c\u6240\u7ec4\u6210\u7684\u6811\u53eb\u505a 2-\u6811 \u3002\u540c\u7406\uff0c\u5b58\u50a8\u4e24\u4e2a\u952e\u503c\u5bf9\u7684\u7ed3\u70b9\u53eb\u505a 3-\u7ed3\u70b9 \u3002\u5982\u679c\u4e00\u4e2a\u6811\u4e2d\u542b\u6709\u8fd9\u4e24\u79cd\u7ed3\u70b9\uff0c\u90a3\u4e48\u79f0\u4f5c 2-3\u6811 \u3002 \u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u57fa\u4e8e\u6709\u5e8f\u7b26\u53f7\u8868\u7684\u4e8c\u53c9\u5e73\u8861\u6811\u7684\u5b9e\u73b0\u3002 \u7ea2\u9ed1\u6811\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u5b9a\u4e49\u662f\u6ee1\u8db3\u4e0b\u9762\u6761\u4ef6\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff1a \u7ea2\u94fe\u63a5\u5747\u4e3a\u5de6\u94fe\u63a5 \u6ca1\u6709\u4efb\u4f55\u4e00\u4e2a\u7ed3\u70b9\u540c\u65f6\u548c\u4e24\u6761\u7ea2\u94fe\u63a5\u76f8\u8fde \u8be5\u6811\u662f\u5b8c\u7f8e\u9ed1\u8272\u5e73\u8861\u7684\uff0c\u5373\u4efb\u610f\u7a7a\u94fe\u63a5\u5230\u6839\u7ed3\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u9ed1\u94fe\u63a5\u6570\u91cf\u76f8\u540c \u8fd9\u6837\u7684\u6811\u548c2-3\u6811\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u3002 \u4e0b\u9762\u8bf4\u660e\u4e00\u4e0b\u5b9e\u73b0 \u5b58\u50a8\u7ed3\u70b9 public class RedBlackBST K extends Comparable K , V { private Node root; private static final boolean RED = true; private static final boolean BLACK = false; private class Node { private K k; private V v; private Node left, right; private int N; private boolean color; //\u7ed3\u70b9\u7684\u989c\u8272\uff0c\u8868\u793a\u6307\u5411\u8be5\u7ed3\u70b9\u7684\u94fe\u63a5\u7684\u989c\u8272 Node(K k, V v, int n, boolean color) { this.k = k; this.v = v; N = n; this.color = color; } } } \u57fa\u672c\u65b9\u6cd5 \u5de6\u65cb\u548c\u53f3\u65cb\u3002\u5de6\u65cb\u5373\u628a\u5de6\u8fb9\u7684\u7ea2\u94fe\u63a5\u8f6c\u6362\u5230\u53f3\u8fb9\u53bb\uff1b\u53f3\u65cb\u76f8\u53cd \u5728\u7ea2\u9ed1\u6811\u7684\u53d8\u6362\u4e2d\uff0c\u662f\u901a\u8fc7\u4e0d\u65ad\u7684\u5de6\u65cb\u4e0e\u53f3\u65cb\u6765\u5b9e\u73b0\u7684\uff0c\u6545\u9700\u8981\u5b9e\u73b0\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u3002 \u5de6\u65cb private Node rotateLeft(Node h){ /* \u5c06\u4e00\u4e2a\u53f3\u94fe\u63a5\u4e3a\u7ea2\u8272\u7684\u7ed3\u70b9\u5de6\u65cb\u3002\u6d89\u53ca\u5230\u5b50\u6811\u4e2d\u7ed3\u70b9\u4f4d\u7f6e\u7684\u53d8\u6362\uff0c\u989c\u8272\u7684\u6539\u53d8\uff0c\u7ed3\u70b9\u6570\u91cf\u7684\u6539\u53d8\u3002 */ Node x = h.right; h.right = x.left; x.left = h; x.color = h.color; h.color = RED; x.N = h.N; h.N = size(h.left) + size(h.right) + 1; return x; } \u53f3\u65cb\u53ea\u9700\u5c06\u65b9\u5411\u76f8\u53cd\u5373\u53ef\u3002 \u989c\u8272\u8f6c\u6362 \u5728\u63d2\u5165\u7684\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e24\u4e2a\u5b50\u7ed3\u70b9\u90fd\u4e3a\u7ea2\u8272\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u76f8\u5f53\u4e8e\u53d8\u6210\u4e86 4-\u7ed3\u70b9 \uff0c\u6240\u4ee5\u9700\u8981\u5c06\u4e2d\u95f4\u7ed3\u70b9\u63d0\u53d6\u51fa\u6765\uff0c\u53d8\u6210\u4e24\u4e2a 2-\u7ed3\u70b9 \uff0c\u5c06\u4e2d\u95f4\u7684\u7ed3\u70b9\u653e\u5230\u7236\u7ed3\u70b9\u4e2d\u7ee7\u7eed\u5904\u7406\u3002 private void flipColor(Node h, boolean reverse){ if (reverse){ /* \u5220\u9664\u64cd\u4f5c\u7684\u8f6c\u6362\uff0c\u4e3a\u4e86\u6784\u90203-\u62164-\u5b50\u7ed3\u70b9\u3002\u8f6c\u6362\u4e00\u4e2a\u7ed3\u70b9\u7684\u4e24\u4e2a\u9ed1\u8272\u7ed3\u70b9\u7684\u989c\u8272\uff0c\u5e76\u5c06\u81ea\u5df1\u53d8\u4e3a\u9ed1\u8272\u7ed3\u70b9\u3002 */ h.color = BLACK; h.right.color = h.left.color = RED; }else { /* \u63d2\u5165\u64cd\u4f5c\u7684\u8f6c\u6362\u3002\u8f6c\u6362\u4e00\u4e2a\u7ed3\u70b9\u7684\u4e24\u4e2a\u7ea2\u8272\u7ed3\u70b9\u7684\u989c\u8272\uff0c\u5e76\u5c06\u81ea\u5df1\u53d8\u4e3a\u7ea2\u8272\u7ed3\u70b9\uff0c\u76f8\u5f53\u4e8e\u628a\u81ea\u5df1\u9001\u5165\u5230\u7236\u8282\u70b9\u4e2d\u3002 */ h.color = RED; h.right.color = h.left.color = BLACK; } } \u63d2\u5165\u64cd\u4f5c \u5c06\u65b0\u7ed3\u70b9\u4e0d\u65ad\u7684\u5411\u4e0b\u904d\u5386\uff0c\u76f4\u5230\u6210\u4e3a\u53f6\u5b50\u8282\u70b9\u3002 \u63d2\u5165\u65b0\u7684\u7ed3\u70b9\u540e\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e09\u79cd\u60c5\u51b5\uff1a \u82e5\u53f3\u5b50\u7ed3\u70b9\u662f\u7ea2\u8272\u800c\u5de6\u5b50\u7ed3\u70b9\u662f\u9ed1\u8272\uff0c\u90a3\u4e48\u5de6\u65cb \u82e5\u5de6\u5b50\u7ed3\u70b9\u4e3a\u7ea2\u8272\u5e76\u4e14\u5b83\u7684\u5de6\u5b50\u7ed3\u70b9\u4e5f\u4e3a\u7ea2\u8272\uff0c\u5373\u5b58\u5728\u4e24\u4e2a\u76f8\u8fde\u7684\u7ea2\u94fe\uff0c\u90a3\u4e48\u5148\u53f3\u65cb\u9876\u90e8\u7684\u7ed3\u70b9\uff0c\u518d\u6267\u884c3. \u82e5\u4e24\u4e2a\u5b50\u7ed3\u70b9\u90fd\u4e3a\u7ea2\u8272\uff0c\u90a3\u4e48\u6539\u53d8\u989c\u8272 void put(K k, V v){ root = put(root, k, v); root.color = BLACK; } private Node put(Node h, K k, V v){ //\u63d2\u5165\u65b0\u7684\u7ed3\u70b9\uff0c\u6ce8\u610f\u662f\u7ea2\u8272\u7ed3\u70b9 if (h == null){ return new Node(k, v, 1, RED); } //\u5411\u4e0b\u904d\u5386 int re = k.compareTo(h.k); if (re == 0){ //\u8fd9\u91cc\u4e0d\u80fd\u76f4\u63a5\u8fd4\u56de\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff1f\uff1f\uff1f h.v = v; }else if (re 0){ h.right = put(h.right, k, v); }else { h.left = put(h.left, k, v); } //1.\u5de6\u65cb if (isRed(h.right) !isRed(h.left)){ h = rotateLeft(h); } //2.\u53f3\u65cb if (isRed(h.left) isRed(h.left.left)){ h = rotateRight(h); } //3.\u8f6c\u6362 if (isRed(h.left) isRed(h.right)){ flipColor(h, false); } h.N = size(h.left) + size(h.right) + 1; return h; } \u5220\u9664\u6700\u5c0f\u7684\u952e\u503c\u5bf9 \u5220\u9664\u7684\u65f6\u5019\u5141\u8bb8\u4e34\u65f6\u7684 4-\u7ed3\u70b9 \u5b58\u5728\u3002 \u5728\u5220\u9664\u6700\u5c0f\u952e\u7684\u65f6\u5019\uff0c\u56e0\u8981\u4fdd\u6301\u6811\u7684\u5e73\u8861\uff0c\u6240\u4ee5\u9700\u8981\u786e\u4fdd\u6bcf\u4e2a\u5de6\u5b50\u7ed3\u70b9\u90fd\u4e0d\u662f 2-\u7ed3\u70b9 \uff0c\u5373\u5c06\u9047\u5230\u7684\u6bcf\u4e2a2-\u7ed3\u70b9\u90fd\u8f6c\u5316\u4e3a3-\u7ed3\u70b9\u62164-\u7ed3\u70b9\uff0c\u8fd9\u6837\u5220\u9664\u7684\u65f6\u5019\u6811\u4ecd\u7136\u662f\u5e73\u8861\u7684\u3002 private Node balance(Node h){ /*\u5e73\u8861\u7ea2\u9ed1\u6811\uff0c\u53ea\u8981\u5728put()\u65b9\u6cd5\u7684\u540e\u4e94\u53e5\u52a0\u4e0a\u6b64\u53e5\u5c31\u80fd\u8fbe\u5230\u6548\u679c???*/ //\u5bf9\u53ef\u80fd\u51fa\u73b0\u7684\u4e0d\u5e73\u8861\u7684\u60c5\u51b5\u505a\u9884\u5904\u7406 if (isRed(h.right)){ h = rotateLeft(h); } if (isRed(h.right) !isRed(h.left)){ h = rotateLeft(h); } if (isRed(h.left) isRed(h.left.left)){ h = rotateRight(h); } if (isRed(h.left) isRed(h.right)){ flipColor(h, false); } h.N = size(h.left) + size(h.right) + 1; return h; } private Node moveRedLeft(Node h){ //\u53d8\u4e3ah\u662f\u9ed1\u8272\uff08\u4e3a\u4e86\u4e0d\u4f1a\u4ea7\u751f5-\u7ed3\u70b9\uff09\uff0c\u4e24\u4e2a\u5b50\u7ed3\u70b9\u662f\u7ea2\u8272\uff0c\u5148\u5c06h\u53d8\u6210\u4e86\u4e00\u4e2a3-\u7ed3\u70b9\uff0c\u4fdd\u8bc1\u5de6\u5b50\u7ed3\u70b9\u4e0d\u662f2-\u7ed3\u70b9 flipColor(h, true); //\u82e5\u53f3\u5b50\u6811\u7684\u6839\u7ed3\u70b9\u4e0d\u662f2-\u7ed3\u70b9\uff0c\u5c06\u4e00\u4e2a\u952e\u79fb\u52a8\u5230\u5de6\u5b50\u7ed3\u70b9\u4e2d\uff0ch\u7ee7\u7eed\u53d8\u6210\u4e00\u4e2a4-\u7ed3\u70b9\uff1b\u6b64\u65f6\u56e0\u4e3a\u5df2\u7ecf\u5c06\u53f3\u7ed3\u70b9\u53d8\u4e3a\u7ea2\u8272\uff0c\u6240\u4ee5\u65e0\u9700\u5224\u65ad\u5176\u989c\u8272\u3002 if (isRed(h.right.left)){ h.right = rotateRight(h.right); //\u53f3\u65cbh\u7684\u53f3\u5b50\u6811\uff0c\u53d8\u4e3a\u53f3\u8fb9\u76844-\u7ed3\u70b9 h = rotateLeft(h); //\u518d\u5de6\u65cbh\uff0c\u5c06\u5de6\u5b50\u6811\u53d8\u4e3a4-\u7ed3\u70b9 } return h; } void deleteMin() { //\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u8981\u8f6c\u53d8\u989c\u8272??? if(!isRed(root.left) !isRed(root.right)){ root.color = RED; } root = deleteMin(root); if (!isEmpty()){ root.color = BLACK; } } private Node deleteMin(Node h){ //\u5220\u9664\u6700\u5c0f\u7ed3\u70b9 if (h.left == null){ return null; } //\u5de6\u5b50\u6811\u7684\u6839\u7ed3\u70b9\u662f2-\u7ed3\u70b9\uff0c\u8f6c\u6362\u4e3a\u975e2-\u7ed3\u70b9\uff0c\u53ef\u80fd\u662f3-\u7ed3\u70b9\u62164-\u7ed3\u70b9 if (!isRed(h.left) !isRed(h.left.left)){ h = moveRedLeft(h); } //\u6b64\u65f6\u5df2\u7ecf\u4fdd\u8bc1\u4e86\u5de6\u5b50\u6811\u7684\u6839\u7ed3\u70b9\u4e0d\u662f2-\u7ed3\u70b9 //\u5411\u4e0b\u5220\u9664\u7ed3\u70b9\uff0c\u6539\u53d8\u7ea2\u9ed1\u6811\u7ed3\u6784 h.left = deleteMin(h.left); //\u5411\u4e0a\u5e73\u8861\u7ea2\u9ed1\u6811\uff0c\u6d88\u9664\u4e34\u65f6\u4ea7\u751f\u76844-\u7ed3\u70b9\uff0c\u5e73\u8861\u4e4b\u540e\u518d\u66f4\u65b0\u7ed3\u70b9\u5927\u5c0f return balance(h); } \u5220\u9664\u6700\u5927\u7684\u952e\u503c\u5bf9 \u56e0\u7ea2\u94fe\u63a5\u90fd\u4e3a\u5de6\u94fe\u63a5\uff0c\u6240\u4ee5\u6709\u7a0d\u5fae\u4e0d\u540c\u3002 private Node moveRedRight(Node h){ //\u53d8\u4e3ah\u662f\u9ed1\u8272\uff0c\u4e24\u4e2a\u5b50\u7ed3\u70b9\u662f\u7ea2\u8272\uff0c\u5148\u5c06h\u53d8\u6210\u53f3\u8fb9\u76843-\u7ed3\u70b9\uff0c\u4fdd\u8bc1\u53f3\u5b50\u7ed3\u70b9\u4e0d\u662f2-\u7ed3\u70b9 flipColor(h, true); //h\u7684\u5de6\u5b50\u7ed3\u70b9\u4e5f\u662f2-\u7ed3\u70b9\uff0c\u5c06h\u7684\u53f3\u5b50\u7ed3\u70b9\u7ee7\u7eed\u53d8\u4e3a\u53f3\u8fb9\u76844-\u7ed3\u70b9 if (!isRed(h.left.left)){ h = rotateRight(h); } return h; } void deleteMax() { if (!isRed(root.left) !isRed(root.right)){ root.color = RED; } root = deleteMax(root); if (!isEmpty()){ root.color = BLACK; } } private Node deleteMax(Node h){ //\u5c06\u4e3a\u7ea2\u8272\u7684\u5de6\u6839\u7ed3\u70b9\u76f4\u63a5\u8f6c\u5230\u53f3\u8fb9\u6765 if (isRed(h.left)){ h = rotateRight(h); } //\u5220\u9664\u6700\u5927\u7ed3\u70b9 if (h.right == null){ return null; } //h\u7684\u53f3\u5b50\u7ed3\u70b9\u662f\u9ed1\u8272\u7ed3\u70b9\uff0c\u5e76\u4e14\u53f3\u5b50\u6811\u4e0d\u662f3-\u7ed3\u70b9\u3002 //\u56e0\u4e3a\u7b2c\u4e00\u6b65\u5df2\u7ecf\u76f4\u63a5\u628a\u4e3a\u7ea2\u8272\u7684\u5de6\u6839\u7ed3\u70b9\u8f6c\u5230\u53f3\u8fb9\uff0c\u4fdd\u8bc1\u4e86\u6b64\u53f3\u6811\u662f\u53f3\u8fb9\u76843-\u7ed3\u70b9\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u518d\u8fdb\u884c\u53d8\u5e7b\uff0c\u8981\u5c06\u5176\u8fc7\u6ee4 if (!isRed(h.right) !isRed(h.right.left)){ h = moveRedRight(h); } //\u5411\u4e0b\u5220\u9664\u7ed3\u70b9 h.right = deleteMax(h.right); //\u5411\u4e0a\u5e73\u8861\u4e8c\u53c9\u6811 return balance(h); } \u5220\u9664\u64cd\u4f5c \u5c06\u5220\u9664\u6700\u5c0f\u503c\u548c\u6700\u5927\u503c\u7ed3\u5408\u8d77\u6765\u5b8c\u6210\u5220\u9664\u64cd\u4f5c\u3002 void delete(K k) { if(!isRed(root.left) !isRed(root.right)){ root.color = RED; } root = delete(root, k); if (!isEmpty()){ root.color = BLACK; } } private Node delete(Node h, K k){ //\u5728\u5de6\u5b50\u6811\u4e2d if (k.compareTo(h.k) 0){ if (!isRed(h.left) !isRed(h.left.left)){ h = moveRedLeft(h); } h.left = delete(h.left, k); } //\u627e\u5230\u4e86\u8be5\u7ed3\u70b9\u6216\u5728\u53f3\u5b50\u6811\u4e2d else { if (isRed(h.left)){ h = rotateRight(h); } //\u627e\u5230\u8be5\u7ed3\u70b9\uff0c\u5e76\u4e14\u53f3\u5b50\u6811\u4e3a\u7a7a\uff0c\u65e0\u9700\u8c03\u6574\u7ed3\u6784\uff0c\u5220\u9664\u8be5\u7ed3\u70b9 if (k.compareTo(h.k) == 0 (h.right == null)){ return null; } //\u53f3\u5b50\u6811\u662f2-\u7ed3\u70b9\uff0c\u8f6c\u5316\u4e3a\u53f3\u8fb9\u76844-\u62163-\u7ed3\u70b9 if (!isRed(h.right) !isRed(h.right.left)){ h = moveRedRight(h); } //\u627e\u5230\u4e86\u8be5\u7ed3\u70b9\uff0c\u4f46\u662f\u53f3\u5b50\u6811\u4e0d\u4e3a\u7a7a\uff0c\u6240\u4ee5\u9700\u8981\u8c03\u6574\u7ed3\u6784\uff1b\u4e0e\u4e8c\u53c9\u6811\u7684\u5220\u9664\u65b9\u6cd5\u7c7b\u4f3c if (k.compareTo(h.k) == 0){ h.v = get(h.right, min(h.right).k); h.k = min(h.right).k; h.right = deleteMin(h.right); } //\u8be5\u7ed3\u70b9\u5728\u53f3\u5b50\u6811\u4e2d else { h.right = delete(h.right, k); } } return balance(h); } \u5176\u5b83\u65b9\u6cd5 \u5bf9\u4e8e\u5176\u5b83\u65b9\u6cd5\uff0c\u56e0\u4e3a\u4e0d\u4f1a\u6d89\u53ca\u5230\u989c\u8272\u8f6c\u6362\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e8c\u53c9\u6811\u7684\u65b9\u6cd5\u3002","title":"\u7ea2\u9ed1\u6811"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_1","text":"\u5982\u679c\u4e00\u4e2a\u7ed3\u70b9\u53ea\u5b58\u50a8\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u90a3\u4e48\u53eb\u505a 2-\u7ed3\u70b9 \uff0c\u6240\u7ec4\u6210\u7684\u6811\u53eb\u505a 2-\u6811 \u3002\u540c\u7406\uff0c\u5b58\u50a8\u4e24\u4e2a\u952e\u503c\u5bf9\u7684\u7ed3\u70b9\u53eb\u505a 3-\u7ed3\u70b9 \u3002\u5982\u679c\u4e00\u4e2a\u6811\u4e2d\u542b\u6709\u8fd9\u4e24\u79cd\u7ed3\u70b9\uff0c\u90a3\u4e48\u79f0\u4f5c 2-3\u6811 \u3002 \u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u57fa\u4e8e\u6709\u5e8f\u7b26\u53f7\u8868\u7684\u4e8c\u53c9\u5e73\u8861\u6811\u7684\u5b9e\u73b0\u3002 \u7ea2\u9ed1\u6811\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u5b9a\u4e49\u662f\u6ee1\u8db3\u4e0b\u9762\u6761\u4ef6\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff1a \u7ea2\u94fe\u63a5\u5747\u4e3a\u5de6\u94fe\u63a5 \u6ca1\u6709\u4efb\u4f55\u4e00\u4e2a\u7ed3\u70b9\u540c\u65f6\u548c\u4e24\u6761\u7ea2\u94fe\u63a5\u76f8\u8fde \u8be5\u6811\u662f\u5b8c\u7f8e\u9ed1\u8272\u5e73\u8861\u7684\uff0c\u5373\u4efb\u610f\u7a7a\u94fe\u63a5\u5230\u6839\u7ed3\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u9ed1\u94fe\u63a5\u6570\u91cf\u76f8\u540c \u8fd9\u6837\u7684\u6811\u548c2-3\u6811\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u3002","title":"\u4e00\u4e9b\u6982\u5ff5\uff1a"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_2","text":"","title":"\u4e0b\u9762\u8bf4\u660e\u4e00\u4e0b\u5b9e\u73b0"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_3","text":"public class RedBlackBST K extends Comparable K , V { private Node root; private static final boolean RED = true; private static final boolean BLACK = false; private class Node { private K k; private V v; private Node left, right; private int N; private boolean color; //\u7ed3\u70b9\u7684\u989c\u8272\uff0c\u8868\u793a\u6307\u5411\u8be5\u7ed3\u70b9\u7684\u94fe\u63a5\u7684\u989c\u8272 Node(K k, V v, int n, boolean color) { this.k = k; this.v = v; N = n; this.color = color; } } }","title":"\u5b58\u50a8\u7ed3\u70b9"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_4","text":"\u5de6\u65cb\u548c\u53f3\u65cb\u3002\u5de6\u65cb\u5373\u628a\u5de6\u8fb9\u7684\u7ea2\u94fe\u63a5\u8f6c\u6362\u5230\u53f3\u8fb9\u53bb\uff1b\u53f3\u65cb\u76f8\u53cd \u5728\u7ea2\u9ed1\u6811\u7684\u53d8\u6362\u4e2d\uff0c\u662f\u901a\u8fc7\u4e0d\u65ad\u7684\u5de6\u65cb\u4e0e\u53f3\u65cb\u6765\u5b9e\u73b0\u7684\uff0c\u6545\u9700\u8981\u5b9e\u73b0\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u3002 \u5de6\u65cb private Node rotateLeft(Node h){ /* \u5c06\u4e00\u4e2a\u53f3\u94fe\u63a5\u4e3a\u7ea2\u8272\u7684\u7ed3\u70b9\u5de6\u65cb\u3002\u6d89\u53ca\u5230\u5b50\u6811\u4e2d\u7ed3\u70b9\u4f4d\u7f6e\u7684\u53d8\u6362\uff0c\u989c\u8272\u7684\u6539\u53d8\uff0c\u7ed3\u70b9\u6570\u91cf\u7684\u6539\u53d8\u3002 */ Node x = h.right; h.right = x.left; x.left = h; x.color = h.color; h.color = RED; x.N = h.N; h.N = size(h.left) + size(h.right) + 1; return x; } \u53f3\u65cb\u53ea\u9700\u5c06\u65b9\u5411\u76f8\u53cd\u5373\u53ef\u3002 \u989c\u8272\u8f6c\u6362 \u5728\u63d2\u5165\u7684\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e24\u4e2a\u5b50\u7ed3\u70b9\u90fd\u4e3a\u7ea2\u8272\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u76f8\u5f53\u4e8e\u53d8\u6210\u4e86 4-\u7ed3\u70b9 \uff0c\u6240\u4ee5\u9700\u8981\u5c06\u4e2d\u95f4\u7ed3\u70b9\u63d0\u53d6\u51fa\u6765\uff0c\u53d8\u6210\u4e24\u4e2a 2-\u7ed3\u70b9 \uff0c\u5c06\u4e2d\u95f4\u7684\u7ed3\u70b9\u653e\u5230\u7236\u7ed3\u70b9\u4e2d\u7ee7\u7eed\u5904\u7406\u3002 private void flipColor(Node h, boolean reverse){ if (reverse){ /* \u5220\u9664\u64cd\u4f5c\u7684\u8f6c\u6362\uff0c\u4e3a\u4e86\u6784\u90203-\u62164-\u5b50\u7ed3\u70b9\u3002\u8f6c\u6362\u4e00\u4e2a\u7ed3\u70b9\u7684\u4e24\u4e2a\u9ed1\u8272\u7ed3\u70b9\u7684\u989c\u8272\uff0c\u5e76\u5c06\u81ea\u5df1\u53d8\u4e3a\u9ed1\u8272\u7ed3\u70b9\u3002 */ h.color = BLACK; h.right.color = h.left.color = RED; }else { /* \u63d2\u5165\u64cd\u4f5c\u7684\u8f6c\u6362\u3002\u8f6c\u6362\u4e00\u4e2a\u7ed3\u70b9\u7684\u4e24\u4e2a\u7ea2\u8272\u7ed3\u70b9\u7684\u989c\u8272\uff0c\u5e76\u5c06\u81ea\u5df1\u53d8\u4e3a\u7ea2\u8272\u7ed3\u70b9\uff0c\u76f8\u5f53\u4e8e\u628a\u81ea\u5df1\u9001\u5165\u5230\u7236\u8282\u70b9\u4e2d\u3002 */ h.color = RED; h.right.color = h.left.color = BLACK; } }","title":"\u57fa\u672c\u65b9\u6cd5"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_5","text":"\u5c06\u65b0\u7ed3\u70b9\u4e0d\u65ad\u7684\u5411\u4e0b\u904d\u5386\uff0c\u76f4\u5230\u6210\u4e3a\u53f6\u5b50\u8282\u70b9\u3002 \u63d2\u5165\u65b0\u7684\u7ed3\u70b9\u540e\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e09\u79cd\u60c5\u51b5\uff1a \u82e5\u53f3\u5b50\u7ed3\u70b9\u662f\u7ea2\u8272\u800c\u5de6\u5b50\u7ed3\u70b9\u662f\u9ed1\u8272\uff0c\u90a3\u4e48\u5de6\u65cb \u82e5\u5de6\u5b50\u7ed3\u70b9\u4e3a\u7ea2\u8272\u5e76\u4e14\u5b83\u7684\u5de6\u5b50\u7ed3\u70b9\u4e5f\u4e3a\u7ea2\u8272\uff0c\u5373\u5b58\u5728\u4e24\u4e2a\u76f8\u8fde\u7684\u7ea2\u94fe\uff0c\u90a3\u4e48\u5148\u53f3\u65cb\u9876\u90e8\u7684\u7ed3\u70b9\uff0c\u518d\u6267\u884c3. \u82e5\u4e24\u4e2a\u5b50\u7ed3\u70b9\u90fd\u4e3a\u7ea2\u8272\uff0c\u90a3\u4e48\u6539\u53d8\u989c\u8272 void put(K k, V v){ root = put(root, k, v); root.color = BLACK; } private Node put(Node h, K k, V v){ //\u63d2\u5165\u65b0\u7684\u7ed3\u70b9\uff0c\u6ce8\u610f\u662f\u7ea2\u8272\u7ed3\u70b9 if (h == null){ return new Node(k, v, 1, RED); } //\u5411\u4e0b\u904d\u5386 int re = k.compareTo(h.k); if (re == 0){ //\u8fd9\u91cc\u4e0d\u80fd\u76f4\u63a5\u8fd4\u56de\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff1f\uff1f\uff1f h.v = v; }else if (re 0){ h.right = put(h.right, k, v); }else { h.left = put(h.left, k, v); } //1.\u5de6\u65cb if (isRed(h.right) !isRed(h.left)){ h = rotateLeft(h); } //2.\u53f3\u65cb if (isRed(h.left) isRed(h.left.left)){ h = rotateRight(h); } //3.\u8f6c\u6362 if (isRed(h.left) isRed(h.right)){ flipColor(h, false); } h.N = size(h.left) + size(h.right) + 1; return h; }","title":"\u63d2\u5165\u64cd\u4f5c"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_6","text":"\u5220\u9664\u7684\u65f6\u5019\u5141\u8bb8\u4e34\u65f6\u7684 4-\u7ed3\u70b9 \u5b58\u5728\u3002 \u5728\u5220\u9664\u6700\u5c0f\u952e\u7684\u65f6\u5019\uff0c\u56e0\u8981\u4fdd\u6301\u6811\u7684\u5e73\u8861\uff0c\u6240\u4ee5\u9700\u8981\u786e\u4fdd\u6bcf\u4e2a\u5de6\u5b50\u7ed3\u70b9\u90fd\u4e0d\u662f 2-\u7ed3\u70b9 \uff0c\u5373\u5c06\u9047\u5230\u7684\u6bcf\u4e2a2-\u7ed3\u70b9\u90fd\u8f6c\u5316\u4e3a3-\u7ed3\u70b9\u62164-\u7ed3\u70b9\uff0c\u8fd9\u6837\u5220\u9664\u7684\u65f6\u5019\u6811\u4ecd\u7136\u662f\u5e73\u8861\u7684\u3002 private Node balance(Node h){ /*\u5e73\u8861\u7ea2\u9ed1\u6811\uff0c\u53ea\u8981\u5728put()\u65b9\u6cd5\u7684\u540e\u4e94\u53e5\u52a0\u4e0a\u6b64\u53e5\u5c31\u80fd\u8fbe\u5230\u6548\u679c???*/ //\u5bf9\u53ef\u80fd\u51fa\u73b0\u7684\u4e0d\u5e73\u8861\u7684\u60c5\u51b5\u505a\u9884\u5904\u7406 if (isRed(h.right)){ h = rotateLeft(h); } if (isRed(h.right) !isRed(h.left)){ h = rotateLeft(h); } if (isRed(h.left) isRed(h.left.left)){ h = rotateRight(h); } if (isRed(h.left) isRed(h.right)){ flipColor(h, false); } h.N = size(h.left) + size(h.right) + 1; return h; } private Node moveRedLeft(Node h){ //\u53d8\u4e3ah\u662f\u9ed1\u8272\uff08\u4e3a\u4e86\u4e0d\u4f1a\u4ea7\u751f5-\u7ed3\u70b9\uff09\uff0c\u4e24\u4e2a\u5b50\u7ed3\u70b9\u662f\u7ea2\u8272\uff0c\u5148\u5c06h\u53d8\u6210\u4e86\u4e00\u4e2a3-\u7ed3\u70b9\uff0c\u4fdd\u8bc1\u5de6\u5b50\u7ed3\u70b9\u4e0d\u662f2-\u7ed3\u70b9 flipColor(h, true); //\u82e5\u53f3\u5b50\u6811\u7684\u6839\u7ed3\u70b9\u4e0d\u662f2-\u7ed3\u70b9\uff0c\u5c06\u4e00\u4e2a\u952e\u79fb\u52a8\u5230\u5de6\u5b50\u7ed3\u70b9\u4e2d\uff0ch\u7ee7\u7eed\u53d8\u6210\u4e00\u4e2a4-\u7ed3\u70b9\uff1b\u6b64\u65f6\u56e0\u4e3a\u5df2\u7ecf\u5c06\u53f3\u7ed3\u70b9\u53d8\u4e3a\u7ea2\u8272\uff0c\u6240\u4ee5\u65e0\u9700\u5224\u65ad\u5176\u989c\u8272\u3002 if (isRed(h.right.left)){ h.right = rotateRight(h.right); //\u53f3\u65cbh\u7684\u53f3\u5b50\u6811\uff0c\u53d8\u4e3a\u53f3\u8fb9\u76844-\u7ed3\u70b9 h = rotateLeft(h); //\u518d\u5de6\u65cbh\uff0c\u5c06\u5de6\u5b50\u6811\u53d8\u4e3a4-\u7ed3\u70b9 } return h; } void deleteMin() { //\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u8981\u8f6c\u53d8\u989c\u8272??? if(!isRed(root.left) !isRed(root.right)){ root.color = RED; } root = deleteMin(root); if (!isEmpty()){ root.color = BLACK; } } private Node deleteMin(Node h){ //\u5220\u9664\u6700\u5c0f\u7ed3\u70b9 if (h.left == null){ return null; } //\u5de6\u5b50\u6811\u7684\u6839\u7ed3\u70b9\u662f2-\u7ed3\u70b9\uff0c\u8f6c\u6362\u4e3a\u975e2-\u7ed3\u70b9\uff0c\u53ef\u80fd\u662f3-\u7ed3\u70b9\u62164-\u7ed3\u70b9 if (!isRed(h.left) !isRed(h.left.left)){ h = moveRedLeft(h); } //\u6b64\u65f6\u5df2\u7ecf\u4fdd\u8bc1\u4e86\u5de6\u5b50\u6811\u7684\u6839\u7ed3\u70b9\u4e0d\u662f2-\u7ed3\u70b9 //\u5411\u4e0b\u5220\u9664\u7ed3\u70b9\uff0c\u6539\u53d8\u7ea2\u9ed1\u6811\u7ed3\u6784 h.left = deleteMin(h.left); //\u5411\u4e0a\u5e73\u8861\u7ea2\u9ed1\u6811\uff0c\u6d88\u9664\u4e34\u65f6\u4ea7\u751f\u76844-\u7ed3\u70b9\uff0c\u5e73\u8861\u4e4b\u540e\u518d\u66f4\u65b0\u7ed3\u70b9\u5927\u5c0f return balance(h); }","title":"\u5220\u9664\u6700\u5c0f\u7684\u952e\u503c\u5bf9"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_7","text":"\u56e0\u7ea2\u94fe\u63a5\u90fd\u4e3a\u5de6\u94fe\u63a5\uff0c\u6240\u4ee5\u6709\u7a0d\u5fae\u4e0d\u540c\u3002 private Node moveRedRight(Node h){ //\u53d8\u4e3ah\u662f\u9ed1\u8272\uff0c\u4e24\u4e2a\u5b50\u7ed3\u70b9\u662f\u7ea2\u8272\uff0c\u5148\u5c06h\u53d8\u6210\u53f3\u8fb9\u76843-\u7ed3\u70b9\uff0c\u4fdd\u8bc1\u53f3\u5b50\u7ed3\u70b9\u4e0d\u662f2-\u7ed3\u70b9 flipColor(h, true); //h\u7684\u5de6\u5b50\u7ed3\u70b9\u4e5f\u662f2-\u7ed3\u70b9\uff0c\u5c06h\u7684\u53f3\u5b50\u7ed3\u70b9\u7ee7\u7eed\u53d8\u4e3a\u53f3\u8fb9\u76844-\u7ed3\u70b9 if (!isRed(h.left.left)){ h = rotateRight(h); } return h; } void deleteMax() { if (!isRed(root.left) !isRed(root.right)){ root.color = RED; } root = deleteMax(root); if (!isEmpty()){ root.color = BLACK; } } private Node deleteMax(Node h){ //\u5c06\u4e3a\u7ea2\u8272\u7684\u5de6\u6839\u7ed3\u70b9\u76f4\u63a5\u8f6c\u5230\u53f3\u8fb9\u6765 if (isRed(h.left)){ h = rotateRight(h); } //\u5220\u9664\u6700\u5927\u7ed3\u70b9 if (h.right == null){ return null; } //h\u7684\u53f3\u5b50\u7ed3\u70b9\u662f\u9ed1\u8272\u7ed3\u70b9\uff0c\u5e76\u4e14\u53f3\u5b50\u6811\u4e0d\u662f3-\u7ed3\u70b9\u3002 //\u56e0\u4e3a\u7b2c\u4e00\u6b65\u5df2\u7ecf\u76f4\u63a5\u628a\u4e3a\u7ea2\u8272\u7684\u5de6\u6839\u7ed3\u70b9\u8f6c\u5230\u53f3\u8fb9\uff0c\u4fdd\u8bc1\u4e86\u6b64\u53f3\u6811\u662f\u53f3\u8fb9\u76843-\u7ed3\u70b9\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u518d\u8fdb\u884c\u53d8\u5e7b\uff0c\u8981\u5c06\u5176\u8fc7\u6ee4 if (!isRed(h.right) !isRed(h.right.left)){ h = moveRedRight(h); } //\u5411\u4e0b\u5220\u9664\u7ed3\u70b9 h.right = deleteMax(h.right); //\u5411\u4e0a\u5e73\u8861\u4e8c\u53c9\u6811 return balance(h); }","title":"\u5220\u9664\u6700\u5927\u7684\u952e\u503c\u5bf9"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_8","text":"\u5c06\u5220\u9664\u6700\u5c0f\u503c\u548c\u6700\u5927\u503c\u7ed3\u5408\u8d77\u6765\u5b8c\u6210\u5220\u9664\u64cd\u4f5c\u3002 void delete(K k) { if(!isRed(root.left) !isRed(root.right)){ root.color = RED; } root = delete(root, k); if (!isEmpty()){ root.color = BLACK; } } private Node delete(Node h, K k){ //\u5728\u5de6\u5b50\u6811\u4e2d if (k.compareTo(h.k) 0){ if (!isRed(h.left) !isRed(h.left.left)){ h = moveRedLeft(h); } h.left = delete(h.left, k); } //\u627e\u5230\u4e86\u8be5\u7ed3\u70b9\u6216\u5728\u53f3\u5b50\u6811\u4e2d else { if (isRed(h.left)){ h = rotateRight(h); } //\u627e\u5230\u8be5\u7ed3\u70b9\uff0c\u5e76\u4e14\u53f3\u5b50\u6811\u4e3a\u7a7a\uff0c\u65e0\u9700\u8c03\u6574\u7ed3\u6784\uff0c\u5220\u9664\u8be5\u7ed3\u70b9 if (k.compareTo(h.k) == 0 (h.right == null)){ return null; } //\u53f3\u5b50\u6811\u662f2-\u7ed3\u70b9\uff0c\u8f6c\u5316\u4e3a\u53f3\u8fb9\u76844-\u62163-\u7ed3\u70b9 if (!isRed(h.right) !isRed(h.right.left)){ h = moveRedRight(h); } //\u627e\u5230\u4e86\u8be5\u7ed3\u70b9\uff0c\u4f46\u662f\u53f3\u5b50\u6811\u4e0d\u4e3a\u7a7a\uff0c\u6240\u4ee5\u9700\u8981\u8c03\u6574\u7ed3\u6784\uff1b\u4e0e\u4e8c\u53c9\u6811\u7684\u5220\u9664\u65b9\u6cd5\u7c7b\u4f3c if (k.compareTo(h.k) == 0){ h.v = get(h.right, min(h.right).k); h.k = min(h.right).k; h.right = deleteMin(h.right); } //\u8be5\u7ed3\u70b9\u5728\u53f3\u5b50\u6811\u4e2d else { h.right = delete(h.right, k); } } return balance(h); }","title":"\u5220\u9664\u64cd\u4f5c"},{"location":"datastruct/\u7ea2\u9ed1\u6811/#_9","text":"\u5bf9\u4e8e\u5176\u5b83\u65b9\u6cd5\uff0c\u56e0\u4e3a\u4e0d\u4f1a\u6d89\u53ca\u5230\u989c\u8272\u8f6c\u6362\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e8c\u53c9\u6811\u7684\u65b9\u6cd5\u3002","title":"\u5176\u5b83\u65b9\u6cd5"},{"location":"gerrit/Apache\u4ee3\u7406\u6dfb\u52a0\u65b0\u7528\u6237/","text":"\u65b0\u5efa\u7528\u6237 htpasswd -bc /etc/httpd/passwords user1 passwd1 \u6dfb\u52a0\u7528\u6237 htpasswd -b /etc/httpd/passwords user2 passwd2","title":"Apache\u4ee3\u7406\u6dfb\u52a0\u65b0\u7528\u6237"},{"location":"gerrit/Gerrit submit change after abandoning its parent/","text":"There is a few options and it depends if you want to include the changes of patchset-1. You only want the changes from patchset-2? Checkout master and cherry-pick patchset-2, commit -amend and push again You want to include changes from patchset-1 and 2? In this case you may want to combine the two patchsets, easiest is to do a git reset HEAD~2 and commit again, don't forget to copy the Change-ID of your last commit to be able to continue that review change A\u88ab\u5e9f\u5f03\uff0cchange B\u62a5\u9519 \u53ea\u60f3\u8981B\uff1a \u5207\u6362\u5230\u5176\u4ed6\u5206\u652f\uff0c\u4fee\u6539\u4ee3\u7801\uff0c\u63d0\u4ea4\u5230\u76ee\u6807\u5206\u652f cherry-pick A B\u90fd\u8981\uff1a git reset HEAD^^ \u518d\u6b21\u63d0\u4ea4\uff0c\u590d\u5236\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u7684Change-ID\u4ee5\u4fbf\u4e8e\u53ef\u4ee5\u7ee7\u7eed\u7ed9gerrit \u8fdb\u884c\u4ee3\u7801\u5ba1\u67e5\u3002","title":"Gerrit submit change after abandoning its parent"},{"location":"gerrit/Gerrit submit change after abandoning its parent/#b","text":"\u5207\u6362\u5230\u5176\u4ed6\u5206\u652f\uff0c\u4fee\u6539\u4ee3\u7801\uff0c\u63d0\u4ea4\u5230\u76ee\u6807\u5206\u652f cherry-pick","title":"\u53ea\u60f3\u8981B\uff1a"},{"location":"gerrit/Gerrit submit change after abandoning its parent/#a-b","text":"git reset HEAD^^ \u518d\u6b21\u63d0\u4ea4\uff0c\u590d\u5236\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u7684Change-ID\u4ee5\u4fbf\u4e8e\u53ef\u4ee5\u7ee7\u7eed\u7ed9gerrit \u8fdb\u884c\u4ee3\u7801\u5ba1\u67e5\u3002","title":"A B\u90fd\u8981\uff1a"},{"location":"gerrit/\u4f7f\u7528Apache\u4ee3\u7406\u8def\u5f84\u9519\u8bef/","text":"\u4f7f\u7528Apache\u4ee3\u7406gerrit\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528test/test\u8fd9\u79cd\u5e26\u6709\u2018/\u2019\u7684\u8def\u5f84\u4f1a\u6709404\u9519\u8bef\u3002 \u5728 /etc/httpd/config.d/gerrit.config \u4fee\u6539\u5982\u4e0b\uff1a AllowEncodedSlashes On ProxyPass / http://192.168.216.12:8082/ nocanon Nocanon\u4f1a\u7981\u6b62\u5b57\u7b26\u8f6c\u4e49\uff0c\u76f4\u63a5\u4f20\u9012\u7ed9\u540e\u53f0","title":"\u4f7f\u7528Apache\u4ee3\u7406\u8def\u5f84\u9519\u8bef"},{"location":"gerrit/\u5237\u65b0gerrit\u9879\u76ee\u5217\u8868/","text":"\u628a\u670d\u52a1\u5668\u7684id_rsa.pub\u52a0\u5165\u5230admin\u7528\u6237\u4e2d ssh -p 29418 admin@localhost gerrit flush-caches --cache project_list \u6216\u8005\u91cd\u542fgerrit\u670d\u52a1","title":"\u5237\u65b0gerrit\u9879\u76ee\u5217\u8868"},{"location":"git/git rebase(\u4fee\u6539\u5386\u53f2\u63d0\u4ea4)/","text":"\u6709\u6587\u4ef6\u4fee\u6539 \u6b63\u5e38\u6d41\u7a0b git rebase -i 68598f1d65da0dd3de283cf5ac04bbf17b58d1a1 \u4fee\u6539\u6587\u4ef6 git add . git commit --amend git rebase --continue \u6587\u4ef6\u51b2\u7a81 git rebase -i 48a55705063291c68208880bbcc7581e3c2e5074 \u4fee\u6539\u6587\u4ef6 git add . git rebase --continue \u89e3\u51b3\u51b2\u7a81 git add . git rebase \u2013continue taps :\u5fd8\u8bb0\u4e86\u6d41\u7a0b\u3002\u3002\u3002 \u5408\u5e76\u5386\u53f2\u63d0\u4ea4 \u5148\u5230\u60f3\u8981\u5408\u5e76\u7684\u63d0\u4ea4\u4e2d\u6700\u65e9\u7684\u4e00\u6b21 git rebase -i 48a55705063291c68208880bbcc7581e3c2e5074 \u6216 git rebase -i HEAD~2 \u7b2c\u4e00\u5217\u662frebase\u5177\u4f53\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u5176\u4e2d\u64cd\u4f5c\u53ef\u4ee5\u9009\u62e9\uff0c\u5176\u4e2d\u542b\u4e49\u5982\u4e0b\uff1a \u9009\u62e9pick\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4ee5\u540c\u6837\u7684\u63d0\u4ea4\u4fe1\u606f\uff08commit message\uff09\u4fdd\u5b58\u63d0\u4ea4 \u9009\u62e9reword\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4f46\u9700\u8981\u91cd\u65b0\u7f16\u8f91\u63d0\u4ea4\u4fe1\u606f \u9009\u62e9edit\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4f46\u4f1a\u56e0\u4e3aamending\u800c\u7ec8\u6b62 \u9009\u62e9squash\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4f46\u4f1a\u4e0e\u4e4b\u524d\u7684\u63d0\u4ea4\u5408\u5e76 \u9009\u62e9fixup\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4f46\u4f1a\u4e22\u6389\u63d0\u4ea4\u65e5\u5fd7 \u9009\u62e9exec\u64cd\u4f5c\uff0cgit\u4f1a\u5728shell\u4e2d\u8fd0\u884c\u8fd9\u4e2a\u547d\u4ee4 \u6839\u636e\u4e0a\u8ff0\u7684\u63d0\u793a\u5c06\u60f3\u8981\u5408\u5e76\u7684\u63d0\u4ea4\u6539\u53d8\u5176\u64cd\u4f5c\uff0c\u4fdd\u5b58\u4e4b\u540e\u4f1a\u63d0\u793a\u4fee\u6539\u540e\u7684\u4fe1\u606f\uff0c\u5982\u679c\u9700\u8981\u53ef\u4ee5\u518d\u6b21\u66f4\u6539\u63d0\u4ea4\u4fe1\u606f\u3002\u4e0b\u9762\u7684\u8865\u4e01\u4f1a\u5e94\u7528\u5230\u4e0a\u9762\u7684pick\u63d0\u4ea4\u3002","title":"git rebase(\u4fee\u6539\u5386\u53f2\u63d0\u4ea4)"},{"location":"git/git rebase(\u4fee\u6539\u5386\u53f2\u63d0\u4ea4)/#_1","text":"","title":"\u6709\u6587\u4ef6\u4fee\u6539"},{"location":"git/git rebase(\u4fee\u6539\u5386\u53f2\u63d0\u4ea4)/#_2","text":"git rebase -i 68598f1d65da0dd3de283cf5ac04bbf17b58d1a1 \u4fee\u6539\u6587\u4ef6 git add . git commit --amend git rebase --continue","title":"\u6b63\u5e38\u6d41\u7a0b"},{"location":"git/git rebase(\u4fee\u6539\u5386\u53f2\u63d0\u4ea4)/#_3","text":"git rebase -i 48a55705063291c68208880bbcc7581e3c2e5074 \u4fee\u6539\u6587\u4ef6 git add . git rebase --continue \u89e3\u51b3\u51b2\u7a81 git add . git rebase \u2013continue taps :\u5fd8\u8bb0\u4e86\u6d41\u7a0b\u3002\u3002\u3002","title":"\u6587\u4ef6\u51b2\u7a81"},{"location":"git/git rebase(\u4fee\u6539\u5386\u53f2\u63d0\u4ea4)/#_4","text":"\u5148\u5230\u60f3\u8981\u5408\u5e76\u7684\u63d0\u4ea4\u4e2d\u6700\u65e9\u7684\u4e00\u6b21 git rebase -i 48a55705063291c68208880bbcc7581e3c2e5074 \u6216 git rebase -i HEAD~2 \u7b2c\u4e00\u5217\u662frebase\u5177\u4f53\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u5176\u4e2d\u64cd\u4f5c\u53ef\u4ee5\u9009\u62e9\uff0c\u5176\u4e2d\u542b\u4e49\u5982\u4e0b\uff1a \u9009\u62e9pick\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4ee5\u540c\u6837\u7684\u63d0\u4ea4\u4fe1\u606f\uff08commit message\uff09\u4fdd\u5b58\u63d0\u4ea4 \u9009\u62e9reword\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4f46\u9700\u8981\u91cd\u65b0\u7f16\u8f91\u63d0\u4ea4\u4fe1\u606f \u9009\u62e9edit\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4f46\u4f1a\u56e0\u4e3aamending\u800c\u7ec8\u6b62 \u9009\u62e9squash\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4f46\u4f1a\u4e0e\u4e4b\u524d\u7684\u63d0\u4ea4\u5408\u5e76 \u9009\u62e9fixup\u64cd\u4f5c\uff0cgit\u4f1a\u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\uff0c\u4f46\u4f1a\u4e22\u6389\u63d0\u4ea4\u65e5\u5fd7 \u9009\u62e9exec\u64cd\u4f5c\uff0cgit\u4f1a\u5728shell\u4e2d\u8fd0\u884c\u8fd9\u4e2a\u547d\u4ee4 \u6839\u636e\u4e0a\u8ff0\u7684\u63d0\u793a\u5c06\u60f3\u8981\u5408\u5e76\u7684\u63d0\u4ea4\u6539\u53d8\u5176\u64cd\u4f5c\uff0c\u4fdd\u5b58\u4e4b\u540e\u4f1a\u63d0\u793a\u4fee\u6539\u540e\u7684\u4fe1\u606f\uff0c\u5982\u679c\u9700\u8981\u53ef\u4ee5\u518d\u6b21\u66f4\u6539\u63d0\u4ea4\u4fe1\u606f\u3002\u4e0b\u9762\u7684\u8865\u4e01\u4f1a\u5e94\u7528\u5230\u4e0a\u9762\u7684pick\u63d0\u4ea4\u3002","title":"\u5408\u5e76\u5386\u53f2\u63d0\u4ea4"},{"location":"git/windows\u65e0\u6cd5\u4f7f\u7528git\u514b\u9686/","text":"vi ~/.ssh/config Host *.*.*.* KexAlgorithms +diffie-hellman-group1-sha1","title":"windows\u65e0\u6cd5\u4f7f\u7528git\u514b\u9686"},{"location":"gluster/gluster\u5b89\u88c5/","text":"\u5b89\u88c5 \u5148\u5b89\u88c5yum\u6e90\uff0c\u8fd9\u662f\u6700\u65b0\u7248\u672c\uff1bcentos\u7684\u5e93\u4e0d\u662f\u6700\u65b0\u7248\uff0c\u5982\u679c\u7248\u672c\u4e0d\u5339\u914d\u4f1a\u9020\u6210\u6302\u8f7d\u5931\u8d25 yum install centos-release-gluster centos\u5feb\u901f\u5b89\u88c5\uff1a https://wiki.centos.org/SpecialInterestGroup/Storage/gluster-Quickstart \u5feb\u901f\u4f7f\u7528\uff1a https://gluster.readthedocs.io/en/latest/Quick-Start-Guide/Quickstart/ \u670d\u52a1\u7aef\uff1a yum install glusterfs-server \u5ba2\u6237\u7aef\uff1a # \u6302\u8f7dfuse\u6a21\u5757 modprobe fuse dmesg | grep -i fuse yum install -y centos-release-gluster sudo yum -y install openssh-server wget fuse fuse-libs openib libibverbs yum install -y glusterfs glusterfs-fuse glusterfs-rdma vi /etc/hosts # \u6dfb\u52a0\u6240\u6709\u7684\u670d\u52a1\u5668\uff0c\u5305\u62ec\u81ea\u5df1 mount\u3002\u3002\u3002\u3002 \u6570\u636e\u4e00\u81f4\u6027 \u670d\u52a1\u7aef\u7684Quorum cluster.server-quorum-ratio\uff1a0-100 \u4f9d\u636e\u7ed3\u70b9\u6570\u91cf = cluster.server-quorum-type\uff1anone | server \u4e00\u65e6\u5931\u53bb\u4e86\u4e00\u81f4\u6027\uff0c\u4e0d\u53ef\u5199\u4e5f\u4e0d\u53ef\u8bfb \u4e00\u4e2avolume\u4e0d\u6ee1\u8db3quorum\u65f6\uff0c\u4efb\u4f55\u66f4\u65b0volume\u914d\u7f6e\u548c\u96c6\u7fa4\u7684\u589e\u5220\u64cd\u4f5c\u90fd\u4e0d\u80fd\u6267\u884c glusterd\u670d\u52a1\u505c\u6b62\u6216\u8005\u7f51\u7edc\u65ad\u5f00\u4f1a\u88ab\u540c\u7b49\u5bf9\u5f85 \u5ba2\u6237\u7aef\u7684Quorum \u5728 replicated volume brick=2\u7684\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5c06quorum-count = 2 \u624d\u80fd\u9884\u9632\u8111\u88c2 cluster.quorum-type\uff1anone|auto|fixed auto\uff1a\u5728\u7ebfbrick\u6570\u91cf =\u603b\u7684brick\u6570\u91cf/2;fixed\u4e0equorum-count\u914d\u5408\u4f7f\u7528 cluster.quorum-count\uff1a \u4e0ecluster.quorum-type =fixed\u914d\u5408\u4f7f\u7528\uff0c\u6ee1\u8db3\u6b64\u6570\u91cf\u7684brick\u5728\u7ebf\u65f6\u624d\u5141\u8bb8\u8fdb\u884c\u5199\u64cd\u4f5c\uff1b\u5982\u679c cluster.quorum-type =auto\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9650\u5b9a\u4e0d\u8d77\u4f5c\u7528 cluster.quorum-reads\uff1ayes|no yes\u65f6\u6ee1\u8db3\u6570\u91cf\u7684brick\u5728\u7ebf\u624d\u53ef\u8bfb\u53d6 \u5982\u679c\u53ea\u6709\u4e24\u4e2a replica brick \u5e76\u4e14\u60f3\u8981\u9ad8\u53ef\u7528\u6027\uff0c\u5c31\u4e0d\u7528\u542f\u7528client-quorum \u8111\u88c2\u7684\u9884\u9632\u53ca\u6062\u590d\uff1a https://access.redhat.com/documentation/en-us/red_hat_gluster_storage/3.3/html/administration_guide/sect-Managing_Split-brain#chap-Managing_Red_Hat_Storage_Volumes-splibrain_mount_point taps :\u6700\u4f18\u7684disperse volume \u6027\u80fd\u6700\u4f73\uff1a \uff08bricks - redundancy\uff09 \u4e3a2\u7684\u5e42","title":"gluster\u5b89\u88c5"},{"location":"gluster/gluster\u5b89\u88c5/#_1","text":"\u5148\u5b89\u88c5yum\u6e90\uff0c\u8fd9\u662f\u6700\u65b0\u7248\u672c\uff1bcentos\u7684\u5e93\u4e0d\u662f\u6700\u65b0\u7248\uff0c\u5982\u679c\u7248\u672c\u4e0d\u5339\u914d\u4f1a\u9020\u6210\u6302\u8f7d\u5931\u8d25 yum install centos-release-gluster centos\u5feb\u901f\u5b89\u88c5\uff1a https://wiki.centos.org/SpecialInterestGroup/Storage/gluster-Quickstart \u5feb\u901f\u4f7f\u7528\uff1a https://gluster.readthedocs.io/en/latest/Quick-Start-Guide/Quickstart/ \u670d\u52a1\u7aef\uff1a yum install glusterfs-server \u5ba2\u6237\u7aef\uff1a # \u6302\u8f7dfuse\u6a21\u5757 modprobe fuse dmesg | grep -i fuse yum install -y centos-release-gluster sudo yum -y install openssh-server wget fuse fuse-libs openib libibverbs yum install -y glusterfs glusterfs-fuse glusterfs-rdma vi /etc/hosts # \u6dfb\u52a0\u6240\u6709\u7684\u670d\u52a1\u5668\uff0c\u5305\u62ec\u81ea\u5df1 mount\u3002\u3002\u3002\u3002","title":"\u5b89\u88c5"},{"location":"gluster/gluster\u5b89\u88c5/#_2","text":"","title":"\u6570\u636e\u4e00\u81f4\u6027"},{"location":"gluster/gluster\u5b89\u88c5/#quorum","text":"cluster.server-quorum-ratio\uff1a0-100 \u4f9d\u636e\u7ed3\u70b9\u6570\u91cf = cluster.server-quorum-type\uff1anone | server \u4e00\u65e6\u5931\u53bb\u4e86\u4e00\u81f4\u6027\uff0c\u4e0d\u53ef\u5199\u4e5f\u4e0d\u53ef\u8bfb \u4e00\u4e2avolume\u4e0d\u6ee1\u8db3quorum\u65f6\uff0c\u4efb\u4f55\u66f4\u65b0volume\u914d\u7f6e\u548c\u96c6\u7fa4\u7684\u589e\u5220\u64cd\u4f5c\u90fd\u4e0d\u80fd\u6267\u884c glusterd\u670d\u52a1\u505c\u6b62\u6216\u8005\u7f51\u7edc\u65ad\u5f00\u4f1a\u88ab\u540c\u7b49\u5bf9\u5f85","title":"\u670d\u52a1\u7aef\u7684Quorum"},{"location":"gluster/gluster\u5b89\u88c5/#quorum_1","text":"\u5728 replicated volume brick=2\u7684\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5c06quorum-count = 2 \u624d\u80fd\u9884\u9632\u8111\u88c2 cluster.quorum-type\uff1anone|auto|fixed auto\uff1a\u5728\u7ebfbrick\u6570\u91cf =\u603b\u7684brick\u6570\u91cf/2;fixed\u4e0equorum-count\u914d\u5408\u4f7f\u7528 cluster.quorum-count\uff1a \u4e0ecluster.quorum-type =fixed\u914d\u5408\u4f7f\u7528\uff0c\u6ee1\u8db3\u6b64\u6570\u91cf\u7684brick\u5728\u7ebf\u65f6\u624d\u5141\u8bb8\u8fdb\u884c\u5199\u64cd\u4f5c\uff1b\u5982\u679c cluster.quorum-type =auto\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9650\u5b9a\u4e0d\u8d77\u4f5c\u7528 cluster.quorum-reads\uff1ayes|no yes\u65f6\u6ee1\u8db3\u6570\u91cf\u7684brick\u5728\u7ebf\u624d\u53ef\u8bfb\u53d6 \u5982\u679c\u53ea\u6709\u4e24\u4e2a replica brick \u5e76\u4e14\u60f3\u8981\u9ad8\u53ef\u7528\u6027\uff0c\u5c31\u4e0d\u7528\u542f\u7528client-quorum","title":"\u5ba2\u6237\u7aef\u7684Quorum"},{"location":"gluster/gluster\u5b89\u88c5/#_3","text":"https://access.redhat.com/documentation/en-us/red_hat_gluster_storage/3.3/html/administration_guide/sect-Managing_Split-brain#chap-Managing_Red_Hat_Storage_Volumes-splibrain_mount_point taps :\u6700\u4f18\u7684disperse volume \u6027\u80fd\u6700\u4f73\uff1a \uff08bricks - redundancy\uff09 \u4e3a2\u7684\u5e42","title":"\u8111\u88c2\u7684\u9884\u9632\u53ca\u6062\u590d\uff1a"},{"location":"gluster/ovirt\u7684gluster\u6570\u636e\u6062\u590dbug/","text":"distributed-replicated volume\u7c7b\u578b\uff1a \u5220\u9664\u4e00\u4e2abrick\uff0c\u53ef\u80fd\u4f1a\u81ea\u52a8\u65b0\u5efa\u88ab\u5220\u9664\u7684brick\uff0c\u9020\u6210\u6240\u6709\u7684brick\u7684\u6743\u9650\u6539\u53d8\uff0c\u9020\u6210\u6240\u6709\u7684\u5b58\u50a8\u57df\u5931\u6548\u3002\u6b64\u65f6\u9700\u8981\u624b\u52a8\u4fee\u6539\u6240\u6709brick\u7684\u6743\u9650\uff1achmod a+xr bricks \u4e3b\u673a\u627e\u4e0d\u5230\u4e3b\u5b58\u50a8\u57df\u6216\u8005\u6302\u8f7d\u70b9\u6709\u95ee\u9898\uff1a \u91cd\u542f\u4e3b\u673a","title":"ovirt\u7684gluster\u6570\u636e\u6062\u590dbug"},{"location":"gluster/\u6e05\u7406\u4e0d\u53ef\u7528\u7684brick/","text":"mkfs.xfs -f -i size=512 device \u683c\u5f0f\u5316\u78c1\u76d8 \u5982\u679cbrick\u4e0d\u80fd\u88ab\u683c\u5f0f\u5316\uff0c\u6216\u8005\u4e0d\u80fd\u8be5\u6587\u4ef6\u5939\u4e0d\u80fd\u88ab\u79fb\u9664\uff0c\u6267\u884c\u4e0b\u9762\u7684\u6b65\u9aa4 \u5220\u9664brick\u4e0b\u9762\u6240\u6709\u7684\u6570\u636e\uff0c\u5305\u62ec.glusterfs Run # setfattr -x trusted.glusterfs.volume-id brick and # setfattr -x trusted.gfid brick to remove the attributes from the root of the brick. Run # getfattr -d -m . brick to examine the attributes set on the volume. Take note of the attributes. Run # setfattr -x attribute brick to remove the attributes relating to the glusterFS file system.","title":"\u6e05\u7406\u4e0d\u53ef\u7528\u7684brick"},{"location":"gluster/\u7ed3\u70b9\u6545\u969c/","text":"\u5728\u6545\u969c\u7ed3\u70b9\u4e0a\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4 Stop glusterd In /var/lib/glusterd, delete everything except glusterd.info (the UUID file) Start glusterd Probe one of the good peers Restart glusterd, check 'gluster peer status' taps :You may need to restart glusterd another time or two, keep checking peer status.","title":"\u7ed3\u70b9\u6545\u969c"},{"location":"java/\u4f5c\u7528\u8303\u56f4\u7ea7\u522b/","text":"\u8bbf\u95ee\u63a7\u5236\u7b26 protected\u3001private\u4e0d\u80fd\u4fee\u9970\u7c7b\uff0c\u9664\u4e86\u5185\u90e8\u7c7b\u3002 \u8bbf\u95ee\u63a7\u5236\u53ea\u505c\u7559\u5728\u7f16\u8bd1\u5c42\u9762\uff0c\u5e76\u6ca1\u6709\u771f\u6b63\u7684\u8bbf\u95ee\u63a7\u5236\u6743\u9650\uff0c\u53ef\u4ee5\u901a\u8fc7\u53cd\u5c04\u7b49\u624b\u6bb5\u4fee\u6539\u3002","title":"\u4f5c\u7528\u8303\u56f4\u7ea7\u522b"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/socket\u901a\u4fe1\u6d41\u7a0b/","text":"\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u51fd\u6570\u8c03\u7528\u6d41\u7a0b \u5ba2\u6237\u7aef\u53ef\u4ee5\u4e0d\u5199bind()\u51fd\u6570\u3002","title":"socket\u901a\u4fe1\u6d41\u7a0b"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/","text":"\u7f51\u7edc\u5b57\u8282\u5e8f\u4e0e\u4e3b\u673a\u5b57\u8282\u5e8f\u7684\u8f6c\u6362\u51fd\u6570 \u8fd9\u4e9b\u51fd\u6570\u53ef\u901a\u8fc7 man \u51fd\u6570\u540d \u67e5\u770b #include arpa/inet.h uint32_t htonl(uint32_t hostlong); uint16_t htons(uint16_t hostshort); uint32_t ntohl(uint32_t netlong); uint16_t ntohs(uint16_t netshort); h \u8868\u793a\u4e3b\u673a\uff0c n \u8868\u793a\u7f51\u7edc\uff1b l \u8868\u793along\uff0c\u5373ip\u5730\u5740\uff1b s \u8868\u793ashort\uff0c\u7aef\u53e3\u53f7\u3002 \u4e00\u6b65\u5230\u4f4d\uff1a #include arpa/inet.h //\u628a\u70b9\u5206\u5341\u8fdb\u5236\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684ip\u5730\u5740\u8f6c\u6362\u4e3a\u5b57\u8282\u5e8f\u683c\u5f0f\uff1a int inet_pton(int af, const char *src, void *dst); //\u8fd9\u4e2a\u51fd\u6570\u5219\u76f8\u53cd\uff1a const char *inet_ntop(int af, const void *src, char *dst, socklen_t size); \u53c2\u6570\u8bf4\u660e\uff1a af: AF_INET\uff08ipv4\uff09\u3001AF_INET6\uff08ipv6\uff09 src\uff1a \u6e90\u5730\u5740 dst: \u8f6c\u6362\u540e\u7684\u5b57\u8282\u5e8f sockaddr\u6570\u636e\u7ed3\u6784 sockaddr\u662f\u8001\u7248\u672c\u7684\u7ed3\u6784\u4f53\uff0csockaddr_in\u662f\u65b0\u7248\u672c\u7684\u7ed3\u6784\u4f53\uff0c\u6784\u9020\u53c2\u6570\u7684\u65f6\u5019\u4f7f\u7528 sockaddr_in \uff0c\u4f20\u53c2\u7684\u65f6\u5019\u5f3a\u8f6c\u4e3a sockaddr \u3002 sockaddr_in\u7684\u7ed3\u6784\u4f53\uff0c\u53ef\u901a\u8fc7 man 7 ip \u67e5\u770b struct sockaddr_in { sa_family_t sin_family; /* address family: AF_INET */ in_port_t sin_port; /* port in network byte order */ struct in_addr sin_addr; /* internet address */ }; /* Internet address. */ struct in_addr { uint32_t s_addr; /* address in network byte order */ }; \u53c2\u6570\u8bf4\u660e\uff1a sin_family\uff1a ip\u5730\u5740\u534f\u8bae\u7c07 sin_port\uff1a \u7aef\u53e3\u53f7\uff0c\u901a\u8fc7\u5b57\u8282\u5e8f\u8f6c\u6362\u51fd\u6570\u8f6c\u5316 sin_addr\uff1aip\u5730\u5740\uff0c\u901a\u8fc7\u5b57\u8282\u5e8f\u8f6c\u6362\u51fd\u6570\u8f6c\u5316 \u51fd\u6570 \u5957\u63a5\u5b57\u521b\u5efa\u51fd\u6570 #include sys/types.h /* See NOTES */ #include sys/socket.h int socket(int domain, int type, int protocol); \u53c2\u6570\u8bf4\u660e\uff1a domain\uff1a \u534f\u8bae\u7c07\u3002AF_INET\u3001AF_UNIX\u7b49 type\uff1a \u7c7b\u578b\u3002SOCK_STREAM\uff08\u6d41\u5f0f\u534f\u8bae\uff09\u3001SOCK_DGRAM\uff08\u62a5\u5f0f\u534f\u8bae\uff09\u7b49 protocol\uff1a \u6307\u5b9a\u7684\u534f\u8bae\uff0c\u901a\u5e38\u4f7f\u75280\u8868\u793a\u9ed8\u8ba4\u534f\u8bae\u3002TCP\u3001UDP\u7b49 \u8fd4\u56de\u503c\uff1a \u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5931\u8d25\u8fd4\u56de-1\uff0c\u8bbe\u7f6eerrorno bind\u51fd\u6570 int bind(int socket, const struct sockaddr *address, socklen_t address_len); \u53c2\u6570\u8bf4\u660e\uff1a socket\uff1a socket\u6587\u4ef6\u63cf\u8ff0\u7b26 address\uff1a \u7ed1\u5b9a\u7684ip\u548c\u7aef\u53e3\u53f7 address_len\uff1a address\u7ed3\u6784\u4f53\u7684\u957f\u5ea6 listen\u51fd\u6570 \u6307\u5b9a\u540c\u65f6\u5efa\u7acb\u7684\u8fde\u63a5\u7684\u6700\u5927\u6570\u91cf\uff0c\u4e0d\u662f\u76d1\u542c\uff01\uff01\uff01 \u540c\u65f6\u5efa\u7acb\u8fde\u63a5\u7684\u8fde\u63a5\u3002 #include sys/types.h /* See NOTES */ #include sys/socket.h int listen(int sockfd, int backlog); \u53c2\u6570\u8bf4\u660e\uff1a backlog: \u6570\u91cf accept\u51fd\u6570 \u63a5\u6536\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5 #include sys/types.h /* See NOTES */ #include sys/socket.h int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen); \u53c2\u6570\u8bf4\u660e\uff1a addr\uff1a \u4f20\u51fa\u53c2\u6570\uff0c\u8c03\u7528\u540e\u4f1a\u5b58\u5165\u5ba2\u6237\u7aef\u7684\u5730\u5740 addrlen\uff1a \u4f20\u5165\u4f20\u51fa\u53c2\u6570 \u8fd4\u56de\u503c\uff1a \u65b0\u7684 socket\u6587\u4ef6\u63cf\u8ff0\u7b26 connect\u51fd\u6570 #include sys/types.h /* See NOTES */ #include sys/socket.h int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen); \u53c2\u6570\u8bf4\u660e\uff1a sockfd\uff1a\u5ba2\u6237\u7aef\u7684socket addr\uff1a \u670d\u52a1\u5668\u7684\u5730\u5740 addrlen\uff1a \u957f\u5ea6","title":"\u51fd\u6570"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#_1","text":"\u8fd9\u4e9b\u51fd\u6570\u53ef\u901a\u8fc7 man \u51fd\u6570\u540d \u67e5\u770b #include arpa/inet.h uint32_t htonl(uint32_t hostlong); uint16_t htons(uint16_t hostshort); uint32_t ntohl(uint32_t netlong); uint16_t ntohs(uint16_t netshort); h \u8868\u793a\u4e3b\u673a\uff0c n \u8868\u793a\u7f51\u7edc\uff1b l \u8868\u793along\uff0c\u5373ip\u5730\u5740\uff1b s \u8868\u793ashort\uff0c\u7aef\u53e3\u53f7\u3002","title":"\u7f51\u7edc\u5b57\u8282\u5e8f\u4e0e\u4e3b\u673a\u5b57\u8282\u5e8f\u7684\u8f6c\u6362\u51fd\u6570"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#_2","text":"#include arpa/inet.h //\u628a\u70b9\u5206\u5341\u8fdb\u5236\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684ip\u5730\u5740\u8f6c\u6362\u4e3a\u5b57\u8282\u5e8f\u683c\u5f0f\uff1a int inet_pton(int af, const char *src, void *dst); //\u8fd9\u4e2a\u51fd\u6570\u5219\u76f8\u53cd\uff1a const char *inet_ntop(int af, const void *src, char *dst, socklen_t size); \u53c2\u6570\u8bf4\u660e\uff1a af: AF_INET\uff08ipv4\uff09\u3001AF_INET6\uff08ipv6\uff09 src\uff1a \u6e90\u5730\u5740 dst: \u8f6c\u6362\u540e\u7684\u5b57\u8282\u5e8f","title":"\u4e00\u6b65\u5230\u4f4d\uff1a"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#sockaddr","text":"sockaddr\u662f\u8001\u7248\u672c\u7684\u7ed3\u6784\u4f53\uff0csockaddr_in\u662f\u65b0\u7248\u672c\u7684\u7ed3\u6784\u4f53\uff0c\u6784\u9020\u53c2\u6570\u7684\u65f6\u5019\u4f7f\u7528 sockaddr_in \uff0c\u4f20\u53c2\u7684\u65f6\u5019\u5f3a\u8f6c\u4e3a sockaddr \u3002 sockaddr_in\u7684\u7ed3\u6784\u4f53\uff0c\u53ef\u901a\u8fc7 man 7 ip \u67e5\u770b struct sockaddr_in { sa_family_t sin_family; /* address family: AF_INET */ in_port_t sin_port; /* port in network byte order */ struct in_addr sin_addr; /* internet address */ }; /* Internet address. */ struct in_addr { uint32_t s_addr; /* address in network byte order */ }; \u53c2\u6570\u8bf4\u660e\uff1a sin_family\uff1a ip\u5730\u5740\u534f\u8bae\u7c07 sin_port\uff1a \u7aef\u53e3\u53f7\uff0c\u901a\u8fc7\u5b57\u8282\u5e8f\u8f6c\u6362\u51fd\u6570\u8f6c\u5316 sin_addr\uff1aip\u5730\u5740\uff0c\u901a\u8fc7\u5b57\u8282\u5e8f\u8f6c\u6362\u51fd\u6570\u8f6c\u5316","title":"sockaddr\u6570\u636e\u7ed3\u6784"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#_3","text":"","title":"\u51fd\u6570"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#_4","text":"#include sys/types.h /* See NOTES */ #include sys/socket.h int socket(int domain, int type, int protocol); \u53c2\u6570\u8bf4\u660e\uff1a domain\uff1a \u534f\u8bae\u7c07\u3002AF_INET\u3001AF_UNIX\u7b49 type\uff1a \u7c7b\u578b\u3002SOCK_STREAM\uff08\u6d41\u5f0f\u534f\u8bae\uff09\u3001SOCK_DGRAM\uff08\u62a5\u5f0f\u534f\u8bae\uff09\u7b49 protocol\uff1a \u6307\u5b9a\u7684\u534f\u8bae\uff0c\u901a\u5e38\u4f7f\u75280\u8868\u793a\u9ed8\u8ba4\u534f\u8bae\u3002TCP\u3001UDP\u7b49 \u8fd4\u56de\u503c\uff1a \u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5931\u8d25\u8fd4\u56de-1\uff0c\u8bbe\u7f6eerrorno","title":"\u5957\u63a5\u5b57\u521b\u5efa\u51fd\u6570"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#bind","text":"int bind(int socket, const struct sockaddr *address, socklen_t address_len); \u53c2\u6570\u8bf4\u660e\uff1a socket\uff1a socket\u6587\u4ef6\u63cf\u8ff0\u7b26 address\uff1a \u7ed1\u5b9a\u7684ip\u548c\u7aef\u53e3\u53f7 address_len\uff1a address\u7ed3\u6784\u4f53\u7684\u957f\u5ea6","title":"bind\u51fd\u6570"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#listen","text":"\u6307\u5b9a\u540c\u65f6\u5efa\u7acb\u7684\u8fde\u63a5\u7684\u6700\u5927\u6570\u91cf\uff0c\u4e0d\u662f\u76d1\u542c\uff01\uff01\uff01 \u540c\u65f6\u5efa\u7acb\u8fde\u63a5\u7684\u8fde\u63a5\u3002 #include sys/types.h /* See NOTES */ #include sys/socket.h int listen(int sockfd, int backlog); \u53c2\u6570\u8bf4\u660e\uff1a backlog: \u6570\u91cf","title":"listen\u51fd\u6570"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#accept","text":"\u63a5\u6536\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5 #include sys/types.h /* See NOTES */ #include sys/socket.h int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen); \u53c2\u6570\u8bf4\u660e\uff1a addr\uff1a \u4f20\u51fa\u53c2\u6570\uff0c\u8c03\u7528\u540e\u4f1a\u5b58\u5165\u5ba2\u6237\u7aef\u7684\u5730\u5740 addrlen\uff1a \u4f20\u5165\u4f20\u51fa\u53c2\u6570 \u8fd4\u56de\u503c\uff1a \u65b0\u7684 socket\u6587\u4ef6\u63cf\u8ff0\u7b26","title":"accept\u51fd\u6570"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u51fd\u6570/#connect","text":"#include sys/types.h /* See NOTES */ #include sys/socket.h int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen); \u53c2\u6570\u8bf4\u660e\uff1a sockfd\uff1a\u5ba2\u6237\u7aef\u7684socket addr\uff1a \u670d\u52a1\u5668\u7684\u5730\u5740 addrlen\uff1a \u957f\u5ea6","title":"connect\u51fd\u6570"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u7b80\u5355TCP\u901a\u4fe1\u5b9e\u73b0/","text":"\u5934\u6587\u4ef6 // // Created by root on 2/2/19. // #ifndef SOCKETTOY_SERVER_H #define SOCKETTOY_SERVER_H #define SERVER_IP 172.16.2.124 #define SERVER_PORT 5900 #endif //SOCKETTOY_SERVER_H \u5ba2\u6237\u7aef // // Created by root on 2/2/19. // #include stdio.h #include arpa/inet.h #include sys/socket.h #include stdlib.h #include unistd.h #include memory.h #include server.h void handle_error(char *str){ printf( Client %s error!\\n , str); exit(1); } int main(void){ int re; char str_buf[BUFSIZ] = { sdsaf }; /* create socket */ int client_socket = socket(AF_INET, SOCK_STREAM, 0); if (client_socket == -1){ handle_error( create socket ); } /* connect */ struct sockaddr_in server_addr; struct in_addr buf; inet_pton(AF_INET, SERVER_IP, buf); server_addr.sin_family = AF_INET; server_addr.sin_port = htons(SERVER_PORT); // server_addr.sin_addr.s_addr = buf.s_addr; server_addr.sin_addr.s_addr = inet_addr(SERVER_IP); re = connect(client_socket, (struct sockaddr*) server_addr, sizeof(server_addr)); if (re == -1){ handle_error( connect ); } printf( Input [exit] to exit the socket\\n ); while (1){ printf( input your word: ); scanf( %s , str_buf); if (memcmp(str_buf, exit , 4) == 0){ break; } send(client_socket, str_buf, sizeof(str_buf), 0); recv(client_socket, str_buf, sizeof(str_buf), 0); printf( str_buf convert: %s\\n , str_buf); } /* close */ ssize_t r = send(client_socket, exit , 4, 0); if (r == -1){ handle_error( send ); } close(client_socket); return 0; } \u670d\u52a1\u7aef // // Created by root on 2/2/19. // #include stdio.h #include unistd.h #include sys/socket.h #include stdlib.h #include netinet/in.h #include arpa/inet.h #include ctype.h #include memory.h #include pthread.h #include server.h void handle_error(char *str){ printf( Server %s error!\\n , str); exit(1); } int main(void){ int re; /* create socket */ int server_socket = socket(AF_INET, SOCK_STREAM, 0); if (server_socket == -1){ handle_error( create socket ); } /* bind */ struct sockaddr_in server_addr; struct in_addr buf; inet_pton(AF_INET, SERVER_IP, buf); server_addr.sin_family = AF_INET; server_addr.sin_port = htons(SERVER_PORT); // server_addr.sin_addr.s_addr = buf.s_addr; server_addr.sin_addr.s_addr = htonl(INADDR_ANY); re = bind(server_socket, (struct sockaddr*) server_addr, sizeof(server_addr)); if (re != 0){ handle_error( bind ); } /* listen */ //max = 128 re = listen(server_socket, 10); if (re != 0){ handle_error( listen ); } /* accept */ struct sockaddr_in client_addr; char str_buf[BUFSIZ]; ssize_t n; int i; socklen_t in_out = sizeof(client_addr); int client_socket = accept(server_socket, (struct sockaddr*) client_addr, in_out); printf( Client ip: %s, port: %d.\\n , inet_ntoa(client_addr.sin_addr), ntohs(client_addr.sin_port)); while (1){ n = recv(client_socket, str_buf, sizeof(str_buf), 0); if (memcmp(str_buf, exit , 4) == 0){ break; } for (i = 0; i n; ++i){ str_buf[i] = toupper(str_buf[i]); } send(client_socket, str_buf, (size_t)n, 0); } /* close */ close(client_socket); close(server_socket); return 0; }","title":"\u7b80\u5355TCP\u901a\u4fe1\u5b9e\u73b0"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u7b80\u5355TCP\u901a\u4fe1\u5b9e\u73b0/#_1","text":"// // Created by root on 2/2/19. // #ifndef SOCKETTOY_SERVER_H #define SOCKETTOY_SERVER_H #define SERVER_IP 172.16.2.124 #define SERVER_PORT 5900 #endif //SOCKETTOY_SERVER_H","title":"\u5934\u6587\u4ef6"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u7b80\u5355TCP\u901a\u4fe1\u5b9e\u73b0/#_2","text":"// // Created by root on 2/2/19. // #include stdio.h #include arpa/inet.h #include sys/socket.h #include stdlib.h #include unistd.h #include memory.h #include server.h void handle_error(char *str){ printf( Client %s error!\\n , str); exit(1); } int main(void){ int re; char str_buf[BUFSIZ] = { sdsaf }; /* create socket */ int client_socket = socket(AF_INET, SOCK_STREAM, 0); if (client_socket == -1){ handle_error( create socket ); } /* connect */ struct sockaddr_in server_addr; struct in_addr buf; inet_pton(AF_INET, SERVER_IP, buf); server_addr.sin_family = AF_INET; server_addr.sin_port = htons(SERVER_PORT); // server_addr.sin_addr.s_addr = buf.s_addr; server_addr.sin_addr.s_addr = inet_addr(SERVER_IP); re = connect(client_socket, (struct sockaddr*) server_addr, sizeof(server_addr)); if (re == -1){ handle_error( connect ); } printf( Input [exit] to exit the socket\\n ); while (1){ printf( input your word: ); scanf( %s , str_buf); if (memcmp(str_buf, exit , 4) == 0){ break; } send(client_socket, str_buf, sizeof(str_buf), 0); recv(client_socket, str_buf, sizeof(str_buf), 0); printf( str_buf convert: %s\\n , str_buf); } /* close */ ssize_t r = send(client_socket, exit , 4, 0); if (r == -1){ handle_error( send ); } close(client_socket); return 0; }","title":"\u5ba2\u6237\u7aef"},{"location":"linux\u7f51\u7edc\u7f16\u7a0b/\u7b80\u5355TCP\u901a\u4fe1\u5b9e\u73b0/#_3","text":"// // Created by root on 2/2/19. // #include stdio.h #include unistd.h #include sys/socket.h #include stdlib.h #include netinet/in.h #include arpa/inet.h #include ctype.h #include memory.h #include pthread.h #include server.h void handle_error(char *str){ printf( Server %s error!\\n , str); exit(1); } int main(void){ int re; /* create socket */ int server_socket = socket(AF_INET, SOCK_STREAM, 0); if (server_socket == -1){ handle_error( create socket ); } /* bind */ struct sockaddr_in server_addr; struct in_addr buf; inet_pton(AF_INET, SERVER_IP, buf); server_addr.sin_family = AF_INET; server_addr.sin_port = htons(SERVER_PORT); // server_addr.sin_addr.s_addr = buf.s_addr; server_addr.sin_addr.s_addr = htonl(INADDR_ANY); re = bind(server_socket, (struct sockaddr*) server_addr, sizeof(server_addr)); if (re != 0){ handle_error( bind ); } /* listen */ //max = 128 re = listen(server_socket, 10); if (re != 0){ handle_error( listen ); } /* accept */ struct sockaddr_in client_addr; char str_buf[BUFSIZ]; ssize_t n; int i; socklen_t in_out = sizeof(client_addr); int client_socket = accept(server_socket, (struct sockaddr*) client_addr, in_out); printf( Client ip: %s, port: %d.\\n , inet_ntoa(client_addr.sin_addr), ntohs(client_addr.sin_port)); while (1){ n = recv(client_socket, str_buf, sizeof(str_buf), 0); if (memcmp(str_buf, exit , 4) == 0){ break; } for (i = 0; i n; ++i){ str_buf[i] = toupper(str_buf[i]); } send(client_socket, str_buf, (size_t)n, 0); } /* close */ close(client_socket); close(server_socket); return 0; }","title":"\u670d\u52a1\u7aef"},{"location":"m4/11.\u6587\u672c\u5904\u7406\u7684\u5b8f/","text":"\u641c\u7d22\u6b63\u5219\u8868\u8fbe\u5f0f regexp (string, regexp, [replacement]) \u5728 string \u4e2d\u641c\u7d22 regexp \u3002 \u6ca1\u6709 replacement \uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e\u3002\u6ca1\u6709\u5339\u914d\uff0c\u8fd4\u56de-1\u3002 \u7ed9\u51fa\u4e86 replacement \uff0c\u5e76\u4e14\u6709\u5339\u914d\u7684\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528 \\n \u66ff\u6362 regexp \u7684\u7b2c n \u4e2a\u5e26\u62ec\u53f7\u7684\u5b50\u8868\u8fbe\u5f0f\u7684\u5339\u914d\u6587\u672c\uff0c\u6700\u591a\u4e5d\u4e2a\u5b50\u8868\u8fbe\u5f0f\u3002 \\ \u66ff\u6362\u6574\u4e2a\u5339\u914d\u6587\u672c\u3002\u6ca1\u6709\u5339\u914d\u5219\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002 VERSION = Wine version 3.0 regexp(m4_include(VERSION),[version \\([-.0-9A-Za-z]+\\)],[\\1])","title":"11.\u6587\u672c\u5904\u7406\u7684\u5b8f"},{"location":"m4/11.\u6587\u672c\u5904\u7406\u7684\u5b8f/#_1","text":"regexp (string, regexp, [replacement]) \u5728 string \u4e2d\u641c\u7d22 regexp \u3002 \u6ca1\u6709 replacement \uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e\u3002\u6ca1\u6709\u5339\u914d\uff0c\u8fd4\u56de-1\u3002 \u7ed9\u51fa\u4e86 replacement \uff0c\u5e76\u4e14\u6709\u5339\u914d\u7684\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528 \\n \u66ff\u6362 regexp \u7684\u7b2c n \u4e2a\u5e26\u62ec\u53f7\u7684\u5b50\u8868\u8fbe\u5f0f\u7684\u5339\u914d\u6587\u672c\uff0c\u6700\u591a\u4e5d\u4e2a\u5b50\u8868\u8fbe\u5f0f\u3002 \\ \u66ff\u6362\u6574\u4e2a\u5339\u914d\u6587\u672c\u3002\u6ca1\u6709\u5339\u914d\u5219\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002 VERSION = Wine version 3.0 regexp(m4_include(VERSION),[version \\([-.0-9A-Za-z]+\\)],[\\1])","title":"\u641c\u7d22\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"m4/6.\u6761\u4ef6\u3001\u5faa\u73af\u3001\u9012\u5f52/","text":"6.1 \u68c0\u6d4b\u4e00\u4e2a\u5b8f\u662f\u5426\u88ab\u5b9a\u4e49 m4\u4e2d\u5b58\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u5185\u7f6e\u6761\u4ef6\u3002\u7b2c\u4e00\u4e2a\u662f ifdef \uff0c\u7b2c\u4e8c\u4e2a\u662f ifelse \u3002 ifdef (name, string-1, [string-2]) \u5982\u679c name \u88ab\u5b9a\u4e49\u4e3a\u4e86\u5b8f\uff0c\u90a3\u4e48\u6269\u5c55\u5230 string-1 \uff0c\u5426\u5219\u5230 string-2 \u3002\u5982\u679c string-2 \u6ca1\u6709\uff0c\u90a3\u4e48\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002 ifdef(`foo', ``foo' is defined', ``foo' is not defined') \u21d2foo is not defined define(`foo', `') \u21d2 ifdef(`foo', ``foo' is defined', ``foo' is not defined') \u21d2foo is defined ifdef(`no_such_macro', `yes', `no', `extra argument') error\u2192m4:stdin:4: Warning: excess arguments to builtin `ifdef' ignored \u21d2no 6.2 if-else \u7ed3\u6784\uff0c\u591a\u5206\u652f ifelse (comment) ifelse (string-1, string-2, equal, [not-equal]) ifelse (string-1, string-2, equal-1, string-3, string-4, equal-2, \u2026, [not-equal]) \u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff1a\u5c06\u5ffd\u7565\u53c2\u6570\u4e14\u6ca1\u6709\u4efb\u4f55\u8f93\u51fa\u3002 \u4e09\u4e2a\u6216\u56db\u4e2a\u53c2\u6570\uff1a string-1 == string-2 \uff0c ifelse \u6269\u5c55\u5230 equal \uff1b\u5426\u5219\u5230 not-equal \u3002\u6700\u540e\u7684\u7b2c\u4e94\u4e2a\u53c2\u6570\u4f1a\u88ab\u5ffd\u7565\u3002 \u4f20\u5165\u516d\u4e2a\u6216\u66f4\u591a\u53c2\u6570\uff1a string-1 == string-2 \uff0c ifelse \u6269\u5c55\u5230 equal-1 \uff1b\u5426\u5219\u524d\u4e09\u4e2a\u53c2\u6570\u88ab\u5ffd\u7565\uff0c\u91cd\u65b0\u8ba1\u7b97\u3002 1\u4e2a\u53c2\u6570\u7684\u60c5\u51b5\u53ef\u4ee5\u4ee3\u66ff dnl \u4f5c\u4e3a\u6ce8\u91ca\u6765\u4f7f\u7528\uff1a ifelse(`some comments') \u21d2 3~4\u4e2a\u53c2\u6570\uff1a ifelse(`foo', `bar', `true') \u21d2 ifelse(`foo', `foo', `true') \u21d2true define(`foo', `bar') \u21d2 ifelse(foo, `bar', `true', `false') \u21d2true ifelse(foo, `foo', `true', `false') \u21d2false","title":"6.\u6761\u4ef6\u3001\u5faa\u73af\u3001\u9012\u5f52"},{"location":"m4/6.\u6761\u4ef6\u3001\u5faa\u73af\u3001\u9012\u5f52/#61","text":"m4\u4e2d\u5b58\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u5185\u7f6e\u6761\u4ef6\u3002\u7b2c\u4e00\u4e2a\u662f ifdef \uff0c\u7b2c\u4e8c\u4e2a\u662f ifelse \u3002","title":"6.1 \u68c0\u6d4b\u4e00\u4e2a\u5b8f\u662f\u5426\u88ab\u5b9a\u4e49"},{"location":"m4/6.\u6761\u4ef6\u3001\u5faa\u73af\u3001\u9012\u5f52/#ifdef-name-string-1-string-2","text":"\u5982\u679c name \u88ab\u5b9a\u4e49\u4e3a\u4e86\u5b8f\uff0c\u90a3\u4e48\u6269\u5c55\u5230 string-1 \uff0c\u5426\u5219\u5230 string-2 \u3002\u5982\u679c string-2 \u6ca1\u6709\uff0c\u90a3\u4e48\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002 ifdef(`foo', ``foo' is defined', ``foo' is not defined') \u21d2foo is not defined define(`foo', `') \u21d2 ifdef(`foo', ``foo' is defined', ``foo' is not defined') \u21d2foo is defined ifdef(`no_such_macro', `yes', `no', `extra argument') error\u2192m4:stdin:4: Warning: excess arguments to builtin `ifdef' ignored \u21d2no","title":"ifdef (name, string-1, [string-2])"},{"location":"m4/6.\u6761\u4ef6\u3001\u5faa\u73af\u3001\u9012\u5f52/#62-if-else","text":"","title":"6.2 if-else \u7ed3\u6784\uff0c\u591a\u5206\u652f"},{"location":"m4/6.\u6761\u4ef6\u3001\u5faa\u73af\u3001\u9012\u5f52/#ifelse-comment","text":"","title":"ifelse (comment)"},{"location":"m4/6.\u6761\u4ef6\u3001\u5faa\u73af\u3001\u9012\u5f52/#ifelse-string-1-string-2-equal-not-equal","text":"","title":"ifelse (string-1, string-2, equal, [not-equal])"},{"location":"m4/6.\u6761\u4ef6\u3001\u5faa\u73af\u3001\u9012\u5f52/#ifelse-string-1-string-2-equal-1-string-3-string-4-equal-2-not-equal","text":"\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff1a\u5c06\u5ffd\u7565\u53c2\u6570\u4e14\u6ca1\u6709\u4efb\u4f55\u8f93\u51fa\u3002 \u4e09\u4e2a\u6216\u56db\u4e2a\u53c2\u6570\uff1a string-1 == string-2 \uff0c ifelse \u6269\u5c55\u5230 equal \uff1b\u5426\u5219\u5230 not-equal \u3002\u6700\u540e\u7684\u7b2c\u4e94\u4e2a\u53c2\u6570\u4f1a\u88ab\u5ffd\u7565\u3002 \u4f20\u5165\u516d\u4e2a\u6216\u66f4\u591a\u53c2\u6570\uff1a string-1 == string-2 \uff0c ifelse \u6269\u5c55\u5230 equal-1 \uff1b\u5426\u5219\u524d\u4e09\u4e2a\u53c2\u6570\u88ab\u5ffd\u7565\uff0c\u91cd\u65b0\u8ba1\u7b97\u3002 1\u4e2a\u53c2\u6570\u7684\u60c5\u51b5\u53ef\u4ee5\u4ee3\u66ff dnl \u4f5c\u4e3a\u6ce8\u91ca\u6765\u4f7f\u7528\uff1a ifelse(`some comments') \u21d2 3~4\u4e2a\u53c2\u6570\uff1a ifelse(`foo', `bar', `true') \u21d2 ifelse(`foo', `foo', `true') \u21d2true define(`foo', `bar') \u21d2 ifelse(foo, `bar', `true', `false') \u21d2true ifelse(foo, `foo', `true', `false') \u21d2false","title":"ifelse (string-1, string-2, equal-1, string-3, string-4, equal-2, \u2026, [not-equal])"},{"location":"m4/\u7b80\u4ecb/","text":"m4\u662f\u4e00\u4e2a\u5b8f\u5904\u7406\u5668\u3002\u6709\u5185\u90e8\u5b8f\u548c\u7528\u6237\u81ea\u5b9a\u4e49\u5b8f\u3002 \u6587\u6863\u9605\u8bfb\u624b\u518c \u6b64\u6587\u6863\u7684\u63d0\u793a\u7b26\uff1a\u8f93\u51fa\u7528 \u21d2 \uff0c\u9519\u8bef\u4fe1\u606f\u7528 error\u2192 \uff0c\u547d\u4ee4\u884c\u4f7f\u7528 $ $ command line to invoke m4 Example of input line \u21d2Output line from m4 error\u2192and an error message m4\u7684\u65e0\u53c2\u5b8f\u8c03\u7528\u53ea\u8981\u5199\u540d\u5b57 name \u5373\u53ef\uff1b\u5982\u679c\u52a0\u4e86\u62ec\u53f7 name() \uff0c\u90a3\u4e48\u8c03\u7528\u65f6\u6709\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u53c2\u6570\u4f20\u5165\uff0c\u800c\u4e0d\u662f\u65e0\u53c2\u8c03\u7528\u3002 \u4e3a\u4e86\u9632\u6b62\u5b8f\u8c03\u7528\uff0c\u53ef\u4ee5\u52a0\u4e0a\u9009\u9879 -P \uff0c\u8fd9\u6837\u5728\u6bcf\u6b21\u8c03\u7528\u5185\u7f6e\u5b8f\u7684\u65f6\u5019\uff0c\u90fd\u9700\u8981\u52a0\u4e0a\u524d\u7f00 m4_ \uff0c\u8fd9\u5bf9\u81ea\u5b9a\u4e49\u7684\u5b8f\u6ca1\u6709\u5f71\u54cd \u81ea\u5b9a\u4e49\u5b8f eg. define(`foo', `Hello world.') \u91cd\u590d\u5b9a\u4e49\u4f1a\u8986\u76d6pushdef\u6700\u9ad8\u7684\u5b9a\u4e49\uff0c\u5982\u679c\u4f7f\u7528undefined\u5220\u9664\uff0c\u90a3\u4e48\u6240\u6709\u7684\u5b9a\u4e49\u90fd\u4f1a\u88ab\u5220\u9664 define(foo, one) \u21d2 define(foo, two) \u21d2 one \u21d2two \u53ef\u4ee5\u4f7f\u7528 $n \u4ee3\u8868\u7b2cn\u4e2a\u8f93\u5165\u53c2\u6570\uff0c $0 \u4ee3\u8868\u5b8f\u540d define(`exch', `$2, $1') \u21d2 exch(`arg1', `arg2') \u21d2arg2, arg1 \u5982\u679c\u60f3\u8981\u5f15\u7528\u7684text\u6210\u4e3a\u6269\u5c55text\u7684\u4e00\u90e8\u5206\uff0c\u90a3\u4e48\u4f7f\u7528\u53cc\u91cd\u5f15\u7528 define(`foo', `This is macro `foo'.') \u21d2 foo \u21d2This is macro foo. \u91cd\u547d\u540d\u5b8f defn(name\u2026) \u5982\u679cname\u662f\u81ea\u5b9a\u4e49\u5b8f\uff0c\u90a3\u4e48\u4e45\u53ea\u662f\u7b80\u5355\u7684\u5f15\u7528\u3002\u5982\u679c\u53ea\u6709\u4e00\u4e2aname\u5e76\u4e14\u662f\u5185\u7f6e\u5b8f\uff0c\u6269\u5c55\u53ea\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u8bb0\uff0c\u6307\u5411\u5185\u90e8\u5b9a\u4e49\u3002 \u6267\u884cshell\u547d\u4ee4 \u4e0e\u5b50\u8fdb\u7a0b\u5171\u4eab\u8f93\u5165\uff0c\u5373\u5b50\u8fdb\u7a0b\u4f1a\u5904\u7406\u4e0b\u4e00\u4e2a\u8f93\u5165\u3002 syscmd(shell-command) \u4e0d\u4f1a\u8f93\u51fa\u6267\u884c\u7ed3\u679c\u548c\u9519\u8bef\u4fe1\u606f\uff0c\u4f7f\u7528 esyscmd(shell-command) \u5373\u53ef\u8f93\u51fa\u3002 dnl \u4ece\u5f53\u524d\u5f00\u59cb\u5220\u9664\u5230\u4e0b\u4e00\u884c define(`foo', `Macro `foo'.')dnl A very simple macro, indeed. foo \u21d2Macro foo. \u6539\u53d8\u5f15\u7528\u7b26\u53f7 changequote(`[', `]') \u21d2 define([foo], [Macro [foo].]) \u21d2 foo \u21d2Macro foo. \u6539\u53d8\u6ce8\u91ca\u7684\u5206\u9694\u7b26 changecom([start], [end = \u2018NL\u2019]) \u8f93\u5165\u6307\u5b9a\u6587\u4ef6 \u4e24\u4e2a\u547d\u4ee4\u90fd\u662f\u8c03\u7528m4\u8bfb\u53d6\u6587\u4ef6\u3002 include(file) \u3001 sinclude(file) \u3002\u8981\u4e0e -I \u9009\u9879\u914d\u5408\u4f7f\u7528 \u6587\u4ef6\u5185\u5bb9\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230m4\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u914d\u5408divert\u4f7f\u7528\u3002 divert\uff0c\u5b58\u50a8\u5b57\u7b26\u4e32 \u7528\u6cd5\uff1a \u5b58\u50a8\u5185\u5bb9 divert(\u7f16\u53f7) \u5185\u5bb9 divert \u21d2 \u91ca\u653e\u5185\u5bb9 undivert(`1') \u21d2 \u21d2This text is diverted. \u21d2 tag \uff1a\u91ca\u653e\u65f6\u6709\u4e24\u884c\u7a7a\u884c\u3002","title":"\u7b80\u4ecb"},{"location":"m4/\u7b80\u4ecb/#_1","text":"\u6b64\u6587\u6863\u7684\u63d0\u793a\u7b26\uff1a\u8f93\u51fa\u7528 \u21d2 \uff0c\u9519\u8bef\u4fe1\u606f\u7528 error\u2192 \uff0c\u547d\u4ee4\u884c\u4f7f\u7528 $ $ command line to invoke m4 Example of input line \u21d2Output line from m4 error\u2192and an error message m4\u7684\u65e0\u53c2\u5b8f\u8c03\u7528\u53ea\u8981\u5199\u540d\u5b57 name \u5373\u53ef\uff1b\u5982\u679c\u52a0\u4e86\u62ec\u53f7 name() \uff0c\u90a3\u4e48\u8c03\u7528\u65f6\u6709\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u53c2\u6570\u4f20\u5165\uff0c\u800c\u4e0d\u662f\u65e0\u53c2\u8c03\u7528\u3002 \u4e3a\u4e86\u9632\u6b62\u5b8f\u8c03\u7528\uff0c\u53ef\u4ee5\u52a0\u4e0a\u9009\u9879 -P \uff0c\u8fd9\u6837\u5728\u6bcf\u6b21\u8c03\u7528\u5185\u7f6e\u5b8f\u7684\u65f6\u5019\uff0c\u90fd\u9700\u8981\u52a0\u4e0a\u524d\u7f00 m4_ \uff0c\u8fd9\u5bf9\u81ea\u5b9a\u4e49\u7684\u5b8f\u6ca1\u6709\u5f71\u54cd","title":"\u6587\u6863\u9605\u8bfb\u624b\u518c"},{"location":"m4/\u7b80\u4ecb/#_2","text":"eg. define(`foo', `Hello world.') \u91cd\u590d\u5b9a\u4e49\u4f1a\u8986\u76d6pushdef\u6700\u9ad8\u7684\u5b9a\u4e49\uff0c\u5982\u679c\u4f7f\u7528undefined\u5220\u9664\uff0c\u90a3\u4e48\u6240\u6709\u7684\u5b9a\u4e49\u90fd\u4f1a\u88ab\u5220\u9664 define(foo, one) \u21d2 define(foo, two) \u21d2 one \u21d2two \u53ef\u4ee5\u4f7f\u7528 $n \u4ee3\u8868\u7b2cn\u4e2a\u8f93\u5165\u53c2\u6570\uff0c $0 \u4ee3\u8868\u5b8f\u540d define(`exch', `$2, $1') \u21d2 exch(`arg1', `arg2') \u21d2arg2, arg1 \u5982\u679c\u60f3\u8981\u5f15\u7528\u7684text\u6210\u4e3a\u6269\u5c55text\u7684\u4e00\u90e8\u5206\uff0c\u90a3\u4e48\u4f7f\u7528\u53cc\u91cd\u5f15\u7528 define(`foo', `This is macro `foo'.') \u21d2 foo \u21d2This is macro foo.","title":"\u81ea\u5b9a\u4e49\u5b8f"},{"location":"m4/\u7b80\u4ecb/#_3","text":"defn(name\u2026) \u5982\u679cname\u662f\u81ea\u5b9a\u4e49\u5b8f\uff0c\u90a3\u4e48\u4e45\u53ea\u662f\u7b80\u5355\u7684\u5f15\u7528\u3002\u5982\u679c\u53ea\u6709\u4e00\u4e2aname\u5e76\u4e14\u662f\u5185\u7f6e\u5b8f\uff0c\u6269\u5c55\u53ea\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u8bb0\uff0c\u6307\u5411\u5185\u90e8\u5b9a\u4e49\u3002","title":"\u91cd\u547d\u540d\u5b8f"},{"location":"m4/\u7b80\u4ecb/#shell","text":"\u4e0e\u5b50\u8fdb\u7a0b\u5171\u4eab\u8f93\u5165\uff0c\u5373\u5b50\u8fdb\u7a0b\u4f1a\u5904\u7406\u4e0b\u4e00\u4e2a\u8f93\u5165\u3002 syscmd(shell-command) \u4e0d\u4f1a\u8f93\u51fa\u6267\u884c\u7ed3\u679c\u548c\u9519\u8bef\u4fe1\u606f\uff0c\u4f7f\u7528 esyscmd(shell-command) \u5373\u53ef\u8f93\u51fa\u3002","title":"\u6267\u884cshell\u547d\u4ee4"},{"location":"m4/\u7b80\u4ecb/#dnl","text":"\u4ece\u5f53\u524d\u5f00\u59cb\u5220\u9664\u5230\u4e0b\u4e00\u884c define(`foo', `Macro `foo'.')dnl A very simple macro, indeed. foo \u21d2Macro foo.","title":"dnl"},{"location":"m4/\u7b80\u4ecb/#_4","text":"changequote(`[', `]') \u21d2 define([foo], [Macro [foo].]) \u21d2 foo \u21d2Macro foo.","title":"\u6539\u53d8\u5f15\u7528\u7b26\u53f7"},{"location":"m4/\u7b80\u4ecb/#_5","text":"changecom([start], [end = \u2018NL\u2019])","title":"\u6539\u53d8\u6ce8\u91ca\u7684\u5206\u9694\u7b26"},{"location":"m4/\u7b80\u4ecb/#_6","text":"\u4e24\u4e2a\u547d\u4ee4\u90fd\u662f\u8c03\u7528m4\u8bfb\u53d6\u6587\u4ef6\u3002 include(file) \u3001 sinclude(file) \u3002\u8981\u4e0e -I \u9009\u9879\u914d\u5408\u4f7f\u7528 \u6587\u4ef6\u5185\u5bb9\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230m4\u7684\u8f93\u51fa\uff0c\u53ef\u4ee5\u914d\u5408divert\u4f7f\u7528\u3002","title":"\u8f93\u5165\u6307\u5b9a\u6587\u4ef6"},{"location":"m4/\u7b80\u4ecb/#divert","text":"\u7528\u6cd5\uff1a \u5b58\u50a8\u5185\u5bb9 divert(\u7f16\u53f7) \u5185\u5bb9 divert \u21d2 \u91ca\u653e\u5185\u5bb9 undivert(`1') \u21d2 \u21d2This text is diverted. \u21d2 tag \uff1a\u91ca\u653e\u65f6\u6709\u4e24\u884c\u7a7a\u884c\u3002","title":"divert\uff0c\u5b58\u50a8\u5b57\u7b26\u4e32"},{"location":"make/10.\u4f7f\u7528\u9690\u542b\u89c4\u5219/","text":"10.5 \u5339\u914d\u89c4\u5219\u4e0e\u81ea\u52a8\u53d8\u91cf 10.5.1 \u5339\u914d\u89c4\u5219\u4ecb\u7ecd % \u5b57\u7b26\u5339\u914d\u4efb\u4f55\u975e\u7a7a\u5b57\u7b26\u4e32\u3002 % \u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u53eb\u505a stem \uff08\u8bcd\u5e72\uff09\u3002 prerequisites \u4e2d\u7684 % \u4ee3\u8868\u4e86\u76ee\u6807\u4e2d % \u5339\u914d\u7684\u540c\u6837\u7684 stem \u3002 %.o : %.c ; recipe\u2026 \u8981\u6c42xxx.c\u5fc5\u987b\u5b58\u5728\u6216\u8005\u53ef\u4ee5\u521b\u5efa\u3002 10.5.4 \u6a21\u5f0f\u662f\u5982\u4f55\u5339\u914d\u7684 \u6a21\u5f0f\u4e0d\u5305\u62ec / \u65f6\uff0c\u6587\u4ef6\u540d\u4e2d\u7684\u76ee\u5f55\u540d\u4f1a\u88ab\u5148\u79fb\u9664\uff0c\u5339\u914d\u5b8c\u6587\u4ef6\u540d\u7684\u90e8\u5206\u4e4b\u540e\uff0c\u518d\u628a\u76ee\u5f55\u90e8\u5206\u52a0\u4e0a\u6765\u3002\u4f8b\uff1a e%t \u5339\u914d\u6587\u4ef6 src/eat \uff0c stem \u5c31\u662f src/a \u3002 note \uff1a\u5df2\u7ecf\u5b58\u5728\u6216\u88ab\u5f15\u7528\u7684prerequisites\u7684\u4f18\u5148\u7ea7\u603b\u662f\u6bd4\u9700\u8981\u88ab\u5176\u5b83\u9690\u542b\u89c4\u5219\u521b\u5efa\u7684prerequisites\u9ad8\u3002 \u591a\u4e2a\u5339\u914d\u89c4\u5219\u6ee1\u8db3\u65f6\uff1a make\u4f1a\u9009\u62e9 stem \u6700\u77ed\u7684\u90a3\u4e2a\u89c4\u5219\u3002 \u5982\u679c stem \u7b49\u957f\uff0c\u9009\u62e9\u7b2c\u4e00\u4e2a\u53d1\u73b0\u7684\u89c4\u5219\u3002 10.5.5 \u5339\u914d\u4efb\u4f55\u6587\u4ef6\u7684\u6a21\u5f0f\u89c4\u5219 \u6a21\u5f0f\u89c4\u5219\u7684\u76ee\u6807\u53ea\u662f\u4e00\u4e2a % \u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u5339\u914d\u4efb\u4f55\u4e00\u4e2a\u6587\u4ef6\u540d\uff0c\u79f0\u4f5c match-anything \u89c4\u5219\u3002 \u6bcf\u6b21\u5b9a\u4e49\u8fd9\u79cd\u89c4\u5219\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u9009\u62e9\u4e0b\u9762\u7684\u4e00\u9879\u8fdb\u884c\u7ea6\u675f\uff1a 1. \u4f7f\u7528 :: \u6807\u8bb0\u89c4\u5219\u4e3a terminal \uff0c\u53ea\u6709prerequisites\u5df2\u7ecf\u5b58\u5728\u7684\u65f6\u5019\u624d\u80fd\u5e94\u7528\u89c4\u5219\u3002 2. \u975e\u7ec8\u7aef\u89c4\u5219\u3002 non-terminal match-anything rule \u4e0d\u80fd\u5e94\u7528\u4e8e\u6307\u5b9a\u4e86\u6587\u4ef6\u7c7b\u578b\u7684\u6587\u4ef6\u540d\u3002\uff1f\uff1f\uff1f 10.5.3 \u81ea\u52a8\u53d8\u91cf \u81ea\u52a8\u53d8\u91cf\u53ea\u5728 recipe \u4e2d\u751f\u6548\u3002\u4f46\u662f\uff0cmake\u7684\u4e8c\u6b21\u6269\u5c55\u7279\u6027\uff08 see Secondary Expansion \uff09\u5141\u8bb8\u5728 prerequisites \u4e2d\u4f7f\u7528\u81ea\u52a8\u53d8\u91cf\u7684\u503c\u3002 $@ - \u76ee\u6807\u6587\u4ef6\u540d\u3002\u76ee\u6807\u662f\u5f52\u6863\u6210\u5458\u65f6\uff0c\u4ee3\u8868\u7684\u662f\u5f52\u6863\u6587\u4ef6\u540d\u3002\u5728\u6709\u591a\u4e2a\u751f\u6210\u76ee\u6807\u7684\u5339\u914d\u89c4\u5219\u60c5\u51b5\u4e0b\uff0c\u4ee3\u8868\u4e86\u4efb\u4f55\u5f15\u8d77recipe\u6267\u884c\u7684\u76ee\u6807\u6587\u4ef6\u3002 $% - \u76ee\u6807\u662f\u5f52\u6863\u6210\u5458\u65f6\uff0c\u4ee3\u8868\u76ee\u6807\u6210\u5458\u540d\u3002\u5426\u5219\u4e3a\u7a7a\u3002\u4f8b\u5982\uff1a\u5982\u679c\u76ee\u6807\u662ffoo.a(bar.o)\uff0c\u90a3\u4e48 $@ \u4ee3\u8868foo.a\uff0c $% \u4ee3\u8868bar.o\u3002 $ - \u7b2c\u4e00\u4e2a prerequisites \u7684\u540d\u5b57\u3002\u5982\u679c\u76ee\u6807\u4ece\u9690\u542b\u89c4\u5219\u6267\u884crecipe\uff0c\u8fd9\u4f1a\u6210\u4e3a\u7b2c\u4e00\u4e2a prerequisite \u3002 see Implicit Rules . $? - \u6240\u6709\u7684\u6bd4\u76ee\u6807\u65b0\u7684 prerequisites \u7684\u540d\u5b57\uff0c\u7a7a\u683c\u5206\u9694\u3002\u5bf9\u4e8e\u662f\u5f52\u6863\u6210\u5458\u7684prerequisites\uff0c\u53ea\u6709\u547d\u540d\u7684\u6210\u5458\u88ab\u4f7f\u7528\u3002\uff1f\uff1f\uff1f $^ - \u6240\u6709\u7684 prerequisites \uff0c\u7a7a\u683c\u5206\u9694\u3002\u5f52\u6863\u6210\u5458\u7684\u89c4\u5219\u540c\u4e0a\u3002\u5982\u679cprerequisites\u4e2d\u6709\u91cd\u590d\u591a\u6b21\u7684 prerequisite \uff0c\u90a3\u4e48\u8be5\u53d8\u91cf\u53ea\u4f1a\u5305\u542b\u4e00\u4e2a\u91cd\u590d\u7684 prerequisite \u3002\u6b64\u53d8\u91cf\u4e0d\u5305\u62ec order-only prerequisites \uff08\u6307\u53ea\u6709\u76ee\u6807\u4e0d\u5b58\u5728\u7684\u65f6\u5019\u624d\u4f1a\u53c2\u4e0e\u76ee\u6807\u7684\u751f\u6210\u7684prerequisites\uff0c\u4e0e\u5e38\u89c4\u7684\u7528 | \u5206\u9694\uff09\u3002 $+ - \u4e0e $^ \u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u5b83\u5305\u542b\u91cd\u590d\u7684 prerequisite \u3002 $| - \u6240\u6709\u7684 order-only prerequisites \uff0c\u7a7a\u683c\u5206\u9694\u3002 $* - \u9690\u542b\u89c4\u5219\u5339\u914d\u7684\u8bcd\u5e72\u3002\u4ee5\u540e\u518d\u770b\uff01\uff01\uff01 $(@D) - \u76ee\u6807\u6587\u4ef6\u540d\u7684\u76ee\u5f55\u90e8\u5206\uff08\u53bb\u6389 / \uff09\u3002\u4f8b\uff1a$@='dir/foo.a'\uff0c$(@D)='dir'\u3002\u5982\u679c\u76ee\u6807\u6ca1\u6709 / \uff0c\u6b64\u503c\u4e3a . \u3002 $(@F) - \u76ee\u6807\u6587\u4ef6\u540d\u7684\u6587\u4ef6\u90e8\u5206\u3002\u4e0e $(notdir $@) \u76f8\u7b49\u3002 \u4ee5\u4e0b\u53d8\u91cf\u90fd\u662f\u7c7b\u4f3c\u7684\uff1a $(*D) $(*F) $(%D) $(%F) $( D) $( F) $(^D) $(^F) $(+D) $(+F) $(?D) $(?F)","title":"10.\u4f7f\u7528\u9690\u542b\u89c4\u5219"},{"location":"make/10.\u4f7f\u7528\u9690\u542b\u89c4\u5219/#105","text":"","title":"10.5 \u5339\u914d\u89c4\u5219\u4e0e\u81ea\u52a8\u53d8\u91cf"},{"location":"make/10.\u4f7f\u7528\u9690\u542b\u89c4\u5219/#1051","text":"% \u5b57\u7b26\u5339\u914d\u4efb\u4f55\u975e\u7a7a\u5b57\u7b26\u4e32\u3002 % \u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\u53eb\u505a stem \uff08\u8bcd\u5e72\uff09\u3002 prerequisites \u4e2d\u7684 % \u4ee3\u8868\u4e86\u76ee\u6807\u4e2d % \u5339\u914d\u7684\u540c\u6837\u7684 stem \u3002 %.o : %.c ; recipe\u2026 \u8981\u6c42xxx.c\u5fc5\u987b\u5b58\u5728\u6216\u8005\u53ef\u4ee5\u521b\u5efa\u3002","title":"10.5.1 \u5339\u914d\u89c4\u5219\u4ecb\u7ecd"},{"location":"make/10.\u4f7f\u7528\u9690\u542b\u89c4\u5219/#1054","text":"\u6a21\u5f0f\u4e0d\u5305\u62ec / \u65f6\uff0c\u6587\u4ef6\u540d\u4e2d\u7684\u76ee\u5f55\u540d\u4f1a\u88ab\u5148\u79fb\u9664\uff0c\u5339\u914d\u5b8c\u6587\u4ef6\u540d\u7684\u90e8\u5206\u4e4b\u540e\uff0c\u518d\u628a\u76ee\u5f55\u90e8\u5206\u52a0\u4e0a\u6765\u3002\u4f8b\uff1a e%t \u5339\u914d\u6587\u4ef6 src/eat \uff0c stem \u5c31\u662f src/a \u3002 note \uff1a\u5df2\u7ecf\u5b58\u5728\u6216\u88ab\u5f15\u7528\u7684prerequisites\u7684\u4f18\u5148\u7ea7\u603b\u662f\u6bd4\u9700\u8981\u88ab\u5176\u5b83\u9690\u542b\u89c4\u5219\u521b\u5efa\u7684prerequisites\u9ad8\u3002 \u591a\u4e2a\u5339\u914d\u89c4\u5219\u6ee1\u8db3\u65f6\uff1a make\u4f1a\u9009\u62e9 stem \u6700\u77ed\u7684\u90a3\u4e2a\u89c4\u5219\u3002 \u5982\u679c stem \u7b49\u957f\uff0c\u9009\u62e9\u7b2c\u4e00\u4e2a\u53d1\u73b0\u7684\u89c4\u5219\u3002","title":"10.5.4 \u6a21\u5f0f\u662f\u5982\u4f55\u5339\u914d\u7684"},{"location":"make/10.\u4f7f\u7528\u9690\u542b\u89c4\u5219/#1055","text":"\u6a21\u5f0f\u89c4\u5219\u7684\u76ee\u6807\u53ea\u662f\u4e00\u4e2a % \u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u5339\u914d\u4efb\u4f55\u4e00\u4e2a\u6587\u4ef6\u540d\uff0c\u79f0\u4f5c match-anything \u89c4\u5219\u3002 \u6bcf\u6b21\u5b9a\u4e49\u8fd9\u79cd\u89c4\u5219\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u9009\u62e9\u4e0b\u9762\u7684\u4e00\u9879\u8fdb\u884c\u7ea6\u675f\uff1a 1. \u4f7f\u7528 :: \u6807\u8bb0\u89c4\u5219\u4e3a terminal \uff0c\u53ea\u6709prerequisites\u5df2\u7ecf\u5b58\u5728\u7684\u65f6\u5019\u624d\u80fd\u5e94\u7528\u89c4\u5219\u3002 2. \u975e\u7ec8\u7aef\u89c4\u5219\u3002 non-terminal match-anything rule \u4e0d\u80fd\u5e94\u7528\u4e8e\u6307\u5b9a\u4e86\u6587\u4ef6\u7c7b\u578b\u7684\u6587\u4ef6\u540d\u3002\uff1f\uff1f\uff1f","title":"10.5.5 \u5339\u914d\u4efb\u4f55\u6587\u4ef6\u7684\u6a21\u5f0f\u89c4\u5219"},{"location":"make/10.\u4f7f\u7528\u9690\u542b\u89c4\u5219/#1053","text":"\u81ea\u52a8\u53d8\u91cf\u53ea\u5728 recipe \u4e2d\u751f\u6548\u3002\u4f46\u662f\uff0cmake\u7684\u4e8c\u6b21\u6269\u5c55\u7279\u6027\uff08 see Secondary Expansion \uff09\u5141\u8bb8\u5728 prerequisites \u4e2d\u4f7f\u7528\u81ea\u52a8\u53d8\u91cf\u7684\u503c\u3002 $@ - \u76ee\u6807\u6587\u4ef6\u540d\u3002\u76ee\u6807\u662f\u5f52\u6863\u6210\u5458\u65f6\uff0c\u4ee3\u8868\u7684\u662f\u5f52\u6863\u6587\u4ef6\u540d\u3002\u5728\u6709\u591a\u4e2a\u751f\u6210\u76ee\u6807\u7684\u5339\u914d\u89c4\u5219\u60c5\u51b5\u4e0b\uff0c\u4ee3\u8868\u4e86\u4efb\u4f55\u5f15\u8d77recipe\u6267\u884c\u7684\u76ee\u6807\u6587\u4ef6\u3002 $% - \u76ee\u6807\u662f\u5f52\u6863\u6210\u5458\u65f6\uff0c\u4ee3\u8868\u76ee\u6807\u6210\u5458\u540d\u3002\u5426\u5219\u4e3a\u7a7a\u3002\u4f8b\u5982\uff1a\u5982\u679c\u76ee\u6807\u662ffoo.a(bar.o)\uff0c\u90a3\u4e48 $@ \u4ee3\u8868foo.a\uff0c $% \u4ee3\u8868bar.o\u3002 $ - \u7b2c\u4e00\u4e2a prerequisites \u7684\u540d\u5b57\u3002\u5982\u679c\u76ee\u6807\u4ece\u9690\u542b\u89c4\u5219\u6267\u884crecipe\uff0c\u8fd9\u4f1a\u6210\u4e3a\u7b2c\u4e00\u4e2a prerequisite \u3002 see Implicit Rules . $? - \u6240\u6709\u7684\u6bd4\u76ee\u6807\u65b0\u7684 prerequisites \u7684\u540d\u5b57\uff0c\u7a7a\u683c\u5206\u9694\u3002\u5bf9\u4e8e\u662f\u5f52\u6863\u6210\u5458\u7684prerequisites\uff0c\u53ea\u6709\u547d\u540d\u7684\u6210\u5458\u88ab\u4f7f\u7528\u3002\uff1f\uff1f\uff1f $^ - \u6240\u6709\u7684 prerequisites \uff0c\u7a7a\u683c\u5206\u9694\u3002\u5f52\u6863\u6210\u5458\u7684\u89c4\u5219\u540c\u4e0a\u3002\u5982\u679cprerequisites\u4e2d\u6709\u91cd\u590d\u591a\u6b21\u7684 prerequisite \uff0c\u90a3\u4e48\u8be5\u53d8\u91cf\u53ea\u4f1a\u5305\u542b\u4e00\u4e2a\u91cd\u590d\u7684 prerequisite \u3002\u6b64\u53d8\u91cf\u4e0d\u5305\u62ec order-only prerequisites \uff08\u6307\u53ea\u6709\u76ee\u6807\u4e0d\u5b58\u5728\u7684\u65f6\u5019\u624d\u4f1a\u53c2\u4e0e\u76ee\u6807\u7684\u751f\u6210\u7684prerequisites\uff0c\u4e0e\u5e38\u89c4\u7684\u7528 | \u5206\u9694\uff09\u3002 $+ - \u4e0e $^ \u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u5b83\u5305\u542b\u91cd\u590d\u7684 prerequisite \u3002 $| - \u6240\u6709\u7684 order-only prerequisites \uff0c\u7a7a\u683c\u5206\u9694\u3002 $* - \u9690\u542b\u89c4\u5219\u5339\u914d\u7684\u8bcd\u5e72\u3002\u4ee5\u540e\u518d\u770b\uff01\uff01\uff01 $(@D) - \u76ee\u6807\u6587\u4ef6\u540d\u7684\u76ee\u5f55\u90e8\u5206\uff08\u53bb\u6389 / \uff09\u3002\u4f8b\uff1a$@='dir/foo.a'\uff0c$(@D)='dir'\u3002\u5982\u679c\u76ee\u6807\u6ca1\u6709 / \uff0c\u6b64\u503c\u4e3a . \u3002 $(@F) - \u76ee\u6807\u6587\u4ef6\u540d\u7684\u6587\u4ef6\u90e8\u5206\u3002\u4e0e $(notdir $@) \u76f8\u7b49\u3002 \u4ee5\u4e0b\u53d8\u91cf\u90fd\u662f\u7c7b\u4f3c\u7684\uff1a $(*D) $(*F) $(%D) $(%F) $( D) $( F) $(^D) $(^F) $(+D) $(+F) $(?D) $(?F)","title":"10.5.3 \u81ea\u52a8\u53d8\u91cf"},{"location":"make/11.\u4f7f\u7528make\u66f4\u65b0\u5f52\u6863\u6587\u4ef6/","text":"Archive files (\u5f52\u6863\u6587\u4ef6)\u662f\u5305\u542b\u4e86 sub-files \u7684\u6587\u4ef6\uff0c sub-files \u88ab\u79f0\u505a members \uff1b\u5b83\u4eec\u88ab ar \u7a0b\u5e8f\u7ef4\u62a4\uff0c\u4e3b\u8981\u7528\u9014\u662f\u4e3a\u94fe\u63a5\u4f5c\u4e3a\u5b50\u7a0b\u5e8f\u5e93\u3002 \u5f52\u6863\u6210\u5458\u4f5c\u4e3a\u76ee\u6807 \u4e00\u4e2a\u5355\u72ec\u7684\u5f52\u6863\u6587\u4ef6\u6210\u5458\u53ef\u4ee5\u88ab\u4f5c\u4e3a\u4e00\u4e2a target \u6216\u8005 prerequisite \u3002 archive(member) \u6b64\u7ed3\u6784\u53ea\u80fd\u5728 target \u548c prerequisites \u4e2d\u4f7f\u7528\u3002\u6700\u597d\u4f7f\u7528 ar \u6765\u7ba1\u7406\u3002 \u901a\u8fc7\u590d\u5236hack.o\u5728foolib\u4e2d\u521b\u5efa\u4e00\u4e2a\u6210\u5458hack.o\u6587\u4ef6\uff1a foolib(hack.o) : hack.o ar cr foolib hack.o \u4e8b\u5b9e\u4e0a\u51e0\u4e4e\u6240\u6709\u7684\u5f52\u6863\u6210\u5458\u76ee\u6807\u90fd\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u66f4\u65b0\u5e76\u4e14\u6709\u4e00\u4e2a\u9ed8\u8ba4\u89c4\u5219\u4e3a\u4f60\u505a\u8fd9\u4ef6\u4e8b\u3002\u5982\u679c\u5f52\u6863\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u9700\u8981\u4e3a ar \u52a0\u4e0a c flag\u3002 \u6307\u5b9a\u591a\u4e2a\u6210\u5458\uff1a foolib(hack.o kludge.o) \u4f7f\u7528\u901a\u914d\u7b26\uff1a foolib(*.o) \u5f52\u6863\u6210\u5458\u76ee\u6807\u7684\u9690\u542b\u89c4\u5219 make \"foo.a(bar.o)\": cc -c bar.c -o bar.o ar r foo.a bar.o rm -f bar.o \u6210\u5458\u4e0d\u80fd\u5305\u62ec\u4e00\u4e2a\u76ee\u5f55\u540d\uff0c\u4f46\u662f\u5728\u4e00\u4e2amakefile\u4e2d\u53ef\u80fd\u662f\u6709\u7528\u7684\u6765\u5047\u88c5\u5b83\u786e\u5b9e\u5b58\u5728\uff08but it may be useful in a makefile to pretend that it does\uff09\u3002 foo.a(dir/file.o) - ar r foo.a dir/file.o \u3002\uff1f\uff1f\uff1f \u66f4\u65b0\u5f52\u6863\u6807\u5fd7\u6587\u4ef6\u5939 \u5f52\u6863\u6587\u4ef6\u4e2d\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u6210\u5458 __.SYMDEF \uff0c\u662f\u4e00\u4e2a\u5305\u542b\u4e86\u989d\u5916\u7684\u88ab\u6240\u6709\u5176\u4ed6\u6210\u5458\u5b9a\u4e49\u7684\u6807\u5fd7\u540d\u7684\u6587\u4ef6\u5939\u3002 \u66f4\u65b0\u4e86\u6210\u5458\u4e4b\u540e\uff0c\u901a\u8fc7 ranlib \u9700\u8981\u66f4\u65b0\u6b64\u6210\u5458\u3002 libfoo.a: libfoo.a(x.o) libfoo.a(y.o) \u2026 ranlib libfoo.a \u4f7f\u7528 ar \u8fdb\u884c\u66f4\u65b0\u65f6\uff0c\u4f1a\u81ea\u52a8\u66f4\u65b0\u6b64\u6210\u5458\u3002 note \uff1a\u5982\u679c\u591a\u4e2a ar \u540c\u65f6\u5728\u4e00\u4e2a\u5f52\u6863\u6587\u4ef6\u4e2d\u6267\u884c\uff0c\u4e0d\u80fd\u8f93\u51fa\u6b63\u786e\u5730\u7ed3\u679c\u3002 \u5f52\u6863\u6587\u4ef6\u7684\u540e\u7f00\u89c4\u5219 \u8fc7\u65f6\u5199\u6cd5\uff1a .c.a: $(CC) $(CFLAGS) $(CPPFLAGS) -c $ -o $*.o $(AR) r $@ $*.o $(RM) $*.o \u5339\u914d\u5199\u6cd5\uff1a (%.o): %.c $(CC) $(CFLAGS) $(CPPFLAGS) -c $ -o $*.o $(AR) r $@ $*.o $(RM) $*.o","title":"11.\u4f7f\u7528make\u66f4\u65b0\u5f52\u6863\u6587\u4ef6"},{"location":"make/11.\u4f7f\u7528make\u66f4\u65b0\u5f52\u6863\u6587\u4ef6/#_1","text":"\u4e00\u4e2a\u5355\u72ec\u7684\u5f52\u6863\u6587\u4ef6\u6210\u5458\u53ef\u4ee5\u88ab\u4f5c\u4e3a\u4e00\u4e2a target \u6216\u8005 prerequisite \u3002 archive(member) \u6b64\u7ed3\u6784\u53ea\u80fd\u5728 target \u548c prerequisites \u4e2d\u4f7f\u7528\u3002\u6700\u597d\u4f7f\u7528 ar \u6765\u7ba1\u7406\u3002 \u901a\u8fc7\u590d\u5236hack.o\u5728foolib\u4e2d\u521b\u5efa\u4e00\u4e2a\u6210\u5458hack.o\u6587\u4ef6\uff1a foolib(hack.o) : hack.o ar cr foolib hack.o \u4e8b\u5b9e\u4e0a\u51e0\u4e4e\u6240\u6709\u7684\u5f52\u6863\u6210\u5458\u76ee\u6807\u90fd\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u66f4\u65b0\u5e76\u4e14\u6709\u4e00\u4e2a\u9ed8\u8ba4\u89c4\u5219\u4e3a\u4f60\u505a\u8fd9\u4ef6\u4e8b\u3002\u5982\u679c\u5f52\u6863\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u9700\u8981\u4e3a ar \u52a0\u4e0a c flag\u3002 \u6307\u5b9a\u591a\u4e2a\u6210\u5458\uff1a foolib(hack.o kludge.o) \u4f7f\u7528\u901a\u914d\u7b26\uff1a foolib(*.o)","title":"\u5f52\u6863\u6210\u5458\u4f5c\u4e3a\u76ee\u6807"},{"location":"make/11.\u4f7f\u7528make\u66f4\u65b0\u5f52\u6863\u6587\u4ef6/#_2","text":"make \"foo.a(bar.o)\": cc -c bar.c -o bar.o ar r foo.a bar.o rm -f bar.o \u6210\u5458\u4e0d\u80fd\u5305\u62ec\u4e00\u4e2a\u76ee\u5f55\u540d\uff0c\u4f46\u662f\u5728\u4e00\u4e2amakefile\u4e2d\u53ef\u80fd\u662f\u6709\u7528\u7684\u6765\u5047\u88c5\u5b83\u786e\u5b9e\u5b58\u5728\uff08but it may be useful in a makefile to pretend that it does\uff09\u3002 foo.a(dir/file.o) - ar r foo.a dir/file.o \u3002\uff1f\uff1f\uff1f","title":"\u5f52\u6863\u6210\u5458\u76ee\u6807\u7684\u9690\u542b\u89c4\u5219"},{"location":"make/11.\u4f7f\u7528make\u66f4\u65b0\u5f52\u6863\u6587\u4ef6/#_3","text":"\u5f52\u6863\u6587\u4ef6\u4e2d\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u6210\u5458 __.SYMDEF \uff0c\u662f\u4e00\u4e2a\u5305\u542b\u4e86\u989d\u5916\u7684\u88ab\u6240\u6709\u5176\u4ed6\u6210\u5458\u5b9a\u4e49\u7684\u6807\u5fd7\u540d\u7684\u6587\u4ef6\u5939\u3002 \u66f4\u65b0\u4e86\u6210\u5458\u4e4b\u540e\uff0c\u901a\u8fc7 ranlib \u9700\u8981\u66f4\u65b0\u6b64\u6210\u5458\u3002 libfoo.a: libfoo.a(x.o) libfoo.a(y.o) \u2026 ranlib libfoo.a \u4f7f\u7528 ar \u8fdb\u884c\u66f4\u65b0\u65f6\uff0c\u4f1a\u81ea\u52a8\u66f4\u65b0\u6b64\u6210\u5458\u3002 note \uff1a\u5982\u679c\u591a\u4e2a ar \u540c\u65f6\u5728\u4e00\u4e2a\u5f52\u6863\u6587\u4ef6\u4e2d\u6267\u884c\uff0c\u4e0d\u80fd\u8f93\u51fa\u6b63\u786e\u5730\u7ed3\u679c\u3002","title":"\u66f4\u65b0\u5f52\u6863\u6807\u5fd7\u6587\u4ef6\u5939"},{"location":"make/11.\u4f7f\u7528make\u66f4\u65b0\u5f52\u6863\u6587\u4ef6/#_4","text":"\u8fc7\u65f6\u5199\u6cd5\uff1a .c.a: $(CC) $(CFLAGS) $(CPPFLAGS) -c $ -o $*.o $(AR) r $@ $*.o $(RM) $*.o \u5339\u914d\u5199\u6cd5\uff1a (%.o): %.c $(CC) $(CFLAGS) $(CPPFLAGS) -c $ -o $*.o $(AR) r $@ $*.o $(RM) $*.o","title":"\u5f52\u6863\u6587\u4ef6\u7684\u540e\u7f00\u89c4\u5219"},{"location":"make/16.Makefile\u7ea6\u5b9a/","text":"DESTDIR\uff1a\u5206\u9636\u6bb5\u5b89\u88c5\u7684\u652f\u6301 DESTDIR \u662f\u4e00\u4e2a\u6dfb\u52a0\u5230\u6bcf\u4e00\u4e2a\u5b89\u88c5\u7684\u76ee\u6807\u6587\u4ef6\u7684\u53d8\u91cf\uff0c\u7531\u547d\u4ee4\u884c\u53c2\u6570\u6307\u5b9a\u3002 make DESTDIR=/tmp/stage install $(INSTALL_PROGRAM) foo $(DESTDIR)$(bindir)/foo $(INSTALL_DATA) libfoo.a $(DESTDIR)$(libdir)/libfoo.a \u6b63\u5e38\u60c5\u51b5\u4e0bfoo\u5e94\u8be5\u5b89\u88c5\u5728 /usr/local/bin/foo \uff0c\u4f46\u662f\u6839\u636e\u4e0a\u9762\u7684\u5199\u6cd5\uff0cfoo\u4f1a\u88ab\u5b89\u88c5\u5728 /tmp/stage/usr/local/bin/foo \u3002 DESTDIR \u53ea\u652f\u6301 install* \u548c uninstall* \u76ee\u6807\u3002","title":"16.Makefile\u7ea6\u5b9a"},{"location":"make/16.Makefile\u7ea6\u5b9a/#destdir","text":"DESTDIR \u662f\u4e00\u4e2a\u6dfb\u52a0\u5230\u6bcf\u4e00\u4e2a\u5b89\u88c5\u7684\u76ee\u6807\u6587\u4ef6\u7684\u53d8\u91cf\uff0c\u7531\u547d\u4ee4\u884c\u53c2\u6570\u6307\u5b9a\u3002 make DESTDIR=/tmp/stage install $(INSTALL_PROGRAM) foo $(DESTDIR)$(bindir)/foo $(INSTALL_DATA) libfoo.a $(DESTDIR)$(libdir)/libfoo.a \u6b63\u5e38\u60c5\u51b5\u4e0bfoo\u5e94\u8be5\u5b89\u88c5\u5728 /usr/local/bin/foo \uff0c\u4f46\u662f\u6839\u636e\u4e0a\u9762\u7684\u5199\u6cd5\uff0cfoo\u4f1a\u88ab\u5b89\u88c5\u5728 /tmp/stage/usr/local/bin/foo \u3002 DESTDIR \u53ea\u652f\u6301 install* \u548c uninstall* \u76ee\u6807\u3002","title":"DESTDIR\uff1a\u5206\u9636\u6bb5\u5b89\u88c5\u7684\u652f\u6301"},{"location":"make/4.\u7f16\u5199\u89c4\u5219/","text":"Phony Targets \u4e00\u4e2a\u4f2a\u76ee\u6807\u4e0d\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u6587\u4ef6\u540d\uff0c\u53ea\u662f\u4e00\u4e2a\u5f53\u4f60\u660e\u786e\u7684\u8fd0\u884cmake\u8bf7\u6c42\u65f6\u4f1a\u88ab\u6267\u884c\u7684 recipe \u540d\u5b57\u3002\u6709\u4e24\u4e2a\u539f\u56e0\u4f7f\u7528\u4f2a\u76ee\u6807\uff1a \u907f\u514d\u540c\u540d\u6587\u4ef6\u51b2\u7a81 \u63d0\u5347\u6027\u80fd \u89e3\u51b3\u7684\u95ee\u9898\uff1a clean: rm *.o temp \u8fd9\u79cd\u5199\u6cd5\u5728\u6ca1\u6709\u6587\u4ef6\u540d\u51b2\u7a81\u7684\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7 make clean \u6b63\u5e38\u6267\u884c\u3002\u4f46\u662f\u5982\u679c\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a\u540c\u540d\u7684\u6587\u4ef6 clean \uff0c clean \u603b\u662f\u4f1a\u88ab\u8003\u8651\u662f\u6700\u65b0\u7684\u6587\u4ef6\uff0c\u5b83\u7684 recipe \u4e0d\u4f1a\u6267\u884c\u3002 \u6dfb\u52a0\u4e00\u4e2a\u4f2a\u76ee\u6807\u5373\u53ef\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a .PHONY: clean clean: rm *.o temp \u4e0emake\u7684\u9012\u5f52\u8c03\u7528\u7ed3\u5408\u4f7f\u7528\uff1a SUBDIRS = foo bar baz subdirs: for dir in $(SUBDIRS); do \\ $(MAKE) -C $$dir; \\ done \u8fd9\u79cd\u5199\u6cd5\u7684\u95ee\u9898\uff1a\u4efb\u4f55\u5728sub-make\u4e2d\u7684\u9519\u8bef\u90fd\u4f1a\u88ab\u5ffd\u89c6\uff1b\u4e0d\u80fd\u5e76\u884c\u6784\u5efa\u76ee\u6807\u3002 \u6539\u8fdb\u540e\u7684\u5199\u6cd5\uff1a SUBDIRS = foo bar baz .PHONY: subdirs $(SUBDIRS) subdirs: $(SUBDIRS) $(SUBDIRS): $(MAKE) -C $@ foo: baz \u6700\u540e\u4e00\u53e5\u58f0\u660e\u4e86baz\u5b8c\u6210\u4e4b\u540e\u624d\u80fd\u6784\u5efafoo\u3002 \u5bf9\u4e8e\u4f2a\u76ee\u6807\u5c06\u8df3\u8fc7\u9690\u542b\u89c4\u5219\u7684\u641c\u7d22\u3002 \u4f2a\u76ee\u6807\u4e0d\u5e94\u8be5\u6210\u4e3a\u4e00\u4e2a\u771f\u5b9e\u7684\u76ee\u6807\u6587\u4ef6\u7684 prerequisites \uff0c\u8d1f\u8d23\u6bcf\u6b21make\u66f4\u65b0\u6587\u4ef6\u90fd\u4f1a\u6267\u884c\u4f2a\u76ee\u6807\u7684 recipe \u3002 \u4f2a\u76ee\u6807\u4e5f\u53ef\u4ee5\u6709 prerequisites \uff1a all : prog1 prog2 prog3 .PHONY : all prog1 : prog1.o utils.o cc -o prog1 prog1.o utils.o prog2 : prog2.o cc -o prog2 prog2.o prog3 : prog3.o sort.o utils.o cc -o prog3 prog3.o sort.o utils.o \u4e00\u4e2a\u4f2a\u76ee\u6807\u7684 prerequisites \u662f\u53e6\u4e00\u4e2a\u4f2a\u76ee\u6807\u65f6\uff0c\u8868\u73b0\u4e3a\u53e6\u4e00\u4e2a\u7684\u5b50\u7a0b\u5e8f\uff1a .PHONY: cleanall cleanobj cleandiff cleanall : cleanobj cleandiff rm program cleanobj : rm *.o cleandiff : rm *.diff \u6267\u884c\u987a\u5e8f\uff1a rm *.o - rm *.diff - rm program","title":"4.\u7f16\u5199\u89c4\u5219"},{"location":"make/4.\u7f16\u5199\u89c4\u5219/#phony-targets","text":"\u4e00\u4e2a\u4f2a\u76ee\u6807\u4e0d\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u6587\u4ef6\u540d\uff0c\u53ea\u662f\u4e00\u4e2a\u5f53\u4f60\u660e\u786e\u7684\u8fd0\u884cmake\u8bf7\u6c42\u65f6\u4f1a\u88ab\u6267\u884c\u7684 recipe \u540d\u5b57\u3002\u6709\u4e24\u4e2a\u539f\u56e0\u4f7f\u7528\u4f2a\u76ee\u6807\uff1a \u907f\u514d\u540c\u540d\u6587\u4ef6\u51b2\u7a81 \u63d0\u5347\u6027\u80fd \u89e3\u51b3\u7684\u95ee\u9898\uff1a clean: rm *.o temp \u8fd9\u79cd\u5199\u6cd5\u5728\u6ca1\u6709\u6587\u4ef6\u540d\u51b2\u7a81\u7684\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7 make clean \u6b63\u5e38\u6267\u884c\u3002\u4f46\u662f\u5982\u679c\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a\u540c\u540d\u7684\u6587\u4ef6 clean \uff0c clean \u603b\u662f\u4f1a\u88ab\u8003\u8651\u662f\u6700\u65b0\u7684\u6587\u4ef6\uff0c\u5b83\u7684 recipe \u4e0d\u4f1a\u6267\u884c\u3002 \u6dfb\u52a0\u4e00\u4e2a\u4f2a\u76ee\u6807\u5373\u53ef\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a .PHONY: clean clean: rm *.o temp \u4e0emake\u7684\u9012\u5f52\u8c03\u7528\u7ed3\u5408\u4f7f\u7528\uff1a SUBDIRS = foo bar baz subdirs: for dir in $(SUBDIRS); do \\ $(MAKE) -C $$dir; \\ done \u8fd9\u79cd\u5199\u6cd5\u7684\u95ee\u9898\uff1a\u4efb\u4f55\u5728sub-make\u4e2d\u7684\u9519\u8bef\u90fd\u4f1a\u88ab\u5ffd\u89c6\uff1b\u4e0d\u80fd\u5e76\u884c\u6784\u5efa\u76ee\u6807\u3002 \u6539\u8fdb\u540e\u7684\u5199\u6cd5\uff1a SUBDIRS = foo bar baz .PHONY: subdirs $(SUBDIRS) subdirs: $(SUBDIRS) $(SUBDIRS): $(MAKE) -C $@ foo: baz \u6700\u540e\u4e00\u53e5\u58f0\u660e\u4e86baz\u5b8c\u6210\u4e4b\u540e\u624d\u80fd\u6784\u5efafoo\u3002 \u5bf9\u4e8e\u4f2a\u76ee\u6807\u5c06\u8df3\u8fc7\u9690\u542b\u89c4\u5219\u7684\u641c\u7d22\u3002 \u4f2a\u76ee\u6807\u4e0d\u5e94\u8be5\u6210\u4e3a\u4e00\u4e2a\u771f\u5b9e\u7684\u76ee\u6807\u6587\u4ef6\u7684 prerequisites \uff0c\u8d1f\u8d23\u6bcf\u6b21make\u66f4\u65b0\u6587\u4ef6\u90fd\u4f1a\u6267\u884c\u4f2a\u76ee\u6807\u7684 recipe \u3002 \u4f2a\u76ee\u6807\u4e5f\u53ef\u4ee5\u6709 prerequisites \uff1a all : prog1 prog2 prog3 .PHONY : all prog1 : prog1.o utils.o cc -o prog1 prog1.o utils.o prog2 : prog2.o cc -o prog2 prog2.o prog3 : prog3.o sort.o utils.o cc -o prog3 prog3.o sort.o utils.o \u4e00\u4e2a\u4f2a\u76ee\u6807\u7684 prerequisites \u662f\u53e6\u4e00\u4e2a\u4f2a\u76ee\u6807\u65f6\uff0c\u8868\u73b0\u4e3a\u53e6\u4e00\u4e2a\u7684\u5b50\u7a0b\u5e8f\uff1a .PHONY: cleanall cleanobj cleandiff cleanall : cleanobj cleandiff rm program cleanobj : rm *.o cleandiff : rm *.diff \u6267\u884c\u987a\u5e8f\uff1a rm *.o - rm *.diff - rm program","title":"Phony Targets"},{"location":"make/5.\u7f16\u5199recipes/","text":"\u7528\u6237\u4f7f\u7528\u4e0d\u540c\u7684shell\u7a0b\u5e8f\uff0c\u4f46\u662f\u5728makefiles\u603b\u662f\u4f7f\u7528 /bin/sh \u6267\u884crecipe\uff0c\u9664\u975emakefile\u6307\u5b9a\u4e86\u5176\u5b83\u7684shell\u3002 recipe\u8bed\u6cd5 Makefile\u6709\u4e24\u79cd\u8bed\u6cd5\uff1amake\u8bed\u6cd5\u548cshell\u8bed\u6cd5\u3002make\u4e0d\u4f1a\u53bb\u7406\u89e3shell\u8bed\u6cd5\uff0c\u6267\u884c\u7b80\u5355\u7684\u7ffb\u8bd1\u5c31\u4ea4\u7ed9shell\u53bb\u5904\u7406\u3002recipe\u4f7f\u7528\u7684\u662fshell\u8bed\u6cd5\u3002 \u6bcf\u4e2arecipe\u6240\u5728\u884c\u90fd\u8981\u6709tab\u5f00\u5934\uff0c\u9664\u4e86\u7b2c\u4e00\u884crecipe\u53ef\u80fd\u4f1a\u88ab\u9644\u52a0\u5230\u76ee\u6807\u884c\uff08\u5206\u53f7\u9694\u5f00\uff09\u3002 \u5206\u5272recipe\u884c \u4f8b1\uff1a all : @echo no\\ space @echo no\\ space @echo one \\ space @echo one\\ space \u8f93\u51fa\uff1a nospace nospace one space one space \u4f8b2\uff1a all : ; @echo 'hello \\ world' ; echo hello \\ world \u8f93\u51fa\uff1a hello \\ world hello world \u60f3\u8981\u4f7f\u7528\u5355\u5f15\u53f7\uff0c\u5e76\u4e14\u4e0d\u60f3\u51fa\u73b0 \\ \uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u5176\u8f6c\u6362\u4e3amake\u53d8\u91cf\uff1a HELLO = 'hello \\ world' all : ; @echo $(HELLO) \u8f93\u51fa\uff1a hello world \u5728recipes\u4e2d\u4f7f\u7528\u53d8\u91cf \u4e0d\u4f1a\u91cd\u65b0\u6784\u5efa\u7684\u76ee\u6807\u4e0d\u4f1a\u88ab\u6269\u5c55\uff0c\u5373\u4e0d\u4f1a\u8c03\u7528\u65b0\u7684recipe\u3002 \u5982\u679c\u60f3\u8981 $ \u51fa\u73b0\u5728recipe\u4e2d\uff0c\u5fc5\u987b\u952e\u5165\u4e24\u4e2a\u5f15\u7528\uff1a $$ LIST = one two three all: for i in $(LIST); do \\ echo $$i; \\ done recipe\u8f93\u51fa \u6b63\u5e38\u60c5\u51b5\u4e0bmake\u5728\u6267\u884crecipe\u4e4b\u524d\u4f1a\u6253\u5370\u5b83\u3002 \u5982\u679crecipe\u524d\u52a0\u4e0a\u4e86 @ \u7b26\u53f7\uff0c\u5c31\u4e0d\u4f1a\u6253\u5370recipe\uff0c\u5f53\u4f20\u7ed9shell\u5904\u7406\u7684\u65f6\u5019\u8be5\u7b26\u53f7\u4f1a\u88ab\u4e22\u5f03\u6389\u3002 \u7ed9make -n \u3001 --just-print \u7684flag\u65f6\u5019\uff0c\u53ea\u4f1a\u8f93\u51fa\u5927\u90e8\u5206recipe\u800c\u4e0d\u6267\u884c\uff0c\u5e26\u6709 @ \u7b26\u53f7\u7684\u884c\u4e5f\u4f1a\u88ab\u6253\u5370\u51fa\u6765\u3002 flag -s \u3001 --silent \u4f1a\u963b\u6b62 echoing \uff0c\u5c31\u50cf\u6240\u6709\u7684\u884c\u90fd\u52a0\u4e86 @ \u7b26\u53f7\u3002 recipe\u6267\u884c \u6267\u884crecipe\u65f6\uff0c\u6bcf\u884crecipe\u90fd\u4f1a\u8c03\u7528\u4e00\u4e2a\u65b0\u7684 sub-shell \u6765\u6267\u884c\uff0c\u9664\u975e\u5b9a\u4e49 .ONESHELL \u7279\u6b8a\u76ee\u6807\u3002\u6240\u4ee5\u672c\u884c\u7684shell\u53d8\u91cf\u548c\u8bf8\u5982 cd \u7684\u76ee\u5f55\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u7684recipe\u3002 make\u7684\u9012\u5f52\u4f7f\u7528 \u610f\u601d\u5c31\u662f\u5728makefile\u6587\u4ef6\u4e2d\u4f7f\u7528 make \u4f5c\u4e3a\u547d\u4ee4\u3002\u5f53\u4f60\u73b0\u8981\u4e3a\u5b50\u7cfb\u7edf\u5206\u79bbmakefile\u7684\u65f6\u5019\u5f88\u6709\u7528\u3002 subsystem: cd subdir $(MAKE)","title":"5.\u7f16\u5199recipes"},{"location":"make/5.\u7f16\u5199recipes/#recipe","text":"Makefile\u6709\u4e24\u79cd\u8bed\u6cd5\uff1amake\u8bed\u6cd5\u548cshell\u8bed\u6cd5\u3002make\u4e0d\u4f1a\u53bb\u7406\u89e3shell\u8bed\u6cd5\uff0c\u6267\u884c\u7b80\u5355\u7684\u7ffb\u8bd1\u5c31\u4ea4\u7ed9shell\u53bb\u5904\u7406\u3002recipe\u4f7f\u7528\u7684\u662fshell\u8bed\u6cd5\u3002 \u6bcf\u4e2arecipe\u6240\u5728\u884c\u90fd\u8981\u6709tab\u5f00\u5934\uff0c\u9664\u4e86\u7b2c\u4e00\u884crecipe\u53ef\u80fd\u4f1a\u88ab\u9644\u52a0\u5230\u76ee\u6807\u884c\uff08\u5206\u53f7\u9694\u5f00\uff09\u3002","title":"recipe\u8bed\u6cd5"},{"location":"make/5.\u7f16\u5199recipes/#recipe_1","text":"\u4f8b1\uff1a all : @echo no\\ space @echo no\\ space @echo one \\ space @echo one\\ space \u8f93\u51fa\uff1a nospace nospace one space one space \u4f8b2\uff1a all : ; @echo 'hello \\ world' ; echo hello \\ world \u8f93\u51fa\uff1a hello \\ world hello world \u60f3\u8981\u4f7f\u7528\u5355\u5f15\u53f7\uff0c\u5e76\u4e14\u4e0d\u60f3\u51fa\u73b0 \\ \uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u5176\u8f6c\u6362\u4e3amake\u53d8\u91cf\uff1a HELLO = 'hello \\ world' all : ; @echo $(HELLO) \u8f93\u51fa\uff1a hello world","title":"\u5206\u5272recipe\u884c"},{"location":"make/5.\u7f16\u5199recipes/#recipes","text":"\u4e0d\u4f1a\u91cd\u65b0\u6784\u5efa\u7684\u76ee\u6807\u4e0d\u4f1a\u88ab\u6269\u5c55\uff0c\u5373\u4e0d\u4f1a\u8c03\u7528\u65b0\u7684recipe\u3002 \u5982\u679c\u60f3\u8981 $ \u51fa\u73b0\u5728recipe\u4e2d\uff0c\u5fc5\u987b\u952e\u5165\u4e24\u4e2a\u5f15\u7528\uff1a $$ LIST = one two three all: for i in $(LIST); do \\ echo $$i; \\ done","title":"\u5728recipes\u4e2d\u4f7f\u7528\u53d8\u91cf"},{"location":"make/5.\u7f16\u5199recipes/#recipe_2","text":"\u6b63\u5e38\u60c5\u51b5\u4e0bmake\u5728\u6267\u884crecipe\u4e4b\u524d\u4f1a\u6253\u5370\u5b83\u3002 \u5982\u679crecipe\u524d\u52a0\u4e0a\u4e86 @ \u7b26\u53f7\uff0c\u5c31\u4e0d\u4f1a\u6253\u5370recipe\uff0c\u5f53\u4f20\u7ed9shell\u5904\u7406\u7684\u65f6\u5019\u8be5\u7b26\u53f7\u4f1a\u88ab\u4e22\u5f03\u6389\u3002 \u7ed9make -n \u3001 --just-print \u7684flag\u65f6\u5019\uff0c\u53ea\u4f1a\u8f93\u51fa\u5927\u90e8\u5206recipe\u800c\u4e0d\u6267\u884c\uff0c\u5e26\u6709 @ \u7b26\u53f7\u7684\u884c\u4e5f\u4f1a\u88ab\u6253\u5370\u51fa\u6765\u3002 flag -s \u3001 --silent \u4f1a\u963b\u6b62 echoing \uff0c\u5c31\u50cf\u6240\u6709\u7684\u884c\u90fd\u52a0\u4e86 @ \u7b26\u53f7\u3002","title":"recipe\u8f93\u51fa"},{"location":"make/5.\u7f16\u5199recipes/#recipe_3","text":"\u6267\u884crecipe\u65f6\uff0c\u6bcf\u884crecipe\u90fd\u4f1a\u8c03\u7528\u4e00\u4e2a\u65b0\u7684 sub-shell \u6765\u6267\u884c\uff0c\u9664\u975e\u5b9a\u4e49 .ONESHELL \u7279\u6b8a\u76ee\u6807\u3002\u6240\u4ee5\u672c\u884c\u7684shell\u53d8\u91cf\u548c\u8bf8\u5982 cd \u7684\u76ee\u5f55\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u7684recipe\u3002","title":"recipe\u6267\u884c"},{"location":"make/5.\u7f16\u5199recipes/#make","text":"\u610f\u601d\u5c31\u662f\u5728makefile\u6587\u4ef6\u4e2d\u4f7f\u7528 make \u4f5c\u4e3a\u547d\u4ee4\u3002\u5f53\u4f60\u73b0\u8981\u4e3a\u5b50\u7cfb\u7edf\u5206\u79bbmakefile\u7684\u65f6\u5019\u5f88\u6709\u7528\u3002 subsystem: cd subdir $(MAKE)","title":"make\u7684\u9012\u5f52\u4f7f\u7528"},{"location":"make/6.\u53d8\u91cf/","text":"\u53d8\u91cf\u540d\u662f\u5927\u5c0f\u5199\u654f\u611f\u7684\u3002 \u63a8\u8350\u5927\u5199\u7684\u53d8\u91cf\u540d\u6765\u63a7\u5236\u9690\u542b\u89c4\u5219\u6216\u8005\u7528\u6237\u4f7f\u7528\u547d\u4ee4\u884c\u65f6\u4f1a\u8986\u76d6\u7684\u53c2\u6570\uff1b\u5c0f\u5199\u53d8\u91cf\u540d\u5728Makefile\u5185\u90e8\u4f7f\u7528\u3002 \u53d8\u91cf\u5f15\u7528\u57fa\u7840 $(xxx) \u4e0e ${xxx} \u90fd\u662f\u53ef\u4ee5\u7684\u3002 \u5728\u6587\u4ef6\u540d\u6216 recipe \u4e2d\u5199\u5165 $ \u7b26\u53f7\u5fc5\u987b\u952e\u5165 $$ \u3002 \u53d8\u91cf\u7684\u4e24\u79cd\u7c7b\u578b recursively expanded \u53d8\u91cf\u3002\u4f7f\u7528 = \uff08\u5355\u884c\uff09\u6216 define \uff08\u591a\u884c\uff09\u5b9a\u4e49\u53d8\u91cf\u3002 \u7f3a\u70b9\uff1a CFLAGS = $(CFLAGS) -O \u4f1a\u5f15\u8d77\u81ea\u5faa\u73af\uff0cmake\u4f1a\u68c0\u6d4b\u5230\u81ea\u5faa\u73af\u5e76\u62a5\u544a\u4e00\u4e2a\u9519\u8bef\u3002 \u6bcf\u6b21\u53d8\u91cf\u88ab\u6269\u5c55\u7684\u65f6\u5019\u4efb\u4f55\u5728\u5b9a\u4e49\u4e2d\u7684\u51fd\u6570 (see Functions for Transforming Text) \u5f15\u7528\u90fd\u4f1a\u6267\u884c\u3002\u4f1a\u5f15\u8d77 wildcard \u548c shell \u51fd\u6570\u7ed9\u51fa\u4e0d\u53ef\u9884\u77e5\u7684\u7ed3\u679c\u3002 simply expanded \u53d8\u91cf\uff0c\u53ef\u4ee5\u89e3\u51b3\u4e0a\u8ff0\u7684\u7f3a\u70b9\u3002\u4f7f\u7528 := \u6216 ::= \u6765\u5b9a\u4e49\u3002\u53ea\u6709 ::= \u88abPOSIX\u6807\u51c6\u652f\u6301\u3002\u5bf9\u4e8e\u6240\u6709\u5f15\u7528\u8be5\u53d8\u91cf\u7684\u5176\u5b83\u53d8\u91cf\u6216\u8005\u51fd\u6570\uff0c\u5b83\u53ea\u4f1a\u88ab\u626b\u63cf\u4e00\u6b21\u3002 \u4f8b\uff1a x := foo y := $(x) bar x := later \u7ed3\u679c\uff1a y := foo bar x := later \u533a\u522b \uff1amake\u5728\u6267\u884c\u5b9a\u4e49 recursively expanded variable \u65f6\uff0c\u4e0d\u4f1a\u6269\u5c55\u8be5\u53d8\u91cf\u4e2d\u7684\u5f15\u7528\u53d8\u91cf\uff0c\u53ea\u6709\u5728\u5f15\u7528\u8be5\u53d8\u91cf\u7684\u65f6\u5019\u5f15\u7528\u53d8\u91cf\u624d\u4f1a\u88ab\u6269\u5c55\uff1b simply expanded variable \u5219\u662f\u5728\u5b9a\u4e49\u53d8\u91cf\u7684\u65f6\u5019\u5c31\u5df2\u7ecf\u5c06\u5f15\u7528\u53d8\u91cf\u6269\u5c55\u4e86\u3002 \u8fd8\u6709\u53e6\u4e00\u79cd\u5b9a\u4e49\u64cd\u4f5c ?= \uff0c\u6761\u4ef6\u8d4b\u503c\u53d8\u91cf\uff0c\u5982\u679c\u8be5\u53d8\u91cf\u6ca1\u6709\u88ab\u5b9a\u4e49\u8fc7\uff0c\u90a3\u4e48\u624d\u4f1a\u88ab\u8d4b\u503c\u3002 FOO ?= bar \u7b49\u4e8e ifeq ($(origin FOO), undefined) FOO = bar endif note \uff1a\u53d8\u91cf\u88ab\u8d4b\u4e88\u7a7a\u503c\u7684\u8bdd\uff0c\u5b83\u4ecd\u7136\u662f\u88ab\u5b9a\u4e49\u4e86\u3002\u6240\u4ee5 ?= \u4e0d\u4f1a\u88ab\u8bbe\u7f6e\u53d8\u91cf\u3002 \u5f15\u7528\u53d8\u91cf\u7684\u9ad8\u7ea7\u7279\u6027 \u66ff\u6362\u5f15\u7528 \u683c\u5f0f $(var:a=b) (or ${var:a=b} )\u4f1a\u5bfc\u81f4\u66ff\u6362\u6389 var \u7684\u503c\u4e2d\u7528 b \u66ff\u6362 a \u3002 \u53ef\u4e0e patsubst \u7ed3\u5408\u4f7f\u7528\u3002 foo := a.o b.o c.o bar := $(foo:%.o=%.c) \u7ed3\u679c\uff1a bar = a.c b.c c.c \u8ba1\u7b97\u53d8\u91cf\u540d \u53d8\u91cf\u53ef\u80fd\u88ab\u5f15\u7528\u5728\u4e00\u4e2a\u53d8\u91cf\u540d\u4e2d\u3002\u8fd9\u53eb\u505a computed variable name \u6216 nested variable reference \u3002 \u8fd9\u79cd\u65b9\u5f0f\u7684\u552f\u4e00\u7f3a\u70b9\u5c31\u662f\u4e0d\u80fd\u6307\u5b9a\u88ab\u8c03\u7528\u7684\u51fd\u6570\u540d\u3002\uff1f\uff1f\uff1f \u6267\u884cshell\u811a\u672c != \u53ef\u7528\u4e8e\u6267\u884cshell\u811a\u672c\u5e76\u628a\u8f93\u51fa\u8bbe\u7f6e\u4e3a\u53d8\u91cf\u7684\u503c\u3002 hash != printf '\\043' file_list != find . -name '*.c' \u5982\u679c\u7ed3\u679c\u4e2d\u542b\u6709 $ \uff0c\u5e76\u4e14\u4e0d\u60f3\u4f7f\u5176\u6269\u5c55\u4e3amake\u53d8\u91cf\uff0c\u90a3\u4e48\u5fc5\u987b\u66ff\u6362\u4e3a $$ \u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528shell\u51fd\u6570\uff08 See The shell Function \uff09\u3002 hash := $(shell printf '\\043') var := $(shell find . -name *.c ) \u5411\u53d8\u91cf\u6dfb\u52a0\u5185\u5bb9 \u5411\u4e00\u4e2a\u5df2\u7ecf\u5b9a\u4e49\u7684\u53d8\u91cf\u4e2d\u6dfb\u52a0\u5185\u5bb9\uff1a objects = main.o foo.o bar.o utils.o objects += another.o \u53d8\u91cf\u6ca1\u6709\u88ab\u5b9a\u4e49\u65f6\uff0c += \u76f8\u5f53\u4e8e = \u3002 \u5982\u679c\u5b9a\u4e49\u4e86\uff0c\u53d6\u51b3\u4e8e\u53d8\u91cf\u7c7b\u578b\u3002 override\u6307\u4ee4 \u5982\u679c\u4f7f\u7528\u547d\u4ee4\u884c\u53c2\u6570\u8bbe\u7f6e\u4e86\u53d8\u91cf\uff0c\u90a3\u4e48\u5728makefile\u4e2d\u7684\u8bbe\u7f6e\u5c06\u88ab\u5ffd\u7565\u3002 override \u53ef\u4ee5\u6253\u7834\u8fd9\u4e2a\u89c4\u5219\u3002 override variable = value \u6bd4\u6240\u6709\u5176\u5b83\u65b9\u5f0f\u5b9a\u4e49\u7684\u53d8\u91cf\u7684\u4f18\u5148\u7ea7\u90fd\u8981\u9ad8\u3002 \u7528\u6765\u63d0\u793a\u5e76\u6dfb\u52a0\u7528\u6237\u6307\u5b9a\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff1a override CFLAGS += -g \u7ed3\u5408define\u4f7f\u7528\uff1a override define foo = bar endef \u5b9a\u4e49\u591a\u884c\u53d8\u91cf define two-lines = echo foo echo $(bar) endef \u5f53\u5728 recipe \u4e2d\u4f7f\u7528\u6b64\u79cd\u53d8\u91cf\u65f6\uff0c\u76f8\u5f53\u4e8e two-lines = echo foo; echo $(bar)","title":"6.\u53d8\u91cf"},{"location":"make/6.\u53d8\u91cf/#_1","text":"$(xxx) \u4e0e ${xxx} \u90fd\u662f\u53ef\u4ee5\u7684\u3002 \u5728\u6587\u4ef6\u540d\u6216 recipe \u4e2d\u5199\u5165 $ \u7b26\u53f7\u5fc5\u987b\u952e\u5165 $$ \u3002","title":"\u53d8\u91cf\u5f15\u7528\u57fa\u7840"},{"location":"make/6.\u53d8\u91cf/#_2","text":"recursively expanded \u53d8\u91cf\u3002\u4f7f\u7528 = \uff08\u5355\u884c\uff09\u6216 define \uff08\u591a\u884c\uff09\u5b9a\u4e49\u53d8\u91cf\u3002 \u7f3a\u70b9\uff1a CFLAGS = $(CFLAGS) -O \u4f1a\u5f15\u8d77\u81ea\u5faa\u73af\uff0cmake\u4f1a\u68c0\u6d4b\u5230\u81ea\u5faa\u73af\u5e76\u62a5\u544a\u4e00\u4e2a\u9519\u8bef\u3002 \u6bcf\u6b21\u53d8\u91cf\u88ab\u6269\u5c55\u7684\u65f6\u5019\u4efb\u4f55\u5728\u5b9a\u4e49\u4e2d\u7684\u51fd\u6570 (see Functions for Transforming Text) \u5f15\u7528\u90fd\u4f1a\u6267\u884c\u3002\u4f1a\u5f15\u8d77 wildcard \u548c shell \u51fd\u6570\u7ed9\u51fa\u4e0d\u53ef\u9884\u77e5\u7684\u7ed3\u679c\u3002 simply expanded \u53d8\u91cf\uff0c\u53ef\u4ee5\u89e3\u51b3\u4e0a\u8ff0\u7684\u7f3a\u70b9\u3002\u4f7f\u7528 := \u6216 ::= \u6765\u5b9a\u4e49\u3002\u53ea\u6709 ::= \u88abPOSIX\u6807\u51c6\u652f\u6301\u3002\u5bf9\u4e8e\u6240\u6709\u5f15\u7528\u8be5\u53d8\u91cf\u7684\u5176\u5b83\u53d8\u91cf\u6216\u8005\u51fd\u6570\uff0c\u5b83\u53ea\u4f1a\u88ab\u626b\u63cf\u4e00\u6b21\u3002 \u4f8b\uff1a x := foo y := $(x) bar x := later \u7ed3\u679c\uff1a y := foo bar x := later \u533a\u522b \uff1amake\u5728\u6267\u884c\u5b9a\u4e49 recursively expanded variable \u65f6\uff0c\u4e0d\u4f1a\u6269\u5c55\u8be5\u53d8\u91cf\u4e2d\u7684\u5f15\u7528\u53d8\u91cf\uff0c\u53ea\u6709\u5728\u5f15\u7528\u8be5\u53d8\u91cf\u7684\u65f6\u5019\u5f15\u7528\u53d8\u91cf\u624d\u4f1a\u88ab\u6269\u5c55\uff1b simply expanded variable \u5219\u662f\u5728\u5b9a\u4e49\u53d8\u91cf\u7684\u65f6\u5019\u5c31\u5df2\u7ecf\u5c06\u5f15\u7528\u53d8\u91cf\u6269\u5c55\u4e86\u3002","title":"\u53d8\u91cf\u7684\u4e24\u79cd\u7c7b\u578b"},{"location":"make/6.\u53d8\u91cf/#_3","text":"FOO ?= bar \u7b49\u4e8e ifeq ($(origin FOO), undefined) FOO = bar endif note \uff1a\u53d8\u91cf\u88ab\u8d4b\u4e88\u7a7a\u503c\u7684\u8bdd\uff0c\u5b83\u4ecd\u7136\u662f\u88ab\u5b9a\u4e49\u4e86\u3002\u6240\u4ee5 ?= \u4e0d\u4f1a\u88ab\u8bbe\u7f6e\u53d8\u91cf\u3002","title":"\u8fd8\u6709\u53e6\u4e00\u79cd\u5b9a\u4e49\u64cd\u4f5c?=\uff0c\u6761\u4ef6\u8d4b\u503c\u53d8\u91cf\uff0c\u5982\u679c\u8be5\u53d8\u91cf\u6ca1\u6709\u88ab\u5b9a\u4e49\u8fc7\uff0c\u90a3\u4e48\u624d\u4f1a\u88ab\u8d4b\u503c\u3002"},{"location":"make/6.\u53d8\u91cf/#_4","text":"","title":"\u5f15\u7528\u53d8\u91cf\u7684\u9ad8\u7ea7\u7279\u6027"},{"location":"make/6.\u53d8\u91cf/#_5","text":"\u683c\u5f0f $(var:a=b) (or ${var:a=b} )\u4f1a\u5bfc\u81f4\u66ff\u6362\u6389 var \u7684\u503c\u4e2d\u7528 b \u66ff\u6362 a \u3002 \u53ef\u4e0e patsubst \u7ed3\u5408\u4f7f\u7528\u3002 foo := a.o b.o c.o bar := $(foo:%.o=%.c) \u7ed3\u679c\uff1a bar = a.c b.c c.c","title":"\u66ff\u6362\u5f15\u7528"},{"location":"make/6.\u53d8\u91cf/#_6","text":"\u53d8\u91cf\u53ef\u80fd\u88ab\u5f15\u7528\u5728\u4e00\u4e2a\u53d8\u91cf\u540d\u4e2d\u3002\u8fd9\u53eb\u505a computed variable name \u6216 nested variable reference \u3002 \u8fd9\u79cd\u65b9\u5f0f\u7684\u552f\u4e00\u7f3a\u70b9\u5c31\u662f\u4e0d\u80fd\u6307\u5b9a\u88ab\u8c03\u7528\u7684\u51fd\u6570\u540d\u3002\uff1f\uff1f\uff1f","title":"\u8ba1\u7b97\u53d8\u91cf\u540d"},{"location":"make/6.\u53d8\u91cf/#shell","text":"!= \u53ef\u7528\u4e8e\u6267\u884cshell\u811a\u672c\u5e76\u628a\u8f93\u51fa\u8bbe\u7f6e\u4e3a\u53d8\u91cf\u7684\u503c\u3002 hash != printf '\\043' file_list != find . -name '*.c' \u5982\u679c\u7ed3\u679c\u4e2d\u542b\u6709 $ \uff0c\u5e76\u4e14\u4e0d\u60f3\u4f7f\u5176\u6269\u5c55\u4e3amake\u53d8\u91cf\uff0c\u90a3\u4e48\u5fc5\u987b\u66ff\u6362\u4e3a $$ \u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528shell\u51fd\u6570\uff08 See The shell Function \uff09\u3002 hash := $(shell printf '\\043') var := $(shell find . -name *.c )","title":"\u6267\u884cshell\u811a\u672c"},{"location":"make/6.\u53d8\u91cf/#_7","text":"\u5411\u4e00\u4e2a\u5df2\u7ecf\u5b9a\u4e49\u7684\u53d8\u91cf\u4e2d\u6dfb\u52a0\u5185\u5bb9\uff1a objects = main.o foo.o bar.o utils.o objects += another.o \u53d8\u91cf\u6ca1\u6709\u88ab\u5b9a\u4e49\u65f6\uff0c += \u76f8\u5f53\u4e8e = \u3002 \u5982\u679c\u5b9a\u4e49\u4e86\uff0c\u53d6\u51b3\u4e8e\u53d8\u91cf\u7c7b\u578b\u3002","title":"\u5411\u53d8\u91cf\u6dfb\u52a0\u5185\u5bb9"},{"location":"make/6.\u53d8\u91cf/#override","text":"\u5982\u679c\u4f7f\u7528\u547d\u4ee4\u884c\u53c2\u6570\u8bbe\u7f6e\u4e86\u53d8\u91cf\uff0c\u90a3\u4e48\u5728makefile\u4e2d\u7684\u8bbe\u7f6e\u5c06\u88ab\u5ffd\u7565\u3002 override \u53ef\u4ee5\u6253\u7834\u8fd9\u4e2a\u89c4\u5219\u3002 override variable = value \u6bd4\u6240\u6709\u5176\u5b83\u65b9\u5f0f\u5b9a\u4e49\u7684\u53d8\u91cf\u7684\u4f18\u5148\u7ea7\u90fd\u8981\u9ad8\u3002 \u7528\u6765\u63d0\u793a\u5e76\u6dfb\u52a0\u7528\u6237\u6307\u5b9a\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff1a override CFLAGS += -g \u7ed3\u5408define\u4f7f\u7528\uff1a override define foo = bar endef","title":"override\u6307\u4ee4"},{"location":"make/6.\u53d8\u91cf/#_8","text":"define two-lines = echo foo echo $(bar) endef \u5f53\u5728 recipe \u4e2d\u4f7f\u7528\u6b64\u79cd\u53d8\u91cf\u65f6\uff0c\u76f8\u5f53\u4e8e two-lines = echo foo; echo $(bar)","title":"\u5b9a\u4e49\u591a\u884c\u53d8\u91cf"},{"location":"make/7.Makefile\u4e2d\u7684\u6761\u4ef6\u8bed\u53e5/","text":"\u4e0d\u80fd\u7528\u4e8e\u63a7\u5236 recipes \u3002 warning \uff1a\u4e0d\u80fd\u5728Makefile.am\u4e2d\u4f7f\u7528\u3002 \u4f8b\u5b50 libs_for_gcc = -lgnu normal_libs = foo: $(objects) ifeq ($(CC),gcc) $(CC) -o foo $(objects) $(libs_for_gcc) else $(CC) -o foo $(objects) $(normal_libs) endif \u5e26\u6709 tab \u624d\u80fd\u7b97\u4f5crecipe\uff0c\u8fd9\u91cc\u7684\u6761\u4ef6\u8bed\u53e5\u88ab\u5f53\u4f5c\u6587\u672c\u6765\u770b\u5f85\u3002 \u8bed\u6cd5 conditional-directive-one text-if-one-is-true else conditional-directive-two text-if-two-is-true ... else text-if-one-and-two-are-false endif else\u53ef\u7701\u7565\u3002 \u6d4b\u8bd5\u53d8\u91cf\u662f\u5426\u76f8\u7b49\uff0c\u6709\u4e94\u79cd\u6761\u4ef6 conditional-directive \u7684\u5199\u6cd5\uff1a ifeq (arg1, arg2) ifeq 'arg1' 'arg2' ifeq arg1 arg2 ifeq arg1 'arg2' ifeq 'arg1' arg2 \u6d4b\u8bd5\u53d8\u91cf\u662f\u5426\u4e3a\u7a7a\u503c\uff08\u7c7b\u4f3c\u4e8e\"\"\uff09\uff1a ifeq ($(strip $(foo)),) text-if-empty endif \u6d4b\u8bd5\u53d8\u91cf\u662f\u5426\u4e0d\u7b49\uff0c\u4e5f\u6709\u4e94\u79cd\u5199\u6cd5\uff1a ifneq (arg1, arg2) ifneq 'arg1' 'arg2' ifneq arg1 arg2 ifneq arg1 'arg2' ifneq 'arg1' arg2 ifdef variable-name ifdef\u83b7\u53d6\u53d8\u91cf\u7684\u540d\u5b57\u4f5c\u4e3a\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u53d8\u91cf\u503c\u7684\u5f15\u7528\u3002\u5982\u679c\u53d8\u91cf\u7684\u503c\u662f\u975e\u7a7a\u7684\uff0c\u5219\u6267\u884c text-if-true \u3002 variable-name \u662f\u53ef\u6269\u5c55\u7684\uff0c\u6240\u4ee5\u5176\u53ef\u4ee5\u662f\u4e00\u4e2a\u6269\u5c55\u6210\u4e00\u4e2a\u53d8\u91cf\u540d\u7684\u53d8\u91cf\u6216\u51fd\u6570\u3002 note \uff1a ifdef \u53ea\u6d4b\u8bd5\u503c\u662f\u5426\u4e3a\u975e\u7a7a\u3002\u6240\u4ee5\u9664\u4e86\u50cf\u8fd9\u6837\u5b9a\u4e49\u7684\u53d8\u91cf\uff1a foo = \uff0c\u90fd\u4f1a\u8fd4\u56de\u771f\u3002 \u5982\u679c\u60f3\u6d4b\u8bd5\u7a7a\u503c\uff0c\u4f7f\u7528 ifeq \u3002 \u4f8b\u5982\uff1a bar = foo = $(bar) ifdef foo frobozz = yes else frobozz = no endif \u7ed3\u679c\u662f\uff1afrobozz = yes foo = ifdef foo frobozz = yes else frobozz = no endif \u7ed3\u679c\u662f\uff1afrobozz = no ifndef variable-name \u4e0e ifdef \u76f8\u53cd\u3002 make\u662f\u5728\u8bfb\u53d6Makefile\u7684\u65f6\u5019\u5224\u65ad\u6761\u4ef6\u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u5728\u6761\u4ef6\u7684\u6d4b\u8bd5\u4e2d\u4f7f\u7528\u81ea\u52a8\u53d8\u91cf\uff0c\u56e0\u4e3a\u76f4\u5230recipes\u8fd0\u884c\u65f6\u4ed6\u4eec\u624d\u88ab\u5b9a\u4e49\u3002\u53c2\u8003 \u81ea\u52a8\u53d8\u91cf","title":"7.Makefile\u4e2d\u7684\u6761\u4ef6\u8bed\u53e5"},{"location":"make/7.Makefile\u4e2d\u7684\u6761\u4ef6\u8bed\u53e5/#_1","text":"libs_for_gcc = -lgnu normal_libs = foo: $(objects) ifeq ($(CC),gcc) $(CC) -o foo $(objects) $(libs_for_gcc) else $(CC) -o foo $(objects) $(normal_libs) endif \u5e26\u6709 tab \u624d\u80fd\u7b97\u4f5crecipe\uff0c\u8fd9\u91cc\u7684\u6761\u4ef6\u8bed\u53e5\u88ab\u5f53\u4f5c\u6587\u672c\u6765\u770b\u5f85\u3002","title":"\u4f8b\u5b50"},{"location":"make/7.Makefile\u4e2d\u7684\u6761\u4ef6\u8bed\u53e5/#_2","text":"conditional-directive-one text-if-one-is-true else conditional-directive-two text-if-two-is-true ... else text-if-one-and-two-are-false endif else\u53ef\u7701\u7565\u3002 \u6d4b\u8bd5\u53d8\u91cf\u662f\u5426\u76f8\u7b49\uff0c\u6709\u4e94\u79cd\u6761\u4ef6 conditional-directive \u7684\u5199\u6cd5\uff1a ifeq (arg1, arg2) ifeq 'arg1' 'arg2' ifeq arg1 arg2 ifeq arg1 'arg2' ifeq 'arg1' arg2 \u6d4b\u8bd5\u53d8\u91cf\u662f\u5426\u4e3a\u7a7a\u503c\uff08\u7c7b\u4f3c\u4e8e\"\"\uff09\uff1a ifeq ($(strip $(foo)),) text-if-empty endif \u6d4b\u8bd5\u53d8\u91cf\u662f\u5426\u4e0d\u7b49\uff0c\u4e5f\u6709\u4e94\u79cd\u5199\u6cd5\uff1a ifneq (arg1, arg2) ifneq 'arg1' 'arg2' ifneq arg1 arg2 ifneq arg1 'arg2' ifneq 'arg1' arg2 ifdef variable-name ifdef\u83b7\u53d6\u53d8\u91cf\u7684\u540d\u5b57\u4f5c\u4e3a\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u53d8\u91cf\u503c\u7684\u5f15\u7528\u3002\u5982\u679c\u53d8\u91cf\u7684\u503c\u662f\u975e\u7a7a\u7684\uff0c\u5219\u6267\u884c text-if-true \u3002 variable-name \u662f\u53ef\u6269\u5c55\u7684\uff0c\u6240\u4ee5\u5176\u53ef\u4ee5\u662f\u4e00\u4e2a\u6269\u5c55\u6210\u4e00\u4e2a\u53d8\u91cf\u540d\u7684\u53d8\u91cf\u6216\u51fd\u6570\u3002 note \uff1a ifdef \u53ea\u6d4b\u8bd5\u503c\u662f\u5426\u4e3a\u975e\u7a7a\u3002\u6240\u4ee5\u9664\u4e86\u50cf\u8fd9\u6837\u5b9a\u4e49\u7684\u53d8\u91cf\uff1a foo = \uff0c\u90fd\u4f1a\u8fd4\u56de\u771f\u3002 \u5982\u679c\u60f3\u6d4b\u8bd5\u7a7a\u503c\uff0c\u4f7f\u7528 ifeq \u3002 \u4f8b\u5982\uff1a bar = foo = $(bar) ifdef foo frobozz = yes else frobozz = no endif \u7ed3\u679c\u662f\uff1afrobozz = yes foo = ifdef foo frobozz = yes else frobozz = no endif \u7ed3\u679c\u662f\uff1afrobozz = no ifndef variable-name \u4e0e ifdef \u76f8\u53cd\u3002 make\u662f\u5728\u8bfb\u53d6Makefile\u7684\u65f6\u5019\u5224\u65ad\u6761\u4ef6\u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u5728\u6761\u4ef6\u7684\u6d4b\u8bd5\u4e2d\u4f7f\u7528\u81ea\u52a8\u53d8\u91cf\uff0c\u56e0\u4e3a\u76f4\u5230recipes\u8fd0\u884c\u65f6\u4ed6\u4eec\u624d\u88ab\u5b9a\u4e49\u3002\u53c2\u8003 \u81ea\u52a8\u53d8\u91cf","title":"\u8bed\u6cd5"},{"location":"make/8.\u8f6c\u6362\u6587\u672c\u51fd\u6570/","text":"\u4e0d\u80fd\u88abAutomake\u6240\u8bc6\u522b\u3002 8.9 value \u8bed\u6cd5\uff1a $(value \\*variable\\*) \u3002 variable \u662f\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u800c\u4e0d\u662f\u5176\u5f15\u7528\u3002 \u4f7f\u7528\u53d8\u91cf\u7684\u503c\uff0c\u503c\u4e0d\u4f1a\u88ab\u6269\u5c55\u3002 FOO = $PATH all: @echo $(FOO) @echo $(value FOO) \u7b2c\u4e00\u884c\u8f93\u51fa\u662fATH\uff0c\u4ee5\u4e3a $P \u88ab\u6269\u5c55\u4e3amake\u53d8\u91cf\u4e86\uff1b\u7b2c\u4e8c\u884c\u8f93\u51fa\u624d\u662f $PATH \u73af\u5883\u53d8\u91cf\u7684\u503c\u3002 note \uff1a\u5f53\u53d8\u91cf\u5df2\u7ecf\u88ab\u6269\u5c55\u4e86\uff0c\u90a3\u4e48\u8be5\u51fd\u6570\u4e0d\u4f1a\u8d77\u4f5c\u7528\u3002 8.9 eval \u5141\u8bb8\u4f60\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u975e\u5e38\u91cfmakefile\u6784\u9020\uff1a\u8ba1\u7b97\u5176\u5b83\u53d8\u91cf\u548c\u51fd\u6570\u7684\u7ed3\u679c\u3002 eval\u7684\u53c2\u6570\u88ab\u6269\u5c55\uff0c\u6269\u5c55\u7684\u7ed3\u679c\u4f1a\u88ab\u89e3\u6790\u4e3amakefile\u7684\u8bed\u6cd5\u3002\u6269\u5c55\u7ed3\u679c\u53ef\u4ee5\u5b9a\u4e49\u65b0\u7684make\u53d8\u91cf\u3001\u76ee\u6807\u3001\u9690\u542b\u6216\u660e\u786e\u7684\u89c4\u5219\u3001etc. eval\u7684\u7ed3\u679c\u603b\u662f\u7a7a\u5b57\u7b26\u4e32\u3002 eval\u7684\u53c2\u6570\u5b9e\u9645\u4e0a\u88ab\u6269\u5c55\u4e24\u6b21\uff1b\u7b2c\u4e00\u6b21\u7684\u6269\u5c55\u7ed3\u679c\u5c06\u5728\u89e3\u6790\u4e3amakefile\u8bed\u6cd5\u7684\u65f6\u5019\u518d\u6b21\u88ab\u6269\u5c55\u3002 \u8fd9\u610f\u5473\u7740\u4f60\u9700\u8981\u63d0\u4f9b\u989d\u5916\u7684\u7ea7\u522b\u6765\u4f7f\u7528 $ \u5b57\u7b26\u3002","title":"8.\u8f6c\u6362\u6587\u672c\u51fd\u6570"},{"location":"make/8.\u8f6c\u6362\u6587\u672c\u51fd\u6570/#89-value","text":"\u8bed\u6cd5\uff1a $(value \\*variable\\*) \u3002 variable \u662f\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u800c\u4e0d\u662f\u5176\u5f15\u7528\u3002 \u4f7f\u7528\u53d8\u91cf\u7684\u503c\uff0c\u503c\u4e0d\u4f1a\u88ab\u6269\u5c55\u3002 FOO = $PATH all: @echo $(FOO) @echo $(value FOO) \u7b2c\u4e00\u884c\u8f93\u51fa\u662fATH\uff0c\u4ee5\u4e3a $P \u88ab\u6269\u5c55\u4e3amake\u53d8\u91cf\u4e86\uff1b\u7b2c\u4e8c\u884c\u8f93\u51fa\u624d\u662f $PATH \u73af\u5883\u53d8\u91cf\u7684\u503c\u3002 note \uff1a\u5f53\u53d8\u91cf\u5df2\u7ecf\u88ab\u6269\u5c55\u4e86\uff0c\u90a3\u4e48\u8be5\u51fd\u6570\u4e0d\u4f1a\u8d77\u4f5c\u7528\u3002","title":"8.9 value"},{"location":"make/8.\u8f6c\u6362\u6587\u672c\u51fd\u6570/#89-eval","text":"\u5141\u8bb8\u4f60\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u975e\u5e38\u91cfmakefile\u6784\u9020\uff1a\u8ba1\u7b97\u5176\u5b83\u53d8\u91cf\u548c\u51fd\u6570\u7684\u7ed3\u679c\u3002 eval\u7684\u53c2\u6570\u88ab\u6269\u5c55\uff0c\u6269\u5c55\u7684\u7ed3\u679c\u4f1a\u88ab\u89e3\u6790\u4e3amakefile\u7684\u8bed\u6cd5\u3002\u6269\u5c55\u7ed3\u679c\u53ef\u4ee5\u5b9a\u4e49\u65b0\u7684make\u53d8\u91cf\u3001\u76ee\u6807\u3001\u9690\u542b\u6216\u660e\u786e\u7684\u89c4\u5219\u3001etc. eval\u7684\u7ed3\u679c\u603b\u662f\u7a7a\u5b57\u7b26\u4e32\u3002 eval\u7684\u53c2\u6570\u5b9e\u9645\u4e0a\u88ab\u6269\u5c55\u4e24\u6b21\uff1b\u7b2c\u4e00\u6b21\u7684\u6269\u5c55\u7ed3\u679c\u5c06\u5728\u89e3\u6790\u4e3amakefile\u8bed\u6cd5\u7684\u65f6\u5019\u518d\u6b21\u88ab\u6269\u5c55\u3002 \u8fd9\u610f\u5473\u7740\u4f60\u9700\u8981\u63d0\u4f9b\u989d\u5916\u7684\u7ea7\u522b\u6765\u4f7f\u7528 $ \u5b57\u7b26\u3002","title":"8.9 eval"},{"location":"make/\u7b80\u4ecb/","text":"make \u6307\u660e\u4e86\u4e00\u4e2a\u5927\u7a0b\u5e8f\u7684\u54ea\u4e00\u90e8\u5206\u9700\u8981\u91cd\u65b0\u6784\u5efa\uff0c\u7136\u540e\u53d1\u51fa\u547d\u4ee4\u6765\u91cd\u65b0\u7f16\u8bd1\u5b83\u4eec\u3002 Makefile\u4ecb\u7ecd Makefile \u6587\u4ef6\u544a\u8bc9make\u5982\u4f55\u7f16\u8bd1\u548c\u94fe\u63a5\u4e00\u4e2a\u7a0b\u5e8f\u3002 \u89c4\u5219\u4ecb\u7ecd rule \u6a21\u578b target \u2026 : prerequisites \u2026 recipe \u2026 \u2026 target \u901a\u5e38\u662f\u88ab\u4e00\u4e2a\u7a0b\u5e8f\u751f\u6210\u7684\u6587\u4ef6\u540d\uff08\u53ef\u6267\u884c\u7684\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u7684\u52a8\u4f5c\u3002 prerequisites \u662f\u8f93\u5165\u6587\u4ef6\u3002 recipe \u662f\u5c06\u8981\u6267\u884c\u7684\u52a8\u4f5c\u3002\u9700\u8981\u5728\u6bcf\u884c\u7684\u5f00\u5934\u952e\u5165\u4e00\u4e2atab\u5b57\u7b26\u3002 \u901a\u5e38\u4e00\u4e2a recipe \u662f\u4e00\u4e2a\u5e26\u6709\u5148\u51b3\u6761\u4ef6\u548c\u8868\u73b0\u7684\u89c4\u5219\u6765\u521b\u5efa\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u5982\u679c\u4efb\u4f55\u6761\u4ef6\u53d1\u751f\u6539\u53d8\u3002\u4f46\u662f\uff0c\u4e3a\u76ee\u6807\u6307\u5b9a\u4e00\u4e2a recipe \u7684 rule \u4e0d\u9700\u8981\u5148\u51b3\u6761\u4ef6\u3002 rule \u89e3\u91ca\u5982\u4f55\u3001\u4f55\u65f6\u91cd\u65b0\u6784\u5efa\u67d0\u4e9b\u7279\u5b9a\u89c4\u5219\u7684\u76ee\u6807\u6587\u4ef6\u3002make\u6267\u884c\u5e26\u6709 prerequisites \u7684 recipe \u521b\u5efa\u3001\u66f4\u65b0\u76ee\u6807\uff1b rule \u4e5f\u53ef\u4ee5\u89e3\u91ca\u5982\u4f55\u3001\u4f55\u65f6\u6267\u884c\u52a8\u4f5c\u3002 Makefile\u8fd8\u53ef\u4ee5\u5305\u542b\u9664\u4e86\u89c4\u5219\u4ee5\u5916\u7684\u5176\u4ed6\u6587\u672c\u3002 \u90a3\u4e9b\u4e0d\u5f15\u7528\u6587\u4ef6\u4ec5\u4ec5\u662f\u64cd\u4f5c\u7684\u76ee\u6807\u79f0\u4e3a phony targets \uff08\u4f2a\u76ee\u6807\uff09\u3002 See Phony Targets \u3002 See Errors in Recipes \u67e5\u770b\u5982\u4f55\u5ffd\u7565\u9519\u8bef\u3002 make\u5982\u4f55\u6267\u884cMakefile make\u9ed8\u8ba4\u4f34\u968f\u7740\u7b2c\u4e00\u4e2a\u76ee\u6807\u5f00\u59cb\u3002\u53eb\u505a default goal \u3002 Goals \u662fmake\u6700\u7ec8\u8981\u66f4\u65b0\u7684\u76ee\u6807\u3002 \u6267\u884c rule \u4e4b\u524d\uff0c\u9700\u8981\u6ee1\u8db3 prerequisites \uff0c\u6240\u4ee5\u4f1a\u5148\u6267\u884c\u6ee1\u8db3 prerequisites \u7684 rule \u3002 objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) main.o : main.c defs.h cc -c main.c kbd.o : kbd.c defs.h command.h cc -c kbd.c command.o : command.c defs.h command.h cc -c command.c display.o : display.c defs.h buffer.h cc -c display.c insert.o : insert.c defs.h buffer.h cc -c insert.c search.o : search.c defs.h buffer.h cc -c search.c files.o : files.c defs.h buffer.h command.h cc -c files.c utils.o : utils.c defs.h cc -c utils.c clean : rm edit $(objects) \u4f7f\u7528\u53d8\u91cf \u5b9a\u4e49\u53d8\u91cf\uff1a objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o \u4f7f\u7528\u53d8\u91cf\uff1a $(objects) \u8ba9make\u63a8\u6d4brecipe \u4f8b\u5b50\uff1a \u4e0d\u5fc5\u4e3a\u4e86\u5355\u4e2aC\u6e90\u6587\u4ef6\u62fc\u5199 recipe \uff0c\u56e0\u4e3amake\u53ef\u4ee5\u81ea\u52a8\u5730\u89e3\u51b3\uff1a\u5b83\u6709 implicit rule \uff08\u9690\u542b\u89c4\u5219\uff09\u4f7f\u7528 cc -c \u547d\u4ee4\u66f4\u65b0\u4e00\u4e2a .o \u6587\u4ef6\u4ece\u76f8\u5173\u7684 .c \u6587\u4ef6\u3002 objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) main.o : defs.h kbd.o : defs.h command.h command.o : defs.h command.h display.o : defs.h buffer.h insert.o : defs.h buffer.h search.o : defs.h buffer.h files.o : defs.h buffer.h command.h utils.o : defs.h .PHONY : clean clean : rm edit $(objects) Makefile\u7684\u53e6\u4e00\u79cd\u98ce\u683c \u5f53Makefile\u6587\u4ef6\u53ea\u7531 implicit rule \u7ec4\u6210\u65f6\uff0c\u53ef\u4ee5\u5199\u6210\u53e6\u4e00\u79cd\u7684\u98ce\u683c\uff1a\u901a\u8fc7\u4ed6\u4eec\u7684 prerequisites \u5c06\u5bf9\u8c61\u5206\u7ec4\u800c\u4e0d\u662f\u4ed6\u4eec\u7684 targets \u3002 objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) $(objects) : defs.h kbd.o command.o files.o : command.h display.o insert.o search.o files.o : buffer.h \u6e05\u7406\u6587\u4ef6\u5939\u7684\u89c4\u5219 .PHONY : clean clean : -rm edit $(objects) \u9632\u6b62make\u88ab\u4e00\u4e2a\u53eb\u505a clean \u7684\u6587\u4ef6\u5f04\u7cca\u6d82\uff0c\u5e76\u4f7f\u5176\u5728\u51fa\u9519\u7684\u60c5\u51b5\u4e0b\u7ee7\u7eed\u6267\u884c\u3002","title":"\u7b80\u4ecb"},{"location":"make/\u7b80\u4ecb/#makefile","text":"Makefile \u6587\u4ef6\u544a\u8bc9make\u5982\u4f55\u7f16\u8bd1\u548c\u94fe\u63a5\u4e00\u4e2a\u7a0b\u5e8f\u3002","title":"Makefile\u4ecb\u7ecd"},{"location":"make/\u7b80\u4ecb/#_1","text":"rule \u6a21\u578b target \u2026 : prerequisites \u2026 recipe \u2026 \u2026 target \u901a\u5e38\u662f\u88ab\u4e00\u4e2a\u7a0b\u5e8f\u751f\u6210\u7684\u6587\u4ef6\u540d\uff08\u53ef\u6267\u884c\u7684\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u7684\u52a8\u4f5c\u3002 prerequisites \u662f\u8f93\u5165\u6587\u4ef6\u3002 recipe \u662f\u5c06\u8981\u6267\u884c\u7684\u52a8\u4f5c\u3002\u9700\u8981\u5728\u6bcf\u884c\u7684\u5f00\u5934\u952e\u5165\u4e00\u4e2atab\u5b57\u7b26\u3002 \u901a\u5e38\u4e00\u4e2a recipe \u662f\u4e00\u4e2a\u5e26\u6709\u5148\u51b3\u6761\u4ef6\u548c\u8868\u73b0\u7684\u89c4\u5219\u6765\u521b\u5efa\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u5982\u679c\u4efb\u4f55\u6761\u4ef6\u53d1\u751f\u6539\u53d8\u3002\u4f46\u662f\uff0c\u4e3a\u76ee\u6807\u6307\u5b9a\u4e00\u4e2a recipe \u7684 rule \u4e0d\u9700\u8981\u5148\u51b3\u6761\u4ef6\u3002 rule \u89e3\u91ca\u5982\u4f55\u3001\u4f55\u65f6\u91cd\u65b0\u6784\u5efa\u67d0\u4e9b\u7279\u5b9a\u89c4\u5219\u7684\u76ee\u6807\u6587\u4ef6\u3002make\u6267\u884c\u5e26\u6709 prerequisites \u7684 recipe \u521b\u5efa\u3001\u66f4\u65b0\u76ee\u6807\uff1b rule \u4e5f\u53ef\u4ee5\u89e3\u91ca\u5982\u4f55\u3001\u4f55\u65f6\u6267\u884c\u52a8\u4f5c\u3002 Makefile\u8fd8\u53ef\u4ee5\u5305\u542b\u9664\u4e86\u89c4\u5219\u4ee5\u5916\u7684\u5176\u4ed6\u6587\u672c\u3002 \u90a3\u4e9b\u4e0d\u5f15\u7528\u6587\u4ef6\u4ec5\u4ec5\u662f\u64cd\u4f5c\u7684\u76ee\u6807\u79f0\u4e3a phony targets \uff08\u4f2a\u76ee\u6807\uff09\u3002 See Phony Targets \u3002 See Errors in Recipes \u67e5\u770b\u5982\u4f55\u5ffd\u7565\u9519\u8bef\u3002","title":"\u89c4\u5219\u4ecb\u7ecd"},{"location":"make/\u7b80\u4ecb/#makemakefile","text":"make\u9ed8\u8ba4\u4f34\u968f\u7740\u7b2c\u4e00\u4e2a\u76ee\u6807\u5f00\u59cb\u3002\u53eb\u505a default goal \u3002 Goals \u662fmake\u6700\u7ec8\u8981\u66f4\u65b0\u7684\u76ee\u6807\u3002 \u6267\u884c rule \u4e4b\u524d\uff0c\u9700\u8981\u6ee1\u8db3 prerequisites \uff0c\u6240\u4ee5\u4f1a\u5148\u6267\u884c\u6ee1\u8db3 prerequisites \u7684 rule \u3002 objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) main.o : main.c defs.h cc -c main.c kbd.o : kbd.c defs.h command.h cc -c kbd.c command.o : command.c defs.h command.h cc -c command.c display.o : display.c defs.h buffer.h cc -c display.c insert.o : insert.c defs.h buffer.h cc -c insert.c search.o : search.c defs.h buffer.h cc -c search.c files.o : files.c defs.h buffer.h command.h cc -c files.c utils.o : utils.c defs.h cc -c utils.c clean : rm edit $(objects)","title":"make\u5982\u4f55\u6267\u884cMakefile"},{"location":"make/\u7b80\u4ecb/#_2","text":"\u5b9a\u4e49\u53d8\u91cf\uff1a objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o \u4f7f\u7528\u53d8\u91cf\uff1a $(objects)","title":"\u4f7f\u7528\u53d8\u91cf"},{"location":"make/\u7b80\u4ecb/#makerecipe","text":"\u4f8b\u5b50\uff1a \u4e0d\u5fc5\u4e3a\u4e86\u5355\u4e2aC\u6e90\u6587\u4ef6\u62fc\u5199 recipe \uff0c\u56e0\u4e3amake\u53ef\u4ee5\u81ea\u52a8\u5730\u89e3\u51b3\uff1a\u5b83\u6709 implicit rule \uff08\u9690\u542b\u89c4\u5219\uff09\u4f7f\u7528 cc -c \u547d\u4ee4\u66f4\u65b0\u4e00\u4e2a .o \u6587\u4ef6\u4ece\u76f8\u5173\u7684 .c \u6587\u4ef6\u3002 objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) main.o : defs.h kbd.o : defs.h command.h command.o : defs.h command.h display.o : defs.h buffer.h insert.o : defs.h buffer.h search.o : defs.h buffer.h files.o : defs.h buffer.h command.h utils.o : defs.h .PHONY : clean clean : rm edit $(objects)","title":"\u8ba9make\u63a8\u6d4brecipe"},{"location":"make/\u7b80\u4ecb/#makefile_1","text":"\u5f53Makefile\u6587\u4ef6\u53ea\u7531 implicit rule \u7ec4\u6210\u65f6\uff0c\u53ef\u4ee5\u5199\u6210\u53e6\u4e00\u79cd\u7684\u98ce\u683c\uff1a\u901a\u8fc7\u4ed6\u4eec\u7684 prerequisites \u5c06\u5bf9\u8c61\u5206\u7ec4\u800c\u4e0d\u662f\u4ed6\u4eec\u7684 targets \u3002 objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) $(objects) : defs.h kbd.o command.o files.o : command.h display.o insert.o search.o files.o : buffer.h","title":"Makefile\u7684\u53e6\u4e00\u79cd\u98ce\u683c"},{"location":"make/\u7b80\u4ecb/#_3","text":".PHONY : clean clean : -rm edit $(objects) \u9632\u6b62make\u88ab\u4e00\u4e2a\u53eb\u505a clean \u7684\u6587\u4ef6\u5f04\u7cca\u6d82\uff0c\u5e76\u4f7f\u5176\u5728\u51fa\u9519\u7684\u60c5\u51b5\u4e0b\u7ee7\u7eed\u6267\u884c\u3002","title":"\u6e05\u7406\u6587\u4ef6\u5939\u7684\u89c4\u5219"},{"location":"other/CSDN\u8bed\u6cd5/","text":"@ TOC \u6b22\u8fce\u4f7f\u7528Markdown\u7f16\u8f91\u5668 \u4f60\u597d\uff01 \u8fd9\u662f\u4f60\u7b2c\u4e00\u6b21\u4f7f\u7528 Markdown\u7f16\u8f91\u5668 \u6240\u5c55\u793a\u7684\u6b22\u8fce\u9875\u3002\u5982\u679c\u4f60\u60f3\u5b66\u4e60\u5982\u4f55\u4f7f\u7528Markdown\u7f16\u8f91\u5668, \u53ef\u4ee5\u4ed4\u7ec6\u9605\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff0c\u4e86\u89e3\u4e00\u4e0bMarkdown\u7684\u57fa\u672c\u8bed\u6cd5\u77e5\u8bc6\u3002 \u65b0\u7684\u6539\u53d8 \u6211\u4eec\u5bf9Markdown\u7f16\u8f91\u5668\u8fdb\u884c\u4e86\u4e00\u4e9b\u529f\u80fd\u62d3\u5c55\u4e0e\u8bed\u6cd5\u652f\u6301\uff0c\u9664\u4e86\u6807\u51c6\u7684Markdown\u7f16\u8f91\u5668\u529f\u80fd\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u5982\u4e0b\u51e0\u70b9\u65b0\u529f\u80fd\uff0c\u5e2e\u52a9\u4f60\u7528\u5b83\u5199\u535a\u5ba2\uff1a \u5168\u65b0\u7684\u754c\u9762\u8bbe\u8ba1 \uff0c\u5c06\u4f1a\u5e26\u6765\u5168\u65b0\u7684\u5199\u4f5c\u4f53\u9a8c\uff1b \u5728\u521b\u4f5c\u4e2d\u5fc3\u8bbe\u7f6e\u4f60\u559c\u7231\u7684\u4ee3\u7801\u9ad8\u4eae\u6837\u5f0f\uff0cMarkdown \u5c06\u4ee3\u7801\u7247\u663e\u793a\u9009\u62e9\u7684\u9ad8\u4eae\u6837\u5f0f \u8fdb\u884c\u5c55\u793a\uff1b \u589e\u52a0\u4e86 \u56fe\u7247\u62d6\u62fd \u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u5c06\u672c\u5730\u7684\u56fe\u7247\u76f4\u63a5\u62d6\u62fd\u5230\u7f16\u8f91\u533a\u57df\u76f4\u63a5\u5c55\u793a\uff1b \u5168\u65b0\u7684 KaTeX\u6570\u5b66\u516c\u5f0f \u8bed\u6cd5\uff1b \u589e\u52a0\u4e86\u652f\u6301 \u7518\u7279\u56fe\u7684mermaid\u8bed\u6cd5 ^1 \u529f\u80fd\uff1b \u589e\u52a0\u4e86 \u591a\u5c4f\u5e55\u7f16\u8f91 Markdown\u6587\u7ae0\u529f\u80fd\uff1b \u589e\u52a0\u4e86 \u7126\u70b9\u5199\u4f5c\u6a21\u5f0f\u3001\u9884\u89c8\u6a21\u5f0f\u3001\u7b80\u6d01\u5199\u4f5c\u6a21\u5f0f\u3001\u5de6\u53f3\u533a\u57df\u540c\u6b65\u6eda\u8f6e\u8bbe\u7f6e \u7b49\u529f\u80fd\uff0c\u529f\u80fd\u6309\u94ae\u4f4d\u4e8e\u7f16\u8f91\u533a\u57df\u4e0e\u9884\u89c8\u533a\u57df\u4e2d\u95f4\uff1b \u589e\u52a0\u4e86 \u68c0\u67e5\u5217\u8868 \u529f\u80fd\u3002 \u529f\u80fd\u5feb\u6377\u952e \u64a4\u9500\uff1a Ctrl/Command + Z \u91cd\u505a\uff1a Ctrl/Command + Y \u52a0\u7c97\uff1a Ctrl/Command + B \u659c\u4f53\uff1a Ctrl/Command + I \u6807\u9898\uff1a Ctrl/Command + Shift + H \u65e0\u5e8f\u5217\u8868\uff1a Ctrl/Command + Shift + U \u6709\u5e8f\u5217\u8868\uff1a Ctrl/Command + Shift + O \u68c0\u67e5\u5217\u8868\uff1a Ctrl/Command + Shift + C \u63d2\u5165\u4ee3\u7801\uff1a Ctrl/Command + Shift + K \u63d2\u5165\u94fe\u63a5\uff1a Ctrl/Command + Shift + L \u63d2\u5165\u56fe\u7247\uff1a Ctrl/Command + Shift + G \u5408\u7406\u7684\u521b\u5efa\u6807\u9898\uff0c\u6709\u52a9\u4e8e\u76ee\u5f55\u7684\u751f\u6210 \u76f4\u63a5\u8f93\u51651\u6b21 # \uff0c\u5e76\u6309\u4e0b space \u540e\uff0c\u5c06\u751f\u62101\u7ea7\u6807\u9898\u3002 \u8f93\u51652\u6b21 # \uff0c\u5e76\u6309\u4e0b space \u540e\uff0c\u5c06\u751f\u62102\u7ea7\u6807\u9898\u3002 \u4ee5\u6b64\u7c7b\u63a8\uff0c\u6211\u4eec\u652f\u63016\u7ea7\u6807\u9898\u3002\u6709\u52a9\u4e8e\u4f7f\u7528 TOC \u8bed\u6cd5\u540e\u751f\u6210\u4e00\u4e2a\u5b8c\u7f8e\u7684\u76ee\u5f55\u3002 \u5982\u4f55\u6539\u53d8\u6587\u672c\u7684\u6837\u5f0f \u5f3a\u8c03\u6587\u672c \u5f3a\u8c03\u6587\u672c \u52a0\u7c97\u6587\u672c \u52a0\u7c97\u6587\u672c ==\u6807\u8bb0\u6587\u672c== ~~\u5220\u9664\u6587\u672c~~ \u5f15\u7528\u6587\u672c H~2~O is\u662f\u6db2\u4f53\u3002 2^10^ \u8fd0\u7b97\u7ed3\u679c\u662f 1024. \u63d2\u5165\u94fe\u63a5\u4e0e\u56fe\u7247 \u94fe\u63a5: link . \u56fe\u7247: \u5e26\u5c3a\u5bf8\u7684\u56fe\u7247: \u5c45\u4e2d\u7684\u56fe\u7247: \u5c45\u4e2d\u5e76\u4e14\u5e26\u5c3a\u5bf8\u7684\u56fe\u7247: \u5f53\u7136\uff0c\u6211\u4eec\u4e3a\u4e86\u8ba9\u7528\u6237\u66f4\u52a0\u4fbf\u6377\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u56fe\u7247\u62d6\u62fd\u529f\u80fd\u3002 \u5982\u4f55\u63d2\u5165\u4e00\u6bb5\u6f02\u4eae\u7684\u4ee3\u7801\u7247 \u53bb \u535a\u5ba2\u8bbe\u7f6e \u9875\u9762\uff0c\u9009\u62e9\u4e00\u6b3e\u4f60\u559c\u6b22\u7684\u4ee3\u7801\u7247\u9ad8\u4eae\u6837\u5f0f\uff0c\u4e0b\u9762\u5c55\u793a\u540c\u6837\u9ad8\u4eae\u7684 \u4ee3\u7801\u7247 . // An highlighted block var foo = 'bar'; \u751f\u6210\u4e00\u4e2a\u9002\u5408\u4f60\u7684\u5217\u8868 \u9879\u76ee \u9879\u76ee \u9879\u76ee \u9879\u76ee1 \u9879\u76ee2 \u9879\u76ee3 [ ] \u8ba1\u5212\u4efb\u52a1 [x] \u5b8c\u6210\u4efb\u52a1 \u521b\u5efa\u4e00\u4e2a\u8868\u683c \u4e00\u4e2a\u7b80\u5355\u7684\u8868\u683c\u662f\u8fd9\u4e48\u521b\u5efa\u7684\uff1a \u9879\u76ee | Value -------- | ----- \u7535\u8111 | $1600 \u624b\u673a | $12 \u5bfc\u7ba1 | $1 \u8bbe\u5b9a\u5185\u5bb9\u5c45\u4e2d\u3001\u5c45\u5de6\u3001\u5c45\u53f3 \u4f7f\u7528 :---------: \u5c45\u4e2d \u4f7f\u7528 :---------- \u5c45\u5de6 \u4f7f\u7528 ----------: \u5c45\u53f3 | \u7b2c\u4e00\u5217 | \u7b2c\u4e8c\u5217 | \u7b2c\u4e09\u5217 | |:-----------:| -------------:|:-------------| | \u7b2c\u4e00\u5217\u6587\u672c\u5c45\u4e2d | \u7b2c\u4e8c\u5217\u6587\u672c\u5c45\u53f3 | \u7b2c\u4e09\u5217\u6587\u672c\u5c45\u5de6 | SmartyPants SmartyPants\u5c06ASCII\u6807\u70b9\u5b57\u7b26\u8f6c\u6362\u4e3a\u201c\u667a\u80fd\u201d\u5370\u5237\u6807\u70b9HTML\u5b9e\u4f53\u3002\u4f8b\u5982\uff1a | TYPE |ASCII |HTML |----------------|-------------------------------|-----------------------------| |Single backticks| 'Isn't this fun?' |'Isn't this fun?' | |Quotes | \"Isn't this fun?\" |\"Isn't this fun?\" | |Dashes | -- is en-dash, --- is em-dash |-- is en-dash, --- is em-dash| \u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u5217\u8868 Markdown : Text-to-HTML conversion tool Authors : John : Luke \u5982\u4f55\u521b\u5efa\u4e00\u4e2a\u6ce8\u811a \u4e00\u4e2a\u5177\u6709\u6ce8\u811a\u7684\u6587\u672c\u3002 ^2 \u6ce8\u91ca\u4e5f\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684 Markdown\u5c06\u6587\u672c\u8f6c\u6362\u4e3a HTML\u3002 *[HTML]: \u8d85\u6587\u672c\u6807\u8bb0\u8bed\u8a00 KaTeX\u6570\u5b66\u516c\u5f0f \u60a8\u53ef\u4ee5\u4f7f\u7528\u6e32\u67d3LaTeX\u6570\u5b66\u8868\u8fbe\u5f0f KaTeX : Gamma\u516c\u5f0f\u5c55\u793a $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$ \u662f\u901a\u8fc7\u6b27\u62c9\u79ef\u5206 $$ \\Gamma(z) = \\int_0^\\infty t^{z-1}e^{-t}dt\\,. $$ \u4f60\u53ef\u4ee5\u627e\u5230\u66f4\u591a\u5173\u4e8e\u7684\u4fe1\u606f LaTeX \u6570\u5b66\u8868\u8fbe\u5f0f here . \u65b0\u7684\u7518\u7279\u56fe\u529f\u80fd\uff0c\u4e30\u5bcc\u4f60\u7684\u6587\u7ae0 gantt dateFormat YYYY-MM-DD title Adding GANTT diagram functionality to mermaid section \u73b0\u6709\u4efb\u52a1 \u5df2\u5b8c\u6210 :done, des1, 2014-01-06,2014-01-08 \u8fdb\u884c\u4e2d :active, des2, 2014-01-09, 3d \u8ba1\u5212\u4e00 : des3, after des2, 5d \u8ba1\u5212\u4e8c : des4, after des3, 5d \u5173\u4e8e \u7518\u7279\u56fe \u8bed\u6cd5\uff0c\u53c2\u8003 \u8fd9\u513f , UML \u56fe\u8868 \u53ef\u4ee5\u4f7f\u7528UML\u56fe\u8868\u8fdb\u884c\u6e32\u67d3\u3002 Mermaid . \u4f8b\u5982\u4e0b\u9762\u4ea7\u751f\u7684\u4e00\u4e2a\u5e8f\u5217\u56fe\uff1a: sequenceDiagram \u5f20\u4e09 - \u674e\u56db: \u4f60\u597d\uff01\u674e\u56db, \u6700\u8fd1\u600e\u4e48\u6837? \u674e\u56db-- \u738b\u4e94: \u4f60\u6700\u8fd1\u600e\u4e48\u6837\uff0c\u738b\u4e94\uff1f \u674e\u56db--x \u5f20\u4e09: \u6211\u5f88\u597d\uff0c\u8c22\u8c22! \u674e\u56db-x \u738b\u4e94: \u6211\u5f88\u597d\uff0c\u8c22\u8c22! Note right of \u738b\u4e94: \u674e\u56db\u60f3\u4e86\u5f88\u957f\u65f6\u95f4, \u6587\u5b57\u592a\u957f\u4e86 br/ \u4e0d\u9002\u5408\u653e\u5728\u4e00\u884c. \u674e\u56db-- \u5f20\u4e09: \u6253\u91cf\u7740\u738b\u4e94... \u5f20\u4e09- \u738b\u4e94: \u5f88\u597d... \u738b\u4e94, \u4f60\u600e\u4e48\u6837? \u8fd9\u5c06\u4ea7\u751f\u4e00\u4e2a\u6d41\u7a0b\u56fe\u3002: graph LR A[\u957f\u65b9\u5f62] -- \u94fe\u63a5 -- B((\u5706)) A -- C(\u5706\u89d2\u957f\u65b9\u5f62) B -- D{\u83f1\u5f62} C -- D \u5173\u4e8e Mermaid \u8bed\u6cd5\uff0c\u53c2\u8003 \u8fd9\u513f , FLowchart\u6d41\u7a0b\u56fe \u6211\u4eec\u4f9d\u65e7\u4f1a\u652f\u6301flowchart\u7684\u6d41\u7a0b\u56fe\uff1a flowchat st= start: \u5f00\u59cb e= end: \u7ed3\u675f op= operation: \u6211\u7684\u64cd\u4f5c cond= condition: \u786e\u8ba4\uff1f st- op- cond cond(yes)- e cond(no)- op \u5173\u4e8e Flowchart\u6d41\u7a0b\u56fe \u8bed\u6cd5\uff0c\u53c2\u8003 \u8fd9\u513f . \u5bfc\u51fa\u4e0e\u5bfc\u5165 \u5bfc\u51fa \u5982\u679c\u4f60\u60f3\u5c1d\u8bd5\u4f7f\u7528\u6b64\u7f16\u8f91\u5668, \u4f60\u53ef\u4ee5\u5728\u6b64\u7bc7\u6587\u7ae0\u4efb\u610f\u7f16\u8f91\u3002\u5f53\u4f60\u5b8c\u6210\u4e86\u4e00\u7bc7\u6587\u7ae0\u7684\u5199\u4f5c, \u5728\u4e0a\u65b9\u5de5\u5177\u680f\u627e\u5230 \u6587\u7ae0\u5bfc\u51fa \uff0c\u751f\u6210\u4e00\u4e2a.md\u6587\u4ef6\u6216\u8005.html\u6587\u4ef6\u8fdb\u884c\u672c\u5730\u4fdd\u5b58\u3002 \u5bfc\u5165 \u5982\u679c\u4f60\u60f3\u52a0\u8f7d\u4e00\u7bc7\u4f60\u5199\u8fc7\u7684.md\u6587\u4ef6\u6216\u8005.html\u6587\u4ef6\uff0c\u5728\u4e0a\u65b9\u5de5\u5177\u680f\u53ef\u4ee5\u9009\u62e9\u5bfc\u5165\u529f\u80fd\u8fdb\u884c\u5bf9\u5e94\u6269\u5c55\u540d\u7684\u6587\u4ef6\u5bfc\u5165\uff0c \u7ee7\u7eed\u4f60\u7684\u521b\u4f5c\u3002","title":"CSDN\u8bed\u6cd5"},{"location":"other/CSDN\u8bed\u6cd5/#markdown","text":"\u4f60\u597d\uff01 \u8fd9\u662f\u4f60\u7b2c\u4e00\u6b21\u4f7f\u7528 Markdown\u7f16\u8f91\u5668 \u6240\u5c55\u793a\u7684\u6b22\u8fce\u9875\u3002\u5982\u679c\u4f60\u60f3\u5b66\u4e60\u5982\u4f55\u4f7f\u7528Markdown\u7f16\u8f91\u5668, \u53ef\u4ee5\u4ed4\u7ec6\u9605\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff0c\u4e86\u89e3\u4e00\u4e0bMarkdown\u7684\u57fa\u672c\u8bed\u6cd5\u77e5\u8bc6\u3002","title":"\u6b22\u8fce\u4f7f\u7528Markdown\u7f16\u8f91\u5668"},{"location":"other/CSDN\u8bed\u6cd5/#_1","text":"\u6211\u4eec\u5bf9Markdown\u7f16\u8f91\u5668\u8fdb\u884c\u4e86\u4e00\u4e9b\u529f\u80fd\u62d3\u5c55\u4e0e\u8bed\u6cd5\u652f\u6301\uff0c\u9664\u4e86\u6807\u51c6\u7684Markdown\u7f16\u8f91\u5668\u529f\u80fd\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u5982\u4e0b\u51e0\u70b9\u65b0\u529f\u80fd\uff0c\u5e2e\u52a9\u4f60\u7528\u5b83\u5199\u535a\u5ba2\uff1a \u5168\u65b0\u7684\u754c\u9762\u8bbe\u8ba1 \uff0c\u5c06\u4f1a\u5e26\u6765\u5168\u65b0\u7684\u5199\u4f5c\u4f53\u9a8c\uff1b \u5728\u521b\u4f5c\u4e2d\u5fc3\u8bbe\u7f6e\u4f60\u559c\u7231\u7684\u4ee3\u7801\u9ad8\u4eae\u6837\u5f0f\uff0cMarkdown \u5c06\u4ee3\u7801\u7247\u663e\u793a\u9009\u62e9\u7684\u9ad8\u4eae\u6837\u5f0f \u8fdb\u884c\u5c55\u793a\uff1b \u589e\u52a0\u4e86 \u56fe\u7247\u62d6\u62fd \u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u5c06\u672c\u5730\u7684\u56fe\u7247\u76f4\u63a5\u62d6\u62fd\u5230\u7f16\u8f91\u533a\u57df\u76f4\u63a5\u5c55\u793a\uff1b \u5168\u65b0\u7684 KaTeX\u6570\u5b66\u516c\u5f0f \u8bed\u6cd5\uff1b \u589e\u52a0\u4e86\u652f\u6301 \u7518\u7279\u56fe\u7684mermaid\u8bed\u6cd5 ^1 \u529f\u80fd\uff1b \u589e\u52a0\u4e86 \u591a\u5c4f\u5e55\u7f16\u8f91 Markdown\u6587\u7ae0\u529f\u80fd\uff1b \u589e\u52a0\u4e86 \u7126\u70b9\u5199\u4f5c\u6a21\u5f0f\u3001\u9884\u89c8\u6a21\u5f0f\u3001\u7b80\u6d01\u5199\u4f5c\u6a21\u5f0f\u3001\u5de6\u53f3\u533a\u57df\u540c\u6b65\u6eda\u8f6e\u8bbe\u7f6e \u7b49\u529f\u80fd\uff0c\u529f\u80fd\u6309\u94ae\u4f4d\u4e8e\u7f16\u8f91\u533a\u57df\u4e0e\u9884\u89c8\u533a\u57df\u4e2d\u95f4\uff1b \u589e\u52a0\u4e86 \u68c0\u67e5\u5217\u8868 \u529f\u80fd\u3002","title":"\u65b0\u7684\u6539\u53d8"},{"location":"other/CSDN\u8bed\u6cd5/#_2","text":"\u64a4\u9500\uff1a Ctrl/Command + Z \u91cd\u505a\uff1a Ctrl/Command + Y \u52a0\u7c97\uff1a Ctrl/Command + B \u659c\u4f53\uff1a Ctrl/Command + I \u6807\u9898\uff1a Ctrl/Command + Shift + H \u65e0\u5e8f\u5217\u8868\uff1a Ctrl/Command + Shift + U \u6709\u5e8f\u5217\u8868\uff1a Ctrl/Command + Shift + O \u68c0\u67e5\u5217\u8868\uff1a Ctrl/Command + Shift + C \u63d2\u5165\u4ee3\u7801\uff1a Ctrl/Command + Shift + K \u63d2\u5165\u94fe\u63a5\uff1a Ctrl/Command + Shift + L \u63d2\u5165\u56fe\u7247\uff1a Ctrl/Command + Shift + G","title":"\u529f\u80fd\u5feb\u6377\u952e"},{"location":"other/CSDN\u8bed\u6cd5/#_3","text":"\u76f4\u63a5\u8f93\u51651\u6b21 # \uff0c\u5e76\u6309\u4e0b space \u540e\uff0c\u5c06\u751f\u62101\u7ea7\u6807\u9898\u3002 \u8f93\u51652\u6b21 # \uff0c\u5e76\u6309\u4e0b space \u540e\uff0c\u5c06\u751f\u62102\u7ea7\u6807\u9898\u3002 \u4ee5\u6b64\u7c7b\u63a8\uff0c\u6211\u4eec\u652f\u63016\u7ea7\u6807\u9898\u3002\u6709\u52a9\u4e8e\u4f7f\u7528 TOC \u8bed\u6cd5\u540e\u751f\u6210\u4e00\u4e2a\u5b8c\u7f8e\u7684\u76ee\u5f55\u3002","title":"\u5408\u7406\u7684\u521b\u5efa\u6807\u9898\uff0c\u6709\u52a9\u4e8e\u76ee\u5f55\u7684\u751f\u6210"},{"location":"other/CSDN\u8bed\u6cd5/#_4","text":"\u5f3a\u8c03\u6587\u672c \u5f3a\u8c03\u6587\u672c \u52a0\u7c97\u6587\u672c \u52a0\u7c97\u6587\u672c ==\u6807\u8bb0\u6587\u672c== ~~\u5220\u9664\u6587\u672c~~ \u5f15\u7528\u6587\u672c H~2~O is\u662f\u6db2\u4f53\u3002 2^10^ \u8fd0\u7b97\u7ed3\u679c\u662f 1024.","title":"\u5982\u4f55\u6539\u53d8\u6587\u672c\u7684\u6837\u5f0f"},{"location":"other/CSDN\u8bed\u6cd5/#_5","text":"\u94fe\u63a5: link . \u56fe\u7247: \u5e26\u5c3a\u5bf8\u7684\u56fe\u7247: \u5c45\u4e2d\u7684\u56fe\u7247: \u5c45\u4e2d\u5e76\u4e14\u5e26\u5c3a\u5bf8\u7684\u56fe\u7247: \u5f53\u7136\uff0c\u6211\u4eec\u4e3a\u4e86\u8ba9\u7528\u6237\u66f4\u52a0\u4fbf\u6377\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u56fe\u7247\u62d6\u62fd\u529f\u80fd\u3002","title":"\u63d2\u5165\u94fe\u63a5\u4e0e\u56fe\u7247"},{"location":"other/CSDN\u8bed\u6cd5/#_6","text":"\u53bb \u535a\u5ba2\u8bbe\u7f6e \u9875\u9762\uff0c\u9009\u62e9\u4e00\u6b3e\u4f60\u559c\u6b22\u7684\u4ee3\u7801\u7247\u9ad8\u4eae\u6837\u5f0f\uff0c\u4e0b\u9762\u5c55\u793a\u540c\u6837\u9ad8\u4eae\u7684 \u4ee3\u7801\u7247 . // An highlighted block var foo = 'bar';","title":"\u5982\u4f55\u63d2\u5165\u4e00\u6bb5\u6f02\u4eae\u7684\u4ee3\u7801\u7247"},{"location":"other/CSDN\u8bed\u6cd5/#_7","text":"\u9879\u76ee \u9879\u76ee \u9879\u76ee \u9879\u76ee1 \u9879\u76ee2 \u9879\u76ee3 [ ] \u8ba1\u5212\u4efb\u52a1 [x] \u5b8c\u6210\u4efb\u52a1","title":"\u751f\u6210\u4e00\u4e2a\u9002\u5408\u4f60\u7684\u5217\u8868"},{"location":"other/CSDN\u8bed\u6cd5/#_8","text":"\u4e00\u4e2a\u7b80\u5355\u7684\u8868\u683c\u662f\u8fd9\u4e48\u521b\u5efa\u7684\uff1a \u9879\u76ee | Value -------- | ----- \u7535\u8111 | $1600 \u624b\u673a | $12 \u5bfc\u7ba1 | $1","title":"\u521b\u5efa\u4e00\u4e2a\u8868\u683c"},{"location":"other/CSDN\u8bed\u6cd5/#_9","text":"\u4f7f\u7528 :---------: \u5c45\u4e2d \u4f7f\u7528 :---------- \u5c45\u5de6 \u4f7f\u7528 ----------: \u5c45\u53f3 | \u7b2c\u4e00\u5217 | \u7b2c\u4e8c\u5217 | \u7b2c\u4e09\u5217 | |:-----------:| -------------:|:-------------| | \u7b2c\u4e00\u5217\u6587\u672c\u5c45\u4e2d | \u7b2c\u4e8c\u5217\u6587\u672c\u5c45\u53f3 | \u7b2c\u4e09\u5217\u6587\u672c\u5c45\u5de6 |","title":"\u8bbe\u5b9a\u5185\u5bb9\u5c45\u4e2d\u3001\u5c45\u5de6\u3001\u5c45\u53f3"},{"location":"other/CSDN\u8bed\u6cd5/#smartypants","text":"SmartyPants\u5c06ASCII\u6807\u70b9\u5b57\u7b26\u8f6c\u6362\u4e3a\u201c\u667a\u80fd\u201d\u5370\u5237\u6807\u70b9HTML\u5b9e\u4f53\u3002\u4f8b\u5982\uff1a | TYPE |ASCII |HTML |----------------|-------------------------------|-----------------------------| |Single backticks| 'Isn't this fun?' |'Isn't this fun?' | |Quotes | \"Isn't this fun?\" |\"Isn't this fun?\" | |Dashes | -- is en-dash, --- is em-dash |-- is en-dash, --- is em-dash|","title":"SmartyPants"},{"location":"other/CSDN\u8bed\u6cd5/#_10","text":"Markdown : Text-to-HTML conversion tool Authors : John : Luke","title":"\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u5217\u8868"},{"location":"other/CSDN\u8bed\u6cd5/#_11","text":"\u4e00\u4e2a\u5177\u6709\u6ce8\u811a\u7684\u6587\u672c\u3002 ^2","title":"\u5982\u4f55\u521b\u5efa\u4e00\u4e2a\u6ce8\u811a"},{"location":"other/CSDN\u8bed\u6cd5/#_12","text":"Markdown\u5c06\u6587\u672c\u8f6c\u6362\u4e3a HTML\u3002 *[HTML]: \u8d85\u6587\u672c\u6807\u8bb0\u8bed\u8a00","title":"\u6ce8\u91ca\u4e5f\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684"},{"location":"other/CSDN\u8bed\u6cd5/#katex","text":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u6e32\u67d3LaTeX\u6570\u5b66\u8868\u8fbe\u5f0f KaTeX : Gamma\u516c\u5f0f\u5c55\u793a $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$ \u662f\u901a\u8fc7\u6b27\u62c9\u79ef\u5206 $$ \\Gamma(z) = \\int_0^\\infty t^{z-1}e^{-t}dt\\,. $$ \u4f60\u53ef\u4ee5\u627e\u5230\u66f4\u591a\u5173\u4e8e\u7684\u4fe1\u606f LaTeX \u6570\u5b66\u8868\u8fbe\u5f0f here .","title":"KaTeX\u6570\u5b66\u516c\u5f0f"},{"location":"other/CSDN\u8bed\u6cd5/#_13","text":"gantt dateFormat YYYY-MM-DD title Adding GANTT diagram functionality to mermaid section \u73b0\u6709\u4efb\u52a1 \u5df2\u5b8c\u6210 :done, des1, 2014-01-06,2014-01-08 \u8fdb\u884c\u4e2d :active, des2, 2014-01-09, 3d \u8ba1\u5212\u4e00 : des3, after des2, 5d \u8ba1\u5212\u4e8c : des4, after des3, 5d \u5173\u4e8e \u7518\u7279\u56fe \u8bed\u6cd5\uff0c\u53c2\u8003 \u8fd9\u513f ,","title":"\u65b0\u7684\u7518\u7279\u56fe\u529f\u80fd\uff0c\u4e30\u5bcc\u4f60\u7684\u6587\u7ae0"},{"location":"other/CSDN\u8bed\u6cd5/#uml","text":"\u53ef\u4ee5\u4f7f\u7528UML\u56fe\u8868\u8fdb\u884c\u6e32\u67d3\u3002 Mermaid . \u4f8b\u5982\u4e0b\u9762\u4ea7\u751f\u7684\u4e00\u4e2a\u5e8f\u5217\u56fe\uff1a: sequenceDiagram \u5f20\u4e09 - \u674e\u56db: \u4f60\u597d\uff01\u674e\u56db, \u6700\u8fd1\u600e\u4e48\u6837? \u674e\u56db-- \u738b\u4e94: \u4f60\u6700\u8fd1\u600e\u4e48\u6837\uff0c\u738b\u4e94\uff1f \u674e\u56db--x \u5f20\u4e09: \u6211\u5f88\u597d\uff0c\u8c22\u8c22! \u674e\u56db-x \u738b\u4e94: \u6211\u5f88\u597d\uff0c\u8c22\u8c22! Note right of \u738b\u4e94: \u674e\u56db\u60f3\u4e86\u5f88\u957f\u65f6\u95f4, \u6587\u5b57\u592a\u957f\u4e86 br/ \u4e0d\u9002\u5408\u653e\u5728\u4e00\u884c. \u674e\u56db-- \u5f20\u4e09: \u6253\u91cf\u7740\u738b\u4e94... \u5f20\u4e09- \u738b\u4e94: \u5f88\u597d... \u738b\u4e94, \u4f60\u600e\u4e48\u6837? \u8fd9\u5c06\u4ea7\u751f\u4e00\u4e2a\u6d41\u7a0b\u56fe\u3002: graph LR A[\u957f\u65b9\u5f62] -- \u94fe\u63a5 -- B((\u5706)) A -- C(\u5706\u89d2\u957f\u65b9\u5f62) B -- D{\u83f1\u5f62} C -- D \u5173\u4e8e Mermaid \u8bed\u6cd5\uff0c\u53c2\u8003 \u8fd9\u513f ,","title":"UML \u56fe\u8868"},{"location":"other/CSDN\u8bed\u6cd5/#flowchart","text":"\u6211\u4eec\u4f9d\u65e7\u4f1a\u652f\u6301flowchart\u7684\u6d41\u7a0b\u56fe\uff1a flowchat st= start: \u5f00\u59cb e= end: \u7ed3\u675f op= operation: \u6211\u7684\u64cd\u4f5c cond= condition: \u786e\u8ba4\uff1f st- op- cond cond(yes)- e cond(no)- op \u5173\u4e8e Flowchart\u6d41\u7a0b\u56fe \u8bed\u6cd5\uff0c\u53c2\u8003 \u8fd9\u513f .","title":"FLowchart\u6d41\u7a0b\u56fe"},{"location":"other/CSDN\u8bed\u6cd5/#_14","text":"","title":"\u5bfc\u51fa\u4e0e\u5bfc\u5165"},{"location":"other/CSDN\u8bed\u6cd5/#_15","text":"\u5982\u679c\u4f60\u60f3\u5c1d\u8bd5\u4f7f\u7528\u6b64\u7f16\u8f91\u5668, \u4f60\u53ef\u4ee5\u5728\u6b64\u7bc7\u6587\u7ae0\u4efb\u610f\u7f16\u8f91\u3002\u5f53\u4f60\u5b8c\u6210\u4e86\u4e00\u7bc7\u6587\u7ae0\u7684\u5199\u4f5c, \u5728\u4e0a\u65b9\u5de5\u5177\u680f\u627e\u5230 \u6587\u7ae0\u5bfc\u51fa \uff0c\u751f\u6210\u4e00\u4e2a.md\u6587\u4ef6\u6216\u8005.html\u6587\u4ef6\u8fdb\u884c\u672c\u5730\u4fdd\u5b58\u3002","title":"\u5bfc\u51fa"},{"location":"other/CSDN\u8bed\u6cd5/#_16","text":"\u5982\u679c\u4f60\u60f3\u52a0\u8f7d\u4e00\u7bc7\u4f60\u5199\u8fc7\u7684.md\u6587\u4ef6\u6216\u8005.html\u6587\u4ef6\uff0c\u5728\u4e0a\u65b9\u5de5\u5177\u680f\u53ef\u4ee5\u9009\u62e9\u5bfc\u5165\u529f\u80fd\u8fdb\u884c\u5bf9\u5e94\u6269\u5c55\u540d\u7684\u6587\u4ef6\u5bfc\u5165\uff0c \u7ee7\u7eed\u4f60\u7684\u521b\u4f5c\u3002","title":"\u5bfc\u5165"},{"location":"other/h5ai\u7f8e\u5316\u76ee\u5f55/","text":"\u76ee\u5f55\u7ed3\u6784\uff1a /var/www/html/pub - /home/pub/ #\u8f6f\u8fde\u63a5 /home/pub/ \u4e0b\u9762\u5b58\u653e\u4e86\u771f\u6b63\u7684\u6587\u4ef6\uff0c\u628a _h5ai \u76ee\u5f55\u653e\u5230 /home/pub/ \u76ee\u5f55\u4e0b\u3002 vi /etc/httpd/conf/httpd.conf DirectoryIndex index.html index.php /pub/_h5ai/public/index.php","title":"h5ai\u7f8e\u5316\u76ee\u5f55"},{"location":"other/vdsm\u542f\u52a8\u5931\u8d25/","text":"\u4f4e\u7248\u672c\u7684vdsm\u5728\u9ad8\u7248\u672c\u7684libvirt\u73af\u5883\u4e0b\u7f16\u8bd1\u5b89\u88c5\u4e4b\u540e\u542f\u52a8\u5931\u8d25\uff0c\u56e0\u4e3alibvirt\u7684\u9a8c\u8bc1\u65b9\u5f0f\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u6240\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5199\u5165\u4ee5\u4e0b\u914d\u7f6e\uff1a #libvirt configure echo ' mech_list: digest-md5 sasldb_path: /etc/libvirt/passwd.db ' /etc/sasl2/libvirt.conf \u91cd\u542flibvirt\u670d\u52a1\uff1b\u91cd\u65b0\u751f\u6210vdsm\u9a8c\u8bc1\u914d\u7f6e\u6587\u4ef6","title":"vdsm\u542f\u52a8\u5931\u8d25"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/","text":"\u5236\u4f5c\u955c\u50cf mkisofs -o xxx.iso -J -R -V bb diretory -V\u540e\u9762\u7684bb\u4e3a\u6307\u5b9a\u5149\u76d8\u7684\u5377\u518c\u96c6ID\uff0cdiretory\u4e3a\u9700\u8981\u6253\u5305\u7684\u6587\u4ef6\u5939\u540d\u5b57 \u5982\u679c\u9700\u8981\u4fdd\u6301\u539f\u59cb\u6587\u4ef6\u540d\uff0c\u8981\u6dfb\u52a0-J\u53c2\u6570\uff0c\u5426\u5219\u6253\u5305\u540e\uff0c\u6587\u4ef6\u540d\u5168\u6539\u53d8\u4e86 \u5982\u679c\u9700\u8981\u6392\u9664\u90e8\u5206\u6587\u4ef6\u5939\uff0c\u53ef\u4ee5\u4f7f\u7528-x excludefolder \u66f4\u65b0rpm\u5305 1. \u5c06\u5f53\u524d\u7cfb\u7edf\u955c\u50cf\u6587\u4ef6\u62f7\u8d1d\u81f3\u6307\u5b9a\u76ee\u5f55\uff0c\u6302\u8f7d\u955c\u50cf\u6587\u4ef6\uff0c\u4e0e\u672c\u7cfb\u7edf\u7684iso\u6587\u4ef6\u4fdd\u6301\u4e00\u81f4\u3002 \u6302\u8f7d\u955c\u50cf\uff1a mkdir /root/cdrom mount vms.iso /root/cdrom \u590d\u5236\u955c\u50cf\u6587\u4ef6\uff1a mkdir /home/myerh cp -r /media/erhos/. /home/myerh/ 2. \u76f4\u63a5\u4e0b\u8f7d\u5b89\u88c5\u5305 \u53c2\u89c1 \u53ea\u4e0b\u8f7drpm\u5305 3. \u5c06\u6253\u5305\u597d\u7684rpm\u5305\u62f7\u8d1d\u5230Packages\u76ee\u5f55\u4e2d\uff0c\u5982\u679c\u8be5rpm\u5305\u662f\u4fee\u6539\u540e\u7684\u5219\u5220\u9664\u539f\u6709\u7684rpm\u5305\uff0c\u5982\u679c\u662f\u65b0\u5efa\u7684\u5219\u4e0d\u9700\u8981 cp redhat-logo-60.0.14-14.el6.centos.noarch.rpm /home/myerh/Packages rm -f /home/myerh/packages/redhat-logo-60.0.14-12.el6.centos.noarch.rpm \u5982\u679c\u955c\u50cf\u672c\u8eab\u6ca1\u6709\u8be5rpm\u5305\uff0c\u9700\u8981\u5728\u5bf9\u5e94\u7684 isolinux/xxx.cfg \u5f15\u5bfc\u6587\u4ef6\u4e2d\u6dfb\u52a0\u8be5\u5305\u7684\u7d22\u5f15\uff0c\u4f9d\u8d56\u5305\u4e0d\u9700\u8981\u6dfb\u52a0 eg. %packages vdsm ACloudAge-release %end 4. \u66f4\u65b0rpm\u4ed3\u5e93 \u62f7\u8d1dxml\u6587\u4ef6\u5230home\u76ee\u5f55\u4e0b cp 2727...comps.xml /home \u6e05\u7a7arepodata\u6587\u4ef6\u5939\u5185\u5bb9 rm -f repodata/* \u62f7\u8d1dxml\u6587\u4ef6\u5230repodata\u5e76\u91cd\u547d\u540d mv /home/...comps.xml repodata/comps.xml createrepo -d -g repodata/comps.xml . 5. \u66ff\u6362\u5bf9\u5e94\u7684logo \u5728home/myerh/isolinux/erh\u4e2d\u66ff\u6362\u56fe\u7247 6. \u6253\u5305iso\u955c\u50cf\uff08\u8be5\u64cd\u4f5c\u5728home/myerh\u76ee\u5f55\u4e0b\u8fdb\u884c\uff09 \uff08/home/ovirt3.5.iso\u4e3a\u6587\u4ef6iso\u6587\u4ef6\u540d\uff0cACloudAge\u4e3aISO\u5377\u6807,\u9700\u8981\u8ddfiso\u6587\u4ef6\u4e2d\u7684\u540d\u5b57\u4fdd\u6301\u4e00\u81f4\u3002\uff09 mkisofs -R -J -T -r -l -d -o /home/ovirt3.5.iso -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -V ACloudAge .","title":"\u5236\u4f5ciso\u955c\u50cf"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/#_1","text":"mkisofs -o xxx.iso -J -R -V bb diretory -V\u540e\u9762\u7684bb\u4e3a\u6307\u5b9a\u5149\u76d8\u7684\u5377\u518c\u96c6ID\uff0cdiretory\u4e3a\u9700\u8981\u6253\u5305\u7684\u6587\u4ef6\u5939\u540d\u5b57 \u5982\u679c\u9700\u8981\u4fdd\u6301\u539f\u59cb\u6587\u4ef6\u540d\uff0c\u8981\u6dfb\u52a0-J\u53c2\u6570\uff0c\u5426\u5219\u6253\u5305\u540e\uff0c\u6587\u4ef6\u540d\u5168\u6539\u53d8\u4e86 \u5982\u679c\u9700\u8981\u6392\u9664\u90e8\u5206\u6587\u4ef6\u5939\uff0c\u53ef\u4ee5\u4f7f\u7528-x excludefolder","title":"\u5236\u4f5c\u955c\u50cf"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/#rpm","text":"","title":"\u66f4\u65b0rpm\u5305"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/#1-iso","text":"\u6302\u8f7d\u955c\u50cf\uff1a mkdir /root/cdrom mount vms.iso /root/cdrom \u590d\u5236\u955c\u50cf\u6587\u4ef6\uff1a mkdir /home/myerh cp -r /media/erhos/. /home/myerh/","title":"1. \u5c06\u5f53\u524d\u7cfb\u7edf\u955c\u50cf\u6587\u4ef6\u62f7\u8d1d\u81f3\u6307\u5b9a\u76ee\u5f55\uff0c\u6302\u8f7d\u955c\u50cf\u6587\u4ef6\uff0c\u4e0e\u672c\u7cfb\u7edf\u7684iso\u6587\u4ef6\u4fdd\u6301\u4e00\u81f4\u3002"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/#2","text":"\u53c2\u89c1 \u53ea\u4e0b\u8f7drpm\u5305","title":"2. \u76f4\u63a5\u4e0b\u8f7d\u5b89\u88c5\u5305"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/#3-rpmpackagesrpmrpm","text":"cp redhat-logo-60.0.14-14.el6.centos.noarch.rpm /home/myerh/Packages rm -f /home/myerh/packages/redhat-logo-60.0.14-12.el6.centos.noarch.rpm \u5982\u679c\u955c\u50cf\u672c\u8eab\u6ca1\u6709\u8be5rpm\u5305\uff0c\u9700\u8981\u5728\u5bf9\u5e94\u7684 isolinux/xxx.cfg \u5f15\u5bfc\u6587\u4ef6\u4e2d\u6dfb\u52a0\u8be5\u5305\u7684\u7d22\u5f15\uff0c\u4f9d\u8d56\u5305\u4e0d\u9700\u8981\u6dfb\u52a0 eg. %packages vdsm ACloudAge-release %end","title":"3. \u5c06\u6253\u5305\u597d\u7684rpm\u5305\u62f7\u8d1d\u5230Packages\u76ee\u5f55\u4e2d\uff0c\u5982\u679c\u8be5rpm\u5305\u662f\u4fee\u6539\u540e\u7684\u5219\u5220\u9664\u539f\u6709\u7684rpm\u5305\uff0c\u5982\u679c\u662f\u65b0\u5efa\u7684\u5219\u4e0d\u9700\u8981"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/#4-rpm","text":"\u62f7\u8d1dxml\u6587\u4ef6\u5230home\u76ee\u5f55\u4e0b cp 2727...comps.xml /home \u6e05\u7a7arepodata\u6587\u4ef6\u5939\u5185\u5bb9 rm -f repodata/* \u62f7\u8d1dxml\u6587\u4ef6\u5230repodata\u5e76\u91cd\u547d\u540d mv /home/...comps.xml repodata/comps.xml createrepo -d -g repodata/comps.xml .","title":"4. \u66f4\u65b0rpm\u4ed3\u5e93"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/#5-logo-homemyerhisolinuxerh","text":"","title":"5. \u66ff\u6362\u5bf9\u5e94\u7684logo \u5728home/myerh/isolinux/erh\u4e2d\u66ff\u6362\u56fe\u7247"},{"location":"other/\u5236\u4f5ciso\u955c\u50cf/#6-isohomemyerh","text":"\uff08/home/ovirt3.5.iso\u4e3a\u6587\u4ef6iso\u6587\u4ef6\u540d\uff0cACloudAge\u4e3aISO\u5377\u6807,\u9700\u8981\u8ddfiso\u6587\u4ef6\u4e2d\u7684\u540d\u5b57\u4fdd\u6301\u4e00\u81f4\u3002\uff09 mkisofs -R -J -T -r -l -d -o /home/ovirt3.5.iso -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -V ACloudAge .","title":"6. \u6253\u5305iso\u955c\u50cf\uff08\u8be5\u64cd\u4f5c\u5728home/myerh\u76ee\u5f55\u4e0b\u8fdb\u884c\uff09"},{"location":"other/\u6ca1\u6709\u6253\u5370\u65e5\u5fd7/","text":"\u5c1d\u8bd5\u5c06\u4e0d\u540c\u7684\u5730\u65b9\u7684\u65e5\u5fd7\u8f93\u51fa\u5230\u4e0d\u540c\u7684\u6587\u4ef6","title":"\u6ca1\u6709\u6253\u5370\u65e5\u5fd7"},{"location":"other/\u7f16\u8bd1\u5b89\u88c5vdsm\u4e4b\u540e\u4e3b\u673a\u5b89\u88c5\u5931\u8d25/","text":"\u53ef\u80fd\u7f3a\u5c11rpm\u5305 tripwire.rpm","title":"\u7f16\u8bd1\u5b89\u88c5vdsm\u4e4b\u540e\u4e3b\u673a\u5b89\u88c5\u5931\u8d25"},{"location":"python/event\u7ebf\u7a0b/","text":"\u7528 threading.Event \u5b9e\u73b0\u7ebf\u7a0b\u95f4\u901a\u4fe1 \u4f7f\u7528threading.Event\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u7ebf\u7a0b\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u7684\u901a\u77e5\uff0c Event\u9ed8\u8ba4\u5185\u7f6e\u4e86\u4e00\u4e2a\u6807\u5fd7\uff0c\u521d\u59cb\u503c\u4e3aFalse\u3002 \u4e00\u65e6\u8be5\u7ebf\u7a0b\u901a\u8fc7 wait() \u65b9\u6cd5\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u76f4\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u8be5Event\u7684 set() \u65b9\u6cd5\u5c06\u5185\u7f6e\u6807\u5fd7\u8bbe\u7f6e\u4e3aTrue\u65f6\uff0c\u8be5Event\u4f1a\u901a\u77e5\u6240\u6709\u7b49\u5f85\u72b6\u6001\u7684\u7ebf\u7a0b\u6062\u590d\u8fd0\u884c\u3002 clear() \u65b9\u6cd5\u5219\u76f8\u53cd\u3002","title":"event\u7ebf\u7a0b"},{"location":"python/event\u7ebf\u7a0b/#threadingevent","text":"\u4f7f\u7528threading.Event\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u7ebf\u7a0b\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u7684\u901a\u77e5\uff0c Event\u9ed8\u8ba4\u5185\u7f6e\u4e86\u4e00\u4e2a\u6807\u5fd7\uff0c\u521d\u59cb\u503c\u4e3aFalse\u3002 \u4e00\u65e6\u8be5\u7ebf\u7a0b\u901a\u8fc7 wait() \u65b9\u6cd5\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u76f4\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u8be5Event\u7684 set() \u65b9\u6cd5\u5c06\u5185\u7f6e\u6807\u5fd7\u8bbe\u7f6e\u4e3aTrue\u65f6\uff0c\u8be5Event\u4f1a\u901a\u77e5\u6240\u6709\u7b49\u5f85\u72b6\u6001\u7684\u7ebf\u7a0b\u6062\u590d\u8fd0\u884c\u3002 clear() \u65b9\u6cd5\u5219\u76f8\u53cd\u3002","title":"\u7528 threading.Event \u5b9e\u73b0\u7ebf\u7a0b\u95f4\u901a\u4fe1"},{"location":"python/json\u683c\u5f0f\u5904\u7406/","text":"json.dumps() \u548c json.loads() \u662fjson\u683c\u5f0f\u5904\u7406\u51fd\u6570\uff08\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\uff0cjson\u662f\u5b57\u7b26\u4e32\uff09 (1) json.dumps()\u51fd\u6570\u662f\u5c06\u4e00\u4e2aPython\u6570\u636e\u7c7b\u578b\u5217\u8868\u8fdb\u884cjson\u683c\u5f0f\u7684\u7f16\u7801\uff08\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\uff0cjson.dumps()\u51fd\u6570\u662f\u5c06\u5b57\u5178\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\uff09 (2) json.loads()\u51fd\u6570\u662f\u5c06json\u683c\u5f0f\u6570\u636e\u8f6c\u6362\u4e3a\u5b57\u5178\uff08\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\uff0cjson.loads()\u51fd\u6570\u662f\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u5b57\u5178\uff09 json.dump() \u548c json.load() \u4e3b\u8981\u7528\u6765\u8bfb\u5199json\u6587\u4ef6\u51fd\u6570","title":"json\u683c\u5f0f\u5904\u7406"},{"location":"python/\u6267\u884cshell\u547d\u4ee4/","text":"\u963b\u585e\u5f0f\u547d\u4ee4\u8c03\u7528\u65b9\u6cd5\uff1a # \u8fd9\u79cd\u65b9\u6cd5\u4e0d\u80fd\u4f7f\u7528\u8d85\u65f6\u88c5\u9970\u5668 def _executeCmd(cmd, isSudo=False): if isSudo: cmd.insert(0, 'sudo') status, output = commands.getstatusoutput(' '.join(cmd)) if status: raise Exception(output) return output \u5229\u7528\u5b50\u8fdb\u7a0b\u6267\u884c\u547d\u4ee4\u8c03\u7528\u65b9\u6cd5\uff1a @setTimeout() def aaa(): sub = subprocess.Popen( ssh root@172.16.7.210 df /home , shell=True, stdout=subprocess.PIPE) try: sub.wait() return sub.stdout.read() except: print aaa kill sub.terminate()","title":"\u6267\u884cshell\u547d\u4ee4"},{"location":"python/\u8d85\u65f6\u88c5\u9970\u5668/","text":"\u8d85\u65f6\u88c5\u9970\u5668 def setTimeout(second=5): def wrap(function): def handle(signal, frame): raise RuntimeError def timing(second): while second != 0: second -= 1 time.sleep(1) def to_do(*args, **kwargs): try: signal.signal(signal.SIGALRM, handle) signal.alarm(second) re = function(*args, **kwargs) signal.alarm(0) return re except RuntimeError as e: raise e return to_do return wrap \u5982\u679cfunction\u662f\u5f53\u524d\u7ebf\u7a0b\u963b\u585e\u5f0f\u7684\uff0c\u90a3\u4e48\u8fd9\u6bb5\u4ee3\u7801\u4e0d\u4f1a\u53d1\u751f\u4f5c\u7528\u3002 \u4e0eshell\u547d\u4ee4\u7ed3\u5408\u4f7f\u7528\uff1a \u6267\u884cshell\u547d\u4ee4 \u9644 \uff1a\u65e0\u6cd5\u4f7f\u7528signal\u5224\u65ad\u7684\u60c5\u51b5 \u4f46\u662f\uff0c\u5728vdsm\u4e2d\u8c03\u7528\u65f6\uff0c\u5374\u63d0\u793a signal \u4e0d\u80fd\u5728\u5b50\u7ebf\u7a0b\u4e2d\u4f7f\u7528\uff0c\u6240\u4ee5\u4e0d\u80fd\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u6539\u5199\u6210\u4e0b\u9762\u8fd9\u79cd\u65b9\u6cd5\uff1a def _isSSHEnable(remoteIP): cmd = [ ssh root@ + remoteIP, 'df /'] flag = 'unknown' def timer(pro): n = 5 while n != 0: n -= 1 time.sleep(1) if flag is not 'ok': pro.terminate() sub = subprocess.Popen(' '.join(cmd), shell=True, stdout=subprocess.PIPE) timeout = threading.Thread(target=timer, args=(sub,)) timeout.start() timeout.join() code = sub.wait() flag = 'ok' if code != 0: return False return True \u8fd9\u79cd\u65b9\u6cd5\u7684\u95ee\u9898\u5c31\u662f\u4e0d\u7ba1\u8be5\u7a0b\u5e8f\u662f\u4e0d\u662f\u8d85\u65f6\u8fd0\u884c\uff0c\u90fd\u8981\u7b49\u5f855\u79d2\u7684\u65f6\u95f4\u3002","title":"\u8d85\u65f6\u88c5\u9970\u5668"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/","text":"Host \u5f00\u542fCPU\u865a\u62df\u5316\u6280\u672f \u5b89\u88c5 qemu-kvm \u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u91cd\u547d\u540d\u4e3a qemu-spice yum install qemu-kvm ln -s /usr/libexec/qemu-kvm /usr/local/bin/qemu-spice spice-protocol \u4f1a\u4f5c\u4e3a qemu-kvm \u7684\u4f9d\u8d56\u81ea\u52a8\u5b89\u88c5 \u5b89\u88c5\u4f9d\u8d56\u5de5\u5177 yum install qemu-vdagent qemu-img \u5173\u95ed\u9632\u706b\u5899\uff0c\u4e3a\u4e86\u5ba2\u6237\u7aef\u80fd\u4e0e\u670d\u52a1\u7aef\u901a\u4fe1 systemctl stop firewalld systemctl disable firewalld \u542f\u52a8\u865a\u62df\u673a qemu-img create img/win7.img 15G \u4f7f\u7528qemu-kvm qemu-spice -boot order=dc -vga qxl -m 3072 -spice port=3001,disable-ticketing -soundhw hda -device virtio-serial -chardev spicevmc,id=vdagent,debug=0,name=vdagent -device virtserialport,chardev=vdagent,name=com.redhat.spice.0 -cdrom cn_windows_7_ultimate_with_sp1_x64_dvd_618537.iso img/win7.img \u4f7f\u7528virt-manager \u8fd9\u79cd\u65b9\u5f0f\u7684\u7a33\u5b9a\u6027\u66f4\u597d Client \u5f00\u542fCPU\u865a\u62df\u5316\u6280\u672f \u5b89\u88c5\u4f9d\u8d56\u5de5\u5177 yum install spice-gtk3 virt-viewer \u5982\u679c\u6ca1\u6709\u56fe\u5f62\u5316\u754c\u9762\uff1a \u53c2\u8003 \u5b89\u88c5\u56fe\u5f62\u754c\u9762 \u5728\u56fe\u5f62\u5316\u754c\u9762\uff1a remote-viewer spice://server:3001 Windows Guest \u5b89\u88c5vdagent\u9a71\u52a8 \u88c5\u4e86 spice-nsis \u8fd9\u4e2a\u5de5\u5177\u5305\u4e4b\u540e\u624d\u80fd\u62d6\u62fd\u6587\u4ef6\u3001\u5171\u4eab\u526a\u5207\u677f\u7b49\u64cd\u4f5c \u5de5\u5177\u5305\u4e0b\u8f7d\u5730\u5740\uff1a https://www.spice-space.org/download/windows/spice-guest-tools/spice-guest-tools-latest.exe \u5305\u542b\u4e86 QXL \u9a71\u52a8\u3001 QXL-WDDM-DOD \u9a71\u52a8\u3001 SPICE agent","title":"\u4f7f\u7528\u8303\u4f8b"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#host","text":"\u5f00\u542fCPU\u865a\u62df\u5316\u6280\u672f","title":"Host"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#qemu-kvm-qemu-spice","text":"yum install qemu-kvm ln -s /usr/libexec/qemu-kvm /usr/local/bin/qemu-spice spice-protocol \u4f1a\u4f5c\u4e3a qemu-kvm \u7684\u4f9d\u8d56\u81ea\u52a8\u5b89\u88c5","title":"\u5b89\u88c5 qemu-kvm \u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u91cd\u547d\u540d\u4e3aqemu-spice"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#_1","text":"yum install qemu-vdagent qemu-img","title":"\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#_2","text":"systemctl stop firewalld systemctl disable firewalld","title":"\u5173\u95ed\u9632\u706b\u5899\uff0c\u4e3a\u4e86\u5ba2\u6237\u7aef\u80fd\u4e0e\u670d\u52a1\u7aef\u901a\u4fe1"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#_3","text":"qemu-img create img/win7.img 15G \u4f7f\u7528qemu-kvm qemu-spice -boot order=dc -vga qxl -m 3072 -spice port=3001,disable-ticketing -soundhw hda -device virtio-serial -chardev spicevmc,id=vdagent,debug=0,name=vdagent -device virtserialport,chardev=vdagent,name=com.redhat.spice.0 -cdrom cn_windows_7_ultimate_with_sp1_x64_dvd_618537.iso img/win7.img \u4f7f\u7528virt-manager \u8fd9\u79cd\u65b9\u5f0f\u7684\u7a33\u5b9a\u6027\u66f4\u597d","title":"\u542f\u52a8\u865a\u62df\u673a"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#client","text":"\u5f00\u542fCPU\u865a\u62df\u5316\u6280\u672f","title":"Client"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#_4","text":"yum install spice-gtk3 virt-viewer \u5982\u679c\u6ca1\u6709\u56fe\u5f62\u5316\u754c\u9762\uff1a \u53c2\u8003 \u5b89\u88c5\u56fe\u5f62\u754c\u9762 \u5728\u56fe\u5f62\u5316\u754c\u9762\uff1a remote-viewer spice://server:3001","title":"\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#windows-guest","text":"","title":"Windows Guest"},{"location":"spice/\u4f7f\u7528\u8303\u4f8b/#vdagent","text":"\u88c5\u4e86 spice-nsis \u8fd9\u4e2a\u5de5\u5177\u5305\u4e4b\u540e\u624d\u80fd\u62d6\u62fd\u6587\u4ef6\u3001\u5171\u4eab\u526a\u5207\u677f\u7b49\u64cd\u4f5c \u5de5\u5177\u5305\u4e0b\u8f7d\u5730\u5740\uff1a https://www.spice-space.org/download/windows/spice-guest-tools/spice-guest-tools-latest.exe \u5305\u542b\u4e86 QXL \u9a71\u52a8\u3001 QXL-WDDM-DOD \u9a71\u52a8\u3001 SPICE agent","title":"\u5b89\u88c5vdagent\u9a71\u52a8"},{"location":"spice/\u51fd\u6570\u6240\u5728\u6587\u4ef6/","text":"ffmpeg-1.2.2 \u4e0e vdagent-win-0.8 \u89c6\u9891\u6587\u4ef6\u7684\u8bfb\u5199\u51fd\u6570\u91cd\u5b9a\u5411 int avio_read(AVIOContext *s, unsigned char *buf, int size) int64_t avio_seek(AVIOContext *s, int64_t offset, int whence) int64_t avio_size(AVIOContext *s) int avio_open(AVIOContext **s, const char *filename, int flags) int avio_close(AVIOContext *s) \u5f53\u865a\u62df\u673a\u64ad\u653e\u89c6\u9891\u8fc7\u7a0b\u4e2d\u8c03\u7528\u4ee5\u4e0a\u7684\u51fd\u6570\u65f6\uff0c\u4f1a\u628a\u6587\u4ef6\u540d\u4fe1\u606f\uff0c\u8bfb\u53d6\u6587\u4ef6\u7684 \u957f\u5ea6\u7b49\u4fe1\u606f\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u64ad\u653e\u5668\uff0c\u64ad\u653e\u5668\u7684 FFMPEG \u7684\u5e95\u5c42\u51fd\u6570\u4f1a\u901a\u8fc7 Socket \u7684\u65b9\u5f0f\u8bfb\u53d6\u6587\u4ef6\u6570\u636e,\u6570\u636e\u7684\u8bfb\u5199\u4f20\u8f93\u5728\u4e0b\u9762\u7684\u7ae0\u8282\u4f1a\u8be6\u7ec6\u8bf4\u660e\u3002 \u731c\u60f3\uff1a 1.vdagent\u8c03\u7528\u88ab\u4fee\u6539\u8fc7\u7684ffmpeg\u63a5\u53e3\uff0cffmpeg\u63a5\u53e3\u4f1a\u6309\u7167vdagent\u7684\u6d88\u606f\u5f62\u5f0f\u53d1\u9001\u63a7\u5236\u4fe1\u606f\u5230Client\uff1b2.ffmpeg\u7684\u63a5\u53e3\u88ab\u8c03\u7528\u7684\u65f6\u5019\u4f1a\u89e6\u53d1\u4e00\u4e2ahook\uff0c\u6b64\u65f6\u4f1a\u8c03\u7528vdagent\u65b9\u6cd5\u53d1\u9001\u4fe1\u606f\u5230Client \u63a7\u5236\u4fe1\u606f\u7684\u8bfb\u5199\u51fd\u6570\u91cd\u5b9a\u5411 \u4ee5\u4e0a\u7684\u8fd9\u4e9b\u51fd\u6570\u5728\u9700\u8981\u91cd\u5b9a\u5411\u5230\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u7684\u64ad\u653e\u5668\u4f9d\u636e\u4f20\u56de\u6765\u7684\u63a7\u5236 \u4fe1\u606f\u6765\u64ad\u653e\u89c6\u9891\u8fc7\u7a0b\u3002 av_open_input_file\u5df2\u7ecf\u5f03\u7528\u4e86\uff1a - avformat.h Add avformat_open_input and avformat_write_header(). Deprecate av_open_input_stream, av_open_input_file, AVFormatParameters and av_write_header. \u53d1\u9001\u63a7\u5236\u4fe1\u606f\u5230\u5ba2\u6237\u7aef\u9700\u8981\u5b9e\u73b0\u7684\u51fd\u6570 \u53d1\u9001\u64ad\u653e\u89c6\u9891\u6587\u4ef6\u7684\u6587\u4ef6\u540d SendFileName(const char *filename)\uff1b av_open_input_file \u4e2d\u8c03\u7528 \u5f97\u5230\u64ad\u653e\u89c6\u9891\u6587\u4ef6\u7684\u7a97\u53e3\u5750\u6807 SendDisplayArea(const int nWidth,const int nHeight)\uff1b video_image_display \u4e2d\u5728 SDL_DisplayYUVOverlay \u4e4b\u540e\u8c03\u7528 \u5feb\u8fdb\uff0c\u5feb\u9000\u63a7\u5236 SendSeekPos(int64_t timestamp, int flags)\uff1b av_seek_frame \u4e2d\u8c03\u7528 ffmpeg\u5982\u4f55\u4e0evdagent\u901a\u4fe1 \u6587\u4ef6\u4f20\u8f93\u6a21\u5757\u7684\u5b9e\u73b0 Guest OS \u548c Client OS \u4e4b\u95f4\u7684\u901a\u8fc7 UDP \u8fdb\u884c\u6587\u4ef6\u4f20\u8f93 Client OS \u89c6\u9891\u64ad\u653e\u6a21\u5757 \u57fa\u4e8eSDL\u7684\u89c6\u9891\u64ad\u653e\u5668\u7684\u5b9e\u73b0\u3002 spice\u5ba2\u6237\u7aef\u7684\u91cd\u65b0\u7f16\u8bd1\uff0c\u6dfb\u52a0\u4e0e\u64ad\u653e\u5668\u4e92\u52a8\u7684\u4ee3\u7801\u3002","title":"\u51fd\u6570\u6240\u5728\u6587\u4ef6"},{"location":"spice/\u51fd\u6570\u6240\u5728\u6587\u4ef6/#ffmpeg-122-vdagent-win-08","text":"","title":"ffmpeg-1.2.2 \u4e0e vdagent-win-0.8"},{"location":"spice/\u51fd\u6570\u6240\u5728\u6587\u4ef6/#_1","text":"int avio_read(AVIOContext *s, unsigned char *buf, int size) int64_t avio_seek(AVIOContext *s, int64_t offset, int whence) int64_t avio_size(AVIOContext *s) int avio_open(AVIOContext **s, const char *filename, int flags) int avio_close(AVIOContext *s) \u5f53\u865a\u62df\u673a\u64ad\u653e\u89c6\u9891\u8fc7\u7a0b\u4e2d\u8c03\u7528\u4ee5\u4e0a\u7684\u51fd\u6570\u65f6\uff0c\u4f1a\u628a\u6587\u4ef6\u540d\u4fe1\u606f\uff0c\u8bfb\u53d6\u6587\u4ef6\u7684 \u957f\u5ea6\u7b49\u4fe1\u606f\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u64ad\u653e\u5668\uff0c\u64ad\u653e\u5668\u7684 FFMPEG \u7684\u5e95\u5c42\u51fd\u6570\u4f1a\u901a\u8fc7 Socket \u7684\u65b9\u5f0f\u8bfb\u53d6\u6587\u4ef6\u6570\u636e,\u6570\u636e\u7684\u8bfb\u5199\u4f20\u8f93\u5728\u4e0b\u9762\u7684\u7ae0\u8282\u4f1a\u8be6\u7ec6\u8bf4\u660e\u3002 \u731c\u60f3\uff1a 1.vdagent\u8c03\u7528\u88ab\u4fee\u6539\u8fc7\u7684ffmpeg\u63a5\u53e3\uff0cffmpeg\u63a5\u53e3\u4f1a\u6309\u7167vdagent\u7684\u6d88\u606f\u5f62\u5f0f\u53d1\u9001\u63a7\u5236\u4fe1\u606f\u5230Client\uff1b2.ffmpeg\u7684\u63a5\u53e3\u88ab\u8c03\u7528\u7684\u65f6\u5019\u4f1a\u89e6\u53d1\u4e00\u4e2ahook\uff0c\u6b64\u65f6\u4f1a\u8c03\u7528vdagent\u65b9\u6cd5\u53d1\u9001\u4fe1\u606f\u5230Client","title":"\u89c6\u9891\u6587\u4ef6\u7684\u8bfb\u5199\u51fd\u6570\u91cd\u5b9a\u5411"},{"location":"spice/\u51fd\u6570\u6240\u5728\u6587\u4ef6/#_2","text":"\u4ee5\u4e0a\u7684\u8fd9\u4e9b\u51fd\u6570\u5728\u9700\u8981\u91cd\u5b9a\u5411\u5230\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u7684\u64ad\u653e\u5668\u4f9d\u636e\u4f20\u56de\u6765\u7684\u63a7\u5236 \u4fe1\u606f\u6765\u64ad\u653e\u89c6\u9891\u8fc7\u7a0b\u3002 av_open_input_file\u5df2\u7ecf\u5f03\u7528\u4e86\uff1a","title":"\u63a7\u5236\u4fe1\u606f\u7684\u8bfb\u5199\u51fd\u6570\u91cd\u5b9a\u5411"},{"location":"spice/\u51fd\u6570\u6240\u5728\u6587\u4ef6/#-avformath","text":"Add avformat_open_input and avformat_write_header(). Deprecate av_open_input_stream, av_open_input_file, AVFormatParameters and av_write_header. \u53d1\u9001\u63a7\u5236\u4fe1\u606f\u5230\u5ba2\u6237\u7aef\u9700\u8981\u5b9e\u73b0\u7684\u51fd\u6570 \u53d1\u9001\u64ad\u653e\u89c6\u9891\u6587\u4ef6\u7684\u6587\u4ef6\u540d SendFileName(const char *filename)\uff1b av_open_input_file \u4e2d\u8c03\u7528 \u5f97\u5230\u64ad\u653e\u89c6\u9891\u6587\u4ef6\u7684\u7a97\u53e3\u5750\u6807 SendDisplayArea(const int nWidth,const int nHeight)\uff1b video_image_display \u4e2d\u5728 SDL_DisplayYUVOverlay \u4e4b\u540e\u8c03\u7528 \u5feb\u8fdb\uff0c\u5feb\u9000\u63a7\u5236 SendSeekPos(int64_t timestamp, int flags)\uff1b av_seek_frame \u4e2d\u8c03\u7528","title":"- avformat.h"},{"location":"spice/\u51fd\u6570\u6240\u5728\u6587\u4ef6/#ffmpegvdagent","text":"","title":"ffmpeg\u5982\u4f55\u4e0evdagent\u901a\u4fe1"},{"location":"spice/\u51fd\u6570\u6240\u5728\u6587\u4ef6/#_3","text":"Guest OS \u548c Client OS \u4e4b\u95f4\u7684\u901a\u8fc7 UDP \u8fdb\u884c\u6587\u4ef6\u4f20\u8f93","title":"\u6587\u4ef6\u4f20\u8f93\u6a21\u5757\u7684\u5b9e\u73b0"},{"location":"spice/\u51fd\u6570\u6240\u5728\u6587\u4ef6/#client-os","text":"\u57fa\u4e8eSDL\u7684\u89c6\u9891\u64ad\u653e\u5668\u7684\u5b9e\u73b0\u3002 spice\u5ba2\u6237\u7aef\u7684\u91cd\u65b0\u7f16\u8bd1\uff0c\u6dfb\u52a0\u4e0e\u64ad\u653e\u5668\u4e92\u52a8\u7684\u4ee3\u7801\u3002","title":"Client OS \u89c6\u9891\u64ad\u653e\u6a21\u5757"},{"location":"spice/\u7b80\u4ecb/","text":"\u76ee\u5f55 \u7b97\u6cd5 Quic\u3001GLZ/LZ\u4e3a\u65e0\u635f\u538b\u7f29\u56fe\u7247\u7b97\u6cd5\uff0c\u5c5e\u4e8eSPICE\u4e13\u6709\u7b97\u6cd5\uff1bJPEG\u662f\u6709\u635f\u538b\u7f29\u7b97\u6cd5\u3002 MJPEG\uff08Motion JPEG\uff09\u89c6\u9891\u538b\u7f29\u7b97\u6cd5\uff0c\u4ee525\u5e27/\u79d2\u7684\u901f\u5ea6\u4f7f\u7528JPEG\u7b97\u6cd5\u538b\u7f29\u89c6\u9891\uff0c\u662fspice\u91c7\u7528\u7684\u7b97\u6cd5\u3002 \u64ad\u653e\u89c6\u9891\u65f6\uff0c\u670d\u52a1\u7aef\u89e3\u538b\u89c6\u9891\uff0c\u89e3\u538b\u540e\u901a\u8fc7Guest OS\u7684\u8bbe\u5907\u9a71\u52a8\u4f20\u9012\u7ed9\u4e3b\u673a\uff0c\u4e3b\u673a\u4f7f\u7528MJPEG\u4f20\u9001\u7ed9\u5ba2\u6237\u7aef\u3002 \u89c6\u9891\u5904\u7406\u6d41\u7a0b \u91cd\u5b9a\u5411\u67b6\u6784 \u63a7\u5236\u6d41\u548c\u89c6\u9891\u6570\u636e\u6d41 \u5728\u89c6\u9891\u7684\u4f20\u9001\u64ad\u653e\u8fc7\u7a0b\u4e2d\u4e3b\u8981\u4ea7\u751f\u4e24\u4e2a\u6570\u636e\u6d41\uff1a \u7b2c\u4e00\u4e2a\u662f\u89c6\u9891\u4fe1\u606f\u63a7\u5236\u6d41\uff1a\u4e3b\u8981\u662f\u7531 FFMPEG HOOK \u6a21\u5757\u622a\u83b7\u89c6\u9891\u64ad\u653e\u7684\u76f8\u5173\u6570\u636e\uff0c\u901a\u8fc7 SPICE \u547d\u4ee4\u901a\u9053\u4f20\u7ed9 Client OS \u7aef\uff0c\u6700\u7ec8\u7ed9 FFMPEG Player \u6a21\u5757\u3002 \u7b2c\u4e8c\u4e2a\u662f\u89c6\u9891\u6587\u4ef6\u7684\u4f20\u9001\uff1a\u5728 FFMPEG HOOK \u5f97\u5230\u64ad\u653e\u7684\u6587\u4ef6\u6570\u636e\u540e\uff0c\u89c6\u9891\u7684\u63a7\u5236\u4fe1\u606f\u4f1a\u4f20\u9001\u7ed9 Client0S , FFMPEG Player \u6a21\u5757\u4f1a\u901a\u8fc7 FILE SHARE \u6a21\u5757\u8bf7\u6c42\u6587\u4ef6\u6570\u636e\u3002 \u63a7\u5236\u4fe1\u606f\u4f20\u9001\u4f9d\u8d56spice\u7684\u4f20\u9001\u65b9\u5f0fvirtio-serial\uff08\u4e5f\u53ebisa-serial\uff09\uff1bqemu\u63d0\u4f9b\u4e86\u4e32\u53e3\u8bbe\u5907\u7684\u6a21\u62df\u53ca\u6570\u636e\u4ea4\u6362\u901a\u9053\u3002\u8868\u73b0\u5f62\u5f0f\u662fwindows\u4e2d\u7684\u4e32\u53e3\u8bbe\u5907\u548clinux socket\u6587\u4ef6\uff1b\u4e32\u53e3\u8bbe\u5907\u5b58\u5728\u4e8eGuest OS\u4e2d\uff0clinux socket\u5b58\u5728\u4e8eHost OS\u4e2d\u3002 spice\u63a7\u5236\u4fe1\u606f\u4f20\u9012 \u89c6\u9891\u4f20\u8f93\u547d\u4ee4\u63a7\u5236\u5b9a\u4e49\u4e0e\u5b9e\u73b0 FFMPEG\u89e3\u7801\u5e93\u548c\u89c6\u9891\u4f20\u8f93 \u5173\u95edspice\u89c6\u9891\u538b\u7f29\u65b9\u5f0f \u5728\u89c6\u9891\u91cd\u5b9a\u5411\u7684\u6a21\u5f0f\u4e0b\uff0cspice\u534f\u8bae\u7684\u542f\u52a8\u53c2\u6570\u5206\u522b\u8bbe\u5b9a\u5982\u4e0b\uff1a mage-compression\u2002=\u2002auto_glz\u2002 jpeg-wan-compression\u2002=\u2002never\u2002 zlib-glz-wan-compression\u2002=\u2002never\u2002 streaming-video\u2002= off \u5728GUEST OS\u7aefFFMPEG\u89e3\u7801\u5e93\u7684\u91cd\u5b9a\u4e49 Guest OS \u4e2d\u4fee\u6539\u4e86 FFMPEG \u7684\u89e3\u7801\u5e93,\u5728\u89e3\u7801\u5e93\u4e2d\u76f8\u5173\u51fd\u6570\u4e2d\u622a\u83b7\u4e86\u76f8\u5173\u89c6\u9891\u6587\u4ef6\u6570\u636e\u4ee5\u53ca\u64ad\u653e\u8fc7\u7a0b\u4e2d\u7684\u53c2\u6570\u3002 \u8bfb\u53d6\u89c6\u9891\u6587\u4ef6 \u89c6\u9891\u89e3\u7801\u6a21\u5757 ffplay.c \u5404\u4e2a\u90e8\u4ef6\u5bf9\u5e94\u4ee3\u7801\u5e93 \u7f3a\u5305\u65f6\u53ef\u80fd\u9700\u8981\u7684\u662f\u5f00\u53d1\u5305 ffmpeg\u7f16\u7801\u5e93\uff0c\u5b8c\u6210 spice-gtk client 0.34\u4e0b\u8f7d\u5b8c\u6574\u7684\u6e90\u7801\u5305\u8fdb\u884c\u6784\u5efa spice server 0.14\u5b8c\u6210\u6784\u5efa vdagent-win-0.8.0 \u5373vdagent\u3001SPICE agent\uff0c\u5305\u542b\u5728spice-nsis\u4e2d cximge\u7684\u7f16\u8bd1\u5b89\u88c5 \u4e0d\u80fd\u7f16\u8bd1\u51fa\u52a8\u6001\u5e93\uff0c\u65e0\u6cd5\u8fdb\u884c\u4e0b\u4e00\u6b65 ./configure --with-extra-includes=/root/spice-package/cximage599c/cximage/jasper/include/ \u52a8\u6001\u5e93\u7684\u5b89\u88c5\uff08\u4e0d\u884c\uff09\uff1a libcximage.so\u6587\u4ef6\u653e\u5728 /usr/lib64/ \u4e0b\uff0c \u6dfb\u52a0\u6587\u4ef6 /usr/lib64/pkgconfig/libcximage.so : prefix=/usr exec_prefix=${prefix} libdir=/usr/lib64 sharedlibdir=${libdir} includedir=/usr/include Name: cximage Description: cximage library Version: 5.99 Requires: Libs: -L${libdir} -L${sharedlibdir} -lz Cflags: -fPIC -shared spice-nsis windows guest \u5de5\u5177\u6253\u5305\u9879\u76ee\uff1a spice-vdagent \uff08\u53ca\u5b83\u9700\u8981\u7684 vioserial \u9a71\u52a8\uff09\u3001 QXL \u9a71\u52a8 makensis -DSPICE -DVERSION=1.0 win-guest-tools.nsis \u8fd8\u662f\u9700\u8981\u8fd9\u4e9b\u4e1c\u897f\u585e\u8fdb\u53bb\u624d\u80fd\u6253\u5305\u4e3aexe\u6587\u4ef6\u3002 \u9700\u8981\u4fee\u6539\u7684\u4ee3\u7801\uff1a vdagent-win-0.8.0 vd_agent.h \u6dfb\u52a0\u547d\u4ee4\u679a\u4e3e\u7c7b \u5b9a\u4e49\u6d88\u606f\u7684\u7ed3\u6784\u4f53 vdagent.cpp dispatch_message(VDAgentMessage* msg, uint32_t port) \u5904\u7406\u547d\u4ee4\uff0c\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef \u5728\u89c6\u9891\u91cd\u5b9a\u5411\u7684\u6a21\u5f0f\u4e0b\uff0cSPICE \u534f\u8bae\u7684\u542f\u52a8\u53c2\u6570\u5206\u522b\u8bbe\u5b9a\u5982\u4e0b\u3002 mage-compression = auto_glz jpeg-wan-compression = never zlib-glz-wan-compression = never streaming-video = off vdagent\u7684\u6d88\u606f\u6570\u636e\u7ed3\u6784 typedef struct SPICE_ATTR_PACKED VDIChunkHeader { uint32_t port; uint32_t size; } VDIChunkHeader; port\u7684\u53d6\u503c\uff1a enum { VDP_CLIENT_PORT = 1, VDP_SERVER_PORT, VDP_END_PORT }; typedef struct ALIGN_VC VDIChunk { VDIChunkHeader hdr; uint8_t data[0]; } ALIGN_GCC VDIChunk; typedef struct SPICE_ATTR_PACKED VDAgentMessage { uint32_t protocol; uint32_t type; uint64_t opaque;//\u6d88\u606f\u63a9\u7801\uff0c\u6807\u8bc6\u51fa\u6d88\u606f\u7684\u6700\u7ec8\u63a5\u6536\u7aef uint32_t size; uint8_t data[0]; } VDAgentMessage; \u5728virtio\u7aef\u53e3\u4e2d\u7684\u5b8c\u6574\u6570\u636e\u7684\u5927\u5c0f\u7b49\u4e8esizeof(VDIChunkHeader) + sizeof(VDAgentMessage) + variable_data_len. \uff08variable_data_len\u6307\u7684\u662f\u53ef\u53d8\u957f\u5ea6\u6570\u636e\u7684\u5927\u5c0f\uff0c\u5373VDAgentMessage\u4e2d\u7684size\u503c\uff09\u3002","title":"\u7b80\u4ecb"},{"location":"spice/\u7b80\u4ecb/#_1","text":"","title":"\u76ee\u5f55"},{"location":"spice/\u7b80\u4ecb/#_2","text":"Quic\u3001GLZ/LZ\u4e3a\u65e0\u635f\u538b\u7f29\u56fe\u7247\u7b97\u6cd5\uff0c\u5c5e\u4e8eSPICE\u4e13\u6709\u7b97\u6cd5\uff1bJPEG\u662f\u6709\u635f\u538b\u7f29\u7b97\u6cd5\u3002 MJPEG\uff08Motion JPEG\uff09\u89c6\u9891\u538b\u7f29\u7b97\u6cd5\uff0c\u4ee525\u5e27/\u79d2\u7684\u901f\u5ea6\u4f7f\u7528JPEG\u7b97\u6cd5\u538b\u7f29\u89c6\u9891\uff0c\u662fspice\u91c7\u7528\u7684\u7b97\u6cd5\u3002 \u64ad\u653e\u89c6\u9891\u65f6\uff0c\u670d\u52a1\u7aef\u89e3\u538b\u89c6\u9891\uff0c\u89e3\u538b\u540e\u901a\u8fc7Guest OS\u7684\u8bbe\u5907\u9a71\u52a8\u4f20\u9012\u7ed9\u4e3b\u673a\uff0c\u4e3b\u673a\u4f7f\u7528MJPEG\u4f20\u9001\u7ed9\u5ba2\u6237\u7aef\u3002 \u89c6\u9891\u5904\u7406\u6d41\u7a0b","title":"\u7b97\u6cd5"},{"location":"spice/\u7b80\u4ecb/#_3","text":"","title":"\u91cd\u5b9a\u5411\u67b6\u6784"},{"location":"spice/\u7b80\u4ecb/#_4","text":"\u5728\u89c6\u9891\u7684\u4f20\u9001\u64ad\u653e\u8fc7\u7a0b\u4e2d\u4e3b\u8981\u4ea7\u751f\u4e24\u4e2a\u6570\u636e\u6d41\uff1a \u7b2c\u4e00\u4e2a\u662f\u89c6\u9891\u4fe1\u606f\u63a7\u5236\u6d41\uff1a\u4e3b\u8981\u662f\u7531 FFMPEG HOOK \u6a21\u5757\u622a\u83b7\u89c6\u9891\u64ad\u653e\u7684\u76f8\u5173\u6570\u636e\uff0c\u901a\u8fc7 SPICE \u547d\u4ee4\u901a\u9053\u4f20\u7ed9 Client OS \u7aef\uff0c\u6700\u7ec8\u7ed9 FFMPEG Player \u6a21\u5757\u3002 \u7b2c\u4e8c\u4e2a\u662f\u89c6\u9891\u6587\u4ef6\u7684\u4f20\u9001\uff1a\u5728 FFMPEG HOOK \u5f97\u5230\u64ad\u653e\u7684\u6587\u4ef6\u6570\u636e\u540e\uff0c\u89c6\u9891\u7684\u63a7\u5236\u4fe1\u606f\u4f1a\u4f20\u9001\u7ed9 Client0S , FFMPEG Player \u6a21\u5757\u4f1a\u901a\u8fc7 FILE SHARE \u6a21\u5757\u8bf7\u6c42\u6587\u4ef6\u6570\u636e\u3002 \u63a7\u5236\u4fe1\u606f\u4f20\u9001\u4f9d\u8d56spice\u7684\u4f20\u9001\u65b9\u5f0fvirtio-serial\uff08\u4e5f\u53ebisa-serial\uff09\uff1bqemu\u63d0\u4f9b\u4e86\u4e32\u53e3\u8bbe\u5907\u7684\u6a21\u62df\u53ca\u6570\u636e\u4ea4\u6362\u901a\u9053\u3002\u8868\u73b0\u5f62\u5f0f\u662fwindows\u4e2d\u7684\u4e32\u53e3\u8bbe\u5907\u548clinux socket\u6587\u4ef6\uff1b\u4e32\u53e3\u8bbe\u5907\u5b58\u5728\u4e8eGuest OS\u4e2d\uff0clinux socket\u5b58\u5728\u4e8eHost OS\u4e2d\u3002 spice\u63a7\u5236\u4fe1\u606f\u4f20\u9012","title":"\u63a7\u5236\u6d41\u548c\u89c6\u9891\u6570\u636e\u6d41"},{"location":"spice/\u7b80\u4ecb/#_5","text":"","title":"\u89c6\u9891\u4f20\u8f93\u547d\u4ee4\u63a7\u5236\u5b9a\u4e49\u4e0e\u5b9e\u73b0"},{"location":"spice/\u7b80\u4ecb/#ffmpeg","text":"","title":"FFMPEG\u89e3\u7801\u5e93\u548c\u89c6\u9891\u4f20\u8f93"},{"location":"spice/\u7b80\u4ecb/#spice","text":"\u5728\u89c6\u9891\u91cd\u5b9a\u5411\u7684\u6a21\u5f0f\u4e0b\uff0cspice\u534f\u8bae\u7684\u542f\u52a8\u53c2\u6570\u5206\u522b\u8bbe\u5b9a\u5982\u4e0b\uff1a mage-compression\u2002=\u2002auto_glz\u2002 jpeg-wan-compression\u2002=\u2002never\u2002 zlib-glz-wan-compression\u2002=\u2002never\u2002 streaming-video\u2002= off","title":"\u5173\u95edspice\u89c6\u9891\u538b\u7f29\u65b9\u5f0f"},{"location":"spice/\u7b80\u4ecb/#guest-osffmpeg","text":"Guest OS \u4e2d\u4fee\u6539\u4e86 FFMPEG \u7684\u89e3\u7801\u5e93,\u5728\u89e3\u7801\u5e93\u4e2d\u76f8\u5173\u51fd\u6570\u4e2d\u622a\u83b7\u4e86\u76f8\u5173\u89c6\u9891\u6587\u4ef6\u6570\u636e\u4ee5\u53ca\u64ad\u653e\u8fc7\u7a0b\u4e2d\u7684\u53c2\u6570\u3002","title":"\u5728GUEST OS\u7aefFFMPEG\u89e3\u7801\u5e93\u7684\u91cd\u5b9a\u4e49"},{"location":"spice/\u7b80\u4ecb/#_6","text":"","title":"\u8bfb\u53d6\u89c6\u9891\u6587\u4ef6"},{"location":"spice/\u7b80\u4ecb/#_7","text":"ffplay.c","title":"\u89c6\u9891\u89e3\u7801\u6a21\u5757"},{"location":"spice/\u7b80\u4ecb/#_8","text":"\u7f3a\u5305\u65f6\u53ef\u80fd\u9700\u8981\u7684\u662f\u5f00\u53d1\u5305 ffmpeg\u7f16\u7801\u5e93\uff0c\u5b8c\u6210 spice-gtk client 0.34\u4e0b\u8f7d\u5b8c\u6574\u7684\u6e90\u7801\u5305\u8fdb\u884c\u6784\u5efa spice server 0.14\u5b8c\u6210\u6784\u5efa vdagent-win-0.8.0 \u5373vdagent\u3001SPICE agent\uff0c\u5305\u542b\u5728spice-nsis\u4e2d cximge\u7684\u7f16\u8bd1\u5b89\u88c5 \u4e0d\u80fd\u7f16\u8bd1\u51fa\u52a8\u6001\u5e93\uff0c\u65e0\u6cd5\u8fdb\u884c\u4e0b\u4e00\u6b65 ./configure --with-extra-includes=/root/spice-package/cximage599c/cximage/jasper/include/ \u52a8\u6001\u5e93\u7684\u5b89\u88c5\uff08\u4e0d\u884c\uff09\uff1a libcximage.so\u6587\u4ef6\u653e\u5728 /usr/lib64/ \u4e0b\uff0c \u6dfb\u52a0\u6587\u4ef6 /usr/lib64/pkgconfig/libcximage.so : prefix=/usr exec_prefix=${prefix} libdir=/usr/lib64 sharedlibdir=${libdir} includedir=/usr/include Name: cximage Description: cximage library Version: 5.99 Requires: Libs: -L${libdir} -L${sharedlibdir} -lz Cflags: -fPIC -shared spice-nsis windows guest \u5de5\u5177\u6253\u5305\u9879\u76ee\uff1a spice-vdagent \uff08\u53ca\u5b83\u9700\u8981\u7684 vioserial \u9a71\u52a8\uff09\u3001 QXL \u9a71\u52a8 makensis -DSPICE -DVERSION=1.0 win-guest-tools.nsis \u8fd8\u662f\u9700\u8981\u8fd9\u4e9b\u4e1c\u897f\u585e\u8fdb\u53bb\u624d\u80fd\u6253\u5305\u4e3aexe\u6587\u4ef6\u3002 \u9700\u8981\u4fee\u6539\u7684\u4ee3\u7801\uff1a vdagent-win-0.8.0 vd_agent.h \u6dfb\u52a0\u547d\u4ee4\u679a\u4e3e\u7c7b \u5b9a\u4e49\u6d88\u606f\u7684\u7ed3\u6784\u4f53 vdagent.cpp dispatch_message(VDAgentMessage* msg, uint32_t port) \u5904\u7406\u547d\u4ee4\uff0c\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef \u5728\u89c6\u9891\u91cd\u5b9a\u5411\u7684\u6a21\u5f0f\u4e0b\uff0cSPICE \u534f\u8bae\u7684\u542f\u52a8\u53c2\u6570\u5206\u522b\u8bbe\u5b9a\u5982\u4e0b\u3002 mage-compression = auto_glz jpeg-wan-compression = never zlib-glz-wan-compression = never streaming-video = off","title":"\u5404\u4e2a\u90e8\u4ef6\u5bf9\u5e94\u4ee3\u7801\u5e93"},{"location":"spice/\u7b80\u4ecb/#vdagent","text":"typedef struct SPICE_ATTR_PACKED VDIChunkHeader { uint32_t port; uint32_t size; } VDIChunkHeader; port\u7684\u53d6\u503c\uff1a enum { VDP_CLIENT_PORT = 1, VDP_SERVER_PORT, VDP_END_PORT }; typedef struct ALIGN_VC VDIChunk { VDIChunkHeader hdr; uint8_t data[0]; } ALIGN_GCC VDIChunk; typedef struct SPICE_ATTR_PACKED VDAgentMessage { uint32_t protocol; uint32_t type; uint64_t opaque;//\u6d88\u606f\u63a9\u7801\uff0c\u6807\u8bc6\u51fa\u6d88\u606f\u7684\u6700\u7ec8\u63a5\u6536\u7aef uint32_t size; uint8_t data[0]; } VDAgentMessage; \u5728virtio\u7aef\u53e3\u4e2d\u7684\u5b8c\u6574\u6570\u636e\u7684\u5927\u5c0f\u7b49\u4e8esizeof(VDIChunkHeader) + sizeof(VDAgentMessage) + variable_data_len. \uff08variable_data_len\u6307\u7684\u662f\u53ef\u53d8\u957f\u5ea6\u6570\u636e\u7684\u5927\u5c0f\uff0c\u5373VDAgentMessage\u4e2d\u7684size\u503c\uff09\u3002","title":"vdagent\u7684\u6d88\u606f\u6570\u636e\u7ed3\u6784"},{"location":"system/epel\u6e90/","text":"yum install -y epel-release","title":"epel\u6e90"},{"location":"system/rpms\u4ea7\u51fa/","text":"rpms\u4ea7\u51fa vdc-refa: vdc-1.0.0-142.gitd62ccbc.refa.x86_64.rpm vdc-debuginfo-1.0.0-142.gitd62ccbc.refa.x86_64.rpm vdc-plugin-net-1.0.0-142.gitd62ccbc.refa.x86_64.rpm vdc-plugin-vpn-1.0.0-142.gitd62ccbc.refa.x86_64.rpm vdc-zhgf: vdc-1.0.0-29.gitdefba2a.zhgf.x86_64.rpm vdc-debuginfo-1.0.0-29.gitdefba2a.zhgf.x86_64.rpm vdc-sec-2.5.10 vdc-1.0.0-194.git7cb4d66.sec.x86_64.rpm vdc-debuginfo-1.0.0-194.git7cb4d66.sec.x86_64.rpm vdc-plugin-net-1.0.0-194.git7cb4d66.sec.x86_64.rpm vdc-plugin-vpn-1.0.0-194.git7cb4d66.sec.x86_64.rpm rpms: vms-sec-2.5.9 vms-sec-sec-2.5.9/ovirt-engine vms-sec-sec-2.5.9/ovirt-engine-api vms-sec-sec-2.5.9/ovirt-engine-audit-portal vms-sec-sec-2.5.9/ovirt-engine-backend vms-sec-sec-2.5.9/ovirt-engine-dbscripts vms-sec-sec-2.5.9/ovirt-engine-extend-portal vms-sec-sec-2.5.9/ovirt-engine-lib vms-sec-sec-2.5.9/ovirt-engine-secrecy-portal vms-sec-sec-2.5.9/ovirt-engine-setup-base vms-sec-sec-2.5.9/ovirt-engine-setup-plugin-ovirt-engine vms-sec-sec-2.5.9/ovirt-engine-setup-plugin-ovirt-engine-common vms-sec-sec-2.5.9/ovirt-engine-setup-plugin-vmconsole-proxy-helper vms-sec-sec-2.5.9/ovirt-engine-setup-plugin-websocket-proxy vms-sec-sec-2.5.9/ovirt-engine-tools vms-sec-sec-2.5.9/ovirt-engine-tools-backup vms-sec-sec-2.5.9/ovirt-engine-vmconsole-proxy-helper vms-sec-sec-2.5.9/ovirt-engine-webadmin-portal vms-sec-sec-2.5.9/ovirt-engine-websocket-proxy vms-sec-sec-2.5.9/ovirt-engine-dashboard vdsm-sec/vdsm vdsm-sec/vdsm-api vdsm-sec/vdsm-cli vdsm-sec/vdsm-hook-vmfex-dev vdsm-sec/vdsm-infra vdsm-sec/vdsm-jsonrpc vdsm-sec/vdsm-python vdsm-sec/vdsm-xmlrpc vdsm-sec/vdsm-yajsonrpc qemu-kvm-ev-sec/qemu-kvm-tools-ev qemu-kvm-ev-sec/qemu-kvm-ev qemu-kvm-ev-sec/qemu-kvm-common-ev qemu-kvm-ev-sec/qemu-img-ev ovirt-provider-ovn-sec/ovirt-provider-ovn-driver ovirt-provider-ovn-sec/ovirt-provider-ovn secretclient-sec/secretclient ACloudAge-release-sec/ACloudAge-release ovs-sec/openvswitch ovs-sec/openvswitch-ovn-central ovs-sec/openvswitch-ovn-common ovs-sec/openvswitch-ovn-host ovs-sec/python-openvswitch tripwire-sec/tripwire spice-html5-sec/spice-html5 vms-vgpu vms-sec-vgpu/ovirt-engine vms-sec-vgpu/ovirt-engine-api vms-sec-vgpu/ovirt-engine-audit-portal vms-sec-vgpu/ovirt-engine-backend vms-sec-vgpu/ovirt-engine-dbscripts vms-sec-vgpu/ovirt-engine-extend-portal vms-sec-vgpu/ovirt-engine-lib vms-sec-vgpu/ovirt-engine-secrecy-portal vms-sec-vgpu/ovirt-engine-setup-base vms-sec-vgpu/ovirt-engine-setup-plugin-ovirt-engine vms-sec-vgpu/ovirt-engine-setup-plugin-ovirt-engine-common vms-sec-vgpu/ovirt-engine-setup-plugin-vmconsole-proxy-helper vms-sec-vgpu/ovirt-engine-setup-plugin-websocket-proxy vms-sec-vgpu/ovirt-engine-tools vms-sec-vgpu/ovirt-engine-tools-backup vms-sec-vgpu/ovirt-engine-vmconsole-proxy-helper vms-sec-vgpu/ovirt-engine-webadmin-portal vms-sec-vgpu/ovirt-engine-websocket-proxy vms-sec-sec-2.5.9/ovirt-engine-dashboard vdsm-vgpu/vdsm vdsm-vgpu/vdsm-api vdsm-vgpu/vdsm-cli vdsm-vgpu/vdsm-hook-vmfex-dev vdsm-vgpu/vdsm-infra vdsm-vgpu/vdsm-jsonrpc vdsm-vgpu/vdsm-python vdsm-vgpu/vdsm-xmlrpc vdsm-vgpu/vdsm-yajsonrpc qemu-kvm-2.6.0-sec/qemu-kvm-tools-ev qemu-kvm-2.6.0-sec/qemu-kvm-ev qemu-kvm-2.6.0-sec/qemu-kvm-common-ev qemu-kvm-2.6.0-sec/qemu-img-ev ovirt-provider-ovn-sec/ovirt-provider-ovn-driver ovirt-provider-ovn-sec/ovirt-provider-ovn secretclient-sec/secretclient ACloudAge-release-sec/ACloudAge-release ovs-sec/openvswitch ovs-sec/openvswitch-ovn-central ovs-sec/openvswitch-ovn-common ovs-sec/openvswitch-ovn-host ovs-sec/python-openvswitch tripwire-sec/tripwire spice-html5-sec/spice-html5 tools.iso\u6253\u5305 remote_isos_path=http://172.16.6.189/pub/iso_output/tools iso_path=/home/pub/iso_output/tools output_name=tools-test.iso output_path=root@172.16.6.189:/home/pub/iso_output/vms rsync_url=rsync://172.16.6.189/extras_tools vdc_win=/home/pub/pkg_output/vdc-group/vdc-win/ branch_path=http://172.16.6.189/pub/pkg_output/vdc-group/vdc-win isos= ssh root@172.16.6.189 \"ls --sort=time -r $iso_path\" for iso in $isos do real=$iso done echo ${real} wget -P /tmp $remote_isos_path/$real if [ $? -ne 0 ]; then echo \"Failed to get iso!\" exit 1 fi mkdir /tmp/${output_name}.tmp mount /tmp/$real /tmp/${output_name}.tmp if [ $? -ne 0 ]; then echo \"Failed to mount iso!\" exit 1 fi mkdir /tmp/$output_name cd /tmp/$output_name first rsync, then cp iso rsync --delete -avrt $rsync_url . if [ $? -ne 0 ]; then echo \"Failed to rsync iso base files!\" exit 1 fi cp -r /tmp/${output_name}.tmp/. /tmp/$output_name/ umount -v /tmp/${output_name}.tmp rm -rf /tmp/${output_name}.tmp rm -f /tmp/$real get vdc-win.exe branchs= ssh root@172.16.6.189 \"ls ${vdc_win}\" for branch in $branchs do exes= ssh root@172.16.6.189 \"ls --sort=time -r ${vdc_win}/${branch}/output/\" echo $exes for exe in $exes do real_exe=$exe done echo ${branch_path}/$branch/output/${real_exe} wget --quiet ${branch_path}/$branch/output/${real_exe} done mkisofs -J -rational-rock -full-iso9660-filenames -o ${output_name} . if [ $? -ne 0 ]; then echo \"Failed to make iso!\" exit 1 fi scp $output_name $output_path rm -rf /tmp/$output_name/ ks-release-packer.sh version=v1.4 date= date +%Y%m%d%H%M%S buildid=1 ssh_path=root@172.16.6.189 vms_iso_path=http://172.16.6.189/pub/iso_output/vms vdc_iso_path=http://172.16.6.189/pub/iso_output/vdc tools_iso_path=http://172.16.6.189/pub/iso_output/tools remote_repo=root@172.16.6.189:/home/pub/release modify_rpms=rpms.list vms_iso_server_path=/home/pub${vms_iso_path# pub} vdc_iso_server_path=/home/pub${vdc_iso_path# pub} tools_iso_server_path=/home/pub${tools_iso_path#*pub} mkdir ${version} ${date} cd ${version} ${date} rpms=build_${date}_${buildid}.info mkdir $rpms mkdir -p packages/vms packages/vdc get modified rpms OLD_IFS=\"$IFS\" for item in cat ../${modify_rpms} do IFS=\"/\" arr=($item) IFS=\"$OLD_IFS\" prod=${arr[0]} repo=${arr[1]} name=${arr[2]} yum clean all --enablerepo=$repo yumdownloader --enablerepo=$repo --destdir=packages/${prod} $name if [ $? -ne 0 ]; then echo \"Failed to get ${prod} package $name in $repo!\" exit 1 fi done get last vms-iso vms_isos= ssh ${ssh_path} \"cd ${vms_iso_server_path} ls --sort=time -r *${version}*.iso\" for vms_iso in ${vms_isos} do vms_iso_real=$vms_iso done wget -O ACloudAge_KS_vms_${version}.iso ${vms_iso_path}/${vms_iso_real} get vms-iso-rpms vms_iso_main=${vms_iso_real%.iso} wget -P ${rpms}/ ${vms_iso_path}/${vms_iso_main}-rpm.list get last vdc-iso vdc_isos= ssh ${ssh_path} \"cd ${vdc_iso_server_path} ls --sort=time -r *${version}*.iso\" for vdc_iso in ${vdc_isos} do vdc_iso_real=$vdc_iso done wget -O ACloudAge_KS_vdc_${version}.iso ${vdc_iso_path}/${vdc_iso_real} get vdc-iso-rpms vdc_iso_main=${vdc_iso_real%.iso} wget -P ${rpms}/ ${vdc_iso_path}/${vdc_iso_main}-rpm.list get last tools-iso tools_isos= ssh ${ssh_path} \"cd ${tools_iso_server_path} ls --sort=time -r *${version}*.iso\" for tools_iso in ${tools_isos} do tools_iso_real=$tools_iso done wget -O ACloudAge_KS_tools_${version}.iso ${tools_iso_path}/${tools_iso_real} cd .. scp -r ${version}_${date} ${remote_repo} rm -rf ${version}_${date}","title":"rpms\u4ea7\u51fa"},{"location":"system/rpms\u4ea7\u51fa/#first-rsync-then-cp-iso","text":"rsync --delete -avrt $rsync_url . if [ $? -ne 0 ]; then echo \"Failed to rsync iso base files!\" exit 1 fi cp -r /tmp/${output_name}.tmp/. /tmp/$output_name/ umount -v /tmp/${output_name}.tmp rm -rf /tmp/${output_name}.tmp rm -f /tmp/$real","title":"first rsync, then cp iso"},{"location":"system/rpms\u4ea7\u51fa/#get-vdc-winexe","text":"branchs= ssh root@172.16.6.189 \"ls ${vdc_win}\" for branch in $branchs do exes= ssh root@172.16.6.189 \"ls --sort=time -r ${vdc_win}/${branch}/output/\" echo $exes for exe in $exes do real_exe=$exe done echo ${branch_path}/$branch/output/${real_exe} wget --quiet ${branch_path}/$branch/output/${real_exe} done mkisofs -J -rational-rock -full-iso9660-filenames -o ${output_name} . if [ $? -ne 0 ]; then echo \"Failed to make iso!\" exit 1 fi scp $output_name $output_path rm -rf /tmp/$output_name/","title":"get vdc-win.exe"},{"location":"system/rpms\u4ea7\u51fa/#ks-release-packersh","text":"version=v1.4 date= date +%Y%m%d%H%M%S buildid=1 ssh_path=root@172.16.6.189 vms_iso_path=http://172.16.6.189/pub/iso_output/vms vdc_iso_path=http://172.16.6.189/pub/iso_output/vdc tools_iso_path=http://172.16.6.189/pub/iso_output/tools remote_repo=root@172.16.6.189:/home/pub/release modify_rpms=rpms.list vms_iso_server_path=/home/pub${vms_iso_path# pub} vdc_iso_server_path=/home/pub${vdc_iso_path# pub} tools_iso_server_path=/home/pub${tools_iso_path#*pub} mkdir ${version} ${date} cd ${version} ${date} rpms=build_${date}_${buildid}.info mkdir $rpms mkdir -p packages/vms packages/vdc","title":"ks-release-packer.sh"},{"location":"system/rpms\u4ea7\u51fa/#get-modified-rpms","text":"OLD_IFS=\"$IFS\" for item in cat ../${modify_rpms} do IFS=\"/\" arr=($item) IFS=\"$OLD_IFS\" prod=${arr[0]} repo=${arr[1]} name=${arr[2]} yum clean all --enablerepo=$repo yumdownloader --enablerepo=$repo --destdir=packages/${prod} $name if [ $? -ne 0 ]; then echo \"Failed to get ${prod} package $name in $repo!\" exit 1 fi done","title":"get modified rpms"},{"location":"system/rpms\u4ea7\u51fa/#get-last-vms-iso","text":"vms_isos= ssh ${ssh_path} \"cd ${vms_iso_server_path} ls --sort=time -r *${version}*.iso\" for vms_iso in ${vms_isos} do vms_iso_real=$vms_iso done wget -O ACloudAge_KS_vms_${version}.iso ${vms_iso_path}/${vms_iso_real}","title":"get last vms-iso"},{"location":"system/rpms\u4ea7\u51fa/#get-vms-iso-rpms","text":"vms_iso_main=${vms_iso_real%.iso} wget -P ${rpms}/ ${vms_iso_path}/${vms_iso_main}-rpm.list","title":"get vms-iso-rpms"},{"location":"system/rpms\u4ea7\u51fa/#get-last-vdc-iso","text":"vdc_isos= ssh ${ssh_path} \"cd ${vdc_iso_server_path} ls --sort=time -r *${version}*.iso\" for vdc_iso in ${vdc_isos} do vdc_iso_real=$vdc_iso done wget -O ACloudAge_KS_vdc_${version}.iso ${vdc_iso_path}/${vdc_iso_real}","title":"get last vdc-iso"},{"location":"system/rpms\u4ea7\u51fa/#get-vdc-iso-rpms","text":"vdc_iso_main=${vdc_iso_real%.iso} wget -P ${rpms}/ ${vdc_iso_path}/${vdc_iso_main}-rpm.list","title":"get vdc-iso-rpms"},{"location":"system/rpms\u4ea7\u51fa/#get-last-tools-iso","text":"tools_isos= ssh ${ssh_path} \"cd ${tools_iso_server_path} ls --sort=time -r *${version}*.iso\" for tools_iso in ${tools_isos} do tools_iso_real=$tools_iso done wget -O ACloudAge_KS_tools_${version}.iso ${tools_iso_path}/${tools_iso_real} cd .. scp -r ${version}_${date} ${remote_repo}","title":"get last tools-iso"},{"location":"system/rpms\u4ea7\u51fa/#rm-rf-version_date","text":"","title":"rm -rf ${version}_${date}"},{"location":"system/rsync\u914d\u7f6e/","text":"# /etc/rsyncd: configuration file for rsync daemon mode # See rsyncd.conf man page for more options. # configuration example: uid = nobody gid = nobody # use chroot = yes # max connections = 4 # pid file = /var/run/rsyncd.pid # exclude = lost+found/ # transfer logging = yes # timeout = 900 # ignore nonreadable = yes # dont compress = *.gz *.tgz *.zip *.z *.Z *.rpm *.deb *.bz2 log file = /var/log/rsyncd.log [vdc_iso] path = /home/pub/deps/vdc/vdc_iso/ # [ftp] # path = /home/ftp # comment = ftp export area","title":"rsync\u914d\u7f6e"},{"location":"system/\u4e3b\u673a\u4e0d\u80fd\u8fde\u63a5mariadb/","text":"mysql use mysql; MariaDB [mysql] update user set host = '%' where host = 'localhost'; mysql flush privileges;","title":"\u4e3b\u673a\u4e0d\u80fd\u8fde\u63a5mariadb"},{"location":"system/\u4fee\u6539centos7\u8bed\u8a00/","text":"\u4fee\u6539centos7\u8bed\u8a00 \u4e34\u65f6\u89e3\u51b3\u65b9\u6cd5 \u4f7f\u7528LANG=\u201czh_CN.UTF-8\u201d\uff0c\u8fd9\u4e2a\u547d\u4ee4\u6765\u5b9e\u73b0\uff0c\u4e0d\u8fc7\u5728\u91cd\u65b0\u767b\u5f55\u7684\u65f6\u5019\u53c8\u4f1a\u53d8\u56de\u82f1\u6587\u3002\u8fd9\u4e2a\u4e0d\u662f\u957f\u4e45\u7684\u65b9\u6cd5\u3002 \u66f4\u6539\u7cfb\u7edf\u53c2\u6570 \u5982\u679c\u7cfb\u7edf\u6ca1\u6709\u4e2d\u6587\u652f\u6301\uff0c\u53ef\u4ee5\u901a\u8fc7\u7f51\u4e0a\u4e0b\u8f7d\u5b89\u88c5\u4e2d\u6587\u8bed\u8a00\u5305,\u4f7f\u7528\u547d\u4ee4\uff1a yum groupinstall Chinese-support vim /etc/locale.conf \u8fdb\u5165\u4ee5\u540e\u53ea\u6709\u7b80\u5355\u7684\u4e00\u53e5LANG=\"en_US.UTF-8\" \u8fd9\u4e2a\u914d\u7f6e\uff0c\u628a\"en_US.UTF-8\"\u66ff\u6362\u6210\"zh_CN.UTF-8\" \u4fdd\u5b58\u9000\u51fa\u5373\u53ef\u3002","title":"\u4fee\u6539centos7\u8bed\u8a00"},{"location":"system/\u4fee\u6539centos7\u8bed\u8a00/#centos7","text":"\u4e34\u65f6\u89e3\u51b3\u65b9\u6cd5 \u4f7f\u7528LANG=\u201czh_CN.UTF-8\u201d\uff0c\u8fd9\u4e2a\u547d\u4ee4\u6765\u5b9e\u73b0\uff0c\u4e0d\u8fc7\u5728\u91cd\u65b0\u767b\u5f55\u7684\u65f6\u5019\u53c8\u4f1a\u53d8\u56de\u82f1\u6587\u3002\u8fd9\u4e2a\u4e0d\u662f\u957f\u4e45\u7684\u65b9\u6cd5\u3002 \u66f4\u6539\u7cfb\u7edf\u53c2\u6570 \u5982\u679c\u7cfb\u7edf\u6ca1\u6709\u4e2d\u6587\u652f\u6301\uff0c\u53ef\u4ee5\u901a\u8fc7\u7f51\u4e0a\u4e0b\u8f7d\u5b89\u88c5\u4e2d\u6587\u8bed\u8a00\u5305,\u4f7f\u7528\u547d\u4ee4\uff1a yum groupinstall Chinese-support vim /etc/locale.conf \u8fdb\u5165\u4ee5\u540e\u53ea\u6709\u7b80\u5355\u7684\u4e00\u53e5LANG=\"en_US.UTF-8\" \u8fd9\u4e2a\u914d\u7f6e\uff0c\u628a\"en_US.UTF-8\"\u66ff\u6362\u6210\"zh_CN.UTF-8\" \u4fdd\u5b58\u9000\u51fa\u5373\u53ef\u3002","title":"\u4fee\u6539centos7\u8bed\u8a00"},{"location":"system/\u4fee\u6539mariadb\u7f16\u7801\u7c7b\u578b/","text":"\u7b2c\u4e00\u79cd\uff1a vi /etc/my.conf.d/server.cnf [server] character_set_server = utf8 [mysqld] character_set_server = utf8 Service mysql restart \u7b2c\u4e8c\u79cd\uff1a \u767b\u5f55MySQL\uff0c\u4f7f\u7528 SHOW VARIABLES LIKE 'character%'; \u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\uff0c\u5e94\u8be5\u6709\u597d\u51e0\u4e2a\u4e0d\u662fUTF-8\u683c\u5f0f\u3002 \u8981\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e /etc/my.cnf.d \u76ee\u5f55\u4e0b\uff1a client.cnf \u5728[client]\u5b57\u6bb5\u91cc\u52a0\u5165 default-character-set=utf8 server.cnf \u5728[mysqld]\u5b57\u6bb5\u91cc\u52a0\u5165 character-set-server=utf8","title":"\u4fee\u6539mariadb\u7f16\u7801\u7c7b\u578b"},{"location":"system/\u4fee\u6539mariadb\u7f16\u7801\u7c7b\u578b/#_1","text":"vi /etc/my.conf.d/server.cnf [server] character_set_server = utf8 [mysqld] character_set_server = utf8 Service mysql restart","title":"\u7b2c\u4e00\u79cd\uff1a"},{"location":"system/\u4fee\u6539mariadb\u7f16\u7801\u7c7b\u578b/#_2","text":"\u767b\u5f55MySQL\uff0c\u4f7f\u7528 SHOW VARIABLES LIKE 'character%'; \u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\uff0c\u5e94\u8be5\u6709\u597d\u51e0\u4e2a\u4e0d\u662fUTF-8\u683c\u5f0f\u3002 \u8981\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e /etc/my.cnf.d \u76ee\u5f55\u4e0b\uff1a client.cnf \u5728[client]\u5b57\u6bb5\u91cc\u52a0\u5165 default-character-set=utf8 server.cnf \u5728[mysqld]\u5b57\u6bb5\u91cc\u52a0\u5165 character-set-server=utf8","title":"\u7b2c\u4e8c\u79cd\uff1a"},{"location":"system/\u5173\u95edselinux/","text":"nginx \u542f\u52a8\u5931\u8d25,\u65e5\u5fd7\u91cc\u9762\u62a5\u9519\u4fe1\u606f\u5982\u4e0b: Starting nginx: nginx: [emerg] bind() to 0.0.0.0:8095 failed (13: Permission denied) \u6743\u9650\u62d2\u7edd\uff0c\u7ecf\u68c0\u67e5\u53d1\u73b0\u662f\u5f00\u542fselinux \u5bfc\u81f4\u7684\u3002 \u76f4\u63a5\u5173\u95ed\u3002 getenforce \u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u662f\u5426\u5f00\u542f\u4e86selinux \u5982\u679c\u8f93\u51fa disabled \u6216 permissive \u90a3\u5c31\u662f\u5173\u95ed\u4e86\uff0c \u5982\u679c\u8f93\u51fa enforcing \u90a3\u5c31\u662f\u5f00\u542f\u4e86 selinux\u3002 \u4e34\u65f6\u5173\u95edselinux setenforce 0 ##\u8bbe\u7f6eSELinux \u6210\u4e3apermissive\u6a21\u5f0f setenforce 1 ##\u8bbe\u7f6eSELinux \u6210\u4e3aenforcing\u6a21\u5f0f \u6c38\u4e45\u5173\u95edselinux, \u4fee\u6539/etc/selinux/config \u6587\u4ef6 \u5c06SELINUX=enforcing\u6539\u4e3aSELINUX=disabled \u91cd\u542f\u673a\u5668\u5373\u53ef Tags: selinux , nginx\u7ed1\u5b9a\u7aef\u53e3\u5931\u8d25","title":"\u5173\u95edselinux"},{"location":"system/\u5173\u95edselinux/#nginx","text":"Starting nginx: nginx: [emerg] bind() to 0.0.0.0:8095 failed (13: Permission denied) \u6743\u9650\u62d2\u7edd\uff0c\u7ecf\u68c0\u67e5\u53d1\u73b0\u662f\u5f00\u542fselinux \u5bfc\u81f4\u7684\u3002 \u76f4\u63a5\u5173\u95ed\u3002 getenforce \u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u662f\u5426\u5f00\u542f\u4e86selinux \u5982\u679c\u8f93\u51fa disabled \u6216 permissive \u90a3\u5c31\u662f\u5173\u95ed\u4e86\uff0c \u5982\u679c\u8f93\u51fa enforcing \u90a3\u5c31\u662f\u5f00\u542f\u4e86 selinux\u3002","title":"nginx \u542f\u52a8\u5931\u8d25,\u65e5\u5fd7\u91cc\u9762\u62a5\u9519\u4fe1\u606f\u5982\u4e0b:"},{"location":"system/\u5173\u95edselinux/#selinux","text":"setenforce 0 ##\u8bbe\u7f6eSELinux \u6210\u4e3apermissive\u6a21\u5f0f setenforce 1 ##\u8bbe\u7f6eSELinux \u6210\u4e3aenforcing\u6a21\u5f0f","title":"\u4e34\u65f6\u5173\u95edselinux"},{"location":"system/\u5173\u95edselinux/#selinux_1","text":"\u4fee\u6539/etc/selinux/config \u6587\u4ef6 \u5c06SELINUX=enforcing\u6539\u4e3aSELINUX=disabled \u91cd\u542f\u673a\u5668\u5373\u53ef Tags: selinux , nginx\u7ed1\u5b9a\u7aef\u53e3\u5931\u8d25","title":"\u6c38\u4e45\u5173\u95edselinux,"},{"location":"system/\u5f00\u542f\u56fe\u5f62\u754c\u9762/","text":"yum groupinstall \"GNOME Desktop\" \"Graphical Administration Tools\" \u6216 yum -y groupinstall \"Server with GUI\" ln -sf /lib/systemd/system/runlevel5.target /etc/systemd/system/default.target reboot","title":"\u5f00\u542f\u56fe\u5f62\u754c\u9762"},{"location":"system/\u6539\u53d8\u7cfb\u7edf\u65f6\u533a/","text":"mv /etc/localtime /etc/localtime.bak ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime","title":"\u6539\u53d8\u7cfb\u7edf\u65f6\u533a"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/","text":"\u521b\u5efa\u3001\u6269\u5c55\u903b\u8f91\u5377 https://www.linuxtechi.com/thin-provisioned-logical-volumes-centos-7-rhel-7/ \u78c1\u76d8\u6269\u5bb9 VMware\u6dfb\u52a0\u65b0\u78c1\u76d8 \u4e0d\u91cd\u542f\u8bc6\u522b\u78c1\u76d8 grep mpt /sys/class/scsi_host/host0/proc_name grep mpt /sys/class/scsi_host/host1/proc_name grep mpt /sys/class/scsi_host/host2/proc_name \u67e5\u770b\u54ea\u4e2a\u8f93\u51famptspi\uff0c\u5047\u8bbe\u662fhost2 \u6216\u8005ll /sys/class/scsi_disk/\uff0c\u67e5\u770b\u662f\u54ea\u53f0host echo - - - /sys/class/scsi_host/host2/scan \u67e5\u770b\u78c1\u76d8\u4fe1\u606f fdisk -l \u5bf9\u65b0\u76d8\u8fdb\u884c\u5206\u533a fdisk /dev/sdb \u521b\u5efa\u7269\u7406\u78c1\u76d8pv pvcreate /dev/sdb1 \u663e\u793a\u521b\u5efa\u7684\u78c1\u76d8 pvdisplay \u6269\u5c55\u5377\u7ec4 vgextend centos /dev/sbd1 #centos:\u8981\u6269\u5c55\u7684\u5377\u7ec4 lvextend \u2013L +15G /dev/mapper/centos-root #\u8981\u6269\u5c55\u7684\u76ee\u5f55 \u5728\u7ebf\u8c03\u6574xfs\u683c\u5f0f\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f xfs_growfs /dev/ mapper/centos-root","title":"\u78c1\u76d8\u5bb9\u91cf\u6269\u5145"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/#_1","text":"https://www.linuxtechi.com/thin-provisioned-logical-volumes-centos-7-rhel-7/","title":"\u521b\u5efa\u3001\u6269\u5c55\u903b\u8f91\u5377"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/#_2","text":"","title":"\u78c1\u76d8\u6269\u5bb9"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/#vmware","text":"\u4e0d\u91cd\u542f\u8bc6\u522b\u78c1\u76d8 grep mpt /sys/class/scsi_host/host0/proc_name grep mpt /sys/class/scsi_host/host1/proc_name grep mpt /sys/class/scsi_host/host2/proc_name \u67e5\u770b\u54ea\u4e2a\u8f93\u51famptspi\uff0c\u5047\u8bbe\u662fhost2 \u6216\u8005ll /sys/class/scsi_disk/\uff0c\u67e5\u770b\u662f\u54ea\u53f0host echo - - - /sys/class/scsi_host/host2/scan","title":"VMware\u6dfb\u52a0\u65b0\u78c1\u76d8"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/#_3","text":"fdisk -l","title":"\u67e5\u770b\u78c1\u76d8\u4fe1\u606f"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/#_4","text":"fdisk /dev/sdb","title":"\u5bf9\u65b0\u76d8\u8fdb\u884c\u5206\u533a"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/#pv","text":"pvcreate /dev/sdb1 \u663e\u793a\u521b\u5efa\u7684\u78c1\u76d8 pvdisplay","title":"\u521b\u5efa\u7269\u7406\u78c1\u76d8pv"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/#_5","text":"vgextend centos /dev/sbd1 #centos:\u8981\u6269\u5c55\u7684\u5377\u7ec4 lvextend \u2013L +15G /dev/mapper/centos-root #\u8981\u6269\u5c55\u7684\u76ee\u5f55","title":"\u6269\u5c55\u5377\u7ec4"},{"location":"system/\u78c1\u76d8\u5bb9\u91cf\u6269\u5145/#xfs","text":"xfs_growfs /dev/ mapper/centos-root","title":"\u5728\u7ebf\u8c03\u6574xfs\u683c\u5f0f\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f"},{"location":"system/\u7f51\u5361\u4e0d\u5b58\u5728/","text":"\u5b89\u88c5\u5b8c\u4e00\u4e2acentos\u865a\u62df\u673a\uff0c\u53c8\u62f7\u8d1d\u4e00\u4efd\uff0c\u5f00\u673a\u540e\u7f51\u5361\u65e0\u6cd5\u6b63\u5e38\u542f\u52a8\uff0c\u62a5\u9519\uff1aDevice eth0 does not seem to be present, delaying initialization \u89e3\u51b3\uff1a mv /etc/sysconfig/network-scripts/ifcfg-eth0 sysconfig/network-scripts/ifcfg-eth1 vim sysconfig/network-scripts/ifcfg-eth1 \u4fee\u6539DEVICE=\"eth0\" \u4e3aDEVICE=\"eth1\" \u53ef\u5220\u6389uuid\u3001\u7269\u7406\u5730\u5740 \u7136\u540e\u91cd\u542f\u542f\u52a8\u7f51\u5361","title":"\u7f51\u5361\u4e0d\u5b58\u5728"},{"location":"system/\u901a\u8fc7shell\u547d\u4ee4\u5199\u6587\u4ef6/","text":"cat conftest.l EOF \u5185\u5bb9 EOF","title":"\u901a\u8fc7shell\u547d\u4ee4\u5199\u6587\u4ef6"}]}